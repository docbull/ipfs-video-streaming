(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Libp2pGossipsub = factory()}(typeof self !== 'undefined' ? self : this, function () {
var Libp2pGossipsub=(()=>{var Tf=Object.defineProperty;var Sb=t=>Tf(t,"__esModule",{value:!0});var Rf=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,r)=>(typeof require!="undefined"?require:e)[r]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var Ee=(t,e)=>()=>(t&&(e=t(t=0)),e);var E=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),lt=(t,e)=>{Sb(t);for(var r in e)Tf(t,r,{get:e[r],enumerable:!0})};var Pf=E((gT,Df)=>{var Tn=1e3,Rn=Tn*60,Dn=Rn*60,$i=Dn*24,_b=$i*7,Ib=$i*365.25;Df.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Bb(t);if(r==="number"&&isFinite(t))return e.long?Cb(t):Ab(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Bb(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),i=(e[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return r*Ib;case"weeks":case"week":case"w":return r*_b;case"days":case"day":case"d":return r*$i;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Dn;case"minutes":case"minute":case"mins":case"min":case"m":return r*Rn;case"seconds":case"second":case"secs":case"sec":case"s":return r*Tn;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Ab(t){var e=Math.abs(t);return e>=$i?Math.round(t/$i)+"d":e>=Dn?Math.round(t/Dn)+"h":e>=Rn?Math.round(t/Rn)+"m":e>=Tn?Math.round(t/Tn)+"s":t+"ms"}function Cb(t){var e=Math.abs(t);return e>=$i?Ta(t,e,$i,"day"):e>=Dn?Ta(t,e,Dn,"hour"):e>=Rn?Ta(t,e,Rn,"minute"):e>=Tn?Ta(t,e,Tn,"second"):t+" ms"}function Ta(t,e,r,i){var n=e>=r*1.5;return Math.round(t/r)+" "+i+(n?"s":"")}});var Nf=E((vT,kf)=>{function Tb(t){r.debug=r,r.default=r,r.coerce=f,r.disable=s,r.enable=n,r.enabled=a,r.humanize=Pf(),r.destroy=u,Object.keys(t).forEach(c=>{r[c]=t[c]}),r.names=[],r.skips=[],r.formatters={};function e(c){let h=0;for(let l=0;l<c.length;l++)h=(h<<5)-h+c.charCodeAt(l),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=e;function r(c){let h,l=null,d,p;function y(...g){if(!y.enabled)return;let v=y,x=Number(new Date),w=x-(h||x);v.diff=w,v.prev=h,v.curr=x,h=x,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let P=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(S,G)=>{if(S==="%%")return"%";P++;let z=r.formatters[G];if(typeof z=="function"){let se=g[P];S=z.call(v,se),g.splice(P,1),P--}return S}),r.formatArgs.call(v,g),(v.log||r.log).apply(v,g)}return y.namespace=c,y.useColors=r.useColors(),y.color=r.selectColor(c),y.extend=i,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>l!==null?l:(d!==r.namespaces&&(d=r.namespaces,p=r.enabled(c)),p),set:g=>{l=g}}),typeof r.init=="function"&&r.init(y),y}function i(c,h){let l=r(this.namespace+(typeof h=="undefined"?":":h)+c);return l.log=this.log,l}function n(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let h,l=(typeof c=="string"?c:"").split(/[\s,]+/),d=l.length;for(h=0;h<d;h++)!l[h]||(c=l[h].replace(/\*/g,".*?"),c[0]==="-"?r.skips.push(new RegExp("^"+c.substr(1)+"$")):r.names.push(new RegExp("^"+c+"$")))}function s(){let c=[...r.names.map(o),...r.skips.map(o).map(h=>"-"+h)].join(",");return r.enable(""),c}function a(c){if(c[c.length-1]==="*")return!0;let h,l;for(h=0,l=r.skips.length;h<l;h++)if(r.skips[h].test(c))return!1;for(h=0,l=r.names.length;h<l;h++)if(r.names[h].test(c))return!0;return!1}function o(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function f(c){return c instanceof Error?c.stack||c.message:c}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}kf.exports=Tb});var Is=E((Lt,Ra)=>{Lt.formatArgs=Db;Lt.save=Pb;Lt.load=kb;Lt.useColors=Rb;Lt.storage=Nb();Lt.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Lt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Rb(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Db(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Ra.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(r++,n==="%c"&&(i=r))}),t.splice(i,0,e)}Lt.log=console.debug||console.log||(()=>{});function Pb(t){try{t?Lt.storage.setItem("debug",t):Lt.storage.removeItem("debug")}catch(e){}}function kb(){let t;try{t=Lt.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function Nb(){try{return localStorage}catch(t){}}Ra.exports=Nf()(Lt);var{formatters:Ob}=Ra.exports;Ob.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var B0=E((xT,I0)=>{"use strict";var Pn=typeof Reflect=="object"?Reflect:null,Of=Pn&&typeof Pn.apply=="function"?Pn.apply:function(e,r,i){return Function.prototype.apply.call(e,r,i)},Da;Pn&&typeof Pn.ownKeys=="function"?Da=Pn.ownKeys:Object.getOwnPropertySymbols?Da=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Da=function(e){return Object.getOwnPropertyNames(e)};function Lb(t){console&&console.warn&&console.warn(t)}var Lf=Number.isNaN||function(e){return e!==e};function we(){we.init.call(this)}I0.exports=we;I0.exports.once=Ub;we.EventEmitter=we;we.prototype._events=void 0;we.prototype._eventsCount=0;we.prototype._maxListeners=void 0;var Mf=10;function Pa(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(we,"defaultMaxListeners",{enumerable:!0,get:function(){return Mf},set:function(t){if(typeof t!="number"||t<0||Lf(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Mf=t}});we.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};we.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Lf(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Kf(t){return t._maxListeners===void 0?we.defaultMaxListeners:t._maxListeners}we.prototype.getMaxListeners=function(){return Kf(this)};we.prototype.emit=function(e){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var n=e==="error",s=this._events;if(s!==void 0)n=n&&s.error===void 0;else if(!n)return!1;if(n){var a;if(r.length>0&&(a=r[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var f=s[e];if(f===void 0)return!1;if(typeof f=="function")Of(f,this,r);else for(var u=f.length,c=Gf(f,u),i=0;i<u;++i)Of(c[i],this,r);return!0};function Ff(t,e,r,i){var n,s,a;if(Pa(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),a=s[e]),a===void 0)a=s[e]=r,++t._eventsCount;else if(typeof a=="function"?a=s[e]=i?[r,a]:[a,r]:i?a.unshift(r):a.push(r),n=Kf(t),n>0&&a.length>n&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=a.length,Lb(o)}return t}we.prototype.addListener=function(e,r){return Ff(this,e,r,!1)};we.prototype.on=we.prototype.addListener;we.prototype.prependListener=function(e,r){return Ff(this,e,r,!0)};function Mb(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Uf(t,e,r){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},n=Mb.bind(i);return n.listener=r,i.wrapFn=n,n}we.prototype.once=function(e,r){return Pa(r),this.on(e,Uf(this,e,r)),this};we.prototype.prependOnceListener=function(e,r){return Pa(r),this.prependListener(e,Uf(this,e,r)),this};we.prototype.removeListener=function(e,r){var i,n,s,a,o;if(Pa(r),n=this._events,n===void 0)return this;if(i=n[e],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount==0?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||r));else if(typeof i!="function"){for(s=-1,a=i.length-1;a>=0;a--)if(i[a]===r||i[a].listener===r){o=i[a].listener,s=a;break}if(s<0)return this;s===0?i.shift():Kb(i,s),i.length===1&&(n[e]=i[0]),n.removeListener!==void 0&&this.emit("removeListener",e,o||r)}return this};we.prototype.off=we.prototype.removeListener;we.prototype.removeAllListeners=function(e){var r,i,n;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),a;for(n=0;n<s.length;++n)a=s[n],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(n=r.length-1;n>=0;n--)this.removeListener(e,r[n]);return this};function qf(t,e,r){var i=t._events;if(i===void 0)return[];var n=i[e];return n===void 0?[]:typeof n=="function"?r?[n.listener||n]:[n]:r?Fb(n):Gf(n,n.length)}we.prototype.listeners=function(e){return qf(this,e,!0)};we.prototype.rawListeners=function(e){return qf(this,e,!1)};we.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Vf.call(t,e)};we.prototype.listenerCount=Vf;function Vf(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}we.prototype.eventNames=function(){return this._eventsCount>0?Da(this._events):[]};function Gf(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}function Kb(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Fb(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Ub(t,e){return new Promise(function(r,i){function n(a){t.removeListener(e,s),i(a)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",n),r([].slice.call(arguments))}Hf(t,e,s,{once:!0}),e!=="error"&&qb(t,n,{once:!0})})}function qb(t,e,r){typeof t.on=="function"&&Hf(t,"error",e,r)}function Hf(t,e,r,i){if(typeof t.on=="function")i.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function n(s){i.once&&t.removeEventListener(e,n),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var Oe=E((bT,jf)=>{"use strict";function zf(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Vb(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return zf(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),zf(new n,r)}}jf.exports=Vb});var C0=E((mT,kn)=>{var Wf=(...t)=>{let e;for(;t.length;)e=t.shift()(e);return e},A0=t=>t&&(typeof t[Symbol.asyncIterator]=="function"||typeof t[Symbol.iterator]=="function"||typeof t.next=="function"),ka=t=>t&&typeof t.sink=="function"&&A0(t.source),Gb=t=>e=>(t.sink(e),t.source),Yf=(...t)=>{if(ka(t[0])){let e=t[0];t[0]=()=>e.source}else if(A0(t[0])){let e=t[0];t[0]=()=>e}if(t.length>1&&ka(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let e=1;e<t.length-1;e++)ka(t[e])&&(t[e]=Gb(t[e]));return Wf(...t)};kn.exports=Yf;kn.exports.pipe=Yf;kn.exports.rawPipe=Wf;kn.exports.isIterable=A0;kn.exports.isDuplex=ka});var Qf=E((ET,T0)=>{"use strict";var Hb=Object.prototype.hasOwnProperty,St="~";function Bs(){}Object.create&&(Bs.prototype=Object.create(null),new Bs().__proto__||(St=!1));function zb(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function $f(t,e,r,i,n){if(typeof r!="function")throw new TypeError("The listener must be a function");var s=new zb(r,i||t,n),a=St?St+e:e;return t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],s]:t._events[a].push(s):(t._events[a]=s,t._eventsCount++),t}function Na(t,e){--t._eventsCount==0?t._events=new Bs:delete t._events[e]}function pt(){this._events=new Bs,this._eventsCount=0}pt.prototype.eventNames=function(){var e=[],r,i;if(this._eventsCount===0)return e;for(i in r=this._events)Hb.call(r,i)&&e.push(St?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};pt.prototype.listeners=function(e){var r=St?St+e:e,i=this._events[r];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,a=new Array(s);n<s;n++)a[n]=i[n].fn;return a};pt.prototype.listenerCount=function(e){var r=St?St+e:e,i=this._events[r];return i?i.fn?1:i.length:0};pt.prototype.emit=function(e,r,i,n,s,a){var o=St?St+e:e;if(!this._events[o])return!1;var f=this._events[o],u=arguments.length,c,h;if(f.fn){switch(f.once&&this.removeListener(e,f.fn,void 0,!0),u){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,r),!0;case 3:return f.fn.call(f.context,r,i),!0;case 4:return f.fn.call(f.context,r,i,n),!0;case 5:return f.fn.call(f.context,r,i,n,s),!0;case 6:return f.fn.call(f.context,r,i,n,s,a),!0}for(h=1,c=new Array(u-1);h<u;h++)c[h-1]=arguments[h];f.fn.apply(f.context,c)}else{var l=f.length,d;for(h=0;h<l;h++)switch(f[h].once&&this.removeListener(e,f[h].fn,void 0,!0),u){case 1:f[h].fn.call(f[h].context);break;case 2:f[h].fn.call(f[h].context,r);break;case 3:f[h].fn.call(f[h].context,r,i);break;case 4:f[h].fn.call(f[h].context,r,i,n);break;default:if(!c)for(d=1,c=new Array(u-1);d<u;d++)c[d-1]=arguments[d];f[h].fn.apply(f[h].context,c)}}return!0};pt.prototype.on=function(e,r,i){return $f(this,e,r,i,!1)};pt.prototype.once=function(e,r,i){return $f(this,e,r,i,!0)};pt.prototype.removeListener=function(e,r,i,n){var s=St?St+e:e;if(!this._events[s])return this;if(!r)return Na(this,s),this;var a=this._events[s];if(a.fn)a.fn===r&&(!n||a.once)&&(!i||a.context===i)&&Na(this,s);else{for(var o=0,f=[],u=a.length;o<u;o++)(a[o].fn!==r||n&&!a[o].once||i&&a[o].context!==i)&&f.push(a[o]);f.length?this._events[s]=f.length===1?f[0]:f:Na(this,s)}return this};pt.prototype.removeAllListeners=function(e){var r;return e?(r=St?St+e:e,this._events[r]&&Na(this,r)):(this._events=new Bs,this._eventsCount=0),this};pt.prototype.off=pt.prototype.removeListener;pt.prototype.addListener=pt.prototype.on;pt.prefixed=St;pt.EventEmitter=pt;typeof T0!="undefined"&&(T0.exports=pt)});var Xf=E((wT,Zf)=>{"use strict";Zf.exports=(t,e)=>(e=e||(()=>{}),t.then(r=>new Promise(i=>{i(e())}).then(()=>r),r=>new Promise(i=>{i(e())}).then(()=>{throw r})))});var eh=E((ST,Oa)=>{"use strict";var jb=Xf(),R0=class extends Error{constructor(e){super(e);this.name="TimeoutError"}},Jf=(t,e,r)=>new Promise((i,n)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){i(t);return}let s=setTimeout(()=>{if(typeof r=="function"){try{i(r())}catch(f){n(f)}return}let a=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,o=r instanceof Error?r:new R0(a);typeof t.cancel=="function"&&t.cancel(),n(o)},e);jb(t.then(i,n),()=>{clearTimeout(s)})});Oa.exports=Jf;Oa.exports.default=Jf;Oa.exports.TimeoutError=R0});var th=E(D0=>{"use strict";Object.defineProperty(D0,"__esModule",{value:!0});function Wb(t,e,r){let i=0,n=t.length;for(;n>0;){let s=n/2|0,a=i+s;r(t[a],e)<=0?(i=++a,n-=s+1):n=s}return i}D0.default=Wb});var ih=E(P0=>{"use strict";Object.defineProperty(P0,"__esModule",{value:!0});var Yb=th(),rh=class{constructor(){this._queue=[]}enqueue(e,r){r=Object.assign({priority:0},r);let i={priority:r.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=r.priority){this._queue.push(i);return}let n=Yb.default(this._queue,i,(s,a)=>a.priority-s.priority);this._queue.splice(n,0,i)}dequeue(){let e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return this._queue.length}};P0.default=rh});var ah=E(k0=>{"use strict";Object.defineProperty(k0,"__esModule",{value:!0});var $b=Qf(),nh=eh(),Qb=ih(),La=()=>{},Zb=new nh.TimeoutError,sh=class extends $b{constructor(e){var r,i,n,s;super();if(this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=La,this._resolveIdle=La,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:Qb.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(i=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(n=e.interval)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=La,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=La,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(this._intervalId===void 0){let r=this._intervalEnd-e;if(r<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},r)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let r=this._queue.dequeue();return r?(this.emit("active"),r(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,r={}){return new Promise((i,n)=>{let s=async()=>{this._pendingCount++,this._intervalCount++;try{let a=this._timeout===void 0&&r.timeout===void 0?e():nh.default(Promise.resolve(e()),r.timeout===void 0?this._timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?this._throwOnTimeout:r.throwOnTimeout)&&n(Zb)});i(await a)}catch(a){n(a)}this._next()};this._queue.enqueue(s,r),this._tryToStartAnother(),this.emit("add")})}async addAll(e,r){return Promise.all(e.map(async i=>this.add(i,r)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{let r=this._resolveEmpty;this._resolveEmpty=()=>{r(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{let r=this._resolveIdle;this._resolveIdle=()=>{r(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}};k0.default=sh});var hh=E((AT,fh)=>{"use strict";var oh=()=>{},uh=Symbol.for("@libp2p/js-interfaces/topology"),ch=class{constructor({min:e=0,max:r=1/0,handlers:i={}}){this.min=e,this.max=r,this._onConnect=i.onConnect||oh,this._onDisconnect=i.onDisconnect||oh,this.peers=new Set}get[Symbol.toStringTag](){return"Topology"}get[uh](){return!0}static isTopology(e){return Boolean(e&&e[uh])}async setRegistrar(e){this._registrar=e}disconnect(e){this._onDisconnect(e)}};fh.exports=ch});var vh=E((CT,gh)=>{"use strict";var Xb=hh(),lh=Symbol.for("@libp2p/js-interfaces/topology/multicodec-topology"),ph=Is(),dh=Object.assign(ph("libp2p:topology:multicodec-topology"),{error:ph("libp2p:topology:multicodec-topology:error")}),yh=class extends Xb{constructor({min:e,max:r,multicodecs:i,handlers:n}){super({min:e,max:r,handlers:n});if(!i)throw new Error("one or more multicodec should be provided");if(!n)throw new Error("the handlers should be provided");if(typeof n.onConnect!="function")throw new Error("the 'onConnect' handler must be provided");if(typeof n.onDisconnect!="function")throw new Error("the 'onDisconnect' handler must be provided");this.multicodecs=Array.isArray(i)?i:[i],this._registrar=void 0,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerConnect=this._onPeerConnect.bind(this)}get[Symbol.toStringTag](){return"Topology"}get[lh](){return!0}static isMulticodecTopology(e){return Boolean(e&&e[lh])}async setRegistrar(e){this._registrar=e,this._registrar.peerStore.on("change:protocols",this._onProtocolChange),this._registrar.connectionManager.on("peer:connect",this._onPeerConnect),await this._updatePeers(this._registrar.peerStore.getPeers())}async _updatePeers(e){for await(let{id:r,protocols:i}of e)if(this.multicodecs.filter(n=>i.includes(n)).length){this.peers.add(r.toB58String());let n=this._registrar.getConnection(r);n&&this._onConnect(r,n)}else this.peers.delete(r.toB58String())}async _onProtocolChange({peerId:e,protocols:r}){try{let i=this.peers.has(e.toB58String()),n=r.filter(s=>this.multicodecs.includes(s));i&&n.length===0&&this._onDisconnect(e);for(let s of r)if(this.multicodecs.includes(s)){let a=await this._registrar.peerStore.get(e);await this._updatePeers([a]);return}}catch(i){dh.error(i)}}async _onPeerConnect(e){try{let r=e.remotePeer,i=await this._registrar.peerStore.protoBook.get(r);if(!i)return;this.multicodecs.find(n=>i.includes(n))&&(this.peers.add(r.toB58String()),this._onConnect(r,e))}catch(r){dh.error(r)}}};gh.exports=yh});var Ma=E(xh=>{"use strict";xh.codes={ERR_INVALID_SIGNATURE_POLICY:"ERR_INVALID_SIGNATURE_POLICY",ERR_UNHANDLED_SIGNATURE_POLICY:"ERR_UNHANDLED_SIGNATURE_POLICY",ERR_MISSING_SIGNATURE:"ERR_MISSING_SIGNATURE",ERR_MISSING_SEQNO:"ERR_MISSING_SEQNO",ERR_INVALID_SIGNATURE:"ERR_INVALID_SIGNATURE",ERR_UNEXPECTED_FROM:"ERR_UNEXPECTED_FROM",ERR_UNEXPECTED_SIGNATURE:"ERR_UNEXPECTED_SIGNATURE",ERR_UNEXPECTED_KEY:"ERR_UNEXPECTED_KEY",ERR_UNEXPECTED_SEQNO:"ERR_UNEXPECTED_SEQNO"}});var mh=E((RT,bh)=>{"use strict";bh.exports=Jb;function Jb(t,e){for(var r=new Array(arguments.length-1),i=0,n=2,s=!0;n<arguments.length;)r[i++]=arguments[n++];return new Promise(function(o,f){r[i]=function(c){if(s)if(s=!1,c)f(c);else{for(var h=new Array(arguments.length-1),l=0;l<h.length;)h[l++]=arguments[l];o.apply(null,h)}};try{t.apply(e||null,r)}catch(u){s&&(s=!1,f(u))}})}});var _h=E(Sh=>{"use strict";var Ka=Sh;Ka.length=function(e){var r=e.length;if(!r)return 0;for(var i=0;--r%4>1&&e.charAt(r)==="=";)++i;return Math.ceil(e.length*3)/4-i};var Nn=new Array(64),Eh=new Array(123);for(Jt=0;Jt<64;)Eh[Nn[Jt]=Jt<26?Jt+65:Jt<52?Jt+71:Jt<62?Jt-4:Jt-59|43]=Jt++;var Jt;Ka.encode=function(e,r,i){for(var n=null,s=[],a=0,o=0,f;r<i;){var u=e[r++];switch(o){case 0:s[a++]=Nn[u>>2],f=(u&3)<<4,o=1;break;case 1:s[a++]=Nn[f|u>>4],f=(u&15)<<2,o=2;break;case 2:s[a++]=Nn[f|u>>6],s[a++]=Nn[u&63],o=0;break}a>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,s)),a=0)}return o&&(s[a++]=Nn[f],s[a++]=61,o===1&&(s[a++]=61)),n?(a&&n.push(String.fromCharCode.apply(String,s.slice(0,a))),n.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var wh="invalid encoding";Ka.decode=function(e,r,i){for(var n=i,s=0,a,o=0;o<e.length;){var f=e.charCodeAt(o++);if(f===61&&s>1)break;if((f=Eh[f])===void 0)throw Error(wh);switch(s){case 0:a=f,s=1;break;case 1:r[i++]=a<<2|(f&48)>>4,a=f,s=2;break;case 2:r[i++]=(a&15)<<4|(f&60)>>2,a=f,s=3;break;case 3:r[i++]=(a&3)<<6|f,s=0;break}}if(s===1)throw Error(wh);return i-n};Ka.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var Bh=E((PT,Ih)=>{"use strict";Ih.exports=Fa;function Fa(){this._listeners={}}Fa.prototype.on=function(e,r,i){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:i||this}),this};Fa.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var i=this._listeners[e],n=0;n<i.length;)i[n].fn===r?i.splice(n,1):++n;return this};Fa.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var i=[],n=1;n<arguments.length;)i.push(arguments[n++]);for(n=0;n<r.length;)r[n].fn.apply(r[n++].ctx,i)}return this}});var kh=E((kT,Ph)=>{"use strict";Ph.exports=Ah(Ah);function Ah(t){return typeof Float32Array!="undefined"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),i=r[3]===128;function n(f,u,c){e[0]=f,u[c]=r[0],u[c+1]=r[1],u[c+2]=r[2],u[c+3]=r[3]}function s(f,u,c){e[0]=f,u[c]=r[3],u[c+1]=r[2],u[c+2]=r[1],u[c+3]=r[0]}t.writeFloatLE=i?n:s,t.writeFloatBE=i?s:n;function a(f,u){return r[0]=f[u],r[1]=f[u+1],r[2]=f[u+2],r[3]=f[u+3],e[0]}function o(f,u){return r[3]=f[u],r[2]=f[u+1],r[1]=f[u+2],r[0]=f[u+3],e[0]}t.readFloatLE=i?a:o,t.readFloatBE=i?o:a}():function(){function e(i,n,s,a){var o=n<0?1:0;if(o&&(n=-n),n===0)i(1/n>0?0:2147483648,s,a);else if(isNaN(n))i(2143289344,s,a);else if(n>34028234663852886e22)i((o<<31|2139095040)>>>0,s,a);else if(n<11754943508222875e-54)i((o<<31|Math.round(n/1401298464324817e-60))>>>0,s,a);else{var f=Math.floor(Math.log(n)/Math.LN2),u=Math.round(n*Math.pow(2,-f)*8388608)&8388607;i((o<<31|f+127<<23|u)>>>0,s,a)}}t.writeFloatLE=e.bind(null,Ch),t.writeFloatBE=e.bind(null,Th);function r(i,n,s){var a=i(n,s),o=(a>>31)*2+1,f=a>>>23&255,u=a&8388607;return f===255?u?NaN:o*(1/0):f===0?o*1401298464324817e-60*u:o*Math.pow(2,f-150)*(u+8388608)}t.readFloatLE=r.bind(null,Rh),t.readFloatBE=r.bind(null,Dh)}(),typeof Float64Array!="undefined"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),i=r[7]===128;function n(f,u,c){e[0]=f,u[c]=r[0],u[c+1]=r[1],u[c+2]=r[2],u[c+3]=r[3],u[c+4]=r[4],u[c+5]=r[5],u[c+6]=r[6],u[c+7]=r[7]}function s(f,u,c){e[0]=f,u[c]=r[7],u[c+1]=r[6],u[c+2]=r[5],u[c+3]=r[4],u[c+4]=r[3],u[c+5]=r[2],u[c+6]=r[1],u[c+7]=r[0]}t.writeDoubleLE=i?n:s,t.writeDoubleBE=i?s:n;function a(f,u){return r[0]=f[u],r[1]=f[u+1],r[2]=f[u+2],r[3]=f[u+3],r[4]=f[u+4],r[5]=f[u+5],r[6]=f[u+6],r[7]=f[u+7],e[0]}function o(f,u){return r[7]=f[u],r[6]=f[u+1],r[5]=f[u+2],r[4]=f[u+3],r[3]=f[u+4],r[2]=f[u+5],r[1]=f[u+6],r[0]=f[u+7],e[0]}t.readDoubleLE=i?a:o,t.readDoubleBE=i?o:a}():function(){function e(i,n,s,a,o,f){var u=a<0?1:0;if(u&&(a=-a),a===0)i(0,o,f+n),i(1/a>0?0:2147483648,o,f+s);else if(isNaN(a))i(0,o,f+n),i(2146959360,o,f+s);else if(a>17976931348623157e292)i(0,o,f+n),i((u<<31|2146435072)>>>0,o,f+s);else{var c;if(a<22250738585072014e-324)c=a/5e-324,i(c>>>0,o,f+n),i((u<<31|c/4294967296)>>>0,o,f+s);else{var h=Math.floor(Math.log(a)/Math.LN2);h===1024&&(h=1023),c=a*Math.pow(2,-h),i(c*4503599627370496>>>0,o,f+n),i((u<<31|h+1023<<20|c*1048576&1048575)>>>0,o,f+s)}}}t.writeDoubleLE=e.bind(null,Ch,0,4),t.writeDoubleBE=e.bind(null,Th,4,0);function r(i,n,s,a,o){var f=i(a,o+n),u=i(a,o+s),c=(u>>31)*2+1,h=u>>>20&2047,l=4294967296*(u&1048575)+f;return h===2047?l?NaN:c*(1/0):h===0?c*5e-324*l:c*Math.pow(2,h-1075)*(l+4503599627370496)}t.readDoubleLE=r.bind(null,Rh,0,4),t.readDoubleBE=r.bind(null,Dh,4,0)}(),t}function Ch(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function Th(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function Rh(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function Dh(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var Nh=E((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var Lh=E(Oh=>{"use strict";var N0=Oh;N0.length=function(e){for(var r=0,i=0,n=0;n<e.length;++n)i=e.charCodeAt(n),i<128?r+=1:i<2048?r+=2:(i&64512)==55296&&(e.charCodeAt(n+1)&64512)==56320?(++n,r+=4):r+=3;return r};N0.read=function(e,r,i){var n=i-r;if(n<1)return"";for(var s=null,a=[],o=0,f;r<i;)f=e[r++],f<128?a[o++]=f:f>191&&f<224?a[o++]=(f&31)<<6|e[r++]&63:f>239&&f<365?(f=((f&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,a[o++]=55296+(f>>10),a[o++]=56320+(f&1023)):a[o++]=(f&15)<<12|(e[r++]&63)<<6|e[r++]&63,o>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,a)),o=0);return s?(o&&s.push(String.fromCharCode.apply(String,a.slice(0,o))),s.join("")):String.fromCharCode.apply(String,a.slice(0,o))};N0.write=function(e,r,i){for(var n=i,s,a,o=0;o<e.length;++o)s=e.charCodeAt(o),s<128?r[i++]=s:s<2048?(r[i++]=s>>6|192,r[i++]=s&63|128):(s&64512)==55296&&((a=e.charCodeAt(o+1))&64512)==56320?(s=65536+((s&1023)<<10)+(a&1023),++o,r[i++]=s>>18|240,r[i++]=s>>12&63|128,r[i++]=s>>6&63|128,r[i++]=s&63|128):(r[i++]=s>>12|224,r[i++]=s>>6&63|128,r[i++]=s&63|128);return i-n}});var Kh=E((OT,Mh)=>{"use strict";Mh.exports=em;function em(t,e,r){var i=r||8192,n=i>>>1,s=null,a=i;return function(f){if(f<1||f>n)return t(f);a+f>i&&(s=t(i),a=0);var u=e.call(s,a,a+=f);return a&7&&(a=(a|7)+1),u}}});var Uh=E((LT,Fh)=>{"use strict";Fh.exports=tt;var As=pi();function tt(t,e){this.lo=t>>>0,this.hi=e>>>0}var Qi=tt.zero=new tt(0,0);Qi.toNumber=function(){return 0};Qi.zzEncode=Qi.zzDecode=function(){return this};Qi.length=function(){return 1};var tm=tt.zeroHash="\0\0\0\0\0\0\0\0";tt.fromNumber=function(e){if(e===0)return Qi;var r=e<0;r&&(e=-e);var i=e>>>0,n=(e-i)/4294967296>>>0;return r&&(n=~n>>>0,i=~i>>>0,++i>4294967295&&(i=0,++n>4294967295&&(n=0))),new tt(i,n)};tt.from=function(e){if(typeof e=="number")return tt.fromNumber(e);if(As.isString(e))if(As.Long)e=As.Long.fromString(e);else return tt.fromNumber(parseInt(e,10));return e.low||e.high?new tt(e.low>>>0,e.high>>>0):Qi};tt.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,i=~this.hi>>>0;return r||(i=i+1>>>0),-(r+i*4294967296)}return this.lo+this.hi*4294967296};tt.prototype.toLong=function(e){return As.Long?new As.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var li=String.prototype.charCodeAt;tt.fromHash=function(e){return e===tm?Qi:new tt((li.call(e,0)|li.call(e,1)<<8|li.call(e,2)<<16|li.call(e,3)<<24)>>>0,(li.call(e,4)|li.call(e,5)<<8|li.call(e,6)<<16|li.call(e,7)<<24)>>>0)};tt.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};tt.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};tt.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};tt.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return i===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:i<128?9:10}});var pi=E(O0=>{"use strict";var j=O0;j.asPromise=mh();j.base64=_h();j.EventEmitter=Bh();j.float=kh();j.inquire=Nh();j.utf8=Lh();j.pool=Kh();j.LongBits=Uh();j.isNode=Boolean(typeof globalThis!="undefined"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);j.global=j.isNode&&globalThis||typeof window!="undefined"&&window||typeof self!="undefined"&&self||O0;j.emptyArray=Object.freeze?Object.freeze([]):[];j.emptyObject=Object.freeze?Object.freeze({}):{};j.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};j.isString=function(e){return typeof e=="string"||e instanceof String};j.isObject=function(e){return e&&typeof e=="object"};j.isset=j.isSet=function(e,r){var i=e[r];return i!=null&&e.hasOwnProperty(r)?typeof i!="object"||(Array.isArray(i)?i.length:Object.keys(i).length)>0:!1};j.Buffer=function(){try{var t=j.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(e){return null}}();j._Buffer_from=null;j._Buffer_allocUnsafe=null;j.newBuffer=function(e){return typeof e=="number"?j.Buffer?j._Buffer_allocUnsafe(e):new j.Array(e):j.Buffer?j._Buffer_from(e):typeof Uint8Array=="undefined"?e:new Uint8Array(e)};j.Array=typeof Uint8Array!="undefined"?Uint8Array:Array;j.Long=j.global.dcodeIO&&j.global.dcodeIO.Long||j.global.Long||j.inquire("long");j.key2Re=/^true|false|0|1$/;j.key32Re=/^-?(?:0|[1-9][0-9]*)$/;j.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;j.longToHash=function(e){return e?j.LongBits.from(e).toHash():j.LongBits.zeroHash};j.longFromHash=function(e,r){var i=j.LongBits.fromHash(e);return j.Long?j.Long.fromBits(i.lo,i.hi,r):i.toNumber(Boolean(r))};function qh(t,e,r){for(var i=Object.keys(e),n=0;n<i.length;++n)(t[i[n]]===void 0||!r)&&(t[i[n]]=e[i[n]]);return t}j.merge=qh;j.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function Vh(t){function e(r,i){if(!(this instanceof e))return new e(r,i);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),i&&qh(this,i)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}j.newError=Vh;j.ProtocolError=Vh("ProtocolError");j.oneOfGetter=function(e){for(var r={},i=0;i<e.length;++i)r[e[i]]=1;return function(){for(var n=Object.keys(this),s=n.length-1;s>-1;--s)if(r[n[s]]===1&&this[n[s]]!==void 0&&this[n[s]]!==null)return n[s]}};j.oneOfSetter=function(e){return function(r){for(var i=0;i<e.length;++i)e[i]!==r&&delete this[e[i]]}};j.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};j._configure=function(){var t=j.Buffer;if(!t){j._Buffer_from=j._Buffer_allocUnsafe=null;return}j._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,i){return new t(r,i)},j._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var V0=E((KT,jh)=>{"use strict";jh.exports=ce;var Ft=pi(),L0,Ua=Ft.LongBits,Gh=Ft.base64,Hh=Ft.utf8;function Cs(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function M0(){}function rm(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function ce(){this.len=0,this.head=new Cs(M0,0,0),this.tail=this.head,this.states=null}var zh=function(){return Ft.Buffer?function(){return(ce.create=function(){return new L0})()}:function(){return new ce}};ce.create=zh();ce.alloc=function(e){return new Ft.Array(e)};Ft.Array!==Array&&(ce.alloc=Ft.pool(ce.alloc,Ft.Array.prototype.subarray));ce.prototype._push=function(e,r,i){return this.tail=this.tail.next=new Cs(e,r,i),this.len+=r,this};function K0(t,e,r){e[r]=t&255}function im(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function F0(t,e){this.len=t,this.next=void 0,this.val=e}F0.prototype=Object.create(Cs.prototype);F0.prototype.fn=im;ce.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new F0((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};ce.prototype.int32=function(e){return e<0?this._push(U0,10,Ua.fromNumber(e)):this.uint32(e)};ce.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function U0(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}ce.prototype.uint64=function(e){var r=Ua.from(e);return this._push(U0,r.length(),r)};ce.prototype.int64=ce.prototype.uint64;ce.prototype.sint64=function(e){var r=Ua.from(e).zzEncode();return this._push(U0,r.length(),r)};ce.prototype.bool=function(e){return this._push(K0,1,e?1:0)};function q0(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}ce.prototype.fixed32=function(e){return this._push(q0,4,e>>>0)};ce.prototype.sfixed32=ce.prototype.fixed32;ce.prototype.fixed64=function(e){var r=Ua.from(e);return this._push(q0,4,r.lo)._push(q0,4,r.hi)};ce.prototype.sfixed64=ce.prototype.fixed64;ce.prototype.float=function(e){return this._push(Ft.float.writeFloatLE,4,e)};ce.prototype.double=function(e){return this._push(Ft.float.writeDoubleLE,8,e)};var nm=Ft.Array.prototype.set?function(e,r,i){r.set(e,i)}:function(e,r,i){for(var n=0;n<e.length;++n)r[i+n]=e[n]};ce.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(K0,1,0);if(Ft.isString(e)){var i=ce.alloc(r=Gh.length(e));Gh.decode(e,i,0),e=i}return this.uint32(r)._push(nm,r,e)};ce.prototype.string=function(e){var r=Hh.length(e);return r?this.uint32(r)._push(Hh.write,r,e):this._push(K0,1,0)};ce.prototype.fork=function(){return this.states=new rm(this),this.head=this.tail=new Cs(M0,0,0),this.len=0,this};ce.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Cs(M0,0,0),this.len=0),this};ce.prototype.ldelim=function(){var e=this.head,r=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=r,this.len+=i),this};ce.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,r,i),i+=e.len,e=e.next;return r};ce._configure=function(t){L0=t,ce.create=zh(),L0._configure()}});var $h=E((FT,Yh)=>{"use strict";Yh.exports=dr;var Wh=V0();(dr.prototype=Object.create(Wh.prototype)).constructor=dr;var di=pi();function dr(){Wh.call(this)}dr._configure=function(){dr.alloc=di._Buffer_allocUnsafe,dr.writeBytesBuffer=di.Buffer&&di.Buffer.prototype instanceof Uint8Array&&di.Buffer.prototype.set.name==="set"?function(e,r,i){r.set(e,i)}:function(e,r,i){if(e.copy)e.copy(r,i,0,e.length);else for(var n=0;n<e.length;)r[i++]=e[n++]}};dr.prototype.bytes=function(e){di.isString(e)&&(e=di._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(dr.writeBytesBuffer,r,e),this};function sm(t,e,r){t.length<40?di.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}dr.prototype.string=function(e){var r=di.Buffer.byteLength(e);return this.uint32(r),r&&this._push(sm,r,e),this};dr._configure()});var z0=E((UT,el)=>{"use strict";el.exports=je;var yr=pi(),G0,Qh=yr.LongBits,am=yr.utf8;function er(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function je(t){this.buf=t,this.pos=0,this.len=t.length}var Zh=typeof Uint8Array!="undefined"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new je(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new je(e);throw Error("illegal buffer")},Xh=function(){return yr.Buffer?function(r){return(je.create=function(n){return yr.Buffer.isBuffer(n)?new G0(n):Zh(n)})(r)}:Zh};je.create=Xh();je.prototype._slice=yr.Array.prototype.subarray||yr.Array.prototype.slice;je.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,er(this,10);return e}}();je.prototype.int32=function(){return this.uint32()|0};je.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function H0(){var t=new Qh(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw er(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw er(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}je.prototype.bool=function(){return this.uint32()!==0};function qa(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}je.prototype.fixed32=function(){if(this.pos+4>this.len)throw er(this,4);return qa(this.buf,this.pos+=4)};je.prototype.sfixed32=function(){if(this.pos+4>this.len)throw er(this,4);return qa(this.buf,this.pos+=4)|0};function Jh(){if(this.pos+8>this.len)throw er(this,8);return new Qh(qa(this.buf,this.pos+=4),qa(this.buf,this.pos+=4))}je.prototype.float=function(){if(this.pos+4>this.len)throw er(this,4);var e=yr.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};je.prototype.double=function(){if(this.pos+8>this.len)throw er(this,4);var e=yr.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};je.prototype.bytes=function(){var e=this.uint32(),r=this.pos,i=this.pos+e;if(i>this.len)throw er(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,i):r===i?new this.buf.constructor(0):this._slice.call(this.buf,r,i)};je.prototype.string=function(){var e=this.bytes();return am.read(e,0,e.length)};je.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw er(this,e);this.pos+=e}else do if(this.pos>=this.len)throw er(this);while(this.buf[this.pos++]&128);return this};je.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!=4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};je._configure=function(t){G0=t,je.create=Xh(),G0._configure();var e=yr.Long?"toLong":"toNumber";yr.merge(je.prototype,{int64:function(){return H0.call(this)[e](!1)},uint64:function(){return H0.call(this)[e](!0)},sint64:function(){return H0.call(this).zzDecode()[e](!1)},fixed64:function(){return Jh.call(this)[e](!0)},sfixed64:function(){return Jh.call(this)[e](!1)}})}});var nl=E((qT,il)=>{"use strict";il.exports=Zi;var tl=z0();(Zi.prototype=Object.create(tl.prototype)).constructor=Zi;var rl=pi();function Zi(t){tl.call(this,t)}Zi._configure=function(){rl.Buffer&&(Zi.prototype._slice=rl.Buffer.prototype.slice)};Zi.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};Zi._configure()});var al=E((VT,sl)=>{"use strict";sl.exports=Ts;var j0=pi();(Ts.prototype=Object.create(j0.EventEmitter.prototype)).constructor=Ts;function Ts(t,e,r){if(typeof t!="function")throw TypeError("rpcImpl must be a function");j0.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}Ts.prototype.rpcCall=function t(e,r,i,n,s){if(!n)throw TypeError("request must be specified");var a=this;if(!s)return j0.asPromise(t,a,e,r,i,n);if(!a.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return a.rpcImpl(e,r[a.requestDelimited?"encodeDelimited":"encode"](n).finish(),function(f,u){if(f)return a.emit("error",f,e),s(f);if(u===null){a.end(!0);return}if(!(u instanceof i))try{u=i[a.responseDelimited?"decodeDelimited":"decode"](u)}catch(c){return a.emit("error",c,e),s(c)}return a.emit("data",u,e),s(null,u)})}catch(o){a.emit("error",o,e),setTimeout(function(){s(o)},0);return}};Ts.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var ul=E(ol=>{"use strict";var om=ol;om.Service=al()});var fl=E((HT,cl)=>{"use strict";cl.exports={}});var pl=E(ll=>{"use strict";var Tt=ll;Tt.build="minimal";Tt.Writer=V0();Tt.BufferWriter=$h();Tt.Reader=z0();Tt.BufferReader=nl();Tt.util=pi();Tt.rpc=ul();Tt.roots=fl();Tt.configure=hl;function hl(){Tt.util._configure(),Tt.Writer._configure(Tt.BufferWriter),Tt.Reader._configure(Tt.BufferReader)}hl()});var Xi=E((jT,dl)=>{"use strict";dl.exports=pl()});var Y0=E((WT,yl)=>{"use strict";var yi=Xi(),On=yi.Reader,W0=yi.Writer,ee=yi.util,Xe=yi.roots["libp2p-pubsub-rpc"]||(yi.roots["libp2p-pubsub-rpc"]={});Xe.RPC=function(){function t(e){if(this.subscriptions=[],this.msgs=[],e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.subscriptions=ee.emptyArray,t.prototype.msgs=ee.emptyArray,t.encode=function(r,i){if(i||(i=W0.create()),r.subscriptions!=null&&r.subscriptions.length)for(var n=0;n<r.subscriptions.length;++n)Xe.RPC.SubOpts.encode(r.subscriptions[n],i.uint32(10).fork()).ldelim();if(r.msgs!=null&&r.msgs.length)for(var n=0;n<r.msgs.length;++n)Xe.RPC.Message.encode(r.msgs[n],i.uint32(18).fork()).ldelim();return i},t.decode=function(r,i){r instanceof On||(r=On.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Xe.RPC;r.pos<n;){var a=r.uint32();switch(a>>>3){case 1:s.subscriptions&&s.subscriptions.length||(s.subscriptions=[]),s.subscriptions.push(Xe.RPC.SubOpts.decode(r,r.uint32()));break;case 2:s.msgs&&s.msgs.length||(s.msgs=[]),s.msgs.push(Xe.RPC.Message.decode(r,r.uint32()));break;default:r.skipType(a&7);break}}return s},t.fromObject=function(r){if(r instanceof Xe.RPC)return r;var i=new Xe.RPC;if(r.subscriptions){if(!Array.isArray(r.subscriptions))throw TypeError(".RPC.subscriptions: array expected");i.subscriptions=[];for(var n=0;n<r.subscriptions.length;++n){if(typeof r.subscriptions[n]!="object")throw TypeError(".RPC.subscriptions: object expected");i.subscriptions[n]=Xe.RPC.SubOpts.fromObject(r.subscriptions[n])}}if(r.msgs){if(!Array.isArray(r.msgs))throw TypeError(".RPC.msgs: array expected");i.msgs=[];for(var n=0;n<r.msgs.length;++n){if(typeof r.msgs[n]!="object")throw TypeError(".RPC.msgs: object expected");i.msgs[n]=Xe.RPC.Message.fromObject(r.msgs[n])}}return i},t.toObject=function(r,i){i||(i={});var n={};if((i.arrays||i.defaults)&&(n.subscriptions=[],n.msgs=[]),r.subscriptions&&r.subscriptions.length){n.subscriptions=[];for(var s=0;s<r.subscriptions.length;++s)n.subscriptions[s]=Xe.RPC.SubOpts.toObject(r.subscriptions[s],i)}if(r.msgs&&r.msgs.length){n.msgs=[];for(var s=0;s<r.msgs.length;++s)n.msgs[s]=Xe.RPC.Message.toObject(r.msgs[s],i)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,yi.util.toJSONOptions)},t.SubOpts=function(){function e(i){if(i)for(var n=Object.keys(i),s=0;s<n.length;++s)i[n[s]]!=null&&(this[n[s]]=i[n[s]])}e.prototype.subscribe=null,e.prototype.topicID=null;var r;return Object.defineProperty(e.prototype,"_subscribe",{get:ee.oneOfGetter(r=["subscribe"]),set:ee.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_topicID",{get:ee.oneOfGetter(r=["topicID"]),set:ee.oneOfSetter(r)}),e.encode=function(n,s){return s||(s=W0.create()),n.subscribe!=null&&Object.hasOwnProperty.call(n,"subscribe")&&s.uint32(8).bool(n.subscribe),n.topicID!=null&&Object.hasOwnProperty.call(n,"topicID")&&s.uint32(18).string(n.topicID),s},e.decode=function(n,s){n instanceof On||(n=On.create(n));for(var a=s===void 0?n.len:n.pos+s,o=new Xe.RPC.SubOpts;n.pos<a;){var f=n.uint32();switch(f>>>3){case 1:o.subscribe=n.bool();break;case 2:o.topicID=n.string();break;default:n.skipType(f&7);break}}return o},e.fromObject=function(n){if(n instanceof Xe.RPC.SubOpts)return n;var s=new Xe.RPC.SubOpts;return n.subscribe!=null&&(s.subscribe=Boolean(n.subscribe)),n.topicID!=null&&(s.topicID=String(n.topicID)),s},e.toObject=function(n,s){s||(s={});var a={};return n.subscribe!=null&&n.hasOwnProperty("subscribe")&&(a.subscribe=n.subscribe,s.oneofs&&(a._subscribe="subscribe")),n.topicID!=null&&n.hasOwnProperty("topicID")&&(a.topicID=n.topicID,s.oneofs&&(a._topicID="topicID")),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,yi.util.toJSONOptions)},e}(),t.Message=function(){function e(i){if(this.topicIDs=[],i)for(var n=Object.keys(i),s=0;s<n.length;++s)i[n[s]]!=null&&(this[n[s]]=i[n[s]])}e.prototype.from=null,e.prototype.data=null,e.prototype.seqno=null,e.prototype.topicIDs=ee.emptyArray,e.prototype.signature=null,e.prototype.key=null;var r;return Object.defineProperty(e.prototype,"_from",{get:ee.oneOfGetter(r=["from"]),set:ee.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_data",{get:ee.oneOfGetter(r=["data"]),set:ee.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_seqno",{get:ee.oneOfGetter(r=["seqno"]),set:ee.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_signature",{get:ee.oneOfGetter(r=["signature"]),set:ee.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_key",{get:ee.oneOfGetter(r=["key"]),set:ee.oneOfSetter(r)}),e.encode=function(n,s){if(s||(s=W0.create()),n.from!=null&&Object.hasOwnProperty.call(n,"from")&&s.uint32(10).bytes(n.from),n.data!=null&&Object.hasOwnProperty.call(n,"data")&&s.uint32(18).bytes(n.data),n.seqno!=null&&Object.hasOwnProperty.call(n,"seqno")&&s.uint32(26).bytes(n.seqno),n.topicIDs!=null&&n.topicIDs.length)for(var a=0;a<n.topicIDs.length;++a)s.uint32(34).string(n.topicIDs[a]);return n.signature!=null&&Object.hasOwnProperty.call(n,"signature")&&s.uint32(42).bytes(n.signature),n.key!=null&&Object.hasOwnProperty.call(n,"key")&&s.uint32(50).bytes(n.key),s},e.decode=function(n,s){n instanceof On||(n=On.create(n));for(var a=s===void 0?n.len:n.pos+s,o=new Xe.RPC.Message;n.pos<a;){var f=n.uint32();switch(f>>>3){case 1:o.from=n.bytes();break;case 2:o.data=n.bytes();break;case 3:o.seqno=n.bytes();break;case 4:o.topicIDs&&o.topicIDs.length||(o.topicIDs=[]),o.topicIDs.push(n.string());break;case 5:o.signature=n.bytes();break;case 6:o.key=n.bytes();break;default:n.skipType(f&7);break}}return o},e.fromObject=function(n){if(n instanceof Xe.RPC.Message)return n;var s=new Xe.RPC.Message;if(n.from!=null&&(typeof n.from=="string"?ee.base64.decode(n.from,s.from=ee.newBuffer(ee.base64.length(n.from)),0):n.from.length&&(s.from=n.from)),n.data!=null&&(typeof n.data=="string"?ee.base64.decode(n.data,s.data=ee.newBuffer(ee.base64.length(n.data)),0):n.data.length&&(s.data=n.data)),n.seqno!=null&&(typeof n.seqno=="string"?ee.base64.decode(n.seqno,s.seqno=ee.newBuffer(ee.base64.length(n.seqno)),0):n.seqno.length&&(s.seqno=n.seqno)),n.topicIDs){if(!Array.isArray(n.topicIDs))throw TypeError(".RPC.Message.topicIDs: array expected");s.topicIDs=[];for(var a=0;a<n.topicIDs.length;++a)s.topicIDs[a]=String(n.topicIDs[a])}return n.signature!=null&&(typeof n.signature=="string"?ee.base64.decode(n.signature,s.signature=ee.newBuffer(ee.base64.length(n.signature)),0):n.signature.length&&(s.signature=n.signature)),n.key!=null&&(typeof n.key=="string"?ee.base64.decode(n.key,s.key=ee.newBuffer(ee.base64.length(n.key)),0):n.key.length&&(s.key=n.key)),s},e.toObject=function(n,s){s||(s={});var a={};if((s.arrays||s.defaults)&&(a.topicIDs=[]),n.from!=null&&n.hasOwnProperty("from")&&(a.from=s.bytes===String?ee.base64.encode(n.from,0,n.from.length):s.bytes===Array?Array.prototype.slice.call(n.from):n.from,s.oneofs&&(a._from="from")),n.data!=null&&n.hasOwnProperty("data")&&(a.data=s.bytes===String?ee.base64.encode(n.data,0,n.data.length):s.bytes===Array?Array.prototype.slice.call(n.data):n.data,s.oneofs&&(a._data="data")),n.seqno!=null&&n.hasOwnProperty("seqno")&&(a.seqno=s.bytes===String?ee.base64.encode(n.seqno,0,n.seqno.length):s.bytes===Array?Array.prototype.slice.call(n.seqno):n.seqno,s.oneofs&&(a._seqno="seqno")),n.topicIDs&&n.topicIDs.length){a.topicIDs=[];for(var o=0;o<n.topicIDs.length;++o)a.topicIDs[o]=n.topicIDs[o]}return n.signature!=null&&n.hasOwnProperty("signature")&&(a.signature=s.bytes===String?ee.base64.encode(n.signature,0,n.signature.length):s.bytes===Array?Array.prototype.slice.call(n.signature):n.signature,s.oneofs&&(a._signature="signature")),n.key!=null&&n.hasOwnProperty("key")&&(a.key=s.bytes===String?ee.base64.encode(n.key,0,n.key.length):s.bytes===Array?Array.prototype.slice.call(n.key):n.key,s.oneofs&&(a._key="key")),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,yi.util.toJSONOptions)},e}(),t}();yl.exports=Xe});var Q0=E(Va=>{"use strict";Va.byteLength=cm;Va.toByteArray=hm;Va.fromByteArray=dm;var gr=[],Ut=[],um=typeof Uint8Array!="undefined"?Uint8Array:Array,$0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ji=0,gl=$0.length;Ji<gl;++Ji)gr[Ji]=$0[Ji],Ut[$0.charCodeAt(Ji)]=Ji;var Ji,gl;Ut["-".charCodeAt(0)]=62;Ut["_".charCodeAt(0)]=63;function vl(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var i=r===e?0:4-r%4;return[r,i]}function cm(t){var e=vl(t),r=e[0],i=e[1];return(r+i)*3/4-i}function fm(t,e,r){return(e+r)*3/4-r}function hm(t){var e,r=vl(t),i=r[0],n=r[1],s=new um(fm(t,i,n)),a=0,o=n>0?i-4:i,f;for(f=0;f<o;f+=4)e=Ut[t.charCodeAt(f)]<<18|Ut[t.charCodeAt(f+1)]<<12|Ut[t.charCodeAt(f+2)]<<6|Ut[t.charCodeAt(f+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return n===2&&(e=Ut[t.charCodeAt(f)]<<2|Ut[t.charCodeAt(f+1)]>>4,s[a++]=e&255),n===1&&(e=Ut[t.charCodeAt(f)]<<10|Ut[t.charCodeAt(f+1)]<<4|Ut[t.charCodeAt(f+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function lm(t){return gr[t>>18&63]+gr[t>>12&63]+gr[t>>6&63]+gr[t&63]}function pm(t,e,r){for(var i,n=[],s=e;s<r;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),n.push(lm(i));return n.join("")}function dm(t){for(var e,r=t.length,i=r%3,n=[],s=16383,a=0,o=r-i;a<o;a+=s)n.push(pm(t,a,a+s>o?o:a+s));return i===1?(e=t[r-1],n.push(gr[e>>2]+gr[e<<4&63]+"==")):i===2&&(e=(t[r-2]<<8)+t[r-1],n.push(gr[e>>10]+gr[e>>4&63]+gr[e<<2&63]+"=")),n.join("")}});var xl=E(Z0=>{Z0.read=function(t,e,r,i,n){var s,a,o=n*8-i-1,f=(1<<o)-1,u=f>>1,c=-7,h=r?n-1:0,l=r?-1:1,d=t[e+h];for(h+=l,s=d&(1<<-c)-1,d>>=-c,c+=o;c>0;s=s*256+t[e+h],h+=l,c-=8);for(a=s&(1<<-c)-1,s>>=-c,c+=i;c>0;a=a*256+t[e+h],h+=l,c-=8);if(s===0)s=1-u;else{if(s===f)return a?NaN:(d?-1:1)*(1/0);a=a+Math.pow(2,i),s=s-u}return(d?-1:1)*a*Math.pow(2,s-i)};Z0.write=function(t,e,r,i,n,s){var a,o,f,u=s*8-n-1,c=(1<<u)-1,h=c>>1,l=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:s-1,p=i?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-a))<1&&(a--,f*=2),a+h>=1?e+=l/f:e+=l*Math.pow(2,1-h),e*f>=2&&(a++,f/=2),a+h>=c?(o=0,a=c):a+h>=1?(o=(e*f-1)*Math.pow(2,n),a=a+h):(o=e*Math.pow(2,h-1)*Math.pow(2,n),a=0));n>=8;t[r+d]=o&255,d+=p,o/=256,n-=8);for(a=a<<n|o,u+=n;u>0;t[r+d]=a&255,d+=p,a/=256,u-=8);t[r+d-p]|=y*128}});var Un=E(Fn=>{"use strict";var X0=Q0(),Ln=xl(),bl=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Fn.Buffer=A;Fn.SlowBuffer=mm;Fn.INSPECT_MAX_BYTES=50;var Ga=2147483647;Fn.kMaxLength=Ga;A.TYPED_ARRAY_SUPPORT=ym();!A.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function ym(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch(t){return!1}}Object.defineProperty(A.prototype,"parent",{enumerable:!0,get:function(){if(!!A.isBuffer(this))return this.buffer}});Object.defineProperty(A.prototype,"offset",{enumerable:!0,get:function(){if(!!A.isBuffer(this))return this.byteOffset}});function zr(t){if(t>Ga)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,A.prototype),e}function A(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return J0(t)}return ml(t,e,r)}A.poolSize=8192;function ml(t,e,r){if(typeof t=="string")return vm(t,e);if(ArrayBuffer.isView(t))return xm(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(vr(t,ArrayBuffer)||t&&vr(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(vr(t,SharedArrayBuffer)||t&&vr(t.buffer,SharedArrayBuffer)))return tu(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let i=t.valueOf&&t.valueOf();if(i!=null&&i!==t)return A.from(i,e,r);let n=bm(t);if(n)return n;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return A.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}A.from=function(t,e,r){return ml(t,e,r)};Object.setPrototypeOf(A.prototype,Uint8Array.prototype);Object.setPrototypeOf(A,Uint8Array);function El(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function gm(t,e,r){return El(t),t<=0?zr(t):e!==void 0?typeof r=="string"?zr(t).fill(e,r):zr(t).fill(e):zr(t)}A.alloc=function(t,e,r){return gm(t,e,r)};function J0(t){return El(t),zr(t<0?0:ru(t)|0)}A.allocUnsafe=function(t){return J0(t)};A.allocUnsafeSlow=function(t){return J0(t)};function vm(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!A.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=wl(t,e)|0,i=zr(r),n=i.write(t,e);return n!==r&&(i=i.slice(0,n)),i}function eu(t){let e=t.length<0?0:ru(t.length)|0,r=zr(e);for(let i=0;i<e;i+=1)r[i]=t[i]&255;return r}function xm(t){if(vr(t,Uint8Array)){let e=new Uint8Array(t);return tu(e.buffer,e.byteOffset,e.byteLength)}return eu(t)}function tu(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let i;return e===void 0&&r===void 0?i=new Uint8Array(t):r===void 0?i=new Uint8Array(t,e):i=new Uint8Array(t,e,r),Object.setPrototypeOf(i,A.prototype),i}function bm(t){if(A.isBuffer(t)){let e=ru(t.length)|0,r=zr(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||su(t.length)?zr(0):eu(t);if(t.type==="Buffer"&&Array.isArray(t.data))return eu(t.data)}function ru(t){if(t>=Ga)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ga.toString(16)+" bytes");return t|0}function mm(t){return+t!=t&&(t=0),A.alloc(+t)}A.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==A.prototype};A.compare=function(e,r){if(vr(e,Uint8Array)&&(e=A.from(e,e.offset,e.byteLength)),vr(r,Uint8Array)&&(r=A.from(r,r.offset,r.byteLength)),!A.isBuffer(e)||!A.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let i=e.length,n=r.length;for(let s=0,a=Math.min(i,n);s<a;++s)if(e[s]!==r[s]){i=e[s],n=r[s];break}return i<n?-1:n<i?1:0};A.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};A.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return A.alloc(0);let i;if(r===void 0)for(r=0,i=0;i<e.length;++i)r+=e[i].length;let n=A.allocUnsafe(r),s=0;for(i=0;i<e.length;++i){let a=e[i];if(vr(a,Uint8Array))s+a.length>n.length?(A.isBuffer(a)||(a=A.from(a)),a.copy(n,s)):Uint8Array.prototype.set.call(n,a,s);else if(A.isBuffer(a))a.copy(n,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=a.length}return n};function wl(t,e){if(A.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||vr(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&r===0)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return nu(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Nl(t).length;default:if(n)return i?-1:nu(t).length;e=(""+e).toLowerCase(),n=!0}}A.byteLength=wl;function Em(t,e,r){let i=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return Dm(this,e,r);case"utf8":case"utf-8":return Il(this,e,r);case"ascii":return Tm(this,e,r);case"latin1":case"binary":return Rm(this,e,r);case"base64":return Am(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pm(this,e,r);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}A.prototype._isBuffer=!0;function en(t,e,r){let i=t[e];t[e]=t[r],t[r]=i}A.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)en(this,r,r+1);return this};A.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)en(this,r,r+3),en(this,r+1,r+2);return this};A.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)en(this,r,r+7),en(this,r+1,r+6),en(this,r+2,r+5),en(this,r+3,r+4);return this};A.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Il(this,0,e):Em.apply(this,arguments)};A.prototype.toLocaleString=A.prototype.toString;A.prototype.equals=function(e){if(!A.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:A.compare(this,e)===0};A.prototype.inspect=function(){let e="",r=Fn.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};bl&&(A.prototype[bl]=A.prototype.inspect);A.prototype.compare=function(e,r,i,n,s){if(vr(e,Uint8Array)&&(e=A.from(e,e.offset,e.byteLength)),!A.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),i===void 0&&(i=e?e.length:0),n===void 0&&(n=0),s===void 0&&(s=this.length),r<0||i>e.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&r>=i)return 0;if(n>=s)return-1;if(r>=i)return 1;if(r>>>=0,i>>>=0,n>>>=0,s>>>=0,this===e)return 0;let a=s-n,o=i-r,f=Math.min(a,o),u=this.slice(n,s),c=e.slice(r,i);for(let h=0;h<f;++h)if(u[h]!==c[h]){a=u[h],o=c[h];break}return a<o?-1:o<a?1:0};function Sl(t,e,r,i,n){if(t.length===0)return-1;if(typeof r=="string"?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,su(r)&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return-1;r=t.length-1}else if(r<0)if(n)r=0;else return-1;if(typeof e=="string"&&(e=A.from(e,i)),A.isBuffer(e))return e.length===0?-1:_l(t,e,r,i,n);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):_l(t,[e],r,i,n);throw new TypeError("val must be string, number or Buffer")}function _l(t,e,r,i,n){let s=1,a=t.length,o=e.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,a/=2,o/=2,r/=2}function f(c,h){return s===1?c[h]:c.readUInt16BE(h*s)}let u;if(n){let c=-1;for(u=r;u<a;u++)if(f(t,u)===f(e,c===-1?0:u-c)){if(c===-1&&(c=u),u-c+1===o)return c*s}else c!==-1&&(u-=u-c),c=-1}else for(r+o>a&&(r=a-o),u=r;u>=0;u--){let c=!0;for(let h=0;h<o;h++)if(f(t,u+h)!==f(e,h)){c=!1;break}if(c)return u}return-1}A.prototype.includes=function(e,r,i){return this.indexOf(e,r,i)!==-1};A.prototype.indexOf=function(e,r,i){return Sl(this,e,r,i,!0)};A.prototype.lastIndexOf=function(e,r,i){return Sl(this,e,r,i,!1)};function wm(t,e,r,i){r=Number(r)||0;let n=t.length-r;i?(i=Number(i),i>n&&(i=n)):i=n;let s=e.length;i>s/2&&(i=s/2);let a;for(a=0;a<i;++a){let o=parseInt(e.substr(a*2,2),16);if(su(o))return a;t[r+a]=o}return a}function Sm(t,e,r,i){return Ha(nu(e,t.length-r),t,r,i)}function _m(t,e,r,i){return Ha(Lm(e),t,r,i)}function Im(t,e,r,i){return Ha(Nl(e),t,r,i)}function Bm(t,e,r,i){return Ha(Mm(e,t.length-r),t,r,i)}A.prototype.write=function(e,r,i,n){if(r===void 0)n="utf8",i=this.length,r=0;else if(i===void 0&&typeof r=="string")n=r,i=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(i)?(i=i>>>0,n===void 0&&(n="utf8")):(n=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-r;if((i===void 0||i>s)&&(i=s),e.length>0&&(i<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let a=!1;for(;;)switch(n){case"hex":return wm(this,e,r,i);case"utf8":case"utf-8":return Sm(this,e,r,i);case"ascii":case"latin1":case"binary":return _m(this,e,r,i);case"base64":return Im(this,e,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Bm(this,e,r,i);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}};A.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Am(t,e,r){return e===0&&r===t.length?X0.fromByteArray(t):X0.fromByteArray(t.slice(e,r))}function Il(t,e,r){r=Math.min(t.length,r);let i=[],n=e;for(;n<r;){let s=t[n],a=null,o=s>239?4:s>223?3:s>191?2:1;if(n+o<=r){let f,u,c,h;switch(o){case 1:s<128&&(a=s);break;case 2:f=t[n+1],(f&192)==128&&(h=(s&31)<<6|f&63,h>127&&(a=h));break;case 3:f=t[n+1],u=t[n+2],(f&192)==128&&(u&192)==128&&(h=(s&15)<<12|(f&63)<<6|u&63,h>2047&&(h<55296||h>57343)&&(a=h));break;case 4:f=t[n+1],u=t[n+2],c=t[n+3],(f&192)==128&&(u&192)==128&&(c&192)==128&&(h=(s&15)<<18|(f&63)<<12|(u&63)<<6|c&63,h>65535&&h<1114112&&(a=h))}}a===null?(a=65533,o=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|a&1023),i.push(a),n+=o}return Cm(i)}var Bl=4096;function Cm(t){let e=t.length;if(e<=Bl)return String.fromCharCode.apply(String,t);let r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=Bl));return r}function Tm(t,e,r){let i="";r=Math.min(t.length,r);for(let n=e;n<r;++n)i+=String.fromCharCode(t[n]&127);return i}function Rm(t,e,r){let i="";r=Math.min(t.length,r);for(let n=e;n<r;++n)i+=String.fromCharCode(t[n]);return i}function Dm(t,e,r){let i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);let n="";for(let s=e;s<r;++s)n+=Km[t[s]];return n}function Pm(t,e,r){let i=t.slice(e,r),n="";for(let s=0;s<i.length-1;s+=2)n+=String.fromCharCode(i[s]+i[s+1]*256);return n}A.prototype.slice=function(e,r){let i=this.length;e=~~e,r=r===void 0?i:~~r,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),r<0?(r+=i,r<0&&(r=0)):r>i&&(r=i),r<e&&(r=e);let n=this.subarray(e,r);return Object.setPrototypeOf(n,A.prototype),n};function rt(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}A.prototype.readUintLE=A.prototype.readUIntLE=function(e,r,i){e=e>>>0,r=r>>>0,i||rt(e,r,this.length);let n=this[e],s=1,a=0;for(;++a<r&&(s*=256);)n+=this[e+a]*s;return n};A.prototype.readUintBE=A.prototype.readUIntBE=function(e,r,i){e=e>>>0,r=r>>>0,i||rt(e,r,this.length);let n=this[e+--r],s=1;for(;r>0&&(s*=256);)n+=this[e+--r]*s;return n};A.prototype.readUint8=A.prototype.readUInt8=function(e,r){return e=e>>>0,r||rt(e,1,this.length),this[e]};A.prototype.readUint16LE=A.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||rt(e,2,this.length),this[e]|this[e+1]<<8};A.prototype.readUint16BE=A.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||rt(e,2,this.length),this[e]<<8|this[e+1]};A.prototype.readUint32LE=A.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||rt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};A.prototype.readUint32BE=A.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||rt(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};A.prototype.readBigUInt64LE=gi(function(e){e=e>>>0,Kn(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Rs(e,this.length-8);let n=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+i*2**24;return BigInt(n)+(BigInt(s)<<BigInt(32))});A.prototype.readBigUInt64BE=gi(function(e){e=e>>>0,Kn(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Rs(e,this.length-8);let n=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i;return(BigInt(n)<<BigInt(32))+BigInt(s)});A.prototype.readIntLE=function(e,r,i){e=e>>>0,r=r>>>0,i||rt(e,r,this.length);let n=this[e],s=1,a=0;for(;++a<r&&(s*=256);)n+=this[e+a]*s;return s*=128,n>=s&&(n-=Math.pow(2,8*r)),n};A.prototype.readIntBE=function(e,r,i){e=e>>>0,r=r>>>0,i||rt(e,r,this.length);let n=r,s=1,a=this[e+--n];for(;n>0&&(s*=256);)a+=this[e+--n]*s;return s*=128,a>=s&&(a-=Math.pow(2,8*r)),a};A.prototype.readInt8=function(e,r){return e=e>>>0,r||rt(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};A.prototype.readInt16LE=function(e,r){e=e>>>0,r||rt(e,2,this.length);let i=this[e]|this[e+1]<<8;return i&32768?i|4294901760:i};A.prototype.readInt16BE=function(e,r){e=e>>>0,r||rt(e,2,this.length);let i=this[e+1]|this[e]<<8;return i&32768?i|4294901760:i};A.prototype.readInt32LE=function(e,r){return e=e>>>0,r||rt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};A.prototype.readInt32BE=function(e,r){return e=e>>>0,r||rt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};A.prototype.readBigInt64LE=gi(function(e){e=e>>>0,Kn(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Rs(e,this.length-8);let n=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(i<<24);return(BigInt(n)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});A.prototype.readBigInt64BE=gi(function(e){e=e>>>0,Kn(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Rs(e,this.length-8);let n=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i)});A.prototype.readFloatLE=function(e,r){return e=e>>>0,r||rt(e,4,this.length),Ln.read(this,e,!0,23,4)};A.prototype.readFloatBE=function(e,r){return e=e>>>0,r||rt(e,4,this.length),Ln.read(this,e,!1,23,4)};A.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||rt(e,8,this.length),Ln.read(this,e,!0,52,8)};A.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||rt(e,8,this.length),Ln.read(this,e,!1,52,8)};function Rt(t,e,r,i,n,s){if(!A.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}A.prototype.writeUintLE=A.prototype.writeUIntLE=function(e,r,i,n){if(e=+e,r=r>>>0,i=i>>>0,!n){let o=Math.pow(2,8*i)-1;Rt(this,e,r,i,o,0)}let s=1,a=0;for(this[r]=e&255;++a<i&&(s*=256);)this[r+a]=e/s&255;return r+i};A.prototype.writeUintBE=A.prototype.writeUIntBE=function(e,r,i,n){if(e=+e,r=r>>>0,i=i>>>0,!n){let o=Math.pow(2,8*i)-1;Rt(this,e,r,i,o,0)}let s=i-1,a=1;for(this[r+s]=e&255;--s>=0&&(a*=256);)this[r+s]=e/a&255;return r+i};A.prototype.writeUint8=A.prototype.writeUInt8=function(e,r,i){return e=+e,r=r>>>0,i||Rt(this,e,r,1,255,0),this[r]=e&255,r+1};A.prototype.writeUint16LE=A.prototype.writeUInt16LE=function(e,r,i){return e=+e,r=r>>>0,i||Rt(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};A.prototype.writeUint16BE=A.prototype.writeUInt16BE=function(e,r,i){return e=+e,r=r>>>0,i||Rt(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};A.prototype.writeUint32LE=A.prototype.writeUInt32LE=function(e,r,i){return e=+e,r=r>>>0,i||Rt(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};A.prototype.writeUint32BE=A.prototype.writeUInt32BE=function(e,r,i){return e=+e,r=r>>>0,i||Rt(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function Al(t,e,r,i,n){kl(e,i,n,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a,r}function Cl(t,e,r,i,n){kl(e,i,n,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s=s>>8,t[r+6]=s,s=s>>8,t[r+5]=s,s=s>>8,t[r+4]=s;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=a,a=a>>8,t[r+2]=a,a=a>>8,t[r+1]=a,a=a>>8,t[r]=a,r+8}A.prototype.writeBigUInt64LE=gi(function(e,r=0){return Al(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});A.prototype.writeBigUInt64BE=gi(function(e,r=0){return Cl(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});A.prototype.writeIntLE=function(e,r,i,n){if(e=+e,r=r>>>0,!n){let f=Math.pow(2,8*i-1);Rt(this,e,r,i,f-1,-f)}let s=0,a=1,o=0;for(this[r]=e&255;++s<i&&(a*=256);)e<0&&o===0&&this[r+s-1]!==0&&(o=1),this[r+s]=(e/a>>0)-o&255;return r+i};A.prototype.writeIntBE=function(e,r,i,n){if(e=+e,r=r>>>0,!n){let f=Math.pow(2,8*i-1);Rt(this,e,r,i,f-1,-f)}let s=i-1,a=1,o=0;for(this[r+s]=e&255;--s>=0&&(a*=256);)e<0&&o===0&&this[r+s+1]!==0&&(o=1),this[r+s]=(e/a>>0)-o&255;return r+i};A.prototype.writeInt8=function(e,r,i){return e=+e,r=r>>>0,i||Rt(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};A.prototype.writeInt16LE=function(e,r,i){return e=+e,r=r>>>0,i||Rt(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};A.prototype.writeInt16BE=function(e,r,i){return e=+e,r=r>>>0,i||Rt(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};A.prototype.writeInt32LE=function(e,r,i){return e=+e,r=r>>>0,i||Rt(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};A.prototype.writeInt32BE=function(e,r,i){return e=+e,r=r>>>0,i||Rt(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};A.prototype.writeBigInt64LE=gi(function(e,r=0){return Al(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});A.prototype.writeBigInt64BE=gi(function(e,r=0){return Cl(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Tl(t,e,r,i,n,s){if(r+i>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Rl(t,e,r,i,n){return e=+e,r=r>>>0,n||Tl(t,e,r,4,34028234663852886e22,-34028234663852886e22),Ln.write(t,e,r,i,23,4),r+4}A.prototype.writeFloatLE=function(e,r,i){return Rl(this,e,r,!0,i)};A.prototype.writeFloatBE=function(e,r,i){return Rl(this,e,r,!1,i)};function Dl(t,e,r,i,n){return e=+e,r=r>>>0,n||Tl(t,e,r,8,17976931348623157e292,-17976931348623157e292),Ln.write(t,e,r,i,52,8),r+8}A.prototype.writeDoubleLE=function(e,r,i){return Dl(this,e,r,!0,i)};A.prototype.writeDoubleBE=function(e,r,i){return Dl(this,e,r,!1,i)};A.prototype.copy=function(e,r,i,n){if(!A.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),!n&&n!==0&&(n=this.length),r>=e.length&&(r=e.length),r||(r=0),n>0&&n<i&&(n=i),n===i||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-r<n-i&&(n=e.length-r+i);let s=n-i;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,i,n):Uint8Array.prototype.set.call(e,this.subarray(i,n),r),s};A.prototype.fill=function(e,r,i,n){if(typeof e=="string"){if(typeof r=="string"?(n=r,r=0,i=this.length):typeof i=="string"&&(n=i,i=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!A.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(e.length===1){let a=e.charCodeAt(0);(n==="utf8"&&a<128||n==="latin1")&&(e=a)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<i)throw new RangeError("Out of range index");if(i<=r)return this;r=r>>>0,i=i===void 0?this.length:i>>>0,e||(e=0);let s;if(typeof e=="number")for(s=r;s<i;++s)this[s]=e;else{let a=A.isBuffer(e)?e:A.from(e,n),o=a.length;if(o===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<i-r;++s)this[s+r]=a[s%o]}return this};var Mn={};function iu(t,e,r){Mn[t]=class extends r{constructor(){super();Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(n){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:n,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}iu("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);iu("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);iu("ERR_OUT_OF_RANGE",function(t,e,r){let i=`The value of "${t}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>2**32?n=Pl(String(r)):typeof r=="bigint"&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=Pl(n)),n+="n"),i+=` It must be ${e}. Received ${n}`,i},RangeError);function Pl(t){let e="",r=t.length,i=t[0]==="-"?1:0;for(;r>=i+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function km(t,e,r){Kn(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&Rs(e,t.length-(r+1))}function kl(t,e,r,i,n,s){if(t>r||t<e){let a=typeof e=="bigint"?"n":"",o;throw s>3?e===0||e===BigInt(0)?o=`>= 0${a} and < 2${a} ** ${(s+1)*8}${a}`:o=`>= -(2${a} ** ${(s+1)*8-1}${a}) and < 2 ** ${(s+1)*8-1}${a}`:o=`>= ${e}${a} and <= ${r}${a}`,new Mn.ERR_OUT_OF_RANGE("value",o,t)}km(i,n,s)}function Kn(t,e){if(typeof t!="number")throw new Mn.ERR_INVALID_ARG_TYPE(e,"number",t)}function Rs(t,e,r){throw Math.floor(t)!==t?(Kn(t,r),new Mn.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new Mn.ERR_BUFFER_OUT_OF_BOUNDS:new Mn.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var Nm=/[^+/0-9A-Za-z-_]/g;function Om(t){if(t=t.split("=")[0],t=t.trim().replace(Nm,""),t.length<2)return"";for(;t.length%4!=0;)t=t+"=";return t}function nu(t,e){e=e||1/0;let r,i=t.length,n=null,s=[];for(let a=0;a<i;++a){if(r=t.charCodeAt(a),r>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(a+1===i){(e-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function Lm(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function Mm(t,e){let r,i,n,s=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),i=r>>8,n=r%256,s.push(n),s.push(i);return s}function Nl(t){return X0.toByteArray(Om(t))}function Ha(t,e,r,i){let n;for(n=0;n<i&&!(n+r>=e.length||n>=t.length);++n)e[n+r]=t[n];return n}function vr(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function su(t){return t!==t}var Km=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let i=r*16;for(let n=0;n<16;++n)e[i+n]=t[r]+t[n]}return e}();function gi(t){return typeof BigInt=="undefined"?Fm:t}function Fm(){throw new Error("BigInt not supported")}});var Ol=E(au=>{au.read=function(t,e,r,i,n){var s,a,o=n*8-i-1,f=(1<<o)-1,u=f>>1,c=-7,h=r?n-1:0,l=r?-1:1,d=t[e+h];for(h+=l,s=d&(1<<-c)-1,d>>=-c,c+=o;c>0;s=s*256+t[e+h],h+=l,c-=8);for(a=s&(1<<-c)-1,s>>=-c,c+=i;c>0;a=a*256+t[e+h],h+=l,c-=8);if(s===0)s=1-u;else{if(s===f)return a?NaN:(d?-1:1)*(1/0);a=a+Math.pow(2,i),s=s-u}return(d?-1:1)*a*Math.pow(2,s-i)};au.write=function(t,e,r,i,n,s){var a,o,f,u=s*8-n-1,c=(1<<u)-1,h=c>>1,l=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:s-1,p=i?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-a))<1&&(a--,f*=2),a+h>=1?e+=l/f:e+=l*Math.pow(2,1-h),e*f>=2&&(a++,f/=2),a+h>=c?(o=0,a=c):a+h>=1?(o=(e*f-1)*Math.pow(2,n),a=a+h):(o=e*Math.pow(2,h-1)*Math.pow(2,n),a=0));n>=8;t[r+d]=o&255,d+=p,o/=256,n-=8);for(a=a<<n|o,u+=n;u>0;t[r+d]=a&255,d+=p,a/=256,u-=8);t[r+d-p]|=y*128}});var Xl=E(Hn=>{"use strict";var ou=Q0(),qn=Ol(),Ll=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Hn.Buffer=C;Hn.SlowBuffer=zm;Hn.INSPECT_MAX_BYTES=50;var za=2147483647;Hn.kMaxLength=za;C.TYPED_ARRAY_SUPPORT=Um();!C.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Um(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch(t){return!1}}Object.defineProperty(C.prototype,"parent",{enumerable:!0,get:function(){if(!!C.isBuffer(this))return this.buffer}});Object.defineProperty(C.prototype,"offset",{enumerable:!0,get:function(){if(!!C.isBuffer(this))return this.byteOffset}});function jr(t){if(t>za)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,C.prototype),e}function C(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return uu(t)}return Ml(t,e,r)}C.poolSize=8192;function Ml(t,e,r){if(typeof t=="string")return Vm(t,e);if(ArrayBuffer.isView(t))return Gm(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(xr(t,ArrayBuffer)||t&&xr(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(xr(t,SharedArrayBuffer)||t&&xr(t.buffer,SharedArrayBuffer)))return fu(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let i=t.valueOf&&t.valueOf();if(i!=null&&i!==t)return C.from(i,e,r);let n=Hm(t);if(n)return n;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return C.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}C.from=function(t,e,r){return Ml(t,e,r)};Object.setPrototypeOf(C.prototype,Uint8Array.prototype);Object.setPrototypeOf(C,Uint8Array);function Kl(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function qm(t,e,r){return Kl(t),t<=0?jr(t):e!==void 0?typeof r=="string"?jr(t).fill(e,r):jr(t).fill(e):jr(t)}C.alloc=function(t,e,r){return qm(t,e,r)};function uu(t){return Kl(t),jr(t<0?0:hu(t)|0)}C.allocUnsafe=function(t){return uu(t)};C.allocUnsafeSlow=function(t){return uu(t)};function Vm(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!C.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=Fl(t,e)|0,i=jr(r),n=i.write(t,e);return n!==r&&(i=i.slice(0,n)),i}function cu(t){let e=t.length<0?0:hu(t.length)|0,r=jr(e);for(let i=0;i<e;i+=1)r[i]=t[i]&255;return r}function Gm(t){if(xr(t,Uint8Array)){let e=new Uint8Array(t);return fu(e.buffer,e.byteOffset,e.byteLength)}return cu(t)}function fu(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let i;return e===void 0&&r===void 0?i=new Uint8Array(t):r===void 0?i=new Uint8Array(t,e):i=new Uint8Array(t,e,r),Object.setPrototypeOf(i,C.prototype),i}function Hm(t){if(C.isBuffer(t)){let e=hu(t.length)|0,r=jr(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||du(t.length)?jr(0):cu(t);if(t.type==="Buffer"&&Array.isArray(t.data))return cu(t.data)}function hu(t){if(t>=za)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+za.toString(16)+" bytes");return t|0}function zm(t){return+t!=t&&(t=0),C.alloc(+t)}C.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==C.prototype};C.compare=function(e,r){if(xr(e,Uint8Array)&&(e=C.from(e,e.offset,e.byteLength)),xr(r,Uint8Array)&&(r=C.from(r,r.offset,r.byteLength)),!C.isBuffer(e)||!C.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let i=e.length,n=r.length;for(let s=0,a=Math.min(i,n);s<a;++s)if(e[s]!==r[s]){i=e[s],n=r[s];break}return i<n?-1:n<i?1:0};C.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};C.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return C.alloc(0);let i;if(r===void 0)for(r=0,i=0;i<e.length;++i)r+=e[i].length;let n=C.allocUnsafe(r),s=0;for(i=0;i<e.length;++i){let a=e[i];if(xr(a,Uint8Array))s+a.length>n.length?(C.isBuffer(a)||(a=C.from(a)),a.copy(n,s)):Uint8Array.prototype.set.call(n,a,s);else if(C.isBuffer(a))a.copy(n,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=a.length}return n};function Fl(t,e){if(C.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||xr(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&r===0)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return pu(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Zl(t).length;default:if(n)return i?-1:pu(t).length;e=(""+e).toLowerCase(),n=!0}}C.byteLength=Fl;function jm(t,e,r){let i=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return rE(this,e,r);case"utf8":case"utf-8":return Vl(this,e,r);case"ascii":return eE(this,e,r);case"latin1":case"binary":return tE(this,e,r);case"base64":return Xm(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return iE(this,e,r);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}C.prototype._isBuffer=!0;function tn(t,e,r){let i=t[e];t[e]=t[r],t[r]=i}C.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)tn(this,r,r+1);return this};C.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)tn(this,r,r+3),tn(this,r+1,r+2);return this};C.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)tn(this,r,r+7),tn(this,r+1,r+6),tn(this,r+2,r+5),tn(this,r+3,r+4);return this};C.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Vl(this,0,e):jm.apply(this,arguments)};C.prototype.toLocaleString=C.prototype.toString;C.prototype.equals=function(e){if(!C.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:C.compare(this,e)===0};C.prototype.inspect=function(){let e="",r=Hn.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};Ll&&(C.prototype[Ll]=C.prototype.inspect);C.prototype.compare=function(e,r,i,n,s){if(xr(e,Uint8Array)&&(e=C.from(e,e.offset,e.byteLength)),!C.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),i===void 0&&(i=e?e.length:0),n===void 0&&(n=0),s===void 0&&(s=this.length),r<0||i>e.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&r>=i)return 0;if(n>=s)return-1;if(r>=i)return 1;if(r>>>=0,i>>>=0,n>>>=0,s>>>=0,this===e)return 0;let a=s-n,o=i-r,f=Math.min(a,o),u=this.slice(n,s),c=e.slice(r,i);for(let h=0;h<f;++h)if(u[h]!==c[h]){a=u[h],o=c[h];break}return a<o?-1:o<a?1:0};function Ul(t,e,r,i,n){if(t.length===0)return-1;if(typeof r=="string"?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,du(r)&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return-1;r=t.length-1}else if(r<0)if(n)r=0;else return-1;if(typeof e=="string"&&(e=C.from(e,i)),C.isBuffer(e))return e.length===0?-1:ql(t,e,r,i,n);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):ql(t,[e],r,i,n);throw new TypeError("val must be string, number or Buffer")}function ql(t,e,r,i,n){let s=1,a=t.length,o=e.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,a/=2,o/=2,r/=2}function f(c,h){return s===1?c[h]:c.readUInt16BE(h*s)}let u;if(n){let c=-1;for(u=r;u<a;u++)if(f(t,u)===f(e,c===-1?0:u-c)){if(c===-1&&(c=u),u-c+1===o)return c*s}else c!==-1&&(u-=u-c),c=-1}else for(r+o>a&&(r=a-o),u=r;u>=0;u--){let c=!0;for(let h=0;h<o;h++)if(f(t,u+h)!==f(e,h)){c=!1;break}if(c)return u}return-1}C.prototype.includes=function(e,r,i){return this.indexOf(e,r,i)!==-1};C.prototype.indexOf=function(e,r,i){return Ul(this,e,r,i,!0)};C.prototype.lastIndexOf=function(e,r,i){return Ul(this,e,r,i,!1)};function Wm(t,e,r,i){r=Number(r)||0;let n=t.length-r;i?(i=Number(i),i>n&&(i=n)):i=n;let s=e.length;i>s/2&&(i=s/2);let a;for(a=0;a<i;++a){let o=parseInt(e.substr(a*2,2),16);if(du(o))return a;t[r+a]=o}return a}function Ym(t,e,r,i){return ja(pu(e,t.length-r),t,r,i)}function $m(t,e,r,i){return ja(oE(e),t,r,i)}function Qm(t,e,r,i){return ja(Zl(e),t,r,i)}function Zm(t,e,r,i){return ja(uE(e,t.length-r),t,r,i)}C.prototype.write=function(e,r,i,n){if(r===void 0)n="utf8",i=this.length,r=0;else if(i===void 0&&typeof r=="string")n=r,i=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(i)?(i=i>>>0,n===void 0&&(n="utf8")):(n=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-r;if((i===void 0||i>s)&&(i=s),e.length>0&&(i<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let a=!1;for(;;)switch(n){case"hex":return Wm(this,e,r,i);case"utf8":case"utf-8":return Ym(this,e,r,i);case"ascii":case"latin1":case"binary":return $m(this,e,r,i);case"base64":return Qm(this,e,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Zm(this,e,r,i);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}};C.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Xm(t,e,r){return e===0&&r===t.length?ou.fromByteArray(t):ou.fromByteArray(t.slice(e,r))}function Vl(t,e,r){r=Math.min(t.length,r);let i=[],n=e;for(;n<r;){let s=t[n],a=null,o=s>239?4:s>223?3:s>191?2:1;if(n+o<=r){let f,u,c,h;switch(o){case 1:s<128&&(a=s);break;case 2:f=t[n+1],(f&192)==128&&(h=(s&31)<<6|f&63,h>127&&(a=h));break;case 3:f=t[n+1],u=t[n+2],(f&192)==128&&(u&192)==128&&(h=(s&15)<<12|(f&63)<<6|u&63,h>2047&&(h<55296||h>57343)&&(a=h));break;case 4:f=t[n+1],u=t[n+2],c=t[n+3],(f&192)==128&&(u&192)==128&&(c&192)==128&&(h=(s&15)<<18|(f&63)<<12|(u&63)<<6|c&63,h>65535&&h<1114112&&(a=h))}}a===null?(a=65533,o=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|a&1023),i.push(a),n+=o}return Jm(i)}var Gl=4096;function Jm(t){let e=t.length;if(e<=Gl)return String.fromCharCode.apply(String,t);let r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=Gl));return r}function eE(t,e,r){let i="";r=Math.min(t.length,r);for(let n=e;n<r;++n)i+=String.fromCharCode(t[n]&127);return i}function tE(t,e,r){let i="";r=Math.min(t.length,r);for(let n=e;n<r;++n)i+=String.fromCharCode(t[n]);return i}function rE(t,e,r){let i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);let n="";for(let s=e;s<r;++s)n+=cE[t[s]];return n}function iE(t,e,r){let i=t.slice(e,r),n="";for(let s=0;s<i.length-1;s+=2)n+=String.fromCharCode(i[s]+i[s+1]*256);return n}C.prototype.slice=function(e,r){let i=this.length;e=~~e,r=r===void 0?i:~~r,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),r<0?(r+=i,r<0&&(r=0)):r>i&&(r=i),r<e&&(r=e);let n=this.subarray(e,r);return Object.setPrototypeOf(n,C.prototype),n};function it(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}C.prototype.readUintLE=C.prototype.readUIntLE=function(e,r,i){e=e>>>0,r=r>>>0,i||it(e,r,this.length);let n=this[e],s=1,a=0;for(;++a<r&&(s*=256);)n+=this[e+a]*s;return n};C.prototype.readUintBE=C.prototype.readUIntBE=function(e,r,i){e=e>>>0,r=r>>>0,i||it(e,r,this.length);let n=this[e+--r],s=1;for(;r>0&&(s*=256);)n+=this[e+--r]*s;return n};C.prototype.readUint8=C.prototype.readUInt8=function(e,r){return e=e>>>0,r||it(e,1,this.length),this[e]};C.prototype.readUint16LE=C.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||it(e,2,this.length),this[e]|this[e+1]<<8};C.prototype.readUint16BE=C.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||it(e,2,this.length),this[e]<<8|this[e+1]};C.prototype.readUint32LE=C.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||it(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};C.prototype.readUint32BE=C.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||it(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};C.prototype.readBigUInt64LE=vi(function(e){e=e>>>0,Gn(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Ds(e,this.length-8);let n=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+i*2**24;return BigInt(n)+(BigInt(s)<<BigInt(32))});C.prototype.readBigUInt64BE=vi(function(e){e=e>>>0,Gn(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Ds(e,this.length-8);let n=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i;return(BigInt(n)<<BigInt(32))+BigInt(s)});C.prototype.readIntLE=function(e,r,i){e=e>>>0,r=r>>>0,i||it(e,r,this.length);let n=this[e],s=1,a=0;for(;++a<r&&(s*=256);)n+=this[e+a]*s;return s*=128,n>=s&&(n-=Math.pow(2,8*r)),n};C.prototype.readIntBE=function(e,r,i){e=e>>>0,r=r>>>0,i||it(e,r,this.length);let n=r,s=1,a=this[e+--n];for(;n>0&&(s*=256);)a+=this[e+--n]*s;return s*=128,a>=s&&(a-=Math.pow(2,8*r)),a};C.prototype.readInt8=function(e,r){return e=e>>>0,r||it(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};C.prototype.readInt16LE=function(e,r){e=e>>>0,r||it(e,2,this.length);let i=this[e]|this[e+1]<<8;return i&32768?i|4294901760:i};C.prototype.readInt16BE=function(e,r){e=e>>>0,r||it(e,2,this.length);let i=this[e+1]|this[e]<<8;return i&32768?i|4294901760:i};C.prototype.readInt32LE=function(e,r){return e=e>>>0,r||it(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};C.prototype.readInt32BE=function(e,r){return e=e>>>0,r||it(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};C.prototype.readBigInt64LE=vi(function(e){e=e>>>0,Gn(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Ds(e,this.length-8);let n=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(i<<24);return(BigInt(n)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});C.prototype.readBigInt64BE=vi(function(e){e=e>>>0,Gn(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Ds(e,this.length-8);let n=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i)});C.prototype.readFloatLE=function(e,r){return e=e>>>0,r||it(e,4,this.length),qn.read(this,e,!0,23,4)};C.prototype.readFloatBE=function(e,r){return e=e>>>0,r||it(e,4,this.length),qn.read(this,e,!1,23,4)};C.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||it(e,8,this.length),qn.read(this,e,!0,52,8)};C.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||it(e,8,this.length),qn.read(this,e,!1,52,8)};function Dt(t,e,r,i,n,s){if(!C.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}C.prototype.writeUintLE=C.prototype.writeUIntLE=function(e,r,i,n){if(e=+e,r=r>>>0,i=i>>>0,!n){let o=Math.pow(2,8*i)-1;Dt(this,e,r,i,o,0)}let s=1,a=0;for(this[r]=e&255;++a<i&&(s*=256);)this[r+a]=e/s&255;return r+i};C.prototype.writeUintBE=C.prototype.writeUIntBE=function(e,r,i,n){if(e=+e,r=r>>>0,i=i>>>0,!n){let o=Math.pow(2,8*i)-1;Dt(this,e,r,i,o,0)}let s=i-1,a=1;for(this[r+s]=e&255;--s>=0&&(a*=256);)this[r+s]=e/a&255;return r+i};C.prototype.writeUint8=C.prototype.writeUInt8=function(e,r,i){return e=+e,r=r>>>0,i||Dt(this,e,r,1,255,0),this[r]=e&255,r+1};C.prototype.writeUint16LE=C.prototype.writeUInt16LE=function(e,r,i){return e=+e,r=r>>>0,i||Dt(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};C.prototype.writeUint16BE=C.prototype.writeUInt16BE=function(e,r,i){return e=+e,r=r>>>0,i||Dt(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};C.prototype.writeUint32LE=C.prototype.writeUInt32LE=function(e,r,i){return e=+e,r=r>>>0,i||Dt(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};C.prototype.writeUint32BE=C.prototype.writeUInt32BE=function(e,r,i){return e=+e,r=r>>>0,i||Dt(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function Hl(t,e,r,i,n){Ql(e,i,n,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a,r}function zl(t,e,r,i,n){Ql(e,i,n,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s=s>>8,t[r+6]=s,s=s>>8,t[r+5]=s,s=s>>8,t[r+4]=s;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=a,a=a>>8,t[r+2]=a,a=a>>8,t[r+1]=a,a=a>>8,t[r]=a,r+8}C.prototype.writeBigUInt64LE=vi(function(e,r=0){return Hl(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});C.prototype.writeBigUInt64BE=vi(function(e,r=0){return zl(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});C.prototype.writeIntLE=function(e,r,i,n){if(e=+e,r=r>>>0,!n){let f=Math.pow(2,8*i-1);Dt(this,e,r,i,f-1,-f)}let s=0,a=1,o=0;for(this[r]=e&255;++s<i&&(a*=256);)e<0&&o===0&&this[r+s-1]!==0&&(o=1),this[r+s]=(e/a>>0)-o&255;return r+i};C.prototype.writeIntBE=function(e,r,i,n){if(e=+e,r=r>>>0,!n){let f=Math.pow(2,8*i-1);Dt(this,e,r,i,f-1,-f)}let s=i-1,a=1,o=0;for(this[r+s]=e&255;--s>=0&&(a*=256);)e<0&&o===0&&this[r+s+1]!==0&&(o=1),this[r+s]=(e/a>>0)-o&255;return r+i};C.prototype.writeInt8=function(e,r,i){return e=+e,r=r>>>0,i||Dt(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};C.prototype.writeInt16LE=function(e,r,i){return e=+e,r=r>>>0,i||Dt(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};C.prototype.writeInt16BE=function(e,r,i){return e=+e,r=r>>>0,i||Dt(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};C.prototype.writeInt32LE=function(e,r,i){return e=+e,r=r>>>0,i||Dt(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};C.prototype.writeInt32BE=function(e,r,i){return e=+e,r=r>>>0,i||Dt(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};C.prototype.writeBigInt64LE=vi(function(e,r=0){return Hl(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});C.prototype.writeBigInt64BE=vi(function(e,r=0){return zl(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function jl(t,e,r,i,n,s){if(r+i>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Wl(t,e,r,i,n){return e=+e,r=r>>>0,n||jl(t,e,r,4,34028234663852886e22,-34028234663852886e22),qn.write(t,e,r,i,23,4),r+4}C.prototype.writeFloatLE=function(e,r,i){return Wl(this,e,r,!0,i)};C.prototype.writeFloatBE=function(e,r,i){return Wl(this,e,r,!1,i)};function Yl(t,e,r,i,n){return e=+e,r=r>>>0,n||jl(t,e,r,8,17976931348623157e292,-17976931348623157e292),qn.write(t,e,r,i,52,8),r+8}C.prototype.writeDoubleLE=function(e,r,i){return Yl(this,e,r,!0,i)};C.prototype.writeDoubleBE=function(e,r,i){return Yl(this,e,r,!1,i)};C.prototype.copy=function(e,r,i,n){if(!C.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),!n&&n!==0&&(n=this.length),r>=e.length&&(r=e.length),r||(r=0),n>0&&n<i&&(n=i),n===i||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-r<n-i&&(n=e.length-r+i);let s=n-i;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,i,n):Uint8Array.prototype.set.call(e,this.subarray(i,n),r),s};C.prototype.fill=function(e,r,i,n){if(typeof e=="string"){if(typeof r=="string"?(n=r,r=0,i=this.length):typeof i=="string"&&(n=i,i=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!C.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(e.length===1){let a=e.charCodeAt(0);(n==="utf8"&&a<128||n==="latin1")&&(e=a)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<i)throw new RangeError("Out of range index");if(i<=r)return this;r=r>>>0,i=i===void 0?this.length:i>>>0,e||(e=0);let s;if(typeof e=="number")for(s=r;s<i;++s)this[s]=e;else{let a=C.isBuffer(e)?e:C.from(e,n),o=a.length;if(o===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<i-r;++s)this[s+r]=a[s%o]}return this};var Vn={};function lu(t,e,r){Vn[t]=class extends r{constructor(){super();Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(n){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:n,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}lu("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);lu("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);lu("ERR_OUT_OF_RANGE",function(t,e,r){let i=`The value of "${t}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>2**32?n=$l(String(r)):typeof r=="bigint"&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=$l(n)),n+="n"),i+=` It must be ${e}. Received ${n}`,i},RangeError);function $l(t){let e="",r=t.length,i=t[0]==="-"?1:0;for(;r>=i+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function nE(t,e,r){Gn(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&Ds(e,t.length-(r+1))}function Ql(t,e,r,i,n,s){if(t>r||t<e){let a=typeof e=="bigint"?"n":"",o;throw s>3?e===0||e===BigInt(0)?o=`>= 0${a} and < 2${a} ** ${(s+1)*8}${a}`:o=`>= -(2${a} ** ${(s+1)*8-1}${a}) and < 2 ** ${(s+1)*8-1}${a}`:o=`>= ${e}${a} and <= ${r}${a}`,new Vn.ERR_OUT_OF_RANGE("value",o,t)}nE(i,n,s)}function Gn(t,e){if(typeof t!="number")throw new Vn.ERR_INVALID_ARG_TYPE(e,"number",t)}function Ds(t,e,r){throw Math.floor(t)!==t?(Gn(t,r),new Vn.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new Vn.ERR_BUFFER_OUT_OF_BOUNDS:new Vn.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var sE=/[^+/0-9A-Za-z-_]/g;function aE(t){if(t=t.split("=")[0],t=t.trim().replace(sE,""),t.length<2)return"";for(;t.length%4!=0;)t=t+"=";return t}function pu(t,e){e=e||1/0;let r,i=t.length,n=null,s=[];for(let a=0;a<i;++a){if(r=t.charCodeAt(a),r>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(a+1===i){(e-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function oE(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function uE(t,e){let r,i,n,s=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),i=r>>8,n=r%256,s.push(n),s.push(i);return s}function Zl(t){return ou.toByteArray(aE(t))}function ja(t,e,r,i){let n;for(n=0;n<i&&!(n+r>=e.length||n>=t.length);++n)e[n+r]=t[n];return n}function xr(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function du(t){return t!==t}var cE=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let i=r*16;for(let n=0;n<16;++n)e[i+n]=t[r]+t[n]}return e}();function vi(t){return typeof BigInt=="undefined"?fE:t}function fE(){throw new Error("BigInt not supported")}});var yu=E((tR,ep)=>{"use strict";var{Buffer:tr}=Xl(),Jl=Symbol.for("BufferList");function Re(t){if(!(this instanceof Re))return new Re(t);Re._init.call(this,t)}Re._init=function(e){Object.defineProperty(this,Jl,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};Re.prototype._new=function(e){return new Re(e)};Re.prototype._offset=function(e){if(e===0)return[0,0];let r=0;for(let i=0;i<this._bufs.length;i++){let n=r+this._bufs[i].length;if(e<n||i===this._bufs.length-1)return[i,e-r];r=n}};Re.prototype._reverseOffset=function(t){let e=t[0],r=t[1];for(let i=0;i<e;i++)r+=this._bufs[i].length;return r};Re.prototype.get=function(e){if(e>this.length||e<0)return;let r=this._offset(e);return this._bufs[r[0]][r[1]]};Re.prototype.slice=function(e,r){return typeof e=="number"&&e<0&&(e+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,e,r)};Re.prototype.copy=function(e,r,i,n){if((typeof i!="number"||i<0)&&(i=0),(typeof n!="number"||n>this.length)&&(n=this.length),i>=this.length||n<=0)return e||tr.alloc(0);let s=!!e,a=this._offset(i),o=n-i,f=o,u=s&&r||0,c=a[1];if(i===0&&n===this.length){if(!s)return this._bufs.length===1?this._bufs[0]:tr.concat(this._bufs,this.length);for(let h=0;h<this._bufs.length;h++)this._bufs[h].copy(e,u),u+=this._bufs[h].length;return e}if(f<=this._bufs[a[0]].length-c)return s?this._bufs[a[0]].copy(e,r,c,c+f):this._bufs[a[0]].slice(c,c+f);s||(e=tr.allocUnsafe(o));for(let h=a[0];h<this._bufs.length;h++){let l=this._bufs[h].length-c;if(f>l)this._bufs[h].copy(e,u,c),u+=l;else{this._bufs[h].copy(e,u,c,c+f),u+=l;break}f-=l,c&&(c=0)}return e.length>u?e.slice(0,u):e};Re.prototype.shallowSlice=function(e,r){if(e=e||0,r=typeof r!="number"?this.length:r,e<0&&(e+=this.length),r<0&&(r+=this.length),e===r)return this._new();let i=this._offset(e),n=this._offset(r),s=this._bufs.slice(i[0],n[0]+1);return n[1]===0?s.pop():s[s.length-1]=s[s.length-1].slice(0,n[1]),i[1]!==0&&(s[0]=s[0].slice(i[1])),this._new(s)};Re.prototype.toString=function(e,r,i){return this.slice(r,i).toString(e)};Re.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};Re.prototype.duplicate=function(){let e=this._new();for(let r=0;r<this._bufs.length;r++)e.append(this._bufs[r]);return e};Re.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(tr.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let r=0;r<e.length;r++)this.append(e[r]);else if(this._isBufferList(e))for(let r=0;r<e._bufs.length;r++)this.append(e._bufs[r]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(tr.from(e));return this};Re.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};Re.prototype.indexOf=function(t,e,r){if(r===void 0&&typeof e=="string"&&(r=e,e=void 0),typeof t=="function"||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof t=="number"?t=tr.from([t]):typeof t=="string"?t=tr.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=tr.from(t.buffer,t.byteOffset,t.byteLength):tr.isBuffer(t)||(t=tr.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),t.length===0)return e>this.length?this.length:e;let i=this._offset(e),n=i[0],s=i[1];for(;n<this._bufs.length;n++){let a=this._bufs[n];for(;s<a.length;)if(a.length-s>=t.length){let f=a.indexOf(t,s);if(f!==-1)return this._reverseOffset([n,f]);s=a.length-t.length+1}else{let f=this._reverseOffset([n,s]);if(this._match(f,t))return f;s++}s=0}return-1};Re.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0};(function(){let t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in t)(function(r){t[r]===null?Re.prototype[r]=function(i,n){return this.slice(i,i+n)[r](0,n)}:Re.prototype[r]=function(i=0){return this.slice(i,i+t[r])[r](0)}})(e)})();Re.prototype._isBufferList=function(e){return e instanceof Re||Re.isBufferList(e)};Re.isBufferList=function(e){return e!=null&&e[Jl]};ep.exports=Re});var ip=E((rR,rp)=>{rp.exports=gu;var tp=128,hE=127,lE=~hE,pE=Math.pow(2,31);function gu(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw gu.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var i=r;t>=pE;)e[r++]=t&255|tp,t/=128;for(;t&lE;)e[r++]=t&255|tp,t>>>=7;return e[r]=t|0,gu.bytes=r-i+1,e}});var ap=E((iR,sp)=>{sp.exports=vu;var dE=128,np=127;function vu(t,e){var r=0,e=e||0,i=0,n=e,s,a=t.length;do{if(n>=a||i>49)throw vu.bytes=0,new RangeError("Could not decode varint");s=t[n++],r+=i<28?(s&np)<<i:(s&np)*Math.pow(2,i),i+=7}while(s>=dE);return vu.bytes=n-e,r}});var up=E((nR,op)=>{var yE=Math.pow(2,7),gE=Math.pow(2,14),vE=Math.pow(2,21),xE=Math.pow(2,28),bE=Math.pow(2,35),mE=Math.pow(2,42),EE=Math.pow(2,49),wE=Math.pow(2,56),SE=Math.pow(2,63);op.exports=function(t){return t<yE?1:t<gE?2:t<vE?3:t<xE?4:t<bE?5:t<mE?6:t<EE?7:t<wE?8:t<SE?9:10}});var Wa=E((sR,cp)=>{cp.exports={encode:ip(),decode:ap(),encodingLength:up()}});var xu=E((aR,lp)=>{"use strict";var fp=Wa(),{Buffer:_E}=Un(),hp=(t,e,r)=>{let i=fp.encode(t,e,r);return hp.bytes=fp.encode.bytes,e||_E.from(i)};lp.exports=hp});var xp=E((oR,Ya)=>{"use strict";var{Buffer:pp}=Un(),dp=yu(),yp=xu(),bu=8,gp=10*1024;function vp(t){t=t||{};let e=Math.max(t.poolSize||gp,t.minPoolSize||bu),r=t.lengthEncoder||yp;return async function*(n){let s=pp.alloc(e),a=0;for await(let o of n){r(o.length,s,a);let f=s.slice(a,a+r.bytes);a+=r.bytes,s.length-a<bu&&(s=pp.alloc(e),a=0),yield new dp().append(f).append(o)}}}vp.single=(t,e)=>{e=e||{};let r=e.lengthEncoder||yp;return new dp([r(t.length),t.slice()])};Ya.exports=vp;Ya.exports.MIN_POOL_SIZE=bu;Ya.exports.DEFAULT_POOL_SIZE=gp});var mu=E((uR,Ep)=>{"use strict";var bp=Wa(),{Buffer:IE}=Un(),BE=t=>new Proxy({},{get:(e,r)=>r[0]==="l"?t[r]:t.get(parseInt(r))}),mp=t=>{let e=bp.decode(IE.isBuffer(t)?t:BE(t));return mp.bytes=bp.decode.bytes,e};Ep.exports=mp});var Ip=E((cR,$a)=>{"use strict";var{Buffer:AE}=Un(),Eu=yu(),CE=mu(),wp=8,Sp=1024*1024*4,_p=AE.alloc(0),xi={LENGTH:"readLength",DATA:"readData"},TE={[xi.LENGTH]:(t,e,r,i)=>{e=e.append(t);let n;try{n=i.lengthDecoder(e)}catch(s){if(e.length>i.maxLengthLength)throw Object.assign(s,{message:"message length too long",code:"ERR_MSG_LENGTH_TOO_LONG"});if(s instanceof RangeError)return{mode:xi.LENGTH,buffer:e,chunk:void 0,state:void 0,data:void 0};throw s}if(n>i.maxDataLength)throw Object.assign(new Error("message data too long"),{code:"ERR_MSG_DATA_TOO_LONG"});return t=e.shallowSlice(i.lengthDecoder.bytes),e=new Eu,i.onLength&&i.onLength(n),n<=0?(i.onData&&i.onData(_p),{mode:xi.LENGTH,chunk:t,buffer:e,data:_p}):{mode:xi.DATA,chunk:t,buffer:e,state:{dataLength:n},data:void 0}},[xi.DATA]:(t,e,r,i)=>{if(e=e.append(t),!r)throw new Error("state is required");if(e.length<r.dataLength)return{mode:xi.DATA,buffer:e,state:r,chunk:void 0,data:void 0};let{dataLength:n}=r,s=e.shallowSlice(0,n),a=e.length>n?e.shallowSlice(n):void 0;return e=new Eu,i.onData&&i.onData(s),{mode:xi.LENGTH,chunk:a,buffer:e,state:void 0,data:s}}};function wu(t){t=t||{};let e={lengthDecoder:t.lengthDecoder||CE,maxLengthLength:t.maxLengthLength||wp,maxDataLength:t.maxDataLength||Sp,onLength:t.onLength,onData:t.onData};return async function*(i){let n=new Eu,s=xi.LENGTH,a;for await(let o of i){let f=o;for(;f;){let u=TE[s](f,n,a,e);s=u.mode,f=u.chunk,n=u.buffer,a=u.state,u.data&&(yield u.data)}}if(n.length)throw Object.assign(new Error("unexpected end of input"),{code:"ERR_UNEXPECTED_EOF"})}}wu.fromReader=(t,e)=>{let r=1,i={[Symbol.asyncIterator](){return this},next:async()=>{try{return await t.next(r)}catch(s){if(s.code==="ERR_UNDER_READ")return{done:!0,value:null};throw s}finally{r=1}}};return wu({...e||{},onLength:s=>{r=s}})(i)};$a.exports=wu;$a.exports.MAX_LENGTH_LENGTH=wp;$a.exports.MAX_DATA_LENGTH=Sp});var Cp=E((fR,Ap)=>{"use strict";var{Buffer:RE}=Un(),Bp=(t,e,r)=>(e=e||RE.allocUnsafe(4),e.writeInt32BE(t,r),e);Bp.bytes=4;Ap.exports=Bp});var Dp=E((hR,Rp)=>{"use strict";var Tp=t=>{if(t.length<4)throw RangeError("Could not decode int32BE");return t.readInt32BE(0)};Tp.bytes=4;Rp.exports=Tp});var Pp=E(rn=>{"use strict";rn.encode=xp();rn.decode=Ip();rn.varintEncode=xu();rn.varintDecode=mu();rn.int32BEEncode=Cp();rn.int32BEDecode=Dp()});var Np=E((dR,kp)=>{kp.exports=class{constructor(e){if(!(e>0)||(e-1&e)!=0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}}});var Mp=E((gR,Lp)=>{var Op=Np();Lp.exports=class{constructor(e){this.hwm=e||16,this.head=new Op(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){let r=this.head;this.head=r.next=new Op(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next){let r=this.tail.next;return this.tail.next=null,this.tail=r,this.tail.shift()}return e}isEmpty(){return this.head.isEmpty()}}});var Fp=E((vR,Kp)=>{var Su=Mp();Kp.exports=t=>{t=t||{};let e;typeof t=="function"?(e=t,t={}):e=t.onEnd;let r=new Su,i,n,s,a=()=>{if(!r.isEmpty()){if(t.writev){let y,g=[];for(;!r.isEmpty();){if(y=r.shift(),y.error)throw y.error;g.push(y.value)}return{done:y.done,value:g}}let p=r.shift();if(p.error)throw p.error;return p}return s?{done:!0}:new Promise((p,y)=>{n=g=>(n=null,g.error?y(g.error):t.writev&&!g.done?p({done:g.done,value:[g.value]}):p(g),i)})},o=p=>n?n(p):(r.push(p),i),f=p=>(r=new Su,n?n({error:p}):(r.push({error:p}),i)),u=p=>s?i:o({done:!1,value:p}),c=p=>s?i:(s=!0,p?f(p):o({done:!0})),h=()=>(r=new Su,c(),{done:!0}),l=p=>(c(p),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:a,return:h,throw:l,push:u,end:c},!e)return i;let d=i;return i={[Symbol.asyncIterator](){return this},next(){return d.next()},throw(p){return d.throw(p),e&&(e(p),e=null),{done:!0}},return(){return d.return(),e&&(e(),e=null),{done:!0}},push:u,end(p){return d.end(p),e&&(e(p),e=null),i}},i}});var qp=E((xR,Up)=>{Up.exports=function(e){if(e){if(typeof e[Symbol.iterator]=="function")return e[Symbol.iterator]();if(typeof e[Symbol.asyncIterator]=="function")return e[Symbol.asyncIterator]();if(typeof e.next=="function")return e}throw new Error("argument is not an iterator or iterable")}});var Gp=E((mR,Vp)=>{Vp.exports=class extends Error{constructor(e,r){super(e||"The operation was aborted");this.type="aborted",this.code=r||"ABORT_ERR"}}});var Wp=E((ER,nn)=>{var DE=qp(),_u=Gp(),Hp=(t,e,r)=>Iu(t,Array.isArray(e)?e:[{signal:e,options:r}]),Iu=(t,e)=>{t=DE(t),e=e.map(({signal:i,options:n})=>({signal:i,options:n||{}}));async function*r(){let i,n=()=>{i&&i()};for(let{signal:s}of e)s.addEventListener("abort",n);for(;;){let s;try{for(let{signal:o,options:f}of e)if(o.aborted){let{abortMessage:u,abortCode:c}=f;throw new _u(u,c)}let a=new Promise((o,f)=>{i=()=>{let{options:u}=e.find(({signal:l})=>l.aborted),{abortMessage:c,abortCode:h}=u;f(new _u(c,h))}});s=await Promise.race([a,t.next()]),i=null}catch(a){for(let{signal:u}of e)u.removeEventListener("abort",n);let o=e.find(({signal:u})=>u.aborted),f=a.type==="aborted"&&o;if(f&&o.options.onAbort&&await o.options.onAbort(t),typeof t.return=="function")try{let u=t.return();u instanceof Promise&&u.catch(c=>{o.options.onReturnError!=null&&o.options.onReturnError(c)})}catch(u){o.options.onReturnError!=null&&o.options.onReturnError(u)}if(f&&o.options.returnOnAbort)return;throw a}if(s.done)break;yield s.value}for(let{signal:s}of e)s.removeEventListener("abort",n)}return r()},zp=(t,e,r)=>jp(t,Array.isArray(e)?e:[{signal:e,options:r}]),jp=(t,e)=>r=>t(Iu(r,e)),PE=(t,e,r)=>kE(t,Array.isArray(e)?e:[{signal:e,options:r}]),kE=(t,e)=>({sink:jp(t.sink,e),source:Iu(t.source,e)});nn.exports=Hp;nn.exports.AbortError=_u;nn.exports.source=Hp;nn.exports.sink=zp;nn.exports.transform=zp;nn.exports.duplex=PE});var Jp=E((wR,Xp)=>{"use strict";var Yp=Is(),NE=Object.assign(Yp("libp2p-pubsub:peer-streams"),{error:Yp("libp2p-pubsub:peer-streams:err")}),{EventEmitter:OE}=B0(),$p=Pp(),LE=Fp(),{pipe:Qp}=C0(),{source:ME}=Wp(),Zp=class extends OE{constructor({id:e,protocol:r}){super();this.id=e,this.protocol=r,this._rawOutboundStream=null,this._rawInboundStream=null,this._inboundAbortController=new AbortController,this.outboundStream=null,this.inboundStream=null}get isReadable(){return Boolean(this.inboundStream)}get isWritable(){return Boolean(this.outboundStream)}write(e){if(!this.outboundStream){let r=this.id.toB58String();throw new Error("No writable connection to "+r)}this.outboundStream.push(e)}attachInboundStream(e){return this._rawInboundStream=e,this.inboundStream=ME(Qp(this._rawInboundStream,$p.decode()),this._inboundAbortController.signal,{returnOnAbort:!0}),this.emit("stream:inbound"),this.inboundStream}async attachOutboundStream(e){let r=this.outboundStream;this.outboundStream&&await this.outboundStream.end(),this._rawOutboundStream=e,this.outboundStream=LE({onEnd:i=>{this._rawOutboundStream&&this._rawOutboundStream.reset&&this._rawOutboundStream.reset(),this._rawOutboundStream=null,this.outboundStream=null,i&&this.emit("close")}}),Qp(this.outboundStream,$p.encode(),this._rawOutboundStream).catch(i=>{NE.error(i)}),r||this.emit("stream:outbound")}close(){this.outboundStream&&this.outboundStream.end(),this.inboundStream&&this._inboundAbortController.abort(),this._rawOutboundStream=null,this.outboundStream=null,this._rawInboundStream=null,this.inboundStream=null,this.emit("close")}};Xp.exports=Zp});var td=E(ed=>{"use strict";var KE={StrictSign:"StrictSign",StrictNoSign:"StrictNoSign"};ed.SignaturePolicy=KE});var Za=E((_R,rd)=>{"use strict";var Qa=65536;function FE(t){let e=new Uint8Array(t),r=0;if(t>0)if(t>Qa)for(;r<t;)r+Qa>t?(crypto.getRandomValues(e.subarray(r,r+(t-r))),r+=t-r):(crypto.getRandomValues(e.subarray(r,r+Qa)),r+=Qa);else crypto.getRandomValues(e);return e}rd.exports=FE});var nd=E((IR,id)=>{"use strict";var UE=Za(),qE=Oe();id.exports=function(t){if(isNaN(t)||t<=0)throw qE(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return UE(t)}});function VE(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),a=s.charCodeAt(0);if(r[a]!==255)throw new TypeError(s+" is ambiguous");r[a]=n}var o=t.length,f=t.charAt(0),u=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var y=0,g=0,v=0,x=p.length;v!==x&&p[v]===0;)v++,y++;for(var w=(x-v)*c+1>>>0,P=new Uint8Array(w);v!==x;){for(var B=p[v],S=0,G=w-1;(B!==0||S<g)&&G!==-1;G--,S++)B+=256*P[G]>>>0,P[G]=B%o>>>0,B=B/o>>>0;if(B!==0)throw new Error("Non-zero carry");g=S,v++}for(var z=w-g;z!==w&&P[z]===0;)z++;for(var se=f.repeat(y);z<w;++z)se+=t.charAt(P[z]);return se}function l(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var y=0;if(p[y]!==" "){for(var g=0,v=0;p[y]===f;)g++,y++;for(var x=(p.length-y)*u+1>>>0,w=new Uint8Array(x);p[y];){var P=r[p.charCodeAt(y)];if(P===255)return;for(var B=0,S=x-1;(P!==0||B<v)&&S!==-1;S--,B++)P+=o*w[S]>>>0,w[S]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");v=B,y++}if(p[y]!==" "){for(var G=x-v;G!==x&&w[G]===0;)G++;for(var z=new Uint8Array(g+(x-G)),se=g;G!==x;)z[se++]=w[G++];return z}}}function d(p){var y=l(p);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:l,decode:d}}var GE,HE,sd,ad=Ee(()=>{GE=VE,HE=GE,sd=HE});var AR,od,Wr,ud,cd,bi=Ee(()=>{AR=new Uint8Array(0),od=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},Wr=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},ud=t=>new TextEncoder().encode(t),cd=t=>new TextDecoder().decode(t)});var hd,ld,pd,dd,yd,Xa,mi,zE,jE,Ge,br=Ee(()=>{ad();bi();hd=class{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},ld=class{constructor(e,r,i){this.name=e,this.prefix=r,this.baseDecode=i}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){return dd(this,e)}},pd=class{constructor(e){this.decoders=e}or(e){return dd(this,e)}decode(e){let r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},dd=(t,e)=>new pd({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),yd=class{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new hd(e,r,i),this.decoder=new ld(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Xa=({name:t,prefix:e,encode:r,decode:i})=>new yd(t,e,r,i),mi=({prefix:t,name:e,alphabet:r})=>{let{encode:i,decode:n}=sd(r,e);return Xa({prefix:t,name:e,encode:i,decode:s=>Wr(n(s))})},zE=(t,e,r,i)=>{let n={};for(let c=0;c<e.length;++c)n[e[c]]=c;let s=t.length;for(;t[s-1]==="=";)--s;let a=new Uint8Array(s*r/8|0),o=0,f=0,u=0;for(let c=0;c<s;++c){let h=n[t[c]];if(h===void 0)throw new SyntaxError(`Non-${i} character`);f=f<<r|h,o+=r,o>=8&&(o-=8,a[u++]=255&f>>o)}if(o>=r||255&f<<8-o)throw new SyntaxError("Unexpected end of data");return a},jE=(t,e,r)=>{let i=e[e.length-1]==="=",n=(1<<r)-1,s="",a=0,o=0;for(let f=0;f<t.length;++f)for(o=o<<8|t[f],a+=8;a>r;)a-=r,s+=e[n&o>>a];if(a&&(s+=e[n&o<<r-a]),i)for(;s.length*r&7;)s+="=";return s},Ge=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>Xa({prefix:e,name:t,encode(n){return jE(n,i,r)},decode(n){return zE(n,i,r,t)}})});var Bu={};lt(Bu,{identity:()=>WE});var WE,gd=Ee(()=>{br();bi();WE=Xa({prefix:"\0",name:"identity",encode:t=>cd(t),decode:t=>ud(t)})});var Au={};lt(Au,{base2:()=>YE});var YE,vd=Ee(()=>{br();YE=Ge({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var Cu={};lt(Cu,{base8:()=>$E});var $E,xd=Ee(()=>{br();$E=Ge({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var Tu={};lt(Tu,{base10:()=>QE});var QE,bd=Ee(()=>{br();QE=mi({prefix:"9",name:"base10",alphabet:"0123456789"})});var Ja={};lt(Ja,{base16:()=>ZE,base16upper:()=>XE});var ZE,XE,Ru=Ee(()=>{br();ZE=Ge({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),XE=Ge({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var Ps={};lt(Ps,{base32:()=>zn,base32hex:()=>rw,base32hexpad:()=>nw,base32hexpadupper:()=>sw,base32hexupper:()=>iw,base32pad:()=>ew,base32padupper:()=>tw,base32upper:()=>JE,base32z:()=>aw});var zn,JE,ew,tw,rw,iw,nw,sw,aw,ks=Ee(()=>{br();zn=Ge({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),JE=Ge({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ew=Ge({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),tw=Ge({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),rw=Ge({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),iw=Ge({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),nw=Ge({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),sw=Ge({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),aw=Ge({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var eo={};lt(eo,{base36:()=>ow,base36upper:()=>uw});var ow,uw,Du=Ee(()=>{br();ow=mi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),uw=mi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var sn={};lt(sn,{base58btc:()=>mr,base58flickr:()=>cw});var mr,cw,an=Ee(()=>{br();mr=mi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),cw=mi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var Ei={};lt(Ei,{base64:()=>fw,base64pad:()=>hw,base64url:()=>lw,base64urlpad:()=>pw});var fw,hw,lw,pw,on=Ee(()=>{br();fw=Ge({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),hw=Ge({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),lw=Ge({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),pw=Ge({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});function Ed(t,e,r){e=e||[],r=r||0;for(var i=r;t>=vw;)e[r++]=t&255|md,t/=128;for(;t&gw;)e[r++]=t&255|md,t>>>=7;return e[r]=t|0,Ed.bytes=r-i+1,e}function Pu(t,e){var r=0,e=e||0,i=0,n=e,s,a=t.length;do{if(n>=a)throw Pu.bytes=0,new RangeError("Could not decode varint");s=t[n++],r+=i<28?(s&wd)<<i:(s&wd)*Math.pow(2,i),i+=7}while(s>=bw);return Pu.bytes=n-e,r}var dw,md,yw,gw,vw,xw,bw,wd,mw,Ew,ww,Sw,_w,Iw,Bw,Aw,Cw,Tw,Rw,Dw,Ns,Sd=Ee(()=>{dw=Ed,md=128,yw=127,gw=~yw,vw=Math.pow(2,31);xw=Pu,bw=128,wd=127;mw=Math.pow(2,7),Ew=Math.pow(2,14),ww=Math.pow(2,21),Sw=Math.pow(2,28),_w=Math.pow(2,35),Iw=Math.pow(2,42),Bw=Math.pow(2,49),Aw=Math.pow(2,56),Cw=Math.pow(2,63),Tw=function(t){return t<mw?1:t<Ew?2:t<ww?3:t<Sw?4:t<_w?5:t<Iw?6:t<Bw?7:t<Aw?8:t<Cw?9:10},Rw={encode:dw,decode:xw,encodingLength:Tw},Dw=Rw,Ns=Dw});var Os,jn,Wn,to=Ee(()=>{Sd();Os=t=>[Ns.decode(t),Ns.decode.bytes],jn=(t,e,r=0)=>(Ns.encode(t,e,r),e),Wn=t=>Ns.encodingLength(t)});var ro={};lt(ro,{Digest:()=>Yn,create:()=>wi,decode:()=>ku,equals:()=>Nu});var wi,ku,Nu,Yn,$n=Ee(()=>{bi();to();wi=(t,e)=>{let r=e.byteLength,i=Wn(t),n=i+Wn(r),s=new Uint8Array(n+r);return jn(t,s,0),jn(r,s,i),s.set(e,n),new Yn(t,r,e,s)},ku=t=>{let e=Wr(t),[r,i]=Os(e),[n,s]=Os(e.subarray(i)),a=e.subarray(i+s);if(a.byteLength!==n)throw new Error("Incorrect length");return new Yn(r,n,a,e)},Nu=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&od(t.bytes,e.bytes),Yn=class{constructor(e,r,i,n){this.code=e,this.size=r,this.digest=i,this.bytes=n}}});var Ou,Id,Lu=Ee(()=>{$n();Ou=({name:t,code:e,encode:r})=>new Id(t,e,r),Id=class{constructor(e,r,i){this.name=e,this.code=r,this.encode=i}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?wi(this.code,r):r.then(i=>wi(this.code,i))}else throw Error("Unknown type, must be binary type")}}});var qt={};lt(qt,{sha256:()=>Pw,sha512:()=>kw});var Ad,Pw,kw,rr=Ee(()=>{Lu();Ad=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Pw=Ou({name:"sha2-256",code:18,encode:Ad("SHA-256")}),kw=Ou({name:"sha2-512",code:19,encode:Ad("SHA-512")})});var Qn={};lt(Qn,{identity:()=>Lw});var Cd,Nw,Ow,Lw,Ls=Ee(()=>{bi();$n();Cd=0,Nw="identity",Ow=t=>wi(Cd,Wr(t)),Lw={code:Cd,name:Nw,digest:Ow}});var Td=Ee(()=>{bi()});var QR,ZR,Rd=Ee(()=>{QR=new TextEncoder,ZR=new TextDecoder});var kd={};lt(kd,{CID:()=>Je});var Je,Fw,Uw,qw,Ms,Vw,Dd,Pd,io,no,Gw,Hw,zw,Mu=Ee(()=>{to();$n();an();ks();bi();Je=class{constructor(e,r,i,n){this.code=r,this.version=e,this.multihash=i,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:no,byteLength:no,code:io,version:io,multihash:io,bytes:io,_baseCache:no,asCID:no})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==Ms)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Vw)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Je.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,i=wi(e,r);return Je.createV1(this.code,i)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&Nu(this.multihash,e.multihash)}toString(e){let{bytes:r,version:i,_baseCache:n}=this;switch(i){case 0:return Uw(r,n,e||mr.encoder);default:return qw(r,n,e||zn.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return Hw(/^0\.0/,zw),!!(e&&(e[Pd]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Je)return e;if(e!=null&&e.asCID===e){let{version:r,code:i,multihash:n,bytes:s}=e;return new Je(r,i,n,s||Dd(r,i,n.bytes))}else if(e!=null&&e[Pd]===!0){let{version:r,multihash:i,code:n}=e,s=ku(i);return Je.create(r,n,s)}else return null}static create(e,r,i){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==Ms)throw new Error(`Version 0 CID must use dag-pb (code: ${Ms}) block encoding`);return new Je(e,r,i,i.bytes)}case 1:{let n=Dd(e,r,i.bytes);return new Je(e,r,i,n)}default:throw new Error("Invalid version")}}static createV0(e){return Je.create(0,Ms,e)}static createV1(e,r){return Je.create(1,e,r)}static decode(e){let[r,i]=Je.decodeFirst(e);if(i.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=Je.inspectBytes(e),i=r.size-r.multihashSize,n=Wr(e.subarray(i,i+r.multihashSize));if(n.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=n.subarray(r.multihashSize-r.digestSize),a=new Yn(r.multihashCode,r.digestSize,s,n);return[r.version===0?Je.createV0(a):Je.createV1(r.codec,a),e.subarray(r.size)]}static inspectBytes(e){let r=0,i=()=>{let[h,l]=Os(e.subarray(r));return r+=l,h},n=i(),s=Ms;if(n===18?(n=0,r=0):n===1&&(s=i()),n!==0&&n!==1)throw new RangeError(`Invalid CID version ${n}`);let a=r,o=i(),f=i(),u=r+f,c=u-a;return{version:n,codec:s,multihashCode:o,digestSize:f,multihashSize:c,size:u}}static parse(e,r){let[i,n]=Fw(e,r),s=Je.decode(n);return s._baseCache.set(i,e),s}},Fw=(t,e)=>{switch(t[0]){case"Q":{let r=e||mr;return[mr.prefix,r.decode(`${mr.prefix}${t}`)]}case mr.prefix:{let r=e||mr;return[mr.prefix,r.decode(t)]}case zn.prefix:{let r=e||zn;return[zn.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},Uw=(t,e,r)=>{let{prefix:i}=r;if(i!==mr.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let n=e.get(i);if(n==null){let s=r.encode(t).slice(1);return e.set(i,s),s}else return n},qw=(t,e,r)=>{let{prefix:i}=r,n=e.get(i);if(n==null){let s=r.encode(t);return e.set(i,s),s}else return n},Ms=112,Vw=18,Dd=(t,e,r)=>{let i=Wn(t),n=i+Wn(e),s=new Uint8Array(n+r.byteLength);return jn(t,s,0),jn(e,s,i),s.set(r,n),s},Pd=Symbol.for("@ipld/js-cid/CID"),io={writable:!1,configurable:!1,enumerable:!0},no={writable:!1,enumerable:!1,configurable:!1},Gw="0.0.0-dev",Hw=(t,e)=>{if(t.test(Gw))console.warn(e);else throw new Error(e)},zw=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var Nd=Ee(()=>{Mu();to();bi();Lu();$n()});var Ku,a6,Od=Ee(()=>{gd();vd();xd();bd();Ru();ks();Du();an();on();rr();Ls();Td();Rd();Nd();Ku={...Bu,...Au,...Cu,...Tu,...Ja,...Ps,...eo,...sn,...Ei},a6={...qt,...Qn}});function Ld(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}var Md,Fu,jw,so,Uu=Ee(()=>{Od();Md=Ld("utf8","u",t=>{let e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),Fu=Ld("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),jw={utf8:Md,"utf-8":Md,hex:Ku.base16,latin1:Fu,ascii:Fu,binary:Fu,...Ku},so=jw});var dt={};lt(dt,{toString:()=>Ww});function Ww(t,e="utf8"){let r=so[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}var yt=Ee(()=>{Uu()});var nt={};lt(nt,{fromString:()=>Yw});function Yw(t,e="utf8"){let r=so[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}var st=Ee(()=>{Uu()});var oo=E((l6,Fd)=>{"use strict";var un=Xi(),ao=un.Reader,Kd=un.Writer,gt=un.util,Vt=un.roots["libp2p-crypto-keys"]||(un.roots["libp2p-crypto-keys"]={});Vt.KeyType=function(){var t={},e=Object.create(t);return e[t[0]="RSA"]=0,e[t[1]="Ed25519"]=1,e[t[2]="Secp256k1"]=2,e}();Vt.PublicKey=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.Type=0,t.prototype.Data=gt.newBuffer([]),t.encode=function(r,i){return i||(i=Kd.create()),i.uint32(8).int32(r.Type),i.uint32(18).bytes(r.Data),i},t.decode=function(r,i){r instanceof ao||(r=ao.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Vt.PublicKey;r.pos<n;){var a=r.uint32();switch(a>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;default:r.skipType(a&7);break}}if(!s.hasOwnProperty("Type"))throw gt.ProtocolError("missing required 'Type'",{instance:s});if(!s.hasOwnProperty("Data"))throw gt.ProtocolError("missing required 'Data'",{instance:s});return s},t.fromObject=function(r){if(r instanceof Vt.PublicKey)return r;var i=new Vt.PublicKey;switch(r.Type){case"RSA":case 0:i.Type=0;break;case"Ed25519":case 1:i.Type=1;break;case"Secp256k1":case 2:i.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?gt.base64.decode(r.Data,i.Data=gt.newBuffer(gt.base64.length(r.Data)),0):r.Data.length&&(i.Data=r.Data)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(n.Type=i.enums===String?"RSA":0,i.bytes===String?n.Data="":(n.Data=[],i.bytes!==Array&&(n.Data=gt.newBuffer(n.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(n.Type=i.enums===String?Vt.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(n.Data=i.bytes===String?gt.base64.encode(r.Data,0,r.Data.length):i.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,un.util.toJSONOptions)},t}();Vt.PrivateKey=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.Type=0,t.prototype.Data=gt.newBuffer([]),t.encode=function(r,i){return i||(i=Kd.create()),i.uint32(8).int32(r.Type),i.uint32(18).bytes(r.Data),i},t.decode=function(r,i){r instanceof ao||(r=ao.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Vt.PrivateKey;r.pos<n;){var a=r.uint32();switch(a>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;default:r.skipType(a&7);break}}if(!s.hasOwnProperty("Type"))throw gt.ProtocolError("missing required 'Type'",{instance:s});if(!s.hasOwnProperty("Data"))throw gt.ProtocolError("missing required 'Data'",{instance:s});return s},t.fromObject=function(r){if(r instanceof Vt.PrivateKey)return r;var i=new Vt.PrivateKey;switch(r.Type){case"RSA":case 0:i.Type=0;break;case"Ed25519":case 1:i.Type=1;break;case"Secp256k1":case 2:i.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?gt.base64.decode(r.Data,i.Data=gt.newBuffer(gt.base64.length(r.Data)),0):r.Data.length&&(i.Data=r.Data)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(n.Type=i.enums===String?"RSA":0,i.bytes===String?n.Data="":(n.Data=[],i.bytes!==Array&&(n.Data=gt.newBuffer(n.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(n.Type=i.enums===String?Vt.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(n.Data=i.bytes===String?gt.base64.encode(r.Data,0,r.Data.length):i.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,un.util.toJSONOptions)},t}();Fd.exports=Vt});var Se=E((p6,Ud)=>{Ud.exports={options:{usePureJavaScript:!1}}});var Gd=E((d6,Vd)=>{var qu={};Vd.exports=qu;var qd={};qu.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var i="";if(!(t instanceof Uint8Array))i=$w(t,e);else{var n=0,s=e.length,a=e.charAt(0),o=[0];for(n=0;n<t.length;++n){for(var f=0,u=t[n];f<o.length;++f)u+=o[f]<<8,o[f]=u%s,u=u/s|0;for(;u>0;)o.push(u%s),u=u/s|0}for(n=0;t[n]===0&&n<t.length-1;++n)i+=a;for(n=o.length-1;n>=0;--n)i+=e[o[n]]}if(r){var c=new RegExp(".{1,"+r+"}","g");i=i.match(c).join(`\r
`)}return i};qu.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=qd[e];if(!r){r=qd[e]=[];for(var i=0;i<e.length;++i)r[e.charCodeAt(i)]=i}t=t.replace(/\s/g,"");for(var n=e.length,s=e.charAt(0),a=[0],i=0;i<t.length;i++){var o=r[t.charCodeAt(i)];if(o===void 0)return;for(var f=0,u=o;f<a.length;++f)u+=a[f]*n,a[f]=u&255,u>>=8;for(;u>0;)a.push(u&255),u>>=8}for(var c=0;t[c]===s&&c<t.length-1;++c)a.push(0);return typeof Buffer!="undefined"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function $w(t,e){var r=0,i=e.length,n=e.charAt(0),s=[0];for(r=0;r<t.length();++r){for(var a=0,o=t.at(r);a<s.length;++a)o+=s[a]<<8,s[a]=o%i,o=o/i|0;for(;o>0;)s.push(o%i),o=o/i|0}var f="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)f+=n;for(r=s.length-1;r>=0;--r)f+=e[s[r]];return f}});var $e=E((y6,Wd)=>{var Hd=Se(),zd=Gd(),b=Wd.exports=Hd.util=Hd.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){b.nextTick=process.nextTick,typeof setImmediate=="function"?b.setImmediate=setImmediate:b.setImmediate=b.nextTick;return}if(typeof setImmediate=="function"){b.setImmediate=function(){return setImmediate.apply(void 0,arguments)},b.nextTick=function(o){return setImmediate(o)};return}if(b.setImmediate=function(o){setTimeout(o,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let o=function(f){if(f.source===window&&f.data===t){f.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(c){c()})}};var a=o,t="forge.setImmediate",e=[];b.setImmediate=function(f){e.push(f),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",o,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),i=!0,n=document.createElement("div"),e=[];new MutationObserver(function(){var f=e.slice();e.length=0,f.forEach(function(u){u()})}).observe(n,{attributes:!0});var s=b.setImmediate;b.setImmediate=function(f){Date.now()-r>15?(r=Date.now(),s(f)):(e.push(f),e.length===1&&n.setAttribute("a",i=!i))}}b.nextTick=b.setImmediate})();b.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;b.globalScope=function(){return b.isNodejs?globalThis:typeof self=="undefined"?window:self}();b.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};b.isArrayBuffer=function(t){return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer};b.isArrayBufferView=function(t){return t&&b.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function Ks(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}b.ByteBuffer=Vu;function Vu(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(b.isArrayBuffer(t)||b.isArrayBufferView(t))if(typeof Buffer!="undefined"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(i){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof Vu||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}b.ByteStringBuffer=Vu;var Qw=4096;b.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>Qw&&(this.data.substr(0,1),this._constructedStringLength=0)};b.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};b.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};b.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};b.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};b.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};b.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(b.encodeUtf8(t))};b.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};b.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};b.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};b.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};b.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};b.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};b.ByteStringBuffer.prototype.putInt=function(t,e){Ks(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};b.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};b.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};b.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};b.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};b.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};b.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};b.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};b.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};b.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};b.ByteStringBuffer.prototype.getInt=function(t){Ks(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};b.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};b.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};b.ByteStringBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};b.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};b.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};b.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};b.ByteStringBuffer.prototype.copy=function(){var t=b.createBuffer(this.data);return t.read=this.read,t};b.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};b.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};b.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};b.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};b.ByteStringBuffer.prototype.toString=function(){return b.decodeUtf8(this.bytes())};function Zw(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=b.isArrayBuffer(t),i=b.isArrayBufferView(t);if(r||i){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}b.DataBuffer=Zw;b.DataBuffer.prototype.length=function(){return this.write-this.read};b.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};b.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),i=new Uint8Array(this.length()+e);return i.set(r),this.data=new DataView(i.buffer),this};b.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};b.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};b.DataBuffer.prototype.putBytes=function(t,e){if(b.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),i=r.byteLength-r.byteOffset;this.accommodate(i);var n=new Uint8Array(this.data.buffer,this.write);return n.set(r),this.write+=i,this}if(b.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var n=new Uint8Array(this.data.buffer);return n.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof b.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&b.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var n=new Uint8Array(t.data.byteLength,this.write);return n.set(r),this.write+=r.byteLength,this}if(t instanceof b.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var s;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=b.binary.hex.decode(t,s,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=b.binary.base64.decode(t,s,this.write),this;if(e==="utf8"&&(t=b.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=b.binary.raw.decode(s),this;if(e==="utf16")return this.accommodate(t.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=b.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};b.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};b.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};b.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};b.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};b.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};b.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};b.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};b.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};b.DataBuffer.prototype.putInt=function(t,e){Ks(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};b.DataBuffer.prototype.putSignedInt=function(t,e){return Ks(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};b.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};b.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};b.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};b.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};b.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};b.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};b.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};b.DataBuffer.prototype.getInt=function(t){Ks(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};b.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};b.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};b.DataBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};b.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};b.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};b.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};b.DataBuffer.prototype.copy=function(){return new b.DataBuffer(this)};b.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};b.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};b.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};b.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};b.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return b.binary.raw.encode(e);if(t==="hex")return b.binary.hex.encode(e);if(t==="base64")return b.binary.base64.encode(e);if(t==="utf8")return b.text.utf8.decode(e);if(t==="utf16")return b.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};b.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=b.encodeUtf8(t)),new b.ByteBuffer(t)};b.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};b.xorBytes=function(t,e,r){for(var i="",n="",s="",a=0,o=0;r>0;--r,++a)n=t.charCodeAt(a)^e.charCodeAt(a),o>=10&&(i+=s,s="",o=0),s+=String.fromCharCode(n),++o;return i+=s,i};b.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};b.bytesToHex=function(t){return b.createBuffer(t).toHex()};b.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var Si="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_i=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],jd="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";b.encode64=function(t,e){for(var r="",i="",n,s,a,o=0;o<t.length;)n=t.charCodeAt(o++),s=t.charCodeAt(o++),a=t.charCodeAt(o++),r+=Si.charAt(n>>2),r+=Si.charAt((n&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Si.charAt((s&15)<<2|a>>6),r+=isNaN(a)?"=":Si.charAt(a&63)),e&&r.length>e&&(i+=r.substr(0,e)+`\r
`,r=r.substr(e));return i+=r,i};b.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,i,n,s,a=0;a<t.length;)r=_i[t.charCodeAt(a++)-43],i=_i[t.charCodeAt(a++)-43],n=_i[t.charCodeAt(a++)-43],s=_i[t.charCodeAt(a++)-43],e+=String.fromCharCode(r<<2|i>>4),n!==64&&(e+=String.fromCharCode((i&15)<<4|n>>2),s!==64&&(e+=String.fromCharCode((n&3)<<6|s)));return e};b.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};b.decodeUtf8=function(t){return decodeURIComponent(escape(t))};b.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:zd.encode,decode:zd.decode}};b.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};b.binary.raw.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(t.length)),r=r||0;for(var n=r,s=0;s<t.length;++s)i[n++]=t.charCodeAt(s);return e?n-r:i};b.binary.hex.encode=b.bytesToHex;b.binary.hex.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var n=0,s=r;for(t.length&1&&(n=1,i[s++]=parseInt(t[0],16));n<t.length;n+=2)i[s++]=parseInt(t.substr(n,2),16);return e?s-r:i};b.binary.base64.encode=function(t,e){for(var r="",i="",n,s,a,o=0;o<t.byteLength;)n=t[o++],s=t[o++],a=t[o++],r+=Si.charAt(n>>2),r+=Si.charAt((n&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Si.charAt((s&15)<<2|a>>6),r+=isNaN(a)?"=":Si.charAt(a&63)),e&&r.length>e&&(i+=r.substr(0,e)+`\r
`,r=r.substr(e));return i+=r,i};b.binary.base64.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var n,s,a,o,f=0,u=r;f<t.length;)n=_i[t.charCodeAt(f++)-43],s=_i[t.charCodeAt(f++)-43],a=_i[t.charCodeAt(f++)-43],o=_i[t.charCodeAt(f++)-43],i[u++]=n<<2|s>>4,a!==64&&(i[u++]=(s&15)<<4|a>>2,o!==64&&(i[u++]=(a&3)<<6|o));return e?u-r:i.subarray(0,u)};b.binary.base58.encode=function(t,e){return b.binary.baseN.encode(t,jd,e)};b.binary.base58.decode=function(t,e){return b.binary.baseN.decode(t,jd,e)};b.text={utf8:{},utf16:{}};b.text.utf8.encode=function(t,e,r){t=b.encodeUtf8(t);var i=e;i||(i=new Uint8Array(t.length)),r=r||0;for(var n=r,s=0;s<t.length;++s)i[n++]=t.charCodeAt(s);return e?n-r:i};b.text.utf8.decode=function(t){return b.decodeUtf8(String.fromCharCode.apply(null,t))};b.text.utf16.encode=function(t,e,r){var i=e;i||(i=new Uint8Array(t.length*2));var n=new Uint16Array(i.buffer);r=r||0;for(var s=r,a=r,o=0;o<t.length;++o)n[a++]=t.charCodeAt(o),s+=2;return e?s-r:i};b.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};b.deflate=function(t,e,r){if(e=b.decode64(t.deflate(b.encode64(e)).rval),r){var i=2,n=e.charCodeAt(1);n&32&&(i=6),e=e.substring(i,e.length-4)}return e};b.inflate=function(t,e,r){var i=t.inflate(b.encode64(e)).rval;return i===null?null:b.decode64(i)};var Gu=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var i;if(r===null?i=t.removeItem(e):(r=b.encode64(JSON.stringify(r)),i=t.setItem(e,r)),typeof i!="undefined"&&i.rval!==!0){var n=new Error(i.error.message);throw n.id=i.error.id,n.name=i.error.name,n}},Hu=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(b.decode64(r))),r},Xw=function(t,e,r,i){var n=Hu(t,e);n===null&&(n={}),n[r]=i,Gu(t,e,n)},Jw=function(t,e,r){var i=Hu(t,e);return i!==null&&(i=r in i?i[r]:null),i},eS=function(t,e,r){var i=Hu(t,e);if(i!==null&&r in i){delete i[r];var n=!0;for(var s in i){n=!1;break}n&&(i=null),Gu(t,e,i)}},tS=function(t,e){Gu(t,e,null)},uo=function(t,e,r){var i=null;typeof r=="undefined"&&(r=["web","flash"]);var n,s=!1,a=null;for(var o in r){n=r[o];try{if(n==="flash"||n==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");i=t.apply(this,e),s=n==="flash"}(n==="web"||n==="both")&&(e[0]=localStorage,i=t.apply(this,e),s=!0)}catch(f){a=f}if(s)break}if(!s)throw a;return i};b.setItem=function(t,e,r,i,n){uo(Xw,arguments,n)};b.getItem=function(t,e,r,i){return uo(Jw,arguments,i)};b.removeItem=function(t,e,r,i){uo(eS,arguments,i)};b.clearItems=function(t,e,r){uo(tS,arguments,r)};b.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};b.format=function(t){for(var e=/%./g,r,i,n=0,s=[],a=0;r=e.exec(t);){i=t.substring(a,e.lastIndex-2),i.length>0&&s.push(i),a=e.lastIndex;var o=r[0][1];switch(o){case"s":case"o":n<arguments.length?s.push(arguments[n+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+o+"?>")}}return s.push(t.substring(a)),s.join("")};b.formatNumber=function(t,e,r,i){var n=t,s=isNaN(e=Math.abs(e))?2:e,a=r===void 0?",":r,o=i===void 0?".":i,f=n<0?"-":"",u=parseInt(n=Math.abs(+n||0).toFixed(s),10)+"",c=u.length>3?u.length%3:0;return f+(c?u.substr(0,c)+o:"")+u.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+o)+(s?a+Math.abs(n-u).toFixed(s).slice(2):"")};b.formatSize=function(t){return t>=1073741824?t=b.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=b.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=b.formatNumber(t/1024,0)+" KiB":t=b.formatNumber(t,0)+" bytes",t};b.bytesFromIP=function(t){return t.indexOf(".")!==-1?b.bytesFromIPv4(t):t.indexOf(":")!==-1?b.bytesFromIPv6(t):null};b.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=b.createBuffer(),r=0;r<t.length;++r){var i=parseInt(t[r],10);if(isNaN(i))return null;e.putByte(i)}return e.getBytes()};b.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(a){return a.length===0&&++e,!0});for(var r=(8-t.length+e)*2,i=b.createBuffer(),n=0;n<8;++n){if(!t[n]||t[n].length===0){i.fillWithByte(0,r),r=0;continue}var s=b.hexToBytes(t[n]);s.length<2&&i.putByte(0),i.putBytes(s)}return i.getBytes()};b.bytesToIP=function(t){return t.length===4?b.bytesToIPv4(t):t.length===16?b.bytesToIPv6(t):null};b.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};b.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],i=0,n=0;n<t.length;n+=2){for(var s=b.bytesToHex(t[n]+t[n+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var a=r[r.length-1],o=e.length;!a||o!==a.end+1?r.push({start:o,end:o}):(a.end=o,a.end-a.start>r[i].end-r[i].start&&(i=r.length-1))}e.push(s)}if(r.length>0){var f=r[i];f.end-f.start>0&&(e.splice(f.start,f.end-f.start+1,""),f.start===0&&e.unshift(""),f.end===7&&e.push(""))}return e.join(":")};b.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in b&&!t.update)return e(null,b.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return b.cores=navigator.hardwareConcurrency,e(null,b.cores);if(typeof Worker=="undefined")return b.cores=1,e(null,b.cores);if(typeof Blob=="undefined")return b.cores=2,e(null,b.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){for(var o=Date.now(),f=o+4;Date.now()<f;);self.postMessage({st:o,et:f})})}.toString(),")()"],{type:"application/javascript"}));i([],5,16);function i(a,o,f){if(o===0){var u=Math.floor(a.reduce(function(c,h){return c+h},0)/a.length);return b.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,b.cores)}n(f,function(c,h){a.push(s(f,h)),i(a,o-1,f)})}function n(a,o){for(var f=[],u=[],c=0;c<a;++c){var h=new Worker(r);h.addEventListener("message",function(l){if(u.push(l.data),u.length===a){for(var d=0;d<a;++d)f[d].terminate();o(null,u)}}),f.push(h)}for(var c=0;c<a;++c)f[c].postMessage(c)}function s(a,o){for(var f=[],u=0;u<a;++u)for(var c=o[u],h=f[u]=[],l=0;l<a;++l)if(u!==l){var d=o[l];(c.st>d.st&&c.st<d.et||d.st>c.st&&d.st<c.et)&&h.push(l)}return f.reduce(function(p,y){return Math.max(p,y.length)},0)}}});var co=E((g6,Yd)=>{var Fs=Se();Fs.pki=Fs.pki||{};var zu=Yd.exports=Fs.pki.oids=Fs.oids=Fs.oids||{};function L(t,e){zu[t]=e,zu[e]=t}function ge(t,e){zu[t]=e}L("1.2.840.113549.1.1.1","rsaEncryption");L("1.2.840.113549.1.1.4","md5WithRSAEncryption");L("1.2.840.113549.1.1.5","sha1WithRSAEncryption");L("1.2.840.113549.1.1.7","RSAES-OAEP");L("1.2.840.113549.1.1.8","mgf1");L("1.2.840.113549.1.1.9","pSpecified");L("1.2.840.113549.1.1.10","RSASSA-PSS");L("1.2.840.113549.1.1.11","sha256WithRSAEncryption");L("1.2.840.113549.1.1.12","sha384WithRSAEncryption");L("1.2.840.113549.1.1.13","sha512WithRSAEncryption");L("1.3.101.112","EdDSA25519");L("1.2.840.10040.4.3","dsa-with-sha1");L("1.3.14.3.2.7","desCBC");L("1.3.14.3.2.26","sha1");L("1.3.14.3.2.29","sha1WithRSASignature");L("2.16.840.1.101.3.4.2.1","sha256");L("2.16.840.1.101.3.4.2.2","sha384");L("2.16.840.1.101.3.4.2.3","sha512");L("1.2.840.113549.2.5","md5");L("1.2.840.113549.1.7.1","data");L("1.2.840.113549.1.7.2","signedData");L("1.2.840.113549.1.7.3","envelopedData");L("1.2.840.113549.1.7.4","signedAndEnvelopedData");L("1.2.840.113549.1.7.5","digestedData");L("1.2.840.113549.1.7.6","encryptedData");L("1.2.840.113549.1.9.1","emailAddress");L("1.2.840.113549.1.9.2","unstructuredName");L("1.2.840.113549.1.9.3","contentType");L("1.2.840.113549.1.9.4","messageDigest");L("1.2.840.113549.1.9.5","signingTime");L("1.2.840.113549.1.9.6","counterSignature");L("1.2.840.113549.1.9.7","challengePassword");L("1.2.840.113549.1.9.8","unstructuredAddress");L("1.2.840.113549.1.9.14","extensionRequest");L("1.2.840.113549.1.9.20","friendlyName");L("1.2.840.113549.1.9.21","localKeyId");L("1.2.840.113549.1.9.22.1","x509Certificate");L("1.2.840.113549.1.12.10.1.1","keyBag");L("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");L("1.2.840.113549.1.12.10.1.3","certBag");L("1.2.840.113549.1.12.10.1.4","crlBag");L("1.2.840.113549.1.12.10.1.5","secretBag");L("1.2.840.113549.1.12.10.1.6","safeContentsBag");L("1.2.840.113549.1.5.13","pkcs5PBES2");L("1.2.840.113549.1.5.12","pkcs5PBKDF2");L("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");L("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");L("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");L("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");L("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");L("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");L("1.2.840.113549.2.7","hmacWithSHA1");L("1.2.840.113549.2.8","hmacWithSHA224");L("1.2.840.113549.2.9","hmacWithSHA256");L("1.2.840.113549.2.10","hmacWithSHA384");L("1.2.840.113549.2.11","hmacWithSHA512");L("1.2.840.113549.3.7","des-EDE3-CBC");L("2.16.840.1.101.3.4.1.2","aes128-CBC");L("2.16.840.1.101.3.4.1.22","aes192-CBC");L("2.16.840.1.101.3.4.1.42","aes256-CBC");L("2.5.4.3","commonName");L("2.5.4.4","surname");L("2.5.4.5","serialNumber");L("2.5.4.6","countryName");L("2.5.4.7","localityName");L("2.5.4.8","stateOrProvinceName");L("2.5.4.9","streetAddress");L("2.5.4.10","organizationName");L("2.5.4.11","organizationalUnitName");L("2.5.4.12","title");L("2.5.4.13","description");L("2.5.4.15","businessCategory");L("2.5.4.17","postalCode");L("2.5.4.42","givenName");L("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");L("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");L("2.16.840.1.113730.1.1","nsCertType");L("2.16.840.1.113730.1.13","nsComment");ge("2.5.29.1","authorityKeyIdentifier");ge("2.5.29.2","keyAttributes");ge("2.5.29.3","certificatePolicies");ge("2.5.29.4","keyUsageRestriction");ge("2.5.29.5","policyMapping");ge("2.5.29.6","subtreesConstraint");ge("2.5.29.7","subjectAltName");ge("2.5.29.8","issuerAltName");ge("2.5.29.9","subjectDirectoryAttributes");ge("2.5.29.10","basicConstraints");ge("2.5.29.11","nameConstraints");ge("2.5.29.12","policyConstraints");ge("2.5.29.13","basicConstraints");L("2.5.29.14","subjectKeyIdentifier");L("2.5.29.15","keyUsage");ge("2.5.29.16","privateKeyUsagePeriod");L("2.5.29.17","subjectAltName");L("2.5.29.18","issuerAltName");L("2.5.29.19","basicConstraints");ge("2.5.29.20","cRLNumber");ge("2.5.29.21","cRLReason");ge("2.5.29.22","expirationDate");ge("2.5.29.23","instructionCode");ge("2.5.29.24","invalidityDate");ge("2.5.29.25","cRLDistributionPoints");ge("2.5.29.26","issuingDistributionPoint");ge("2.5.29.27","deltaCRLIndicator");ge("2.5.29.28","issuingDistributionPoint");ge("2.5.29.29","certificateIssuer");ge("2.5.29.30","nameConstraints");L("2.5.29.31","cRLDistributionPoints");L("2.5.29.32","certificatePolicies");ge("2.5.29.33","policyMappings");ge("2.5.29.34","policyConstraints");L("2.5.29.35","authorityKeyIdentifier");ge("2.5.29.36","policyConstraints");L("2.5.29.37","extKeyUsage");ge("2.5.29.46","freshestCRL");ge("2.5.29.54","inhibitAnyPolicy");L("1.3.6.1.4.1.11129.2.4.2","timestampList");L("1.3.6.1.5.5.7.1.1","authorityInfoAccess");L("1.3.6.1.5.5.7.3.1","serverAuth");L("1.3.6.1.5.5.7.3.2","clientAuth");L("1.3.6.1.5.5.7.3.3","codeSigning");L("1.3.6.1.5.5.7.3.4","emailProtection");L("1.3.6.1.5.5.7.3.8","timeStamping")});var qs=E((v6,Qd)=>{var Le=Se();$e();co();var F=Qd.exports=Le.asn1=Le.asn1||{};F.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};F.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};F.create=function(t,e,r,i,n){if(Le.util.isArray(i)){for(var s=[],a=0;a<i.length;++a)i[a]!==void 0&&s.push(i[a]);i=s}var o={tagClass:t,type:e,constructed:r,composed:r||Le.util.isArray(i),value:i};return n&&"bitStringContents"in n&&(o.bitStringContents=n.bitStringContents,o.original=F.copy(o)),o};F.copy=function(t,e){var r;if(Le.util.isArray(t)){r=[];for(var i=0;i<t.length;++i)r.push(F.copy(t[i],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:F.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};F.equals=function(t,e,r){if(Le.util.isArray(t)){if(!Le.util.isArray(e)||t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(!F.equals(t[i],e[i]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var n=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&F.equals(t.value,e.value);return r&&r.includeBitStringContents&&(n=n&&t.bitStringContents===e.bitStringContents),n};F.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,i=e&128;return i?r=t.getInt((e&127)<<3):r=e,r}};function Us(t,e,r){if(r>e){var i=new Error("Too few bytes to parse DER.");throw i.available=t.length(),i.remaining=e,i.requested=r,i}}var rS=function(t,e){var r=t.getByte();if(e--,r!==128){var i,n=r&128;if(!n)i=r;else{var s=r&127;Us(t,e,s),i=t.getInt(s<<3)}if(i<0)throw new Error("Negative length: "+i);return i}};F.fromDer=function(t,e){return e===void 0&&(e={strict:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=Le.util.createBuffer(t)),fo(t,t.length(),0,e)};function fo(t,e,r,i){var n;Us(t,e,2);var s=t.getByte();e--;var a=s&192,o=s&31;n=t.length();var f=rS(t,e);if(e-=n-t.length(),f!==void 0&&f>e){if(i.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=f,u}f=e}var c,h,l=(s&32)==32;if(l)if(c=[],f===void 0)for(;;){if(Us(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}n=t.length(),c.push(fo(t,e,r+1,i)),e-=n-t.length()}else for(;f>0;)n=t.length(),c.push(fo(t,f,r+1,i)),e-=n-t.length(),f-=n-t.length();if(c===void 0&&a===F.Class.UNIVERSAL&&o===F.Type.BITSTRING&&(h=t.bytes(f)),c===void 0&&i.decodeBitStrings&&a===F.Class.UNIVERSAL&&o===F.Type.BITSTRING&&f>1){var d=t.read,p=e,y=0;if(o===F.Type.BITSTRING&&(Us(t,e,1),y=t.getByte(),e--),y===0)try{n=t.length();var g={verbose:i.verbose,strict:!0,decodeBitStrings:!0},v=fo(t,e,r+1,g),x=n-t.length();e-=x,o==F.Type.BITSTRING&&x++;var w=v.tagClass;x===f&&(w===F.Class.UNIVERSAL||w===F.Class.CONTEXT_SPECIFIC)&&(c=[v])}catch(B){}c===void 0&&(t.read=d,e=p)}if(c===void 0){if(f===void 0){if(i.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");f=e}if(o===F.Type.BMPSTRING)for(c="";f>0;f-=2)Us(t,e,2),c+=String.fromCharCode(t.getInt16()),e-=2;else c=t.getBytes(f)}var P=h===void 0?null:{bitStringContents:h};return F.create(a,o,l,c,P)}F.toDer=function(t){var e=Le.util.createBuffer(),r=t.tagClass|t.type,i=Le.util.createBuffer(),n=!1;if("bitStringContents"in t&&(n=!0,t.original&&(n=F.equals(t,t.original))),n)i.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:i.putByte(0);for(var s=0;s<t.value.length;++s)t.value[s]!==void 0&&i.putBuffer(F.toDer(t.value[s]))}else if(t.type===F.Type.BMPSTRING)for(var s=0;s<t.value.length;++s)i.putInt16(t.value.charCodeAt(s));else t.type===F.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)==0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)==128)?i.putBytes(t.value.substr(1)):i.putBytes(t.value);if(e.putByte(r),i.length()<=127)e.putByte(i.length()&127);else{var a=i.length(),o="";do o+=String.fromCharCode(a&255),a=a>>>8;while(a>0);e.putByte(o.length|128);for(var s=o.length-1;s>=0;--s)e.putByte(o.charCodeAt(s))}return e.putBuffer(i),e};F.oidToDer=function(t){var e=t.split("."),r=Le.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var i,n,s,a,o=2;o<e.length;++o){i=!0,n=[],s=parseInt(e[o],10);do a=s&127,s=s>>>7,i||(a|=128),n.push(a),i=!1;while(s>0);for(var f=n.length-1;f>=0;--f)r.putByte(n[f])}return r};F.derToOid=function(t){var e;typeof t=="string"&&(t=Le.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var i=0;t.length()>0;)r=t.getByte(),i=i<<7,r&128?i+=r&127:(e+="."+(i+r),i=0);return e};F.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var i=parseInt(t.substr(2,2),10)-1,n=parseInt(t.substr(4,2),10),s=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),o=0;if(t.length>11){var f=t.charAt(10),u=10;f!=="+"&&f!=="-"&&(o=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,i,n),e.setUTCHours(s,a,o,0),u&&(f=t.charAt(u),f==="+"||f==="-")){var c=parseInt(t.substr(u+1,2),10),h=parseInt(t.substr(u+4,2),10),l=c*60+h;l*=6e4,f==="+"?e.setTime(+e-l):e.setTime(+e+l)}return e};F.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),i=parseInt(t.substr(4,2),10)-1,n=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),o=parseInt(t.substr(12,2),10),f=0,u=0,c=!1;t.charAt(t.length-1)==="Z"&&(c=!0);var h=t.length-5,l=t.charAt(h);if(l==="+"||l==="-"){var d=parseInt(t.substr(h+1,2),10),p=parseInt(t.substr(h+4,2),10);u=d*60+p,u*=6e4,l==="+"&&(u*=-1),c=!0}return t.charAt(14)==="."&&(f=parseFloat(t.substr(14),10)*1e3),c?(e.setUTCFullYear(r,i,n),e.setUTCHours(s,a,o,f),e.setTime(+e+u)):(e.setFullYear(r,i,n),e.setHours(s,a,o,f)),e};F.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var i=0;i<r.length;++i)r[i].length<2&&(e+="0"),e+=r[i];return e+="Z",e};F.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var i=0;i<r.length;++i)r[i].length<2&&(e+="0"),e+=r[i];return e+="Z",e};F.integerToDer=function(t){var e=Le.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};F.derToInteger=function(t){typeof t=="string"&&(t=Le.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};F.validate=function(t,e,r,i){var n=!1;if((t.tagClass===e.tagClass||typeof e.tagClass=="undefined")&&(t.type===e.type||typeof e.type=="undefined"))if(t.constructed===e.constructed||typeof e.constructed=="undefined"){if(n=!0,e.value&&Le.util.isArray(e.value))for(var s=0,a=0;n&&a<e.value.length;++a)n=e.value[a].optional||!1,t.value[s]&&(n=F.validate(t.value[s],e.value[a],r,i),n?++s:e.value[a].optional&&(n=!0)),!n&&i&&i.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(n&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var o;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var f=t.bitStringContents.charCodeAt(0);if(f!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else i&&i.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else i&&(t.tagClass!==e.tagClass&&i.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&i.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return n};var $d=/[^\\u0000-\\u00ff]/;F.prettyPrint=function(t,e,r){var i="";e=e||0,r=r||2,e>0&&(i+=`
`);for(var n="",s=0;s<e*r;++s)n+=" ";switch(i+=n+"Tag: ",t.tagClass){case F.Class.UNIVERSAL:i+="Universal:";break;case F.Class.APPLICATION:i+="Application:";break;case F.Class.CONTEXT_SPECIFIC:i+="Context-Specific:";break;case F.Class.PRIVATE:i+="Private:";break}if(t.tagClass===F.Class.UNIVERSAL)switch(i+=t.type,t.type){case F.Type.NONE:i+=" (None)";break;case F.Type.BOOLEAN:i+=" (Boolean)";break;case F.Type.INTEGER:i+=" (Integer)";break;case F.Type.BITSTRING:i+=" (Bit string)";break;case F.Type.OCTETSTRING:i+=" (Octet string)";break;case F.Type.NULL:i+=" (Null)";break;case F.Type.OID:i+=" (Object Identifier)";break;case F.Type.ODESC:i+=" (Object Descriptor)";break;case F.Type.EXTERNAL:i+=" (External or Instance of)";break;case F.Type.REAL:i+=" (Real)";break;case F.Type.ENUMERATED:i+=" (Enumerated)";break;case F.Type.EMBEDDED:i+=" (Embedded PDV)";break;case F.Type.UTF8:i+=" (UTF8)";break;case F.Type.ROID:i+=" (Relative Object Identifier)";break;case F.Type.SEQUENCE:i+=" (Sequence)";break;case F.Type.SET:i+=" (Set)";break;case F.Type.PRINTABLESTRING:i+=" (Printable String)";break;case F.Type.IA5String:i+=" (IA5String (ASCII))";break;case F.Type.UTCTIME:i+=" (UTC time)";break;case F.Type.GENERALIZEDTIME:i+=" (Generalized time)";break;case F.Type.BMPSTRING:i+=" (BMP String)";break}else i+=t.type;if(i+=`
`,i+=n+"Constructed: "+t.constructed+`
`,t.composed){for(var a=0,o="",s=0;s<t.value.length;++s)t.value[s]!==void 0&&(a+=1,o+=F.prettyPrint(t.value[s],e+1,r),s+1<t.value.length&&(o+=","));i+=n+"Sub values: "+a+o}else{if(i+=n+"Value: ",t.type===F.Type.OID){var f=F.derToOid(t.value);i+=f,Le.pki&&Le.pki.oids&&f in Le.pki.oids&&(i+=" ("+Le.pki.oids[f]+") ")}if(t.type===F.Type.INTEGER)try{i+=F.derToInteger(t.value)}catch(c){i+="0x"+Le.util.bytesToHex(t.value)}else if(t.type===F.Type.BITSTRING){if(t.value.length>1?i+="0x"+Le.util.bytesToHex(t.value.slice(1)):i+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?i+=" (1 unused bit shown)":u>1&&(i+=" ("+u+" unused bits shown)")}}else t.type===F.Type.OCTETSTRING?($d.test(t.value)||(i+="("+t.value+") "),i+="0x"+Le.util.bytesToHex(t.value)):t.type===F.Type.UTF8?i+=Le.util.decodeUtf8(t.value):t.type===F.Type.PRINTABLESTRING||t.type===F.Type.IA5String?i+=t.value:$d.test(t.value)?i+="0x"+Le.util.bytesToHex(t.value):t.value.length===0?i+="[null]":i+=t.value}return i}});var Wu=E((x6,Zd)=>{var at=Se();$e();Zd.exports=at.cipher=at.cipher||{};at.cipher.algorithms=at.cipher.algorithms||{};at.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=at.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new at.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};at.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=at.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new at.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};at.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),at.cipher.algorithms[t]=e};at.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in at.cipher.algorithms?at.cipher.algorithms[t]:null};var ju=at.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};ju.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=at.util.createBuffer(),this.output=t.output||at.util.createBuffer(),this.mode.start(e)};ju.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};ju.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var $u=E((b6,Xd)=>{var ot=Se();$e();ot.cipher=ot.cipher||{};var te=Xd.exports=ot.cipher.modes=ot.cipher.modes||{};te.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};te.ecb.prototype.start=function(t){};te.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i])};te.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i])};te.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};te.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),i=t.at(r-1);return i>this.blockSize<<2?!1:(t.truncate(i),!0)};te.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};te.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=ho(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};te.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=this._prev[i]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]);this._prev=this._outBlock};te.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._prev[i]^this._outBlock[i]);this._prev=this._inBlock.slice(0)};te.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};te.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),i=t.at(r-1);return i>this.blockSize<<2?!1:(t.truncate(i),!0)};te.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=ot.util.createBuffer(),this._partialBytes=0};te.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=ho(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};te.cfb.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32()^this._outBlock[n],e.putInt32(this._inBlock[n]);return}var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialBlock[n]=t.getInt32()^this._outBlock[n],this._partialOutput.putInt32(this._partialBlock[n]);if(s>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};te.cfb.prototype.decrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32(),e.putInt32(this._inBlock[n]^this._outBlock[n]);return}var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialBlock[n]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[n]^this._outBlock[n]);if(s>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};te.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=ot.util.createBuffer(),this._partialBytes=0};te.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=ho(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};te.ofb.prototype.encrypt=function(t,e,r){var i=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)e.putInt32(t.getInt32()^this._outBlock[n]),this._inBlock[n]=this._outBlock[n];return}var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._outBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};te.ofb.prototype.decrypt=te.ofb.prototype.encrypt;te.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=ot.util.createBuffer(),this._partialBytes=0};te.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=ho(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};te.ctr.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize)for(var n=0;n<this._ints;++n)e.putInt32(t.getInt32()^this._outBlock[n]);else{var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}lo(this._inBlock)};te.ctr.prototype.decrypt=te.ctr.prototype.encrypt;te.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=ot.util.createBuffer(),this._partialBytes=0,this._R=3774873600};te.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=ot.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=ot.util.createBuffer(t.additionalData):r=ot.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=ot.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var i=e.length();if(i===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Yu(i*8)))}this._inBlock=this._j0.slice(0),lo(this._inBlock),this._partialBytes=0,r=ot.util.createBuffer(r),this._aDataLength=Yu(r.length()*8);var n=r.length()%this.blockSize;for(n&&r.fillWithByte(0,this.blockSize-n),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};te.gcm.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]^=t.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s<=0||r){if(r){var a=i%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var n=0;n<this._ints;++n)this._outBlock[n]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),lo(this._inBlock)};te.gcm.prototype.decrypt=function(t,e,r){var i=t.length();if(i<this.blockSize&&!(r&&i>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),lo(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]^this._hashBlock[n]);i<this.blockSize?this._cipherLength+=i%this.blockSize:this._cipherLength+=this.blockSize};te.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=ot.util.createBuffer();var i=this._aDataLength.concat(Yu(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,i);var n=[];this.cipher.encrypt(this._j0,n);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^n[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};te.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],i=e.slice(0),n=0;n<128;++n){var s=t[n/32|0]&1<<31-n%32;s&&(r[0]^=i[0],r[1]^=i[1],r[2]^=i[2],r[3]^=i[3]),this.pow(i,i)}return r};te.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,i=3;i>0;--i)e[i]=t[i]>>>1|(t[i-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};te.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var i=r/8|0,n=t[i]>>>(7-r%8)*4&15,s=this._m[r][n];e[0]^=s[0],e[1]^=s[1],e[2]^=s[2],e[3]^=s[3]}return e};te.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};te.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,i=4*r,n=16*r,s=new Array(n),a=0;a<n;++a){var o=[0,0,0,0],f=a/i|0,u=(i-1-a%i)*e;o[f]=1<<e-1<<u,s[a]=this.generateSubHashTable(this.multiply(o,t),e)}return s};te.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,i=r>>>1,n=new Array(r);n[i]=t.slice(0);for(var s=i>>>1;s>0;)this.pow(n[2*s],n[s]=[]),s>>=1;for(s=2;s<i;){for(var a=1;a<s;++a){var o=n[s],f=n[a];n[s+a]=[o[0]^f[0],o[1]^f[1],o[2]^f[2],o[3]^f[3]]}s*=2}for(n[0]=[0,0,0,0],s=i+1;s<r;++s){var u=n[s^i];n[s]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return n};function ho(t,e){if(typeof t=="string"&&(t=ot.util.createBuffer(t)),ot.util.isArray(t)&&t.length>4){var r=t;t=ot.util.createBuffer();for(var i=0;i<r.length;++i)t.putByte(r[i])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!ot.util.isArray(t)){for(var n=[],s=e/4,i=0;i<s;++i)n.push(t.getInt32());t=n}return t}function lo(t){t[t.length-1]=t[t.length-1]+1&4294967295}function Yu(t){return[t/4294967296|0,t&4294967295]}});var Ju=E((m6,ry)=>{var De=Se();Wu();$u();$e();ry.exports=De.aes=De.aes||{};De.aes.startEncrypting=function(t,e,r,i){var n=po({key:t,output:r,decrypt:!1,mode:i});return n.start(e),n};De.aes.createEncryptionCipher=function(t,e){return po({key:t,output:null,decrypt:!1,mode:e})};De.aes.startDecrypting=function(t,e,r,i){var n=po({key:t,output:r,decrypt:!0,mode:i});return n.start(e),n};De.aes.createDecryptionCipher=function(t,e){return po({key:t,output:null,decrypt:!0,mode:e})};De.aes.Algorithm=function(t,e){Qu||ey();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(i,n){return Xu(r._w,i,n,!1)},decrypt:function(i,n){return Xu(r._w,i,n,!0)}}}),r._init=!1};De.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=De.util.createBuffer(e);else if(De.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=De.util.createBuffer();for(var i=0;i<r.length;++i)e.putByte(r[i])}if(!De.util.isArray(e)){r=e,e=[];var n=r.length();if(n===16||n===24||n===32){n=n>>>2;for(var i=0;i<n;++i)e.push(r.getInt32())}}if(!De.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=ty(e,t.decrypt&&!a),this._init=!0}};De.aes._expandKey=function(t,e){return Qu||ey(),ty(t,e)};De.aes._updateBlock=Xu;Zn("AES-ECB",De.cipher.modes.ecb);Zn("AES-CBC",De.cipher.modes.cbc);Zn("AES-CFB",De.cipher.modes.cfb);Zn("AES-OFB",De.cipher.modes.ofb);Zn("AES-CTR",De.cipher.modes.ctr);Zn("AES-GCM",De.cipher.modes.gcm);function Zn(t,e){var r=function(){return new De.aes.Algorithm(t,e)};De.cipher.registerAlgorithm(t,r)}var Qu=!1,Xn=4,_t,Zu,Jd,cn,ir;function ey(){Qu=!0,Jd=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;_t=new Array(256),Zu=new Array(256),cn=new Array(4),ir=new Array(4);for(var e=0;e<4;++e)cn[e]=new Array(256),ir[e]=new Array(256);for(var r=0,i=0,n,s,a,o,f,u,c,e=0;e<256;++e){o=i^i<<1^i<<2^i<<3^i<<4,o=o>>8^o&255^99,_t[r]=o,Zu[o]=r,f=t[o],n=t[r],s=t[n],a=t[s],u=f<<24^o<<16^o<<8^(o^f),c=(n^s^a)<<24^(r^a)<<16^(r^s^a)<<8^(r^n^a);for(var h=0;h<4;++h)cn[h][r]=u,ir[h][o]=c,u=u<<24|u>>>8,c=c<<24|c>>>8;r===0?r=i=1:(r=n^t[t[t[n^a]]],i^=t[t[i]])}}function ty(t,e){for(var r=t.slice(0),i,n=1,s=r.length,a=s+6+1,o=Xn*a,f=s;f<o;++f)i=r[f-1],f%s==0?(i=_t[i>>>16&255]<<24^_t[i>>>8&255]<<16^_t[i&255]<<8^_t[i>>>24]^Jd[n]<<24,n++):s>6&&f%s==4&&(i=_t[i>>>24]<<24^_t[i>>>16&255]<<16^_t[i>>>8&255]<<8^_t[i&255]),r[f]=r[f-s]^i;if(e){var u,c=ir[0],h=ir[1],l=ir[2],d=ir[3],p=r.slice(0);o=r.length;for(var f=0,y=o-Xn;f<o;f+=Xn,y-=Xn)if(f===0||f===o-Xn)p[f]=r[y],p[f+1]=r[y+3],p[f+2]=r[y+2],p[f+3]=r[y+1];else for(var g=0;g<Xn;++g)u=r[y+g],p[f+(3&-g)]=c[_t[u>>>24]]^h[_t[u>>>16&255]]^l[_t[u>>>8&255]]^d[_t[u&255]];r=p}return r}function Xu(t,e,r,i){var n=t.length/4-1,s,a,o,f,u;i?(s=ir[0],a=ir[1],o=ir[2],f=ir[3],u=Zu):(s=cn[0],a=cn[1],o=cn[2],f=cn[3],u=_t);var c,h,l,d,p,y,g;c=e[0]^t[0],h=e[i?3:1]^t[1],l=e[2]^t[2],d=e[i?1:3]^t[3];for(var v=3,x=1;x<n;++x)p=s[c>>>24]^a[h>>>16&255]^o[l>>>8&255]^f[d&255]^t[++v],y=s[h>>>24]^a[l>>>16&255]^o[d>>>8&255]^f[c&255]^t[++v],g=s[l>>>24]^a[d>>>16&255]^o[c>>>8&255]^f[h&255]^t[++v],d=s[d>>>24]^a[c>>>16&255]^o[h>>>8&255]^f[l&255]^t[++v],c=p,h=y,l=g;r[0]=u[c>>>24]<<24^u[h>>>16&255]<<16^u[l>>>8&255]<<8^u[d&255]^t[++v],r[i?3:1]=u[h>>>24]<<24^u[l>>>16&255]<<16^u[d>>>8&255]<<8^u[c&255]^t[++v],r[2]=u[l>>>24]<<24^u[d>>>16&255]<<16^u[c>>>8&255]<<8^u[h&255]^t[++v],r[i?1:3]=u[d>>>24]<<24^u[c>>>16&255]<<16^u[h>>>8&255]<<8^u[l&255]^t[++v]}function po(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,i;t.decrypt?i=De.cipher.createDecipher(r,t.key):i=De.cipher.createCipher(r,t.key);var n=i.start;return i.start=function(s,a){var o=null;a instanceof De.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=s,n.call(i,a)},i}});var sy=E((E6,ny)=>{var Me=Se();Wu();$u();$e();ny.exports=Me.des=Me.des||{};Me.des.startEncrypting=function(t,e,r,i){var n=yo({key:t,output:r,decrypt:!1,mode:i||(e===null?"ECB":"CBC")});return n.start(e),n};Me.des.createEncryptionCipher=function(t,e){return yo({key:t,output:null,decrypt:!1,mode:e})};Me.des.startDecrypting=function(t,e,r,i){var n=yo({key:t,output:r,decrypt:!0,mode:i||(e===null?"ECB":"CBC")});return n.start(e),n};Me.des.createDecryptionCipher=function(t,e){return yo({key:t,output:null,decrypt:!0,mode:e})};Me.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(i,n){return iy(r._keys,i,n,!1)},decrypt:function(i,n){return iy(r._keys,i,n,!0)}}}),r._init=!1};Me.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Me.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=hS(e),this._init=!0}};Er("DES-ECB",Me.cipher.modes.ecb);Er("DES-CBC",Me.cipher.modes.cbc);Er("DES-CFB",Me.cipher.modes.cfb);Er("DES-OFB",Me.cipher.modes.ofb);Er("DES-CTR",Me.cipher.modes.ctr);Er("3DES-ECB",Me.cipher.modes.ecb);Er("3DES-CBC",Me.cipher.modes.cbc);Er("3DES-CFB",Me.cipher.modes.cfb);Er("3DES-OFB",Me.cipher.modes.ofb);Er("3DES-CTR",Me.cipher.modes.ctr);function Er(t,e){var r=function(){return new Me.des.Algorithm(t,e)};Me.cipher.registerAlgorithm(t,r)}var iS=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],nS=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],sS=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],aS=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],oS=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],uS=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],cS=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],fS=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function hS(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],n=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],f=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],c=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],l=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],d=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],p=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,g=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],x=0,w,P=0;P<y;P++){var B=t.getInt32(),S=t.getInt32();w=(B>>>4^S)&252645135,S^=w,B^=w<<4,w=(S>>>-16^B)&65535,B^=w,S^=w<<-16,w=(B>>>2^S)&858993459,S^=w,B^=w<<2,w=(S>>>-16^B)&65535,B^=w,S^=w<<-16,w=(B>>>1^S)&1431655765,S^=w,B^=w<<1,w=(S>>>8^B)&16711935,B^=w,S^=w<<8,w=(B>>>1^S)&1431655765,S^=w,B^=w<<1,w=B<<8|S>>>20&240,B=S<<24|S<<8&16711680|S>>>8&65280|S>>>24&240,S=w;for(var G=0;G<v.length;++G){v[G]?(B=B<<2|B>>>26,S=S<<2|S>>>26):(B=B<<1|B>>>27,S=S<<1|S>>>27),B&=-15,S&=-15;var z=e[B>>>28]|r[B>>>24&15]|i[B>>>20&15]|n[B>>>16&15]|s[B>>>12&15]|a[B>>>8&15]|o[B>>>4&15],se=f[S>>>28]|u[S>>>24&15]|c[S>>>20&15]|h[S>>>16&15]|l[S>>>12&15]|d[S>>>8&15]|p[S>>>4&15];w=(se>>>16^z)&65535,g[x++]=z^w,g[x++]=se^w<<16}}return g}function iy(t,e,r,i){var n=t.length===32?3:9,s;n===3?s=i?[30,-2,-2]:[0,32,2]:s=i?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,o=e[0],f=e[1];a=(o>>>4^f)&252645135,f^=a,o^=a<<4,a=(o>>>16^f)&65535,f^=a,o^=a<<16,a=(f>>>2^o)&858993459,o^=a,f^=a<<2,a=(f>>>8^o)&16711935,o^=a,f^=a<<8,a=(o>>>1^f)&1431655765,f^=a,o^=a<<1,o=o<<1|o>>>31,f=f<<1|f>>>31;for(var u=0;u<n;u+=3){for(var c=s[u+1],h=s[u+2],l=s[u];l!=c;l+=h){var d=f^t[l],p=(f>>>4|f<<28)^t[l+1];a=o,o=f,f=a^(nS[d>>>24&63]|aS[d>>>16&63]|uS[d>>>8&63]|fS[d&63]|iS[p>>>24&63]|sS[p>>>16&63]|oS[p>>>8&63]|cS[p&63])}a=o,o=f,f=a}o=o>>>1|o<<31,f=f>>>1|f<<31,a=(o>>>1^f)&1431655765,f^=a,o^=a<<1,a=(f>>>8^o)&16711935,o^=a,f^=a<<8,a=(f>>>2^o)&858993459,o^=a,f^=a<<2,a=(o>>>16^f)&65535,f^=a,o^=a<<16,a=(o>>>4^f)&252645135,f^=a,o^=a<<4,r[0]=o,r[1]=f}function yo(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,i;t.decrypt?i=Me.cipher.createDecipher(r,t.key):i=Me.cipher.createCipher(r,t.key);var n=i.start;return i.start=function(s,a){var o=null;a instanceof Me.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=s,n.call(i,a)},i}});var fn=E((w6,ay)=>{var go=Se();ay.exports=go.md=go.md||{};go.md.algorithms=go.md.algorithms||{}});var uy=E((S6,oy)=>{var Yr=Se();fn();$e();var lS=oy.exports=Yr.hmac=Yr.hmac||{};lS.create=function(){var t=null,e=null,r=null,i=null,n={};return n.start=function(s,a){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in Yr.md.algorithms)e=Yr.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else e=s;if(a===null)a=t;else{if(typeof a=="string")a=Yr.util.createBuffer(a);else if(Yr.util.isArray(a)){var o=a;a=Yr.util.createBuffer();for(var f=0;f<o.length;++f)a.putByte(o[f])}var u=a.length();u>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),r=Yr.util.createBuffer(),i=Yr.util.createBuffer(),u=a.length();for(var f=0;f<u;++f){var o=a.at(f);r.putByte(54^o),i.putByte(92^o)}if(u<e.blockLength)for(var o=e.blockLength-u,f=0;f<o;++f)r.putByte(54),i.putByte(92);t=a,r=r.bytes(),i=i.bytes()}e.start(),e.update(r)},n.update=function(s){e.update(s)},n.getMac=function(){var s=e.digest().bytes();return e.start(),e.update(i),e.update(s),e.digest()},n.digest=n.getMac,n}});var $r=E(()=>{});var fy=E((B6,cy)=>{var It=Se();uy();fn();$e();var pS=It.pkcs5=It.pkcs5||{},Qr;It.util.isNodejs&&!It.options.usePureJavaScript&&(Qr=$r());cy.exports=It.pbkdf2=pS.pbkdf2=function(t,e,r,i,n,s){if(typeof n=="function"&&(s=n,n=null),It.util.isNodejs&&!It.options.usePureJavaScript&&Qr.pbkdf2&&(n===null||typeof n!="object")&&(Qr.pbkdf2Sync.length>4||!n||n==="sha1"))return typeof n!="string"&&(n="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),s?Qr.pbkdf2Sync.length===4?Qr.pbkdf2(t,e,r,i,function(w,P){if(w)return s(w);s(null,P.toString("binary"))}):Qr.pbkdf2(t,e,r,i,n,function(w,P){if(w)return s(w);s(null,P.toString("binary"))}):Qr.pbkdf2Sync.length===4?Qr.pbkdf2Sync(t,e,r,i).toString("binary"):Qr.pbkdf2Sync(t,e,r,i,n).toString("binary");if((typeof n=="undefined"||n===null)&&(n="sha1"),typeof n=="string"){if(!(n in It.md.algorithms))throw new Error("Unknown hash algorithm: "+n);n=It.md[n].create()}var a=n.digestLength;if(i>4294967295*a){var o=new Error("Derived key is too long.");if(s)return s(o);throw o}var f=Math.ceil(i/a),u=i-(f-1)*a,c=It.hmac.create();c.start(n,t);var h="",l,d,p;if(!s){for(var y=1;y<=f;++y){c.start(null,null),c.update(e),c.update(It.util.int32ToBytes(y)),l=p=c.digest().getBytes();for(var g=2;g<=r;++g)c.start(null,null),c.update(p),d=c.digest().getBytes(),l=It.util.xorBytes(l,d,a),p=d;h+=y<f?l:l.substr(0,u)}return h}var y=1,g;function v(){if(y>f)return s(null,h);c.start(null,null),c.update(e),c.update(It.util.int32ToBytes(y)),l=p=c.digest().getBytes(),g=2,x()}function x(){if(g<=r)return c.start(null,null),c.update(p),d=c.digest().getBytes(),l=It.util.xorBytes(l,d,a),p=d,++g,It.util.setImmediate(x);h+=y<f?l:l.substr(0,u),++y,v()}v()}});var py=E((A6,ly)=>{var vo=Se();$e();var hy=ly.exports=vo.pem=vo.pem||{};hy.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,i;if(t.procType&&(i={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=xo(i)),t.contentDomain&&(i={name:"Content-Domain",values:[t.contentDomain]},r+=xo(i)),t.dekInfo&&(i={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&i.values.push(t.dekInfo.parameters),r+=xo(i)),t.headers)for(var n=0;n<t.headers.length;++n)r+=xo(t.headers[n]);return t.procType&&(r+=`\r
`),r+=vo.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};hy.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,i=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,n=/\r?\n/,s;s=r.exec(t),!!s;){var a=s[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var o={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:vo.util.decode64(s[3])};if(e.push(o),!!s[2]){for(var f=s[2].split(n),u=0;s&&u<f.length;){for(var c=f[u].replace(/\s+$/,""),h=u+1;h<f.length;++h){var l=f[h];if(!/\s/.test(l[0]))break;c+=l,u=h}if(s=c.match(i),s){for(var d={name:s[1],values:[]},p=s[2].split(","),y=0;y<p.length;++y)d.values.push(dS(p[y]));if(o.procType)if(!o.contentDomain&&d.name==="Content-Domain")o.contentDomain=p[0]||"";else if(!o.dekInfo&&d.name==="DEK-Info"){if(d.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:p[0],parameters:p[1]||null}}else o.headers.push(d);else{if(d.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(d.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:p[0],type:p[1]}}}++u}if(o.procType==="ENCRYPTED"&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function xo(t){for(var e=t.name+": ",r=[],i=function(f,u){return" "+u},n=0;n<t.values.length;++n)r.push(t.values[n].replace(/^(\S+\r\n)/,i));e+=r.join(",")+`\r
`;for(var s=0,a=-1,n=0;n<e.length;++n,++s)if(s>65&&a!==-1){var o=e[a];o===","?(++a,e=e.substr(0,a)+`\r
 `+e.substr(a)):e=e.substr(0,a)+`\r
`+o+e.substr(a+1),s=n-a-1,a=-1,++n}else(e[n]===" "||e[n]==="	"||e[n]===",")&&(a=n);return e}function dS(t){return t.replace(/^\s+/,"")}});var by=E((C6,xy)=>{var wr=Se();fn();$e();var dy=xy.exports=wr.sha256=wr.sha256||{};wr.md.sha256=wr.md.algorithms.sha256=dy;dy.create=function(){yy||yS();var t=null,e=wr.util.createBuffer(),r=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return i.start=function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,s=0;s<n;++s)i.fullMessageLength.push(0);return e=wr.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i},i.start(),i.update=function(n,s){s==="utf8"&&(n=wr.util.encodeUtf8(n));var a=n.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=i.fullMessageLength.length-1;o>=0;--o)i.fullMessageLength[o]+=a[1],a[1]=a[0]+(i.fullMessageLength[o]/4294967296>>>0),i.fullMessageLength[o]=i.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(n),vy(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),i},i.digest=function(){var n=wr.util.createBuffer();n.putBytes(e.bytes());var s=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,a=s&i.blockLength-1;n.putBytes(ec.substr(0,i.blockLength-a));for(var o,f,u=i.fullMessageLength[0]*8,c=0;c<i.fullMessageLength.length-1;++c)o=i.fullMessageLength[c+1]*8,f=o/4294967296>>>0,u+=f,n.putInt32(u>>>0),u=o>>>0;n.putInt32(u);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};vy(h,r,n);var l=wr.util.createBuffer();return l.putInt32(h.h0),l.putInt32(h.h1),l.putInt32(h.h2),l.putInt32(h.h3),l.putInt32(h.h4),l.putInt32(h.h5),l.putInt32(h.h6),l.putInt32(h.h7),l},i};var ec=null,yy=!1,gy=null;function yS(){ec=String.fromCharCode(128),ec+=wr.util.fillString(String.fromCharCode(0),64),gy=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],yy=!0}function vy(t,e,r){for(var i,n,s,a,o,f,u,c,h,l,d,p,y,g,v,x=r.length();x>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)i=e[u-2],i=(i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,n=e[u-15],n=(n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,e[u]=i+e[u-7]+n+e[u-16]|0;for(c=t.h0,h=t.h1,l=t.h2,d=t.h3,p=t.h4,y=t.h5,g=t.h6,v=t.h7,u=0;u<64;++u)a=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7),o=g^p&(y^g),s=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),f=c&h|l&(c^h),i=v+a+o+gy[u]+e[u],n=s+f,v=g,g=y,y=p,p=d+i>>>0,d=l,l=h,h=c,c=i+n>>>0;t.h0=t.h0+c|0,t.h1=t.h1+h|0,t.h2=t.h2+l|0,t.h3=t.h3+d|0,t.h4=t.h4+p|0,t.h5=t.h5+y|0,t.h6=t.h6+g|0,t.h7=t.h7+v|0,x-=64}}});var Ey=E((T6,my)=>{var Sr=Se();$e();var bo=null;Sr.util.isNodejs&&!Sr.options.usePureJavaScript&&!process.versions["node-webkit"]&&(bo=$r());var gS=my.exports=Sr.prng=Sr.prng||{};gS.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,i=new Array(32),n=0;n<32;++n)i[n]=r.create();e.pools=i,e.pool=0,e.generate=function(u,c){if(!c)return e.generateSync(u);var h=e.plugin.cipher,l=e.plugin.increment,d=e.plugin.formatKey,p=e.plugin.formatSeed,y=Sr.util.createBuffer();e.key=null,g();function g(v){if(v)return c(v);if(y.length()>=u)return c(null,y.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return Sr.util.nextTick(function(){s(g)});var x=h(e.key,e.seed);e.generated+=x.length,y.putBytes(x),e.key=d(h(e.key,l(e.seed))),e.seed=p(h(e.key,e.seed)),Sr.util.setImmediate(g)}},e.generateSync=function(u){var c=e.plugin.cipher,h=e.plugin.increment,l=e.plugin.formatKey,d=e.plugin.formatSeed;e.key=null;for(var p=Sr.util.createBuffer();p.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&a();var y=c(e.key,e.seed);e.generated+=y.length,p.putBytes(y),e.key=l(c(e.key,h(e.seed))),e.seed=d(c(e.key,e.seed))}return p.getBytes(u)};function s(u){if(e.pools[0].messageLength>=32)return o(),u();var c=32-e.pools[0].messageLength<<5;e.seedFile(c,function(h,l){if(h)return u(h);e.collect(l),o(),u()})}function a(){if(e.pools[0].messageLength>=32)return o();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),o()}function o(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var c=1,h=0;h<32;++h)e.reseeds%c==0&&(u.update(e.pools[h].digest().getBytes()),e.pools[h].start()),c=c<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var l=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(l),e.generated=0}function f(u){var c=null,h=Sr.util.globalScope,l=h.crypto||h.msCrypto;l&&l.getRandomValues&&(c=function(B){return l.getRandomValues(B)});var d=Sr.util.createBuffer();if(c)for(;d.length()<u;){var p=Math.max(1,Math.min(u-d.length(),65536)/4),y=new Uint32Array(Math.floor(p));try{c(y);for(var g=0;g<y.length;++g)d.putInt32(y[g])}catch(B){if(!(typeof QuotaExceededError!="undefined"&&B instanceof QuotaExceededError))throw B}}if(d.length()<u)for(var v,x,w,P=Math.floor(Math.random()*65536);d.length()<u;){x=16807*(P&65535),v=16807*(P>>16),x+=(v&32767)<<16,x+=v>>15,x=(x&2147483647)+(x>>31),P=x&4294967295;for(var g=0;g<3;++g)w=P>>>(g<<3),w^=Math.floor(Math.random()*256),d.putByte(w&255)}return d.getBytes(u)}return bo?(e.seedFile=function(u,c){bo.randomBytes(u,function(h,l){if(h)return c(h);c(null,l.toString())})},e.seedFileSync=function(u){return bo.randomBytes(u).toString()}):(e.seedFile=function(u,c){try{c(null,f(u))}catch(h){c(h)}},e.seedFileSync=f),e.collect=function(u){for(var c=u.length,h=0;h<c;++h)e.pools[e.pool].update(u.substr(h,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,c){for(var h="",l=0;l<c;l+=8)h+=String.fromCharCode(u>>l&255);e.collect(h)},e.registerWorker=function(u){if(u===self)e.seedFile=function(h,l){function d(p){var y=p.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",d),l(y.forge.prng.err,y.forge.prng.bytes))}self.addEventListener("message",d),self.postMessage({forge:{prng:{needed:h}}})};else{var c=function(h){var l=h.data;l.forge&&l.forge.prng&&e.seedFile(l.forge.prng.needed,function(d,p){u.postMessage({forge:{prng:{err:d,bytes:p}}})})};u.addEventListener("message",c)}},e}});var Vs=E((R6,tc)=>{var ut=Se();Ju();by();Ey();$e();(function(){if(ut.random&&ut.random.getBytes){tc.exports=ut.random;return}(function(t){var e={},r=new Array(4),i=ut.util.createBuffer();e.formatKey=function(h){var l=ut.util.createBuffer(h);return h=new Array(4),h[0]=l.getInt32(),h[1]=l.getInt32(),h[2]=l.getInt32(),h[3]=l.getInt32(),ut.aes._expandKey(h,!1)},e.formatSeed=function(h){var l=ut.util.createBuffer(h);return h=new Array(4),h[0]=l.getInt32(),h[1]=l.getInt32(),h[2]=l.getInt32(),h[3]=l.getInt32(),h},e.cipher=function(h,l){return ut.aes._updateBlock(h,l,r,!1),i.putInt32(r[0]),i.putInt32(r[1]),i.putInt32(r[2]),i.putInt32(r[3]),i.getBytes()},e.increment=function(h){return++h[3],h},e.md=ut.md.sha256;function n(){var h=ut.prng.create(e);return h.getBytes=function(l,d){return h.generate(l,d)},h.getBytesSync=function(l){return h.generate(l)},h}var s=n(),a=null,o=ut.util.globalScope,f=o.crypto||o.msCrypto;if(f&&f.getRandomValues&&(a=function(h){return f.getRandomValues(h)}),ut.options.usePureJavaScript||!ut.util.isNodejs&&!a){if(typeof window=="undefined"||window.document===void 0,s.collectInt(+new Date,32),typeof navigator!="undefined"){var u="";for(var c in navigator)try{typeof navigator[c]=="string"&&(u+=navigator[c])}catch(h){}s.collect(u),u=null}t&&(t().mousemove(function(h){s.collectInt(h.clientX,16),s.collectInt(h.clientY,16)}),t().keypress(function(h){s.collectInt(h.charCode,8)}))}if(!ut.random)ut.random=s;else for(var c in s)ut.random[c]=s[c];ut.random.createInstance=n,tc.exports=ut.random})(typeof jQuery!="undefined"?jQuery:null)})()});var Iy=E((D6,_y)=>{var Pt=Se();$e();var rc=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],wy=[1,2,3,5],vS=function(t,e){return t<<e&65535|(t&65535)>>16-e},xS=function(t,e){return(t&65535)>>e|t<<16-e&65535};_y.exports=Pt.rc2=Pt.rc2||{};Pt.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Pt.util.createBuffer(t)),e=e||128;var r=t,i=t.length(),n=e,s=Math.ceil(n/8),a=255>>(n&7),o;for(o=i;o<128;o++)r.putByte(rc[r.at(o-1)+r.at(o-i)&255]);for(r.setAt(128-s,rc[r.at(128-s)&a]),o=127-s;o>=0;o--)r.setAt(o,rc[r.at(o+1)^r.at(o+s)]);return r};var Sy=function(t,e,r){var i=!1,n=null,s=null,a=null,o,f,u,c,h=[];for(t=Pt.rc2.expandKey(t,e),u=0;u<64;u++)h.push(t.getInt16Le());r?(o=function(p){for(u=0;u<4;u++)p[u]+=h[c]+(p[(u+3)%4]&p[(u+2)%4])+(~p[(u+3)%4]&p[(u+1)%4]),p[u]=vS(p[u],wy[u]),c++},f=function(p){for(u=0;u<4;u++)p[u]+=h[p[(u+3)%4]&63]}):(o=function(p){for(u=3;u>=0;u--)p[u]=xS(p[u],wy[u]),p[u]-=h[c]+(p[(u+3)%4]&p[(u+2)%4])+(~p[(u+3)%4]&p[(u+1)%4]),c--},f=function(p){for(u=3;u>=0;u--)p[u]-=h[p[(u+3)%4]&63]});var l=function(p){var y=[];for(u=0;u<4;u++){var g=n.getInt16Le();a!==null&&(r?g^=a.getInt16Le():a.putInt16Le(g)),y.push(g&65535)}c=r?0:63;for(var v=0;v<p.length;v++)for(var x=0;x<p[v][0];x++)p[v][1](y);for(u=0;u<4;u++)a!==null&&(r?a.putInt16Le(y[u]):y[u]^=a.getInt16Le()),s.putInt16Le(y[u])},d=null;return d={start:function(p,y){p&&typeof p=="string"&&(p=Pt.util.createBuffer(p)),i=!1,n=Pt.util.createBuffer(),s=y||new Pt.util.createBuffer,a=p,d.output=s},update:function(p){for(i||n.putBuffer(p);n.length()>=8;)l([[5,o],[1,f],[6,o],[1,f],[5,o]])},finish:function(p){var y=!0;if(r)if(p)y=p(8,n,!r);else{var g=n.length()===8?8:8-n.length();n.fillWithByte(g,g)}if(y&&(i=!0,d.update()),!r&&(y=n.length()===0,y))if(p)y=p(8,s,!r);else{var v=s.length(),x=s.at(v-1);x>v?y=!1:s.truncate(x)}return y}},d};Pt.rc2.startEncrypting=function(t,e,r){var i=Pt.rc2.createEncryptionCipher(t,128);return i.start(e,r),i};Pt.rc2.createEncryptionCipher=function(t,e){return Sy(t,e,!0)};Pt.rc2.startDecrypting=function(t,e,r){var i=Pt.rc2.createDecryptionCipher(t,128);return i.start(e,r),i};Pt.rc2.createDecryptionCipher=function(t,e){return Sy(t,e,!1)}});var wo=E((P6,ky)=>{var ic=Se();ky.exports=ic.jsbn=ic.jsbn||{};var Zr,bS=244837814094590,By=(bS&16777215)==15715070;function k(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}ic.jsbn.BigInteger=k;function fe(){return new k(null)}function mS(t,e,r,i,n,s){for(;--s>=0;){var a=e*this.data[t++]+r.data[i]+n;n=Math.floor(a/67108864),r.data[i++]=a&67108863}return n}function ES(t,e,r,i,n,s){for(var a=e&32767,o=e>>15;--s>=0;){var f=this.data[t]&32767,u=this.data[t++]>>15,c=o*f+u*a;f=a*f+((c&32767)<<15)+r.data[i]+(n&1073741823),n=(f>>>30)+(c>>>15)+o*u+(n>>>30),r.data[i++]=f&1073741823}return n}function Ay(t,e,r,i,n,s){for(var a=e&16383,o=e>>14;--s>=0;){var f=this.data[t]&16383,u=this.data[t++]>>14,c=o*f+u*a;f=a*f+((c&16383)<<14)+r.data[i]+n,n=(f>>28)+(c>>14)+o*u,r.data[i++]=f&268435455}return n}typeof navigator=="undefined"?(k.prototype.am=Ay,Zr=28):By&&navigator.appName=="Microsoft Internet Explorer"?(k.prototype.am=ES,Zr=30):By&&navigator.appName!="Netscape"?(k.prototype.am=mS,Zr=26):(k.prototype.am=Ay,Zr=28);k.prototype.DB=Zr;k.prototype.DM=(1<<Zr)-1;k.prototype.DV=1<<Zr;var nc=52;k.prototype.FV=Math.pow(2,nc);k.prototype.F1=nc-Zr;k.prototype.F2=2*Zr-nc;var wS="0123456789abcdefghijklmnopqrstuvwxyz",mo=new Array,Jn,Gt;Jn="0".charCodeAt(0);for(Gt=0;Gt<=9;++Gt)mo[Jn++]=Gt;Jn="a".charCodeAt(0);for(Gt=10;Gt<36;++Gt)mo[Jn++]=Gt;Jn="A".charCodeAt(0);for(Gt=10;Gt<36;++Gt)mo[Jn++]=Gt;function Cy(t){return wS.charAt(t)}function Ty(t,e){var r=mo[t.charCodeAt(e)];return r??-1}function SS(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function _S(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function Ii(t){var e=fe();return e.fromInt(t),e}function IS(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var i=t.length,n=!1,s=0;--i>=0;){var a=r==8?t[i]&255:Ty(t,i);if(a<0){t.charAt(i)=="-"&&(n=!0);continue}n=!1,s==0?this.data[this.t++]=a:s+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this.data[this.t++]=a>>this.DB-s):this.data[this.t-1]|=a<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),n&&k.ZERO.subTo(this,this)}function BS(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function AS(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,i,n=!1,s="",a=this.t,o=this.DB-a*this.DB%e;if(a-- >0)for(o<this.DB&&(i=this.data[a]>>o)>0&&(n=!0,s=Cy(i));a>=0;)o<e?(i=(this.data[a]&(1<<o)-1)<<e-o,i|=this.data[--a]>>(o+=this.DB-e)):(i=this.data[a]>>(o-=e)&r,o<=0&&(o+=this.DB,--a)),i>0&&(n=!0),n&&(s+=Cy(i));return n?s:"0"}function CS(){var t=fe();return k.ZERO.subTo(this,t),t}function TS(){return this.s<0?this.negate():this}function RS(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function Eo(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function DS(){return this.t<=0?0:this.DB*(this.t-1)+Eo(this.data[this.t-1]^this.s&this.DM)}function PS(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function kS(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function NS(t,e){var r=t%this.DB,i=this.DB-r,n=(1<<i)-1,s=Math.floor(t/this.DB),a=this.s<<r&this.DM,o;for(o=this.t-1;o>=0;--o)e.data[o+s+1]=this.data[o]>>i|a,a=(this.data[o]&n)<<r;for(o=s-1;o>=0;--o)e.data[o]=0;e.data[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()}function OS(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var i=t%this.DB,n=this.DB-i,s=(1<<i)-1;e.data[0]=this.data[r]>>i;for(var a=r+1;a<this.t;++a)e.data[a-r-1]|=(this.data[a]&s)<<n,e.data[a-r]=this.data[a]>>i;i>0&&(e.data[this.t-r-1]|=(this.s&s)<<n),e.t=this.t-r,e.clamp()}function LS(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);r<n;)i+=this.data[r]-t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i-=t.s;r<this.t;)i+=this.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i-=t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i-=t.s}e.s=i<0?-1:0,i<-1?e.data[r++]=this.DV+i:i>0&&(e.data[r++]=i),e.t=r,e.clamp()}function MS(t,e){var r=this.abs(),i=t.abs(),n=r.t;for(e.t=n+i.t;--n>=0;)e.data[n]=0;for(n=0;n<i.t;++n)e.data[n+r.t]=r.am(0,i.data[n],e,n,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&k.ZERO.subTo(e,e)}function KS(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var i=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,i,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function FS(t,e,r){var i=t.abs();if(!(i.t<=0)){var n=this.abs();if(n.t<i.t){e!=null&&e.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=fe());var s=fe(),a=this.s,o=t.s,f=this.DB-Eo(i.data[i.t-1]);f>0?(i.lShiftTo(f,s),n.lShiftTo(f,r)):(i.copyTo(s),n.copyTo(r));var u=s.t,c=s.data[u-1];if(c!=0){var h=c*(1<<this.F1)+(u>1?s.data[u-2]>>this.F2:0),l=this.FV/h,d=(1<<this.F1)/h,p=1<<this.F2,y=r.t,g=y-u,v=e??fe();for(s.dlShiftTo(g,v),r.compareTo(v)>=0&&(r.data[r.t++]=1,r.subTo(v,r)),k.ONE.dlShiftTo(u,v),v.subTo(s,s);s.t<u;)s.data[s.t++]=0;for(;--g>=0;){var x=r.data[--y]==c?this.DM:Math.floor(r.data[y]*l+(r.data[y-1]+p)*d);if((r.data[y]+=s.am(0,x,r,g,0,u))<x)for(s.dlShiftTo(g,v),r.subTo(v,r);r.data[y]<--x;)r.subTo(v,r)}e!=null&&(r.drShiftTo(u,e),a!=o&&k.ZERO.subTo(e,e)),r.t=u,r.clamp(),f>0&&r.rShiftTo(f,r),a<0&&k.ZERO.subTo(r,r)}}}function US(t){var e=fe();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(k.ZERO)>0&&t.subTo(e,e),e}function hn(t){this.m=t}function qS(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function VS(t){return t}function GS(t){t.divRemTo(this.m,null,t)}function HS(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function zS(t,e){t.squareTo(e),this.reduce(e)}hn.prototype.convert=qS;hn.prototype.revert=VS;hn.prototype.reduce=GS;hn.prototype.mulTo=HS;hn.prototype.sqrTo=zS;function jS(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function ln(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function WS(t){var e=fe();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(k.ZERO)>0&&this.m.subTo(e,e),e}function YS(t){var e=fe();return t.copyTo(e),this.reduce(e),e}function $S(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,i=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,i,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function QS(t,e){t.squareTo(e),this.reduce(e)}function ZS(t,e,r){t.multiplyTo(e,r),this.reduce(r)}ln.prototype.convert=WS;ln.prototype.revert=YS;ln.prototype.reduce=$S;ln.prototype.mulTo=ZS;ln.prototype.sqrTo=QS;function XS(){return(this.t>0?this.data[0]&1:this.s)==0}function JS(t,e){if(t>4294967295||t<1)return k.ONE;var r=fe(),i=fe(),n=e.convert(this),s=Eo(t)-1;for(n.copyTo(r);--s>=0;)if(e.sqrTo(r,i),(t&1<<s)>0)e.mulTo(i,n,r);else{var a=r;r=i,i=a}return e.revert(r)}function e_(t,e){var r;return t<256||e.isEven()?r=new hn(e):r=new ln(e),this.exp(t,r)}k.prototype.copyTo=SS;k.prototype.fromInt=_S;k.prototype.fromString=IS;k.prototype.clamp=BS;k.prototype.dlShiftTo=PS;k.prototype.drShiftTo=kS;k.prototype.lShiftTo=NS;k.prototype.rShiftTo=OS;k.prototype.subTo=LS;k.prototype.multiplyTo=MS;k.prototype.squareTo=KS;k.prototype.divRemTo=FS;k.prototype.invDigit=jS;k.prototype.isEven=XS;k.prototype.exp=JS;k.prototype.toString=AS;k.prototype.negate=CS;k.prototype.abs=TS;k.prototype.compareTo=RS;k.prototype.bitLength=DS;k.prototype.mod=US;k.prototype.modPowInt=e_;k.ZERO=Ii(0);k.ONE=Ii(1);function t_(){var t=fe();return this.copyTo(t),t}function r_(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function i_(){return this.t==0?this.s:this.data[0]<<24>>24}function n_(){return this.t==0?this.s:this.data[0]<<16>>16}function s_(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function a_(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function o_(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),i=Ii(r),n=fe(),s=fe(),a="";for(this.divRemTo(i,n,s);n.signum()>0;)a=(r+s.intValue()).toString(t).substr(1)+a,n.divRemTo(i,n,s);return s.intValue().toString(t)+a}function u_(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),i=Math.pow(e,r),n=!1,s=0,a=0,o=0;o<t.length;++o){var f=Ty(t,o);if(f<0){t.charAt(o)=="-"&&this.signum()==0&&(n=!0);continue}a=e*a+f,++s>=r&&(this.dMultiply(i),this.dAddOffset(a,0),s=0,a=0)}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(a,0)),n&&k.ZERO.subTo(this,this)}function c_(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(k.ONE.shiftLeft(t-1),sc,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(k.ONE.shiftLeft(t-1),this);else{var i=new Array,n=t&7;i.length=(t>>3)+1,e.nextBytes(i),n>0?i[0]&=(1<<n)-1:i[0]=0,this.fromString(i,256)}}function f_(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,i,n=0;if(t-- >0)for(r<this.DB&&(i=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[n++]=i|this.s<<this.DB-r);t>=0;)r<8?(i=(this.data[t]&(1<<r)-1)<<8-r,i|=this.data[--t]>>(r+=this.DB-8)):(i=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(i&128)!=0&&(i|=-256),n==0&&(this.s&128)!=(i&128)&&++n,(n>0||i!=this.s)&&(e[n++]=i);return e}function h_(t){return this.compareTo(t)==0}function l_(t){return this.compareTo(t)<0?this:t}function p_(t){return this.compareTo(t)>0?this:t}function d_(t,e,r){var i,n,s=Math.min(t.t,this.t);for(i=0;i<s;++i)r.data[i]=e(this.data[i],t.data[i]);if(t.t<this.t){for(n=t.s&this.DM,i=s;i<this.t;++i)r.data[i]=e(this.data[i],n);r.t=this.t}else{for(n=this.s&this.DM,i=s;i<t.t;++i)r.data[i]=e(n,t.data[i]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function y_(t,e){return t&e}function g_(t){var e=fe();return this.bitwiseTo(t,y_,e),e}function sc(t,e){return t|e}function v_(t){var e=fe();return this.bitwiseTo(t,sc,e),e}function Ry(t,e){return t^e}function x_(t){var e=fe();return this.bitwiseTo(t,Ry,e),e}function Dy(t,e){return t&~e}function b_(t){var e=fe();return this.bitwiseTo(t,Dy,e),e}function m_(){for(var t=fe(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function E_(t){var e=fe();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function w_(t){var e=fe();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function S_(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}function __(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+S_(this.data[t]);return this.s<0?this.t*this.DB:-1}function I_(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function B_(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=I_(this.data[r]^e);return t}function A_(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function C_(t,e){var r=k.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function T_(t){return this.changeBit(t,sc)}function R_(t){return this.changeBit(t,Dy)}function D_(t){return this.changeBit(t,Ry)}function P_(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);r<n;)i+=this.data[r]+t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i+=t.s;r<this.t;)i+=this.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i+=t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=t.s}e.s=i<0?-1:0,i>0?e.data[r++]=i:i<-1&&(e.data[r++]=this.DV+i),e.t=r,e.clamp()}function k_(t){var e=fe();return this.addTo(t,e),e}function N_(t){var e=fe();return this.subTo(t,e),e}function O_(t){var e=fe();return this.multiplyTo(t,e),e}function L_(t){var e=fe();return this.divRemTo(t,e,null),e}function M_(t){var e=fe();return this.divRemTo(t,null,e),e}function K_(t){var e=fe(),r=fe();return this.divRemTo(t,e,r),new Array(e,r)}function F_(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function U_(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function Gs(){}function Py(t){return t}function q_(t,e,r){t.multiplyTo(e,r)}function V_(t,e){t.squareTo(e)}Gs.prototype.convert=Py;Gs.prototype.revert=Py;Gs.prototype.mulTo=q_;Gs.prototype.sqrTo=V_;function G_(t){return this.exp(t,new Gs)}function H_(t,e,r){var i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;var n;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,t.data[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t.data[i],r,i,0,e-i);r.clamp()}function z_(t,e,r){--e;var i=r.t=this.t+t.t-e;for(r.s=0;--i>=0;)r.data[i]=0;for(i=Math.max(e-this.t,0);i<t.t;++i)r.data[this.t+i-e]=this.am(e-i,t.data[i],r,0,0,this.t+i-e);r.clamp(),r.drShiftTo(1,r)}function es(t){this.r2=fe(),this.q3=fe(),k.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function j_(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=fe();return t.copyTo(e),this.reduce(e),e}function W_(t){return t}function Y_(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function $_(t,e){t.squareTo(e),this.reduce(e)}function Q_(t,e,r){t.multiplyTo(e,r),this.reduce(r)}es.prototype.convert=j_;es.prototype.revert=W_;es.prototype.reduce=Y_;es.prototype.mulTo=Q_;es.prototype.sqrTo=$_;function Z_(t,e){var r=t.bitLength(),i,n=Ii(1),s;if(r<=0)return n;r<18?i=1:r<48?i=3:r<144?i=4:r<768?i=5:i=6,r<8?s=new hn(e):e.isEven()?s=new es(e):s=new ln(e);var a=new Array,o=3,f=i-1,u=(1<<i)-1;if(a[1]=s.convert(this),i>1){var c=fe();for(s.sqrTo(a[1],c);o<=u;)a[o]=fe(),s.mulTo(c,a[o-2],a[o]),o+=2}var h=t.t-1,l,d=!0,p=fe(),y;for(r=Eo(t.data[h])-1;h>=0;){for(r>=f?l=t.data[h]>>r-f&u:(l=(t.data[h]&(1<<r+1)-1)<<f-r,h>0&&(l|=t.data[h-1]>>this.DB+r-f)),o=i;(l&1)==0;)l>>=1,--o;if((r-=o)<0&&(r+=this.DB,--h),d)a[l].copyTo(n),d=!1;else{for(;o>1;)s.sqrTo(n,p),s.sqrTo(p,n),o-=2;o>0?s.sqrTo(n,p):(y=n,n=p,p=y),s.mulTo(p,a[l],n)}for(;h>=0&&(t.data[h]&1<<r)==0;)s.sqrTo(n,p),y=n,n=p,p=y,--r<0&&(r=this.DB-1,--h)}return s.revert(n)}function X_(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var i=e;e=r,r=i}var n=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(n<s&&(s=n),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),(n=r.getLowestSetBit())>0&&r.rShiftTo(n,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function J_(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var i=this.t-1;i>=0;--i)r=(e*r+this.data[i])%t;return r}function e8(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return k.ZERO;for(var r=t.clone(),i=this.clone(),n=Ii(1),s=Ii(0),a=Ii(0),o=Ii(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!n.isEven()||!s.isEven())&&(n.addTo(this,n),s.subTo(t,s)),n.rShiftTo(1,n)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;i.isEven();)i.rShiftTo(1,i),e?((!a.isEven()||!o.isEven())&&(a.addTo(this,a),o.subTo(t,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);r.compareTo(i)>=0?(r.subTo(i,r),e&&n.subTo(a,n),s.subTo(o,s)):(i.subTo(r,i),e&&a.subTo(n,a),o.subTo(s,o))}if(i.compareTo(k.ONE)!=0)return k.ZERO;if(o.compareTo(t)>=0)return o.subtract(t);if(o.signum()<0)o.addTo(t,o);else return o;return o.signum()<0?o.add(t):o}var nr=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],t8=(1<<26)/nr[nr.length-1];function r8(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=nr[nr.length-1]){for(e=0;e<nr.length;++e)if(r.data[0]==nr[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<nr.length;){for(var i=nr[e],n=e+1;n<nr.length&&i<t8;)i*=nr[n++];for(i=r.modInt(i);e<n;)if(i%nr[e++]==0)return!1}return r.millerRabin(t)}function i8(t){var e=this.subtract(k.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var i=e.shiftRight(r),n=n8(),s,a=0;a<t;++a){do s=new k(this.bitLength(),n);while(s.compareTo(k.ONE)<=0||s.compareTo(e)>=0);var o=s.modPow(i,this);if(o.compareTo(k.ONE)!=0&&o.compareTo(e)!=0){for(var f=1;f++<r&&o.compareTo(e)!=0;)if(o=o.modPowInt(2,this),o.compareTo(k.ONE)==0)return!1;if(o.compareTo(e)!=0)return!1}}return!0}function n8(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}k.prototype.chunkSize=s_;k.prototype.toRadix=o_;k.prototype.fromRadix=u_;k.prototype.fromNumber=c_;k.prototype.bitwiseTo=d_;k.prototype.changeBit=C_;k.prototype.addTo=P_;k.prototype.dMultiply=F_;k.prototype.dAddOffset=U_;k.prototype.multiplyLowerTo=H_;k.prototype.multiplyUpperTo=z_;k.prototype.modInt=J_;k.prototype.millerRabin=i8;k.prototype.clone=t_;k.prototype.intValue=r_;k.prototype.byteValue=i_;k.prototype.shortValue=n_;k.prototype.signum=a_;k.prototype.toByteArray=f_;k.prototype.equals=h_;k.prototype.min=l_;k.prototype.max=p_;k.prototype.and=g_;k.prototype.or=v_;k.prototype.xor=x_;k.prototype.andNot=b_;k.prototype.not=m_;k.prototype.shiftLeft=E_;k.prototype.shiftRight=w_;k.prototype.getLowestSetBit=__;k.prototype.bitCount=B_;k.prototype.testBit=A_;k.prototype.setBit=T_;k.prototype.clearBit=R_;k.prototype.flipBit=D_;k.prototype.add=k_;k.prototype.subtract=N_;k.prototype.multiply=O_;k.prototype.divide=L_;k.prototype.remainder=M_;k.prototype.divideAndRemainder=K_;k.prototype.modPow=Z_;k.prototype.modInverse=e8;k.prototype.pow=G_;k.prototype.gcd=X_;k.prototype.isProbablePrime=r8});var Ky=E((k6,My)=>{var _r=Se();fn();$e();var Ny=My.exports=_r.sha1=_r.sha1||{};_r.md.sha1=_r.md.algorithms.sha1=Ny;Ny.create=function(){Oy||s8();var t=null,e=_r.util.createBuffer(),r=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return i.start=function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,s=0;s<n;++s)i.fullMessageLength.push(0);return e=_r.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i},i.start(),i.update=function(n,s){s==="utf8"&&(n=_r.util.encodeUtf8(n));var a=n.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=i.fullMessageLength.length-1;o>=0;--o)i.fullMessageLength[o]+=a[1],a[1]=a[0]+(i.fullMessageLength[o]/4294967296>>>0),i.fullMessageLength[o]=i.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(n),Ly(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),i},i.digest=function(){var n=_r.util.createBuffer();n.putBytes(e.bytes());var s=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,a=s&i.blockLength-1;n.putBytes(ac.substr(0,i.blockLength-a));for(var o,f,u=i.fullMessageLength[0]*8,c=0;c<i.fullMessageLength.length-1;++c)o=i.fullMessageLength[c+1]*8,f=o/4294967296>>>0,u+=f,n.putInt32(u>>>0),u=o>>>0;n.putInt32(u);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};Ly(h,r,n);var l=_r.util.createBuffer();return l.putInt32(h.h0),l.putInt32(h.h1),l.putInt32(h.h2),l.putInt32(h.h3),l.putInt32(h.h4),l},i};var ac=null,Oy=!1;function s8(){ac=String.fromCharCode(128),ac+=_r.util.fillString(String.fromCharCode(0),64),Oy=!0}function Ly(t,e,r){for(var i,n,s,a,o,f,u,c,h=r.length();h>=64;){for(n=t.h0,s=t.h1,a=t.h2,o=t.h3,f=t.h4,c=0;c<16;++c)i=r.getInt32(),e[c]=i,u=o^s&(a^o),i=(n<<5|n>>>27)+u+f+1518500249+i,f=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;c<20;++c)i=e[c-3]^e[c-8]^e[c-14]^e[c-16],i=i<<1|i>>>31,e[c]=i,u=o^s&(a^o),i=(n<<5|n>>>27)+u+f+1518500249+i,f=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;c<32;++c)i=e[c-3]^e[c-8]^e[c-14]^e[c-16],i=i<<1|i>>>31,e[c]=i,u=s^a^o,i=(n<<5|n>>>27)+u+f+1859775393+i,f=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;c<40;++c)i=e[c-6]^e[c-16]^e[c-28]^e[c-32],i=i<<2|i>>>30,e[c]=i,u=s^a^o,i=(n<<5|n>>>27)+u+f+1859775393+i,f=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;c<60;++c)i=e[c-6]^e[c-16]^e[c-28]^e[c-32],i=i<<2|i>>>30,e[c]=i,u=s&a|o&(s^a),i=(n<<5|n>>>27)+u+f+2400959708+i,f=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;c<80;++c)i=e[c-6]^e[c-16]^e[c-28]^e[c-32],i=i<<2|i>>>30,e[c]=i,u=s^a^o,i=(n<<5|n>>>27)+u+f+3395469782+i,f=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;t.h0=t.h0+n|0,t.h1=t.h1+s|0,t.h2=t.h2+a|0,t.h3=t.h3+o|0,t.h4=t.h4+f|0,h-=64}}});var qy=E((N6,Uy)=>{var Ir=Se();$e();Vs();Ky();var Fy=Uy.exports=Ir.pkcs1=Ir.pkcs1||{};Fy.encode_rsa_oaep=function(t,e,r){var i,n,s,a;typeof r=="string"?(i=r,n=arguments[3]||void 0,s=arguments[4]||void 0):r&&(i=r.label||void 0,n=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md)),s?s.start():s=Ir.md.sha1.create(),a||(a=s);var o=Math.ceil(t.n.bitLength()/8),f=o-2*s.digestLength-2;if(e.length>f){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=f,u}i||(i=""),s.update(i,"raw");for(var c=s.digest(),h="",l=f-e.length,d=0;d<l;d++)h+="\0";var p=c.getBytes()+h+""+e;if(!n)n=Ir.random.getBytes(s.digestLength);else if(n.length!==s.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=n.length,u.digestLength=s.digestLength,u}var y=So(n,o-s.digestLength-1,a),g=Ir.util.xorBytes(p,y,p.length),v=So(g,s.digestLength,a),x=Ir.util.xorBytes(n,v,n.length);return"\0"+x+g};Fy.decode_rsa_oaep=function(t,e,r){var i,n,s;typeof r=="string"?(i=r,n=arguments[3]||void 0):r&&(i=r.label||void 0,n=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var g=new Error("RSAES-OAEP encoded message length is invalid.");throw g.length=e.length,g.expectedLength=a,g}if(n===void 0?n=Ir.md.sha1.create():n.start(),s||(s=n),a<2*n.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),n.update(i,"raw");for(var o=n.digest().getBytes(),f=e.charAt(0),u=e.substring(1,n.digestLength+1),c=e.substring(1+n.digestLength),h=So(c,n.digestLength,s),l=Ir.util.xorBytes(u,h,u.length),d=So(l,a-n.digestLength-1,s),p=Ir.util.xorBytes(c,d,c.length),y=p.substring(0,n.digestLength),g=f!=="\0",v=0;v<n.digestLength;++v)g|=o.charAt(v)!==y.charAt(v);for(var x=1,w=n.digestLength,P=n.digestLength;P<p.length;P++){var B=p.charCodeAt(P),S=B&1^1,G=x?65534:0;g|=B&G,x=x&S,w+=x}if(g||p.charCodeAt(w)!==1)throw new Error("Invalid RSAES-OAEP padding.");return p.substring(w+1)};function So(t,e,r){r||(r=Ir.md.sha1.create());for(var i="",n=Math.ceil(e/r.digestLength),s=0;s<n;++s){var a=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(t+a),i+=r.digest().getBytes()}return i.substring(0,e)}});var Vy=E((O6,oc)=>{var Bi=Se();$e();wo();Vs();(function(){if(Bi.prime){oc.exports=Bi.prime;return}var t=oc.exports=Bi.prime=Bi.prime||{},e=Bi.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],i=new e(null);i.fromInt(30);var n=function(h,l){return h|l};t.generateProbablePrime=function(h,l,d){typeof l=="function"&&(d=l,l={}),l=l||{};var p=l.algorithm||"PRIMEINC";typeof p=="string"&&(p={name:p}),p.options=p.options||{};var y=l.prng||Bi.random,g={nextBytes:function(v){for(var x=y.getBytesSync(v.length),w=0;w<v.length;++w)v[w]=x.charCodeAt(w)}};if(p.name==="PRIMEINC")return s(h,g,p.options,d);throw new Error("Invalid prime generation algorithm: "+p.name)};function s(h,l,d,p){return"workers"in d?f(h,l,d,p):a(h,l,d,p)}function a(h,l,d,p){var y=u(h,l),g=0,v=c(y.bitLength());"millerRabinTests"in d&&(v=d.millerRabinTests);var x=10;"maxBlockTime"in d&&(x=d.maxBlockTime),o(y,h,l,g,v,x,p)}function o(h,l,d,p,y,g,v){var x=+new Date;do{if(h.bitLength()>l&&(h=u(l,d)),h.isProbablePrime(y))return v(null,h);h.dAddOffset(r[p++%8],0)}while(g<0||+new Date-x<g);Bi.util.setImmediate(function(){o(h,l,d,p,y,g,v)})}function f(h,l,d,p){if(typeof Worker=="undefined")return a(h,l,d,p);var y=u(h,l),g=d.workers,v=d.workLoad||100,x=v*30/8,w=d.workerScript||"forge/prime.worker.js";if(g===-1)return Bi.util.estimateCores(function(B,S){B&&(S=2),g=S-1,P()});P();function P(){g=Math.max(1,g);for(var B=[],S=0;S<g;++S)B[S]=new Worker(w);for(var G=g,S=0;S<g;++S)B[S].addEventListener("message",se);var z=!1;function se(Te){if(!z){--G;var ye=Te.data;if(ye.found){for(var pe=0;pe<B.length;++pe)B[pe].terminate();return z=!0,p(null,new e(ye.prime,16))}y.bitLength()>h&&(y=u(h,l));var Ot=y.toString(16);Te.target.postMessage({hex:Ot,workLoad:v}),y.dAddOffset(x,0)}}}}function u(h,l){var d=new e(h,l),p=h-1;return d.testBit(p)||d.bitwiseTo(e.ONE.shiftLeft(p),n,d),d.dAddOffset(31-d.mod(i).byteValue(),0),d}function c(h){return h<=100?27:h<=150?18:h<=200?15:h<=250?12:h<=300?9:h<=350?8:h<=400?7:h<=500?6:h<=600?5:h<=800?4:h<=1250?3:2}})()});var Io=E((L6,$y)=>{var W=Se();qs();wo();co();qy();Vy();Vs();$e();typeof ae=="undefined"&&(ae=W.jsbn.BigInteger);var ae,uc=W.util.isNodejs?$r():null,_=W.asn1,Ht=W.util;W.pki=W.pki||{};$y.exports=W.pki.rsa=W.rsa=W.rsa||{};var Y=W.pki,a8=[6,4,2,4,2,4,6,2],o8={name:"PrivateKeyInfo",tagClass:_.Class.UNIVERSAL,type:_.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:_.Class.UNIVERSAL,type:_.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:_.Class.UNIVERSAL,type:_.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:_.Class.UNIVERSAL,type:_.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:_.Class.UNIVERSAL,type:_.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},u8={name:"RSAPrivateKey",tagClass:_.Class.UNIVERSAL,type:_.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:_.Class.UNIVERSAL,type:_.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:_.Class.UNIVERSAL,type:_.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:_.Class.UNIVERSAL,type:_.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:_.Class.UNIVERSAL,type:_.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:_.Class.UNIVERSAL,type:_.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:_.Class.UNIVERSAL,type:_.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:_.Class.UNIVERSAL,type:_.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:_.Class.UNIVERSAL,type:_.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:_.Class.UNIVERSAL,type:_.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},c8={name:"RSAPublicKey",tagClass:_.Class.UNIVERSAL,type:_.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:_.Class.UNIVERSAL,type:_.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:_.Class.UNIVERSAL,type:_.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},f8=W.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:_.Class.UNIVERSAL,type:_.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:_.Class.UNIVERSAL,type:_.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:_.Class.UNIVERSAL,type:_.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:_.Class.UNIVERSAL,type:_.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:_.Class.UNIVERSAL,type:_.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},h8=function(t){var e;if(t.algorithm in Y.oids)e=Y.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var i=_.oidToDer(e).getBytes(),n=_.create(_.Class.UNIVERSAL,_.Type.SEQUENCE,!0,[]),s=_.create(_.Class.UNIVERSAL,_.Type.SEQUENCE,!0,[]);s.value.push(_.create(_.Class.UNIVERSAL,_.Type.OID,!1,i)),s.value.push(_.create(_.Class.UNIVERSAL,_.Type.NULL,!1,""));var a=_.create(_.Class.UNIVERSAL,_.Type.OCTETSTRING,!1,t.digest().getBytes());return n.value.push(s),n.value.push(a),_.toDer(n).getBytes()},Gy=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(ae.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(ae.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var i;do i=new ae(W.util.bytesToHex(W.random.getBytes(e.n.bitLength()/8)),16);while(i.compareTo(e.n)>=0||!i.gcd(e.n).equals(ae.ONE));t=t.multiply(i.modPow(e.e,e.n)).mod(e.n);for(var n=t.mod(e.p).modPow(e.dP,e.p),s=t.mod(e.q).modPow(e.dQ,e.q);n.compareTo(s)<0;)n=n.add(e.p);var a=n.subtract(s).multiply(e.qInv).mod(e.p).multiply(e.q).add(s);return a=a.multiply(i.modInverse(e.n)).mod(e.n),a};Y.rsa.encrypt=function(t,e,r){var i=r,n,s=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(i=r===2,n=Hy(t,e,r)):(n=W.util.createBuffer(),n.putBytes(t));for(var a=new ae(n.toHex(),16),o=Gy(a,e,i),f=o.toString(16),u=W.util.createBuffer(),c=s-Math.ceil(f.length/2);c>0;)u.putByte(0),--c;return u.putBytes(W.util.hexToBytes(f)),u.getBytes()};Y.rsa.decrypt=function(t,e,r,i){var n=Math.ceil(e.n.bitLength()/8);if(t.length!==n){var s=new Error("Encrypted message length is invalid.");throw s.length=t.length,s.expected=n,s}var a=new ae(W.util.createBuffer(t).toHex(),16);if(a.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var o=Gy(a,e,r),f=o.toString(16),u=W.util.createBuffer(),c=n-Math.ceil(f.length/2);c>0;)u.putByte(0),--c;return u.putBytes(W.util.hexToBytes(f)),i!==!1?_o(u.getBytes(),e,r):u.getBytes()};Y.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var i=r.prng||W.random,n={nextBytes:function(o){for(var f=i.getBytesSync(o.length),u=0;u<o.length;++u)o[u]=f.charCodeAt(u)}},s=r.algorithm||"PRIMEINC",a;if(s==="PRIMEINC")a={algorithm:s,state:0,bits:t,rng:n,eInt:e||65537,e:new ae(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+s);return a};Y.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new ae(null);r.fromInt(30);for(var i=0,n=function(h,l){return h|l},s=+new Date,a,o=0;t.keys===null&&(e<=0||o<e);){if(t.state===0){var f=t.p===null?t.pBits:t.qBits,u=f-1;t.pqState===0?(t.num=new ae(f,t.rng),t.num.testBit(u)||t.num.bitwiseTo(ae.ONE.shiftLeft(u),n,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),i=0,++t.pqState):t.pqState===1?t.num.bitLength()>f?t.pqState=0:t.num.isProbablePrime(p8(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(a8[i++%8],0):t.pqState===2?t.pqState=t.num.subtract(ae.ONE).gcd(t.e).compareTo(ae.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(ae.ONE),t.q1=t.q.subtract(ae.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(ae.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var c=t.e.modInverse(t.phi);t.keys={privateKey:Y.rsa.setPrivateKey(t.n,t.e,c,t.p,t.q,c.mod(t.p1),c.mod(t.q1),t.q.modInverse(t.p)),publicKey:Y.rsa.setPublicKey(t.n,t.e)}}a=+new Date,o+=a-s,s=a}return t.keys!==null};Y.rsa.generateKeyPair=function(t,e,r,i){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(i=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(i=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,i=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(i=r,r=void 0):(i=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!W.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(i){if(zy("generateKeyPair"))return uc.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(o,f,u){if(o)return i(o);i(null,{privateKey:Y.privateKeyFromPem(u),publicKey:Y.publicKeyFromPem(f)})});if(jy("generateKey")&&jy("exportKey"))return Ht.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Yy(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(o){return Ht.globalScope.crypto.subtle.exportKey("pkcs8",o.privateKey)}).then(void 0,function(o){i(o)}).then(function(o){if(o){var f=Y.privateKeyFromAsn1(_.fromDer(W.util.createBuffer(o)));i(null,{privateKey:f,publicKey:Y.setRsaPublicKey(f.n,f.e)})}});if(Wy("generateKey")&&Wy("exportKey")){var n=Ht.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Yy(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);n.oncomplete=function(o){var f=o.target.result,u=Ht.globalScope.msCrypto.subtle.exportKey("pkcs8",f.privateKey);u.oncomplete=function(c){var h=c.target.result,l=Y.privateKeyFromAsn1(_.fromDer(W.util.createBuffer(h)));i(null,{privateKey:l,publicKey:Y.setRsaPublicKey(l.n,l.e)})},u.onerror=function(c){i(c)}},n.onerror=function(o){i(o)};return}}else if(zy("generateKeyPairSync")){var s=uc.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Y.privateKeyFromPem(s.privateKey),publicKey:Y.publicKeyFromPem(s.publicKey)}}}var a=Y.rsa.createKeyPairGenerationState(t,e,r);if(!i)return Y.rsa.stepKeyPairGenerationState(a,0),a.keys;l8(a,r,i)};Y.setRsaPublicKey=Y.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(i,n,s){if(typeof n=="string"?n=n.toUpperCase():n===void 0&&(n="RSAES-PKCS1-V1_5"),n==="RSAES-PKCS1-V1_5")n={encode:function(o,f,u){return Hy(o,f,2).getBytes()}};else if(n==="RSA-OAEP"||n==="RSAES-OAEP")n={encode:function(o,f){return W.pkcs1.encode_rsa_oaep(f,o,s)}};else if(["RAW","NONE","NULL",null].indexOf(n)!==-1)n={encode:function(o){return o}};else if(typeof n=="string")throw new Error('Unsupported encryption scheme: "'+n+'".');var a=n.encode(i,r,!0);return Y.rsa.encrypt(a,r,!0)},r.verify=function(i,n,s){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),s==="RSASSA-PKCS1-V1_5"?s={verify:function(o,f){f=_o(f,r,!0);var u=_.fromDer(f);return o===u.value[1].value}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(o,f){return f=_o(f,r,!0),o===f}});var a=Y.rsa.decrypt(n,r,!0,!1);return s.verify(i,a,r.n.bitLength())},r};Y.setRsaPrivateKey=Y.rsa.setPrivateKey=function(t,e,r,i,n,s,a,o){var f={n:t,e,d:r,p:i,q:n,dP:s,dQ:a,qInv:o};return f.decrypt=function(u,c,h){typeof c=="string"?c=c.toUpperCase():c===void 0&&(c="RSAES-PKCS1-V1_5");var l=Y.rsa.decrypt(u,f,!1,!1);if(c==="RSAES-PKCS1-V1_5")c={decode:_o};else if(c==="RSA-OAEP"||c==="RSAES-OAEP")c={decode:function(d,p){return W.pkcs1.decode_rsa_oaep(p,d,h)}};else if(["RAW","NONE","NULL",null].indexOf(c)!==-1)c={decode:function(d){return d}};else throw new Error('Unsupported encryption scheme: "'+c+'".');return c.decode(l,f,!1)},f.sign=function(u,c){var h=!1;typeof c=="string"&&(c=c.toUpperCase()),c===void 0||c==="RSASSA-PKCS1-V1_5"?(c={encode:h8},h=1):(c==="NONE"||c==="NULL"||c===null)&&(c={encode:function(){return u}},h=1);var l=c.encode(u,f.n.bitLength());return Y.rsa.encrypt(l,f,h)},f};Y.wrapRsaPrivateKey=function(t){return _.create(_.Class.UNIVERSAL,_.Type.SEQUENCE,!0,[_.create(_.Class.UNIVERSAL,_.Type.INTEGER,!1,_.integerToDer(0).getBytes()),_.create(_.Class.UNIVERSAL,_.Type.SEQUENCE,!0,[_.create(_.Class.UNIVERSAL,_.Type.OID,!1,_.oidToDer(Y.oids.rsaEncryption).getBytes()),_.create(_.Class.UNIVERSAL,_.Type.NULL,!1,"")]),_.create(_.Class.UNIVERSAL,_.Type.OCTETSTRING,!1,_.toDer(t).getBytes())])};Y.privateKeyFromAsn1=function(t){var e={},r=[];if(_.validate(t,o8,e,r)&&(t=_.fromDer(W.util.createBuffer(e.privateKey))),e={},r=[],!_.validate(t,u8,e,r)){var i=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw i.errors=r,i}var n,s,a,o,f,u,c,h;return n=W.util.createBuffer(e.privateKeyModulus).toHex(),s=W.util.createBuffer(e.privateKeyPublicExponent).toHex(),a=W.util.createBuffer(e.privateKeyPrivateExponent).toHex(),o=W.util.createBuffer(e.privateKeyPrime1).toHex(),f=W.util.createBuffer(e.privateKeyPrime2).toHex(),u=W.util.createBuffer(e.privateKeyExponent1).toHex(),c=W.util.createBuffer(e.privateKeyExponent2).toHex(),h=W.util.createBuffer(e.privateKeyCoefficient).toHex(),Y.setRsaPrivateKey(new ae(n,16),new ae(s,16),new ae(a,16),new ae(o,16),new ae(f,16),new ae(u,16),new ae(c,16),new ae(h,16))};Y.privateKeyToAsn1=Y.privateKeyToRSAPrivateKey=function(t){return _.create(_.Class.UNIVERSAL,_.Type.SEQUENCE,!0,[_.create(_.Class.UNIVERSAL,_.Type.INTEGER,!1,_.integerToDer(0).getBytes()),_.create(_.Class.UNIVERSAL,_.Type.INTEGER,!1,Br(t.n)),_.create(_.Class.UNIVERSAL,_.Type.INTEGER,!1,Br(t.e)),_.create(_.Class.UNIVERSAL,_.Type.INTEGER,!1,Br(t.d)),_.create(_.Class.UNIVERSAL,_.Type.INTEGER,!1,Br(t.p)),_.create(_.Class.UNIVERSAL,_.Type.INTEGER,!1,Br(t.q)),_.create(_.Class.UNIVERSAL,_.Type.INTEGER,!1,Br(t.dP)),_.create(_.Class.UNIVERSAL,_.Type.INTEGER,!1,Br(t.dQ)),_.create(_.Class.UNIVERSAL,_.Type.INTEGER,!1,Br(t.qInv))])};Y.publicKeyFromAsn1=function(t){var e={},r=[];if(_.validate(t,f8,e,r)){var i=_.derToOid(e.publicKeyOid);if(i!==Y.oids.rsaEncryption){var n=new Error("Cannot read public key. Unknown OID.");throw n.oid=i,n}t=e.rsaPublicKey}if(r=[],!_.validate(t,c8,e,r)){var n=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw n.errors=r,n}var s=W.util.createBuffer(e.publicKeyModulus).toHex(),a=W.util.createBuffer(e.publicKeyExponent).toHex();return Y.setRsaPublicKey(new ae(s,16),new ae(a,16))};Y.publicKeyToAsn1=Y.publicKeyToSubjectPublicKeyInfo=function(t){return _.create(_.Class.UNIVERSAL,_.Type.SEQUENCE,!0,[_.create(_.Class.UNIVERSAL,_.Type.SEQUENCE,!0,[_.create(_.Class.UNIVERSAL,_.Type.OID,!1,_.oidToDer(Y.oids.rsaEncryption).getBytes()),_.create(_.Class.UNIVERSAL,_.Type.NULL,!1,"")]),_.create(_.Class.UNIVERSAL,_.Type.BITSTRING,!1,[Y.publicKeyToRSAPublicKey(t)])])};Y.publicKeyToRSAPublicKey=function(t){return _.create(_.Class.UNIVERSAL,_.Type.SEQUENCE,!0,[_.create(_.Class.UNIVERSAL,_.Type.INTEGER,!1,Br(t.n)),_.create(_.Class.UNIVERSAL,_.Type.INTEGER,!1,Br(t.e))])};function Hy(t,e,r){var i=W.util.createBuffer(),n=Math.ceil(e.n.bitLength()/8);if(t.length>n-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=t.length,s.max=n-11,s}i.putByte(0),i.putByte(r);var a=n-3-t.length,o;if(r===0||r===1){o=r===0?0:255;for(var f=0;f<a;++f)i.putByte(o)}else for(;a>0;){for(var u=0,c=W.random.getBytes(a),f=0;f<a;++f)o=c.charCodeAt(f),o===0?++u:i.putByte(o);a=u}return i.putByte(0),i.putBytes(t),i}function _o(t,e,r,i){var n=Math.ceil(e.n.bitLength()/8),s=W.util.createBuffer(t),a=s.getByte(),o=s.getByte();if(a!==0||r&&o!==0&&o!==1||!r&&o!=2||r&&o===0&&typeof i=="undefined")throw new Error("Encryption block is invalid.");var f=0;if(o===0){f=n-3-i;for(var u=0;u<f;++u)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(o===1)for(f=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++f}else if(o===2)for(f=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++f}var c=s.getByte();if(c!==0||f!==n-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function l8(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var i={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(i.prng=e.prng),n();function n(){s(t.pBits,function(o,f){if(o)return r(o);if(t.p=f,t.q!==null)return a(o,t.q);s(t.qBits,a)})}function s(o,f){W.prime.generateProbablePrime(o,i,f)}function a(o,f){if(o)return r(o);if(t.q=f,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(ae.ONE).gcd(t.e).compareTo(ae.ONE)!==0){t.p=null,n();return}if(t.q.subtract(ae.ONE).gcd(t.e).compareTo(ae.ONE)!==0){t.q=null,s(t.qBits,a);return}if(t.p1=t.p.subtract(ae.ONE),t.q1=t.q.subtract(ae.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(ae.ONE)!==0){t.p=t.q=null,n();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,s(t.qBits,a);return}var c=t.e.modInverse(t.phi);t.keys={privateKey:Y.rsa.setPrivateKey(t.n,t.e,c,t.p,t.q,c.mod(t.p1),c.mod(t.q1),t.q.modInverse(t.p)),publicKey:Y.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function Br(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=W.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)==0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)==128)?r.substr(1):r}function p8(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function zy(t){return W.util.isNodejs&&typeof uc[t]=="function"}function jy(t){return typeof Ht.globalScope!="undefined"&&typeof Ht.globalScope.crypto=="object"&&typeof Ht.globalScope.crypto.subtle=="object"&&typeof Ht.globalScope.crypto.subtle[t]=="function"}function Wy(t){return typeof Ht.globalScope!="undefined"&&typeof Ht.globalScope.msCrypto=="object"&&typeof Ht.globalScope.msCrypto.subtle=="object"&&typeof Ht.globalScope.msCrypto.subtle[t]=="function"}function Yy(t){for(var e=W.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),i=0;i<e.length;++i)r[i]=e.charCodeAt(i);return r}});var tg=E((M6,eg)=>{var q=Se();Ju();qs();sy();fn();co();fy();py();Vs();Iy();Io();$e();typeof Qy=="undefined"&&(Qy=q.jsbn.BigInteger);var Qy,T=q.asn1,X=q.pki=q.pki||{};eg.exports=X.pbe=q.pbe=q.pbe||{};var pn=X.oids,d8={name:"EncryptedPrivateKeyInfo",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:T.Class.UNIVERSAL,type:T.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},y8={name:"PBES2Algorithms",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:T.Class.UNIVERSAL,type:T.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:T.Class.UNIVERSAL,type:T.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},g8={name:"pkcs-12PbeParams",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:T.Class.UNIVERSAL,type:T.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"iterations"}]};X.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var i=q.random.getBytesSync(r.saltSize),n=r.count,s=T.integerToDer(n),a,o,f;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,c,h;switch(r.algorithm){case"aes128":a=16,u=16,c=pn["aes128-CBC"],h=q.aes.createEncryptionCipher;break;case"aes192":a=24,u=16,c=pn["aes192-CBC"],h=q.aes.createEncryptionCipher;break;case"aes256":a=32,u=16,c=pn["aes256-CBC"],h=q.aes.createEncryptionCipher;break;case"des":a=8,u=8,c=pn.desCBC,h=q.des.createEncryptionCipher;break;default:var l=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw l.algorithm=r.algorithm,l}var d="hmacWith"+r.prfAlgorithm.toUpperCase(),p=Jy(d),y=q.pkcs5.pbkdf2(e,i,n,a,p),g=q.random.getBytesSync(u),v=h(y);v.start(g),v.update(T.toDer(t)),v.finish(),f=v.output.getBytes();var x=v8(i,s,a,d);o=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(pn.pkcs5PBES2).getBytes()),T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(pn.pkcs5PBKDF2).getBytes()),x]),T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(c).getBytes()),T.create(T.Class.UNIVERSAL,T.Type.OCTETSTRING,!1,g)])])])}else if(r.algorithm==="3des"){a=24;var w=new q.util.ByteBuffer(i),y=X.pbe.generatePkcs12Key(e,w,1,n,a),g=X.pbe.generatePkcs12Key(e,w,2,n,a),v=q.des.createEncryptionCipher(y);v.start(g),v.update(T.toDer(t)),v.finish(),f=v.output.getBytes(),o=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(pn["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OCTETSTRING,!1,i),T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,s.getBytes())])])}else{var l=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw l.algorithm=r.algorithm,l}var P=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[o,T.create(T.Class.UNIVERSAL,T.Type.OCTETSTRING,!1,f)]);return P};X.decryptPrivateKeyInfo=function(t,e){var r=null,i={},n=[];if(!T.validate(t,d8,i,n)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=n,s}var a=T.derToOid(i.encryptionOid),o=X.pbe.getCipher(a,i.encryptionParams,e),f=q.util.createBuffer(i.encryptedData);return o.update(f),o.finish()&&(r=T.fromDer(o.output)),r};X.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:T.toDer(t).getBytes()};return q.pem.encode(r,{maxline:e})};X.encryptedPrivateKeyFromPem=function(t){var e=q.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return T.fromDer(e.body)};X.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var i=X.wrapRsaPrivateKey(X.privateKeyToAsn1(t));return i=X.encryptPrivateKeyInfo(i,e,r),X.encryptedPrivateKeyToPem(i)}var n,s,a,o;switch(r.algorithm){case"aes128":n="AES-128-CBC",a=16,s=q.random.getBytesSync(16),o=q.aes.createEncryptionCipher;break;case"aes192":n="AES-192-CBC",a=24,s=q.random.getBytesSync(16),o=q.aes.createEncryptionCipher;break;case"aes256":n="AES-256-CBC",a=32,s=q.random.getBytesSync(16),o=q.aes.createEncryptionCipher;break;case"3des":n="DES-EDE3-CBC",a=24,s=q.random.getBytesSync(8),o=q.des.createEncryptionCipher;break;case"des":n="DES-CBC",a=8,s=q.random.getBytesSync(8),o=q.des.createEncryptionCipher;break;default:var f=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw f.algorithm=r.algorithm,f}var u=q.pbe.opensslDeriveBytes(e,s.substr(0,8),a),c=o(u);c.start(s),c.update(T.toDer(X.privateKeyToAsn1(t))),c.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:n,parameters:q.util.bytesToHex(s).toUpperCase()},body:c.output.getBytes()};return q.pem.encode(h)};X.decryptRsaPrivateKey=function(t,e){var r=null,i=q.pem.decode(t)[0];if(i.type!=="ENCRYPTED PRIVATE KEY"&&i.type!=="PRIVATE KEY"&&i.type!=="RSA PRIVATE KEY"){var n=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw n.headerType=n,n}if(i.procType&&i.procType.type==="ENCRYPTED"){var s,a;switch(i.dekInfo.algorithm){case"DES-CBC":s=8,a=q.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,a=q.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,a=q.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,a=q.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,a=q.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,a=function(h){return q.rc2.createDecryptionCipher(h,40)};break;case"RC2-64-CBC":s=8,a=function(h){return q.rc2.createDecryptionCipher(h,64)};break;case"RC2-128-CBC":s=16,a=function(h){return q.rc2.createDecryptionCipher(h,128)};break;default:var n=new Error('Could not decrypt private key; unsupported encryption algorithm "'+i.dekInfo.algorithm+'".');throw n.algorithm=i.dekInfo.algorithm,n}var o=q.util.hexToBytes(i.dekInfo.parameters),f=q.pbe.opensslDeriveBytes(e,o.substr(0,8),s),u=a(f);if(u.start(o),u.update(q.util.createBuffer(i.body)),u.finish())r=u.output.getBytes();else return r}else r=i.body;return i.type==="ENCRYPTED PRIVATE KEY"?r=X.decryptPrivateKeyInfo(T.fromDer(r),e):r=T.fromDer(r),r!==null&&(r=X.privateKeyFromAsn1(r)),r};X.pbe.generatePkcs12Key=function(t,e,r,i,n,s){var a,o;if(typeof s=="undefined"||s===null){if(!("sha1"in q.md))throw new Error('"sha1" hash algorithm unavailable.');s=q.md.sha1.create()}var f=s.digestLength,u=s.blockLength,c=new q.util.ByteBuffer,h=new q.util.ByteBuffer;if(t!=null){for(o=0;o<t.length;o++)h.putInt16(t.charCodeAt(o));h.putInt16(0)}var l=h.length(),d=e.length(),p=new q.util.ByteBuffer;p.fillWithByte(r,u);var y=u*Math.ceil(d/u),g=new q.util.ByteBuffer;for(o=0;o<y;o++)g.putByte(e.at(o%d));var v=u*Math.ceil(l/u),x=new q.util.ByteBuffer;for(o=0;o<v;o++)x.putByte(h.at(o%l));var w=g;w.putBuffer(x);for(var P=Math.ceil(n/f),B=1;B<=P;B++){var S=new q.util.ByteBuffer;S.putBytes(p.bytes()),S.putBytes(w.bytes());for(var G=0;G<i;G++)s.start(),s.update(S.getBytes()),S=s.digest();var z=new q.util.ByteBuffer;for(o=0;o<u;o++)z.putByte(S.at(o%f));var se=Math.ceil(d/u)+Math.ceil(l/u),Te=new q.util.ByteBuffer;for(a=0;a<se;a++){var ye=new q.util.ByteBuffer(w.getBytes(u)),pe=511;for(o=z.length()-1;o>=0;o--)pe=pe>>8,pe+=z.at(o)+ye.at(o),ye.setAt(o,pe&255);Te.putBuffer(ye)}w=Te,c.putBuffer(S)}return c.truncate(c.length()-n),c};X.pbe.getCipher=function(t,e,r){switch(t){case X.oids.pkcs5PBES2:return X.pbe.getCipherForPBES2(t,e,r);case X.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case X.oids["pbewithSHAAnd40BitRC2-CBC"]:return X.pbe.getCipherForPKCS12PBE(t,e,r);default:var i=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw i.oid=t,i.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],i}};X.pbe.getCipherForPBES2=function(t,e,r){var i={},n=[];if(!T.validate(e,y8,i,n)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=n,s}if(t=T.derToOid(i.kdfOid),t!==X.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=t,s.supportedOids=["pkcs5PBKDF2"],s}if(t=T.derToOid(i.encOid),t!==X.oids["aes128-CBC"]&&t!==X.oids["aes192-CBC"]&&t!==X.oids["aes256-CBC"]&&t!==X.oids["des-EDE3-CBC"]&&t!==X.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=t,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var a=i.kdfSalt,o=q.util.createBuffer(i.kdfIterationCount);o=o.getInt(o.length()<<3);var f,u;switch(X.oids[t]){case"aes128-CBC":f=16,u=q.aes.createDecryptionCipher;break;case"aes192-CBC":f=24,u=q.aes.createDecryptionCipher;break;case"aes256-CBC":f=32,u=q.aes.createDecryptionCipher;break;case"des-EDE3-CBC":f=24,u=q.des.createDecryptionCipher;break;case"desCBC":f=8,u=q.des.createDecryptionCipher;break}var c=Xy(i.prfOid),h=q.pkcs5.pbkdf2(r,a,o,f,c),l=i.encIv,d=u(h);return d.start(l),d};X.pbe.getCipherForPKCS12PBE=function(t,e,r){var i={},n=[];if(!T.validate(e,g8,i,n)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=n,s}var a=q.util.createBuffer(i.salt),o=q.util.createBuffer(i.iterations);o=o.getInt(o.length()<<3);var f,u,c;switch(t){case X.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:f=24,u=8,c=q.des.startDecrypting;break;case X.oids["pbewithSHAAnd40BitRC2-CBC"]:f=5,u=8,c=function(y,g){var v=q.rc2.createDecryptionCipher(y,40);return v.start(g,null),v};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=t,s}var h=Xy(i.prfOid),l=X.pbe.generatePkcs12Key(r,a,1,o,f,h);h.start();var d=X.pbe.generatePkcs12Key(r,a,2,o,u,h);return c(l,d)};X.pbe.opensslDeriveBytes=function(t,e,r,i){if(typeof i=="undefined"||i===null){if(!("md5"in q.md))throw new Error('"md5" hash algorithm unavailable.');i=q.md.md5.create()}e===null&&(e="");for(var n=[Zy(i,t+e)],s=16,a=1;s<r;++a,s+=16)n.push(Zy(i,n[a-1]+t+e));return n.join("").substr(0,r)};function Zy(t,e){return t.start().update(e).digest().getBytes()}function Xy(t){var e;if(!t)e="hmacWithSHA1";else if(e=X.oids[T.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return Jy(e)}function Jy(t){var e=q.md;switch(t){case"hmacWithSHA224":e=q.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function v8(t,e,r,i){var n=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OCTETSTRING,!1,t),T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,e.getBytes())]);return i!=="hmacWithSHA1"&&n.value.push(T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,q.util.hexToBytes(r.toString(16))),T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(X.oids[i]).getBytes()),T.create(T.Class.UNIVERSAL,T.Type.NULL,!1,"")])),n}});var sr={};lt(sr,{concat:()=>x8});function x8(t,e){e||(e=t.reduce((n,s)=>n+s.length,0));let r=new Uint8Array(e),i=0;for(let n of t)r.set(n,i),i+=n.length;return r}var ar=Ee(()=>{});var Hs=E(rg=>{"use strict";rg.get=(t=globalThis)=>{let e=t.crypto;if(!e||!e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}});var cc=E((F6,ng)=>{"use strict";var{concat:b8}=(ar(),sr),{fromString:ig}=(st(),nt),m8=Hs();function E8({algorithm:t="AES-GCM",nonceLength:e=12,keyLength:r=16,digest:i="SHA-256",saltLength:n=16,iterations:s=32767}={}){let a=m8.get();r*=8;async function o(u,c){let h=a.getRandomValues(new Uint8Array(n)),l=a.getRandomValues(new Uint8Array(e)),d={name:t,iv:l},p={name:"PBKDF2",salt:h,iterations:s,hash:{name:i}},y=await a.subtle.importKey("raw",ig(c),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),g=await a.subtle.deriveKey(p,y,{name:t,length:r},!0,["encrypt"]),v=await a.subtle.encrypt(d,g,u);return b8([h,d.iv,new Uint8Array(v)])}async function f(u,c){let h=u.slice(0,n),l=u.slice(n,n+e),d=u.slice(n+e),p={name:t,iv:l},y={name:"PBKDF2",salt:h,iterations:s,hash:{name:i}},g=await a.subtle.importKey("raw",ig(c),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),v=await a.subtle.deriveKey(y,g,{name:t,length:r},!0,["decrypt"]),x=await a.subtle.decrypt(p,v,d);return new Uint8Array(x)}return{encrypt:o,decrypt:f}}ng.exports={create:E8}});var ag=E((U6,sg)=>{"use strict";var{base64:w8}=(on(),Ei),S8=cc();sg.exports={import:async function(t,e){let r=w8.decode(t);return await S8.create().decrypt(r,e)}}});var or={};lt(or,{equals:()=>_8});function _8(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var ur=Ee(()=>{});var hg=E((q6,fg)=>{var ke=Se();fn();$e();var zs=fg.exports=ke.sha512=ke.sha512||{};ke.md.sha512=ke.md.algorithms.sha512=zs;var og=ke.sha384=ke.sha512.sha384=ke.sha512.sha384||{};og.create=function(){return zs.create("SHA-384")};ke.md.sha384=ke.md.algorithms.sha384=og;ke.sha512.sha256=ke.sha512.sha256||{create:function(){return zs.create("SHA-512/256")}};ke.md["sha512/256"]=ke.md.algorithms["sha512/256"]=ke.sha512.sha256;ke.sha512.sha224=ke.sha512.sha224||{create:function(){return zs.create("SHA-512/224")}};ke.md["sha512/224"]=ke.md.algorithms["sha512/224"]=ke.sha512.sha224;zs.create=function(t){if(ug||I8(),typeof t=="undefined"&&(t="SHA-512"),!(t in dn))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=dn[t],r=null,i=ke.util.createBuffer(),n=new Array(80),s=0;s<80;++s)n[s]=new Array(2);var a=64;switch(t){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var o={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength128=[];for(var f=o.messageLengthSize/4,u=0;u<f;++u)o.fullMessageLength.push(0);i=ke.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return o},o.start(),o.update=function(f,u){u==="utf8"&&(f=ke.util.encodeUtf8(f));var c=f.length;o.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var h=o.fullMessageLength.length-1;h>=0;--h)o.fullMessageLength[h]+=c[1],c[1]=c[0]+(o.fullMessageLength[h]/4294967296>>>0),o.fullMessageLength[h]=o.fullMessageLength[h]>>>0,c[0]=c[1]/4294967296>>>0;return i.putBytes(f),cg(r,n,i),(i.read>2048||i.length()===0)&&i.compact(),o},o.digest=function(){var f=ke.util.createBuffer();f.putBytes(i.bytes());var u=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,c=u&o.blockLength-1;f.putBytes(fc.substr(0,o.blockLength-c));for(var h,l,d=o.fullMessageLength[0]*8,p=0;p<o.fullMessageLength.length-1;++p)h=o.fullMessageLength[p+1]*8,l=h/4294967296>>>0,d+=l,f.putInt32(d>>>0),d=h>>>0;f.putInt32(d);for(var y=new Array(r.length),p=0;p<r.length;++p)y[p]=r[p].slice(0);cg(y,n,f);var g=ke.util.createBuffer(),v;t==="SHA-512"?v=y.length:t==="SHA-384"?v=y.length-2:v=y.length-4;for(var p=0;p<v;++p)g.putInt32(y[p][0]),(p!==v-1||t!=="SHA-512/224")&&g.putInt32(y[p][1]);return g},o};var fc=null,ug=!1,hc=null,dn=null;function I8(){fc=String.fromCharCode(128),fc+=ke.util.fillString(String.fromCharCode(0),128),hc=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],dn={},dn["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],dn["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],dn["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],dn["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],ug=!0}function cg(t,e,r){for(var i,n,s,a,o,f,u,c,h,l,d,p,y,g,v,x,w,P,B,S,G,z,se,Te,ye,pe,Ot,Hr,Z,be,O,zi,ji,Wi,Yi,_s=r.length();_s>=128;){for(Z=0;Z<16;++Z)e[Z][0]=r.getInt32()>>>0,e[Z][1]=r.getInt32()>>>0;for(;Z<80;++Z)zi=e[Z-2],be=zi[0],O=zi[1],i=((be>>>19|O<<13)^(O>>>29|be<<3)^be>>>6)>>>0,n=((be<<13|O>>>19)^(O<<3|be>>>29)^(be<<26|O>>>6))>>>0,Wi=e[Z-15],be=Wi[0],O=Wi[1],s=((be>>>1|O<<31)^(be>>>8|O<<24)^be>>>7)>>>0,a=((be<<31|O>>>1)^(be<<24|O>>>8)^(be<<25|O>>>7))>>>0,ji=e[Z-7],Yi=e[Z-16],O=n+ji[1]+a+Yi[1],e[Z][0]=i+ji[0]+s+Yi[0]+(O/4294967296>>>0)>>>0,e[Z][1]=O>>>0;for(y=t[0][0],g=t[0][1],v=t[1][0],x=t[1][1],w=t[2][0],P=t[2][1],B=t[3][0],S=t[3][1],G=t[4][0],z=t[4][1],se=t[5][0],Te=t[5][1],ye=t[6][0],pe=t[6][1],Ot=t[7][0],Hr=t[7][1],Z=0;Z<80;++Z)u=((G>>>14|z<<18)^(G>>>18|z<<14)^(z>>>9|G<<23))>>>0,c=((G<<18|z>>>14)^(G<<14|z>>>18)^(z<<23|G>>>9))>>>0,h=(ye^G&(se^ye))>>>0,l=(pe^z&(Te^pe))>>>0,o=((y>>>28|g<<4)^(g>>>2|y<<30)^(g>>>7|y<<25))>>>0,f=((y<<4|g>>>28)^(g<<30|y>>>2)^(g<<25|y>>>7))>>>0,d=(y&v|w&(y^v))>>>0,p=(g&x|P&(g^x))>>>0,O=Hr+c+l+hc[Z][1]+e[Z][1],i=Ot+u+h+hc[Z][0]+e[Z][0]+(O/4294967296>>>0)>>>0,n=O>>>0,O=f+p,s=o+d+(O/4294967296>>>0)>>>0,a=O>>>0,Ot=ye,Hr=pe,ye=se,pe=Te,se=G,Te=z,O=S+n,G=B+i+(O/4294967296>>>0)>>>0,z=O>>>0,B=w,S=P,w=v,P=x,v=y,x=g,O=n+a,y=i+s+(O/4294967296>>>0)>>>0,g=O>>>0;O=t[0][1]+g,t[0][0]=t[0][0]+y+(O/4294967296>>>0)>>>0,t[0][1]=O>>>0,O=t[1][1]+x,t[1][0]=t[1][0]+v+(O/4294967296>>>0)>>>0,t[1][1]=O>>>0,O=t[2][1]+P,t[2][0]=t[2][0]+w+(O/4294967296>>>0)>>>0,t[2][1]=O>>>0,O=t[3][1]+S,t[3][0]=t[3][0]+B+(O/4294967296>>>0)>>>0,t[3][1]=O>>>0,O=t[4][1]+z,t[4][0]=t[4][0]+G+(O/4294967296>>>0)>>>0,t[4][1]=O>>>0,O=t[5][1]+Te,t[5][0]=t[5][0]+se+(O/4294967296>>>0)>>>0,t[5][1]=O>>>0,O=t[6][1]+pe,t[6][0]=t[6][0]+ye+(O/4294967296>>>0)>>>0,t[6][1]=O>>>0,O=t[7][1]+Hr,t[7][0]=t[7][0]+Ot+(O/4294967296>>>0)>>>0,t[7][1]=O>>>0,_s-=128}}});var lc=E((V6,lg)=>{"use strict";var B8=Za(),A8=Oe();lg.exports=function(t){if(isNaN(t)||t<=0)throw A8(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return B8(t)}});var Bo=E(js=>{"use strict";$e();wo();var C8=Se(),{fromString:T8}=(st(),nt),{toString:pg}=(yt(),dt),{concat:dg}=(ar(),sr);js.bigIntegerToUintBase64url=(t,e)=>{let r=Uint8Array.from(t.abs().toByteArray());if(r=r[0]===0?r.slice(1):r,e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=dg([new Uint8Array(e-r.length),r])}return pg(r,"base64url")};js.base64urlToBigInteger=t=>{let e=js.base64urlToBuffer(t);return new C8.jsbn.BigInteger(pg(e,"base16"),16)};js.base64urlToBuffer=(t,e)=>{let r=T8(t,"base64urlpad");if(e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=dg([new Uint8Array(e-r.length),r])}return r}});var vg=E(Ws=>{"use strict";qs();Io();var Ai=Se(),{bigIntegerToUintBase64url:Ar,base64urlToBigInteger:Cr}=Bo(),{fromString:yg}=(st(),nt),{toString:gg}=(yt(),dt);Ws.pkcs1ToJwk=function(t){let e=Ai.asn1.fromDer(gg(t,"ascii")),r=Ai.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:Ar(r.n),e:Ar(r.e),d:Ar(r.d),p:Ar(r.p),q:Ar(r.q),dp:Ar(r.dP),dq:Ar(r.dQ),qi:Ar(r.qInv),alg:"RS256",kid:"2011-04-29"}};Ws.jwkToPkcs1=function(t){let e=Ai.pki.privateKeyToAsn1({n:Cr(t.n),e:Cr(t.e),d:Cr(t.d),p:Cr(t.p),q:Cr(t.q),dP:Cr(t.dp),dQ:Cr(t.dq),qInv:Cr(t.qi)});return yg(Ai.asn1.toDer(e).getBytes(),"ascii")};Ws.pkixToJwk=function(t){let e=Ai.asn1.fromDer(gg(t,"ascii")),r=Ai.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:Ar(r.n),e:Ar(r.e),alg:"RS256",kid:"2011-04-29"}};Ws.jwkToPkix=function(t){let e=Ai.pki.publicKeyToAsn1({n:Cr(t.n),e:Cr(t.e)});return yg(Ai.asn1.toDer(e).getBytes(),"ascii")}});var Eg=E((z6,mg)=>{"use strict";Io();var xg=Se(),{base64urlToBigInteger:R8}=Bo();function bg(t,e){return e.map(r=>R8(t[r]))}function D8(t){return xg.pki.setRsaPrivateKey(...bg(t,["n","e","d","p","q","dp","dq","qi"]))}function P8(t){return xg.pki.setRsaPublicKey(...bg(t,["n","e"]))}mg.exports={jwk2pub:P8,jwk2priv:D8}});var _g=E(Jr=>{"use strict";var Xr=Hs(),k8=lc(),{toString:N8}=(yt(),dt),{fromString:O8}=(st(),nt);Jr.utils=vg();Jr.generateKey=async function(t){let e=await Xr.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await wg(e);return{privateKey:r[0],publicKey:r[1]}};Jr.unmarshalPrivateKey=async function(t){let r=[await Xr.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await L8(t)],i=await wg({privateKey:r[0],publicKey:r[1]});return{privateKey:i[0],publicKey:i[1]}};Jr.getRandomValues=k8;Jr.hashAndSign=async function(t,e){let r=await Xr.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),i=await Xr.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(e));return new Uint8Array(i,i.byteOffset,i.byteLength)};Jr.hashAndVerify=async function(t,e,r){let i=await Xr.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return Xr.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},i,e,r)};function wg(t){return Promise.all([Xr.get().subtle.exportKey("jwk",t.privateKey),Xr.get().subtle.exportKey("jwk",t.publicKey)])}function L8(t){return Xr.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}var{jwk2pub:M8,jwk2priv:K8}=Eg();function Sg(t,e,r,i){let n=e?M8(t):K8(t),s=N8(Uint8Array.from(r),"ascii"),a=i(s,n);return O8(a,"ascii")}Jr.encrypt=function(t,e){return Sg(t,!0,e,(r,i)=>i.encrypt(r))};Jr.decrypt=function(t,e){return Sg(t,!1,e,(r,i)=>i.decrypt(r))}});var Ao=E((W6,Ig)=>{"use strict";var{base64:F8}=(on(),Ei),U8=cc();Ig.exports={export:async function(t,e){let i=await U8.create().encrypt(t,e);return F8.encode(i)}}});var Rg=E((Y6,Tg)=>{"use strict";var{sha256:Bg}=(rr(),qt),Ag=Oe(),{equals:Cg}=(ur(),or),{toString:q8}=(yt(),dt);hg();var Co=Se(),zt=_g(),To=oo(),V8=Ao(),Ro=class{constructor(e){this._key=e}async verify(e,r){return zt.hashAndVerify(this._key,r,e)}marshal(){return zt.utils.jwkToPkix(this._key)}get bytes(){return To.PublicKey.encode({Type:To.KeyType.RSA,Data:this.marshal()}).finish()}encrypt(e){return zt.encrypt(this._key,e)}equals(e){return Cg(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Bg.digest(this.bytes);return e}},Ys=class{constructor(e,r){this._key=e,this._publicKey=r}genSecret(){return zt.getRandomValues(16)}async sign(e){return zt.hashAndSign(this._key,e)}get public(){if(!this._publicKey)throw Ag(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new Ro(this._publicKey)}decrypt(e){return zt.decrypt(this._key,e)}marshal(){return zt.utils.jwkToPkcs1(this._key)}get bytes(){return To.PrivateKey.encode({Type:To.KeyType.RSA,Data:this.marshal()}).finish()}equals(e){return Cg(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Bg.digest(this.bytes);return e}async id(){let e=await this.public.hash();return q8(e,"base58btc")}async export(e,r="pkcs-8"){if(r==="pkcs-8"){let i=new Co.util.ByteBuffer(this.marshal()),n=Co.asn1.fromDer(i),s=Co.pki.privateKeyFromAsn1(n),a={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return Co.pki.encryptRsaPrivateKey(s,e,a)}else{if(r==="libp2p-key")return V8.export(this.bytes,e);throw Ag(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}};async function G8(t){let e=zt.utils.pkcs1ToJwk(t),r=await zt.unmarshalPrivateKey(e);return new Ys(r.privateKey,r.publicKey)}function H8(t){let e=zt.utils.pkixToJwk(t);return new Ro(e)}async function z8(t){let e=await zt.unmarshalPrivateKey(t);return new Ys(e.privateKey,e.publicKey)}async function j8(t){let e=await zt.generateKey(t);return new Ys(e.privateKey,e.publicKey)}Tg.exports={RsaPublicKey:Ro,RsaPrivateKey:Ys,unmarshalRsaPublicKey:H8,unmarshalRsaPrivateKey:G8,generateKeyPair:j8,fromJwk:z8}});var bc=E(me=>{"use strict";var W8=me&&me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(me,"__esModule",{value:!0});me.utils=me.curve25519=me.getSharedSecret=me.verify=me.sign=me.getPublicKey=me.Signature=me.Point=me.ExtendedPoint=me.CURVE=void 0;var Y8=W8($r()),We=BigInt(0),ie=BigInt(1),vt=BigInt(2),Dg=BigInt(255),Ve={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:vt**Dg-BigInt(19),n:vt**BigInt(252)+BigInt("27742317777372353535851937790883648493"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")};me.CURVE=Ve;var $s=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),$6=BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),$8=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),Q8=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),Z8=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),X8=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),Ie=class{constructor(e,r,i,n){this.x=e,this.y=r,this.z=i,this.t=n}static fromAffine(e){if(!(e instanceof Ke))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(Ke.ZERO)?Ie.ZERO:new Ie(e.x,e.y,ie,D(e.x*e.y))}static toAffineBatch(e){let r=t4(e.map(i=>i.z));return e.map((i,n)=>i.toAffine(r[n]))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}static fromRistrettoHash(e){e=ei(e),gn(64,e);let r=yc(e.slice(0,32)),i=this.calcElligatorRistrettoMap(r),n=yc(e.slice(32,64)),s=this.calcElligatorRistrettoMap(n);return i.add(s)}static calcElligatorRistrettoMap(e){let{d:r}=Ve,i=D($s*e*e),n=D((i+ie)*Z8),s=BigInt(-1),a=D((s-r*i)*D(i+r)),{isValid:o,value:f}=vc(n,a),u=D(f*e);Ci(u)||(u=D(-u)),o||(f=u),o||(s=i);let c=D(s*(i-ie)*X8-a),h=f*f,l=D((f+f)*a),d=D(c*$8),p=D(ie-h),y=D(ie+h);return new Ie(D(l*y),D(p*d),D(d*y),D(l*p))}static fromRistrettoBytes(e){e=ei(e),gn(32,e);let{a:r,d:i}=Ve,n="ExtendedPoint.fromRistrettoBytes: Cannot convert bytes to Ristretto Point",s=yc(e);if(!r4(Qs(s,32),e)||Ci(s))throw new Error(n);let a=D(s*s),o=D(ie+r*a),f=D(ie-r*a),u=D(o*o),c=D(f*f),h=D(r*i*u-c),{isValid:l,value:d}=Og(D(h*c)),p=D(d*f),y=D(d*p*h),g=D((s+s)*p);Ci(g)&&(g=D(-g));let v=D(o*y),x=D(g*v);if(!l||Ci(x)||v===We)throw new Error(n);return new Ie(g,v,ie,x)}toRistrettoBytes(){let{x:e,y:r,z:i,t:n}=this,s=D(D(i+r)*D(i-r)),a=D(e*r),{value:o}=Og(D(s*a**vt)),f=D(o*s),u=D(o*a),c=D(f*u*n),h;if(Ci(n*c)){let d=D(r*$s),p=D(e*$s);e=d,r=p,h=D(f*Q8)}else h=u;Ci(e*c)&&(r=D(-r));let l=D((i-r)*h);return Ci(l)&&(l=D(-l)),Qs(l,32)}equals(e){let r=this,i=e;return D(r.t*i.z)===D(i.t*r.z)}negate(){return new Ie(D(-this.x),this.y,this.z,D(-this.t))}double(){let e=this.x,r=this.y,i=this.z,{a:n}=Ve,s=D(e**vt),a=D(r**vt),o=D(vt*i**vt),f=D(n*s),u=D((e+r)**vt-s-a),c=D(f+a),h=D(c-o),l=D(f-a),d=D(u*h),p=D(c*l),y=D(u*l),g=D(h*c);return new Ie(d,p,g,y)}add(e){let r=this.x,i=this.y,n=this.z,s=this.t,a=e.x,o=e.y,f=e.z,u=e.t,c=D((i-r)*(o+a)),h=D((i+r)*(o-a)),l=D(h-c);if(l===We)return this.double();let d=D(n*vt*u),p=D(s*vt*f),y=D(p+d),g=D(h+c),v=D(p-d),x=D(y*l),w=D(g*v),P=D(y*v),B=D(l*g);return new Ie(x,w,B,P)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){let r=rs(e),i=Ie.ZERO;if(this.equals(i)||r===ie)return this;let n=i,s=this;for(;r>We;)r&ie&&(n=n.add(s)),s=s.double(),r>>=ie;return n}precomputeWindow(e){let r=256/e+1,i=[],n=this,s=n;for(let a=0;a<r;a++){s=n,i.push(s);for(let o=1;o<2**(e-1);o++)s=s.add(n),i.push(s);n=s.double()}return i}wNAF(e,r){!r&&this.equals(Ie.BASE)&&(r=Ke.BASE);let i=r&&r._WINDOW_SIZE||1;if(256%i)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=r&&pc.get(r);n||(n=this.precomputeWindow(i),r&&i!==1&&(n=Ie.normalizeZ(n),pc.set(r,n)));let s=Ie.ZERO,a=Ie.ZERO,o=256/i+1,f=2**(i-1),u=BigInt(2**i-1),c=2**i,h=BigInt(i);for(let l=0;l<o;l++){let d=l*f,p=Number(e&u);if(e>>=h,p>f&&(p-=c,e+=ie),p===0){let y=n[d];l%2&&(y=y.negate()),a=a.add(y)}else{let y=n[d+Math.abs(p)-1];p<0&&(y=y.negate()),s=s.add(y)}}return[s,a]}multiply(e,r){let i=rs(e);return Ie.normalizeZ(this.wNAF(i,r))[0]}toAffine(e=gc(this.z)){let r=D(this.x*e),i=D(this.y*e);return new Ke(r,i)}};me.ExtendedPoint=Ie;Ie.BASE=new Ie(Ve.Gx,Ve.Gy,ie,D(Ve.Gx*Ve.Gy));Ie.ZERO=new Ie(We,ie,ie,We);var pc=new WeakMap,Ke=class{constructor(e,r){this.x=e,this.y=r}_setWindowSize(e){this._WINDOW_SIZE=e,pc.delete(this)}static fromHex(e){let{d:r,P:i}=Ve,n=ei(e);gn(32,n);let s=n.slice();s[31]=n[31]&~128;let a=ts(s);if(a>=i)throw new Error("Point.fromHex expects hex <= Fp");let o=D(a*a),f=D(o-ie),u=D(r*o+ie),{isValid:c,value:h}=vc(f,u);if(!c)throw new Error("Point.fromHex: invalid y coordinate");let l=(h&ie)===ie;return(n[31]&128)!=0!==l&&(h=D(-h)),new Ke(h,a)}static async fromPrivateKey(e){return(await Zs(e)).point}toRawBytes(){let e=Qs(this.y,32);return e[31]|=this.x&ie?128:0,e}toHex(){return dc(this.toRawBytes())}toX25519(){let{y:e}=this;return D((ie+e)*gc(ie-e))}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Ke(D(-this.x),this.y)}add(e){return Ie.fromAffine(this).add(Ie.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return Ie.fromAffine(this).multiply(e,this).toAffine()}};me.Point=Ke;Ke.BASE=new Ke(Ve.Gx,Ve.Gy);Ke.ZERO=new Ke(We,ie);var yn=class{constructor(e,r){if(this.r=e,!(e instanceof Ke))throw new Error("Expected Point instance");this.s=rs(r)}static fromHex(e){let r=ei(e);gn(64,r);let i=Ke.fromHex(r.slice(0,32)),n=ts(r.slice(32,64));return new yn(i,n)}toRawBytes(){let e=new Uint8Array(64);return e.set(this.r.toRawBytes()),e.set(Qs(this.s,32),32),e}toHex(){return dc(this.toRawBytes())}};me.Signature=yn;function J8(...t){if(!t.every(i=>i instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(t.length===1)return t[0];let e=t.reduce((i,n)=>i+n.length,0),r=new Uint8Array(e);for(let i=0,n=0;i<t.length;i++){let s=t[i];r.set(s,n),n+=s.length}return r}var e4=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function dc(t){let e="";for(let r=0;r<t.length;r++)e+=e4[t[r]];return e}function Pg(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let i=r*2,n=t.slice(i,i+2),s=Number.parseInt(n,16);if(Number.isNaN(s))throw new Error("Invalid byte sequence");e[r]=s}return e}function kg(t,e){let r=t.toString(16).padStart(e*2,"0");return Pg(r)}function Qs(t,e){return kg(t,e).reverse()}function Ci(t){return(D(t)&ie)===ie}function ts(t){if(!(t instanceof Uint8Array))throw new Error(`bytesToNumberLE: expected Uint8Array, got ${t}`);let e=We,r=BigInt(8);for(let i=0;i<t.length;i++)e+=BigInt(t[i])<<r*BigInt(i);return e}function yc(t){return D(ts(t)&vt**Dg-ie)}function D(t,e=Ve.P){let r=t%e;return r>=We?r:e+r}function gc(t,e=Ve.P){if(t===We||e<=We)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=D(t,e),i=e,n=We,s=ie,a=ie,o=We;for(;r!==We;){let u=i/r,c=i%r,h=n-a*u,l=s-o*u;i=r,r=c,n=a,s=o,a=h,o=l}if(i!==ie)throw new Error("invert: does not exist");return D(n,e)}function t4(t,e=Ve.P){let r=t.length,i=new Array(r),n=ie;for(let s=0;s<r;s++)t[s]!==We&&(i[s]=n,n=D(n*t[s],e));n=gc(n,e);for(let s=r-1;s>=0;s--){if(t[s]===We)continue;let a=D(n*t[s],e);t[s]=D(n*i[s],e),n=a}return t}function cr(t,e){let{P:r}=Ve,i=t;for(;e-- >We;)i*=i,i%=r;return i}function Ng(t){let{P:e}=Ve,r=BigInt(5),i=BigInt(10),n=BigInt(20),s=BigInt(40),a=BigInt(80),f=t*t%e*t%e,u=cr(f,vt)*f%e,c=cr(u,ie)*t%e,h=cr(c,r)*c%e,l=cr(h,i)*h%e,d=cr(l,n)*l%e,p=cr(d,s)*d%e,y=cr(p,a)*p%e,g=cr(y,a)*p%e,v=cr(g,i)*h%e;return{pow_p_5_8:cr(v,vt)*t%e,b2:f}}function vc(t,e){let r=D(e*e*e),i=D(r*r*e),n=Ng(t*i).pow_p_5_8,s=D(t*r*n),a=D(e*s*s),o=s,f=D(s*$s),u=a===t,c=a===D(-t),h=a===D(-t*$s);return u&&(s=o),(c||h)&&(s=f),Ci(s)&&(s=D(-s)),{isValid:u||c,value:s}}function Og(t){return vc(ie,t)}async function xc(...t){let e=J8(...t),r=await me.utils.sha512(e),i=ts(r);return D(i,Ve.n)}function r4(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function ei(t){return t instanceof Uint8Array?Uint8Array.from(t):Pg(t)}function gn(t,e){if(e.length!==t)throw new Error(`Expected ${t} bytes`)}function rs(t,e=Ve.n){if(typeof t=="number"&&t>0&&Number.isSafeInteger(t))return BigInt(t);if(typeof t=="bigint"&&We<t&&t<e)return t;throw new TypeError("Expected valid scalar: 0 < scalar < max")}function i4(t){let e=typeof t=="bigint"||typeof t=="number"?kg(rs(t,vt**BigInt(256)),32):ei(t);return gn(32,e),e}function Lg(t){return t=ei(t),gn(32,t),t[0]&=248,t[31]&=127,t[31]|=64,ts(t)}async function Zs(t){let e=await me.utils.sha512(i4(t)),r=e.slice(0,32),i=e.slice(32,64),n=D(Lg(r),Ve.n),s=Ke.BASE.multiply(n),a=s.toRawBytes();return{head:r,prefix:i,scalar:n,point:s,pubBytes:a}}async function n4(t){return(await Zs(t)).pubBytes}me.getPublicKey=n4;async function s4(t,e){let r=ei(t),{prefix:i,scalar:n,pubBytes:s}=await Zs(e),a=await xc(i,r),o=Ke.BASE.multiply(a),f=await xc(o.toRawBytes(),s,r),u=D(a+f*n,Ve.n);return new yn(o,u).toRawBytes()}me.sign=s4;async function a4(t,e,r){e=ei(e),r instanceof Ke||(r=Ke.fromHex(r)),t instanceof yn||(t=yn.fromHex(t));let i=Ie.BASE.multiply(t.s),n=await xc(t.r.toRawBytes(),r.toRawBytes(),e),s=Ie.fromAffine(r).multiplyUnsafe(n);return Ie.fromAffine(t.r).add(s).subtract(i).multiplyUnsafe(Ve.h).equals(Ie.ZERO)}me.verify=a4;async function o4(t,e){let{scalar:r}=await Zs(t),i=Ke.fromHex(e).toX25519();return Mg(r,i)}me.getSharedSecret=o4;Ke.BASE._setWindowSize(8);function Do(t,e,r){let i=D(t*(e-r));return e=D(e-i),r=D(r+i),[e,r]}function u4(t,e){let{P:r,n:i}=Ve,n=rs(t,r),s=rs(e,r),a=BigInt(121665),o=n,f=ie,u=We,c=n,h=ie,l=We,d;for(let v=BigInt(255-1);v>=We;v--){let x=s>>v&ie;l^=x,d=Do(l,f,c),f=d[0],c=d[1],d=Do(l,u,h),u=d[0],h=d[1],l=x;let w=D(f+u),P=D(w*w),B=D(f-u),S=D(B*B),G=D(P-S),z=D(c+h),se=D(c-h),Te=D(se*w),ye=D(z*B);c=D(D(Te+ye)**vt),h=D(o*D(Te-ye)**vt),f=D(P*S),u=D(G*(P+D(a*G)))}d=Do(l,f,c),f=d[0],c=d[1],d=Do(l,u,h),u=d[0],h=d[1];let{pow_p_5_8:p,b2:y}=Ng(u),g=D(cr(p,BigInt(3))*y);return D(f*g)}function c4(t){return Qs(D(t,Ve.P),32)}function Mg(t,e){let r=u4(t,e);if(r===We)throw new Error("Invalid private or public key received");return c4(r)}function f4(t){let e=ei(t);return gn(32,e),e[31]&=127,ts(e)}me.curve25519={BASE_POINT_U:"0900000000000000000000000000000000000000000000000000000000000000",scalarMult(t,e){let r=f4(e),i=Lg(t);return Mg(r,i)},scalarMultBase(t){return me.curve25519.scalarMult(t,me.curve25519.BASE_POINT_U)}};var Ti={node:Y8.default,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};me.utils={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],bytesToHex:dc,getExtendedPublicKey:Zs,randomBytes:(t=32)=>{if(Ti.web)return Ti.web.getRandomValues(new Uint8Array(t));if(Ti.node){let{randomBytes:e}=Ti.node;return new Uint8Array(e(t).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>me.utils.randomBytes(32),sha512:async t=>{if(Ti.web){let e=await Ti.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}else{if(Ti.node)return Uint8Array.from(Ti.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(t=8,e=Ke.BASE){let r=e.equals(Ke.BASE)?e:new Ke(e.x,e.y);return r._setWindowSize(t),r.multiply(ie),r}}});var Fg=E(Ri=>{"use strict";var Xs=bc(),h4=32,l4=64,Po=32;Ri.publicKeyLength=h4;Ri.privateKeyLength=l4;Ri.generateKey=async function(){let t=Xs.utils.randomPrivateKey(),e=await Xs.getPublicKey(t);return{privateKey:Kg(t,e),publicKey:e}};Ri.generateKeyFromSeed=async function(t){if(t.length!==Po)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let e=t,r=await Xs.getPublicKey(e);return{privateKey:Kg(e,r),publicKey:r}};Ri.hashAndSign=function(t,e){let r=t.slice(0,Po);return Xs.sign(e,r)};Ri.hashAndVerify=function(t,e,r){return Xs.verify(e,r,t)};function Kg(t,e){let r=new Uint8Array(Ri.privateKeyLength);for(let i=0;i<Po;i++)r[i]=t[i],r[Po+i]=e[i];return r}});var Hg=E((X6,Gg)=>{"use strict";var Ug=Oe(),{equals:qg}=(ur(),or),{sha256:Vg}=(rr(),qt),{base58btc:p4}=(an(),sn),{identity:d4}=(Ls(),Qn),xt=Fg(),ko=oo(),y4=Ao(),No=class{constructor(e){this._key=ns(e,xt.publicKeyLength)}async verify(e,r){return xt.hashAndVerify(this._key,r,e)}marshal(){return this._key}get bytes(){return ko.PublicKey.encode({Type:ko.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return qg(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Vg.digest(this.bytes);return e}},is=class{constructor(e,r){this._key=ns(e,xt.privateKeyLength),this._publicKey=ns(r,xt.publicKeyLength)}async sign(e){return xt.hashAndSign(this._key,e)}get public(){return new No(this._publicKey)}marshal(){return this._key}get bytes(){return ko.PrivateKey.encode({Type:ko.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return qg(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Vg.digest(this.bytes);return e}async id(){let e=await d4.digest(this.public.bytes);return p4.encode(e.bytes).substring(1)}async export(e,r="libp2p-key"){if(r==="libp2p-key")return y4.export(this.bytes,e);throw Ug(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}};function g4(t){if(t.length>xt.privateKeyLength){t=ns(t,xt.privateKeyLength+xt.publicKeyLength);let i=t.slice(0,xt.privateKeyLength),n=t.slice(xt.privateKeyLength,t.length);return new is(i,n)}t=ns(t,xt.privateKeyLength);let e=t.slice(0,xt.privateKeyLength),r=t.slice(xt.publicKeyLength);return new is(e,r)}function v4(t){return t=ns(t,xt.publicKeyLength),new No(t)}async function x4(){let{privateKey:t,publicKey:e}=await xt.generateKey();return new is(t,e)}async function b4(t){let{privateKey:e,publicKey:r}=await xt.generateKeyFromSeed(t);return new is(e,r)}function ns(t,e){if(t=Uint8Array.from(t||[]),t.length!==e)throw Ug(new Error(`Key must be a Uint8Array of length ${e}, got ${t.length}`),"ERR_INVALID_KEY_TYPE");return t}Gg.exports={Ed25519PublicKey:No,Ed25519PrivateKey:is,unmarshalEd25519PrivateKey:g4,unmarshalEd25519PublicKey:v4,generateKeyPair:x4,generateKeyPairFromSeed:b4}});var Tc=E(oe=>{"use strict";var m4=oe&&oe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oe,"__esModule",{value:!0});oe.utils=oe.schnorr=oe.verify=oe.signSync=oe.sign=oe.getSharedSecret=oe.recoverPublicKey=oe.getPublicKey=oe.Signature=oe.Point=oe.CURVE=void 0;var E4=m4($r()),de=BigInt(0),He=BigInt(1),Ye=BigInt(2),Js=BigInt(3),w4=BigInt(8),mc=Ye**BigInt(256),Be={a:de,b:BigInt(7),P:mc-Ye**BigInt(32)-BigInt(977),n:mc-BigInt("432420386565659656852420866394968145599"),h:He,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")};oe.CURVE=Be;function zg(t){let{a:e,b:r}=Be,i=H(t*t),n=H(i*t);return H(n+e*t+r)}var Oo=Be.a===de,le=class{constructor(e,r,i){this.x=e,this.y=r,this.z=i}static fromAffine(e){if(!(e instanceof ve))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new le(e.x,e.y,He)}static toAffineBatch(e){let r=B4(e.map(i=>i.z));return e.map((i,n)=>i.toAffine(r[n]))}static normalizeZ(e){return le.toAffineBatch(e).map(le.fromAffine)}equals(e){let r=this,i=e,n=H(r.z*r.z),s=H(r.z*n),a=H(i.z*i.z),o=H(i.z*a);return H(r.x*a)===H(n*i.x)&&H(r.y*o)===H(s*i.y)}negate(){return new le(this.x,H(-this.y),this.z)}double(){let e=this.x,r=this.y,i=this.z,n=H(e**Ye),s=H(r**Ye),a=H(s**Ye),o=H(Ye*(H(H((e+s)**Ye))-n-a)),f=H(Js*n),u=H(f**Ye),c=H(u-Ye*o),h=H(f*(o-c)-w4*a),l=H(Ye*r*i);return new le(c,h,l)}add(e){if(!(e instanceof le))throw new TypeError("JacobianPoint#add: expected JacobianPoint");let r=this.x,i=this.y,n=this.z,s=e.x,a=e.y,o=e.z;if(s===de||a===de)return this;if(r===de||i===de)return e;let f=H(n**Ye),u=H(o**Ye),c=H(r*u),h=H(s*f),l=H(i*o*u),d=H(H(a*n)*f),p=H(h-c),y=H(d-l);if(p===de)return y===de?this.double():le.ZERO;let g=H(p**Ye),v=H(p*g),x=H(c*g),w=H(y**Ye-v-Ye*x),P=H(y*(x-w)-l*v),B=H(n*o*p);return new le(w,P,B)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){let r=Yg(e);if(!Oo){let c=le.ZERO,h=this;for(;r>de;)r&He&&(c=c.add(h)),h=h.double(),r>>=He;return c}let{k1neg:i,k1:n,k2neg:s,k2:a}=Qg(r),o=le.ZERO,f=le.ZERO,u=this;for(;n>de||a>de;)n&He&&(o=o.add(u)),a&He&&(f=f.add(u)),u=u.double(),n>>=He,a>>=He;return i&&(o=o.negate()),s&&(f=f.negate()),f=new le(H(f.x*Be.beta),f.y,f.z),o.add(f)}precomputeWindow(e){let r=Oo?128/e+1:256/e+1,i=[],n=this,s=n;for(let a=0;a<r;a++){s=n,i.push(s);for(let o=1;o<2**(e-1);o++)s=s.add(n),i.push(s);n=s.double()}return i}wNAF(e,r){!r&&this.equals(le.BASE)&&(r=ve.BASE);let i=r&&r._WINDOW_SIZE||1;if(256%i)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=r&&Ec.get(r);n||(n=this.precomputeWindow(i),r&&i!==1&&(n=le.normalizeZ(n),Ec.set(r,n)));let s=le.ZERO,a=le.ZERO,o=Oo?128/i+1:256/i+1,f=2**(i-1),u=BigInt(2**i-1),c=2**i,h=BigInt(i);for(let l=0;l<o;l++){let d=l*f,p=Number(e&u);if(e>>=h,p>f&&(p-=c,e+=He),p===0){let y=n[d];l%2&&(y=y.negate()),a=a.add(y)}else{let y=n[d+Math.abs(p)-1];p<0&&(y=y.negate()),s=s.add(y)}}return{p:s,f:a}}multiply(e,r){let i=Yg(e),n,s;if(Oo){let{k1neg:a,k1:o,k2neg:f,k2:u}=Qg(i),{p:c,f:h}=this.wNAF(o,r),{p:l,f:d}=this.wNAF(u,r);a&&(c=c.negate()),f&&(l=l.negate()),l=new le(H(l.x*Be.beta),l.y,l.z),n=c.add(l),s=h.add(d)}else{let{p:a,f:o}=this.wNAF(i,r);n=a,s=o}return le.normalizeZ([n,s])[0]}toAffine(e=ta(this.z)){let r=e**Ye,i=H(this.x*r),n=H(this.y*r*e);return new ve(i,n)}};le.BASE=new le(Be.Gx,Be.Gy,He);le.ZERO=new le(de,He,de);var Ec=new WeakMap,ve=class{constructor(e,r){this.x=e,this.y=r}_setWindowSize(e){this._WINDOW_SIZE=e,Ec.delete(this)}static fromCompressedHex(e){let r=e.length===32,i=Mt(r?e:e.slice(1)),n=zg(i),s=I4(n),a=(s&He)===He;r?a&&(s=H(-s)):(e[0]&1)==1!==a&&(s=H(-s));let o=new ve(i,s);return o.assertValidity(),o}static fromUncompressedHex(e){let r=Mt(e.slice(1,33)),i=Mt(e.slice(33)),n=new ve(r,i);return n.assertValidity(),n}static fromHex(e){let r=xn(e),i=r[0];if(r.length===32||r.length===33&&(i===2||i===3))return this.fromCompressedHex(r);if(r.length===65&&i===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${r.length}`)}static fromPrivateKey(e){return ve.BASE.multiply(ra(e))}static fromSignature(e,r,i){let n=e instanceof Uint8Array?Mt(e):ss(e),s=Xg(r),{r:a,s:o}=s;if(i!==0&&i!==1)throw new Error("Cannot recover signature: invalid recovery bit");let f=2+(i&1),u=ve.fromHex(`0${f}${ti(a)}`),c=le.fromAffine(u).multiplyUnsafe(o),h=le.BASE.multiply(n),l=ta(a,Be.n),p=c.subtract(h).multiplyUnsafe(l).toAffine();return p.assertValidity(),p}toRawBytes(e=!1){return Di(this.toHex(e))}toHex(e=!1){let r=ti(this.x);return e?`${this.y&He?"03":"02"}${r}`:`04${r}${ti(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let e="Point is not on elliptic curve",{x:r,y:i}=this;if(!Ic(r)||!Ic(i))throw new Error(e);let n=H(i*i),s=zg(r);if(H(n-s)!==de)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new ve(this.x,H(-this.y))}double(){return le.fromAffine(this).double().toAffine()}add(e){return le.fromAffine(this).add(le.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return le.fromAffine(this).multiply(e,this).toAffine()}};oe.Point=ve;ve.BASE=new ve(Be.Gx,Be.Gy);ve.ZERO=new ve(de,de);function jg(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function Wg(t){if(t.length<2||t[0]!==2)throw new Error(`Invalid signature integer tag: ${vn(t)}`);let e=t[1],r=t.subarray(2,e+2);if(!e||r.length!==e)throw new Error("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:Mt(r),left:t.subarray(e+2)}}function S4(t){if(t.length<2||t[0]!=48)throw new Error(`Invalid signature tag: ${vn(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");let{data:e,left:r}=Wg(t.subarray(2)),{data:i,left:n}=Wg(r);if(n.length)throw new Error(`Invalid signature: left bytes after parsing: ${vn(n)}`);return{r:e,s:i}}var Tr=class{constructor(e,r){this.r=e,this.s=r,this.assertValidity()}static fromCompact(e){let r=e instanceof Uint8Array,i="Signature.fromCompact";if(typeof e!="string"&&!r)throw new TypeError(`${i}: Expected string or Uint8Array`);let n=r?vn(e):e;if(n.length!==128)throw new Error(`${i}: Expected 64-byte hex`);return new Tr(ss(n.slice(0,64)),ss(n.slice(64,128)))}static fromDER(e){let r=e instanceof Uint8Array;if(typeof e!="string"&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:i,s:n}=S4(r?e:Di(e));return new Tr(i,n)}static fromHex(e){return this.fromDER(e)}assertValidity(){let{r:e,s:r}=this;if(!bn(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!bn(r))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let e=Be.n>>He;return this.s>e}normalizeS(){return this.hasHighS()?new Tr(this.r,Be.n-this.s):this}toDERRawBytes(e=!1){return Di(this.toDERHex(e))}toDERHex(e=!1){let r=jg(ea(this.s));if(e)return r;let i=jg(ea(this.r)),n=ea(i.length/2),s=ea(r.length/2);return`30${ea(i.length/2+r.length/2+4)}02${n}${i}02${s}${r}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Di(this.toCompactHex())}toCompactHex(){return ti(this.r)+ti(this.s)}};oe.Signature=Tr;function wc(...t){if(!t.every(i=>i instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];let e=t.reduce((i,n)=>i+n.length,0),r=new Uint8Array(e);for(let i=0,n=0;i<t.length;i++){let s=t[i];r.set(s,n),n+=s.length}return r}var _4=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function vn(t){let e="";for(let r=0;r<t.length;r++)e+=_4[t[r]];return e}function ti(t){if(t>mc)throw new Error("pad64: invalid number");return t.toString(16).padStart(64,"0")}function Sc(t){return Di(ti(t))}function ea(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function ss(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function Di(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let i=r*2,n=t.slice(i,i+2),s=Number.parseInt(n,16);if(Number.isNaN(s))throw new Error("Invalid byte sequence");e[r]=s}return e}function xn(t){return t instanceof Uint8Array?t:Di(t)}function Mt(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");return ss(vn(t))}function Yg(t){if(typeof t=="number"&&t>0&&Number.isSafeInteger(t))return BigInt(t);if(typeof t=="bigint"&&bn(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function H(t,e=Be.P){let r=t%e;return r>=0?r:e+r}function jt(t,e){let{P:r}=Be,i=t;for(;e-- >de;)i*=i,i%=r;return i}function I4(t){let{P:e}=Be,r=BigInt(6),i=BigInt(11),n=BigInt(22),s=BigInt(23),a=BigInt(44),o=BigInt(88),f=t*t*t%e,u=f*f*t%e,c=jt(u,Js)*u%e,h=jt(c,Js)*u%e,l=jt(h,Ye)*f%e,d=jt(l,i)*l%e,p=jt(d,n)*d%e,y=jt(p,a)*p%e,g=jt(y,o)*y%e,v=jt(g,a)*p%e,x=jt(v,Js)*u%e,w=jt(x,s)*d%e,P=jt(w,r)*f%e;return jt(P,Ye)}function ta(t,e=Be.P){if(t===de||e<=de)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=H(t,e),i=e,n=de,s=He,a=He,o=de;for(;r!==de;){let u=i/r,c=i%r,h=n-a*u,l=s-o*u;i=r,r=c,n=a,s=o,a=h,o=l}if(i!==He)throw new Error("invert: does not exist");return H(n,e)}function B4(t,e=Be.P){let r=t.length,i=new Array(r),n=He;for(let s=0;s<r;s++)t[s]!==de&&(i[s]=n,n=H(n*t[s],e));n=ta(n,e);for(let s=r-1;s>=0;s--){if(t[s]===de)continue;let a=H(n*t[s],e);t[s]=H(n*i[s],e),n=a}return t}var $g=(t,e)=>(t+e/Ye)/e,Lo=Ye**BigInt(128);function Qg(t){let{n:e}=Be,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-He*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,a=$g(s*t,e),o=$g(-i*t,e),f=H(t-a*r-o*n,e),u=H(-a*i-o*s,e),c=f>Lo,h=u>Lo;if(c&&(f=e-f),h&&(u=e-u),f>Lo||u>Lo)throw new Error("splitScalarEndo: Endomorphism failed");return{k1neg:c,k1:f,k2neg:h,k2:u}}function A4(t){typeof t!="string"&&(t=vn(t));let e=ss(t||"0"),i=t.length/2*8-256;return i>0&&(e=e>>BigInt(i)),e>=Be.n&&(e-=Be.n),e}var _c=class{constructor(){this.v=new Uint8Array(32).fill(1),this.k=new Uint8Array(32).fill(0),this.counter=0}hmac(...e){return oe.utils.hmacSha256(this.k,...e)}hmacSync(...e){if(typeof oe.utils.hmacSha256Sync!="function")throw new Error("utils.hmacSha256Sync is undefined, you need to set it");let r=oe.utils.hmacSha256Sync(this.k,...e);if(r instanceof Promise)throw new Error("To use sync sign(), ensure utils.hmacSha256 is sync");return r}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),e.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),e.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){return this.incr(),this.v=await this.hmac(this.v),this.v}generateSync(){return this.incr(),this.v=this.hmacSync(this.v),this.v}};function bn(t){return de<t&&t<Be.n}function Ic(t){return 0n<t&&t<Be.P}function Zg(t,e,r){let i=Mt(t);if(!bn(i))return;let{n}=Be,s=ve.BASE.multiply(i),a=H(s.x,n);if(a===de)return;let o=H(ta(i,n)*H(e+r*a,n),n);if(o===de)return;let f=new Tr(a,o),u=(s.x===f.r?0:2)|Number(s.y&He);return{sig:f,recovery:u}}function ra(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==64)throw new Error("Expected 32 bytes of private key");e=ss(t)}else if(t instanceof Uint8Array){if(t.length!==32)throw new Error("Expected 32 bytes of private key");e=Mt(t)}else throw new TypeError("Expected valid private key");if(!bn(e))throw new Error("Expected private key: 0 < key < n");return e}function Bc(t){return t instanceof ve?(t.assertValidity(),t):ve.fromHex(t)}function Xg(t){if(t instanceof Tr)return t.assertValidity(),t;try{return Tr.fromDER(t)}catch(e){return Tr.fromCompact(t)}}function C4(t,e=!1){return ve.fromPrivateKey(t).toRawBytes(e)}oe.getPublicKey=C4;function T4(t,e,r){return ve.fromSignature(t,e,r).toRawBytes()}oe.recoverPublicKey=T4;function Jg(t){let e=t instanceof Uint8Array,r=typeof t=="string",i=(e||r)&&t.length;return e?i===33||i===65:r?i===66||i===130:t instanceof ve}function R4(t,e,r=!1){if(Jg(t))throw new TypeError("getSharedSecret: first arg must be private key");if(!Jg(e))throw new TypeError("getSharedSecret: second arg must be public key");let i=Bc(e);return i.assertValidity(),i.multiply(ra(t)).toRawBytes(r)}oe.getSharedSecret=R4;function e1(t){let e=t.length>32?t.slice(0,32):t;return Mt(e)}function D4(t){let e=e1(t),r=H(e,Be.n);return t1(r<de?e:r)}function t1(t){if(typeof t!="bigint")throw new Error("Expected bigint");let e=ti(t);return Di(e)}function r1(t,e,r){if(t==null)throw new Error(`sign: expected valid msgHash, not "${t}"`);let i=xn(t),n=ra(e),s=[t1(n),D4(i)];if(r!=null){r===!0&&(r=oe.utils.randomBytes(32));let f=Sc(Mt(xn(r)));if(f.length!==32)throw new Error("secp256k1: Expected 32 bytes of extra data");s.push(f)}let a=wc(...s),o=e1(i);return{seed:a,m:o,d:n}}function i1(t,e){let{sig:r,recovery:i}=t,{canonical:n,der:s,recovered:a}=Object.assign({canonical:!0,der:!0},e);n&&r.hasHighS()&&(r=r.normalizeS(),i^=1);let o=s?r.toDERRawBytes():r.toCompactRawBytes();return a?[o,i]:o}async function P4(t,e,r={}){let{seed:i,m:n,d:s}=r1(t,e,r.extraEntropy),a,o=new _c;for(await o.reseed(i);!(a=Zg(await o.generate(),n,s));)await o.reseed();return i1(a,r)}oe.sign=P4;function k4(t,e,r={}){let{seed:i,m:n,d:s}=r1(t,e,r.extraEntropy),a,o=new _c;for(o.reseedSync(i);!(a=Zg(o.generateSync(),n,s));)o.reseedSync();return i1(a,r)}oe.signSync=k4;var N4={strict:!0};function O4(t,e,r,i=N4){let n;try{n=Xg(t)}catch(v){return!1}let{r:s,s:a}=n;if(i.strict&&n.hasHighS())return!1;let o=A4(e);if(o===de)return!1;let f;try{f=le.fromAffine(Bc(r))}catch(v){return!1}let{n:u}=Be,c=ta(a,u),h=H(o*c,u),l=H(s*c,u),d=le.BASE.multiply(h),p=f.multiplyUnsafe(l),y=d.add(p).toAffine();return H(y.x,u)===s}oe.verify=O4;async function Ac(t,...e){let r=new Uint8Array(t.split("").map(s=>s.charCodeAt(0))),i=await oe.utils.sha256(r),n=await oe.utils.sha256(wc(i,i,...e));return Mt(n)}async function n1(t,e,r){let i=Sc(t),n=await Ac("BIP0340/challenge",i,e.toRawX(),r);return H(n,Be.n)}function Cc(t){return H(t.y,Ye)===de}var mn=class{constructor(e,r){if(this.r=e,this.s=r,!Ic(e)||!bn(r))throw new Error("Invalid signature")}static fromHex(e){let r=xn(e);if(r.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${r.length}`);let i=Mt(r.slice(0,32)),n=Mt(r.slice(32,64));return new mn(i,n)}toHex(){return ti(this.r)+ti(this.s)}toRawBytes(){return Di(this.toHex())}};function L4(t){return ve.fromPrivateKey(t).toRawX()}async function M4(t,e,r=oe.utils.randomBytes()){if(t==null)throw new TypeError(`sign: Expected valid message, not "${t}"`);let{n:i}=Be,n=xn(t),s=ra(e),a=xn(r);if(a.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness");let o=ve.fromPrivateKey(s),f=Cc(o)?s:i-s,u=await Ac("BIP0340/aux",a),c=f^u,h=await Ac("BIP0340/nonce",Sc(c),o.toRawX(),n),l=H(h,i);if(l===de)throw new Error("sign: Creation of signature failed. k is zero");let d=ve.fromPrivateKey(l),p=Cc(d)?l:i-l,y=await n1(d.x,o,n),g=new mn(d.x,H(p+y*f,i));if(!await s1(g.toRawBytes(),n,o.toRawX()))throw new Error("sign: Invalid signature produced");return g.toRawBytes()}async function s1(t,e,r){let i=t instanceof mn?t:mn.fromHex(t),n=xn(e),s=Bc(r),a=await n1(i.r,s,n),o=ve.fromPrivateKey(i.s),f=s.multiply(a),u=o.subtract(f);return!(u.equals(ve.BASE)||!Cc(u)||u.x!==i.r)}oe.schnorr={Signature:mn,getPublicKey:L4,sign:M4,verify:s1};ve.BASE._setWindowSize(8);var Kt={node:E4.default,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};oe.utils={isValidPrivateKey(t){try{return ra(t),!0}catch(e){return!1}},randomBytes:(t=32)=>{if(Kt.web)return Kt.web.getRandomValues(new Uint8Array(t));if(Kt.node){let{randomBytes:e}=Kt.node;return Uint8Array.from(e(t))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>{let t=8;for(;t--;){let e=oe.utils.randomBytes(32),r=Mt(e);if(bn(r)&&r!==He)return e}throw new Error("Valid private key was not found in 8 iterations. PRNG is broken")},bytesToHex:vn,sha256:async t=>{if(Kt.web){let e=await Kt.web.subtle.digest("SHA-256",t.buffer);return new Uint8Array(e)}else if(Kt.node){let{createHash:e}=Kt.node;return Uint8Array.from(e("sha256").update(t).digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(Kt.web){let r=await Kt.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),i=wc(...e),n=await Kt.web.subtle.sign("HMAC",r,i);return new Uint8Array(n)}else if(Kt.node){let{createHmac:r}=Kt.node,i=r("sha256",t);return e.forEach(n=>i.update(n)),Uint8Array.from(i.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,precompute(t=8,e=ve.BASE){let r=e===ve.BASE?e:new ve(e.x,e.y);return r._setWindowSize(t),r.multiply(Js),r}}});var u1=E((e5,o1)=>{"use strict";var ia=Oe(),Pi=Tc(),{sha256:a1}=(rr(),qt);o1.exports=()=>{let t=32;function e(){return Pi.utils.randomPrivateKey()}async function r(u,c){let{digest:h}=await a1.digest(c);try{return await Pi.sign(h,u)}catch(l){throw ia(l,"ERR_INVALID_INPUT")}}async function i(u,c,h){try{let{digest:l}=await a1.digest(h);return Pi.verify(c,l,u)}catch(l){throw ia(l,"ERR_INVALID_INPUT")}}function n(u){return Pi.Point.fromHex(u).toRawBytes(!0)}function s(u){return Pi.Point.fromHex(u).toRawBytes(!1)}function a(u){try{Pi.getPublicKey(u,!0)}catch(c){throw ia(c,"ERR_INVALID_PRIVATE_KEY")}}function o(u){try{Pi.Point.fromHex(u)}catch(c){throw ia(c,"ERR_INVALID_PUBLIC_KEY")}}function f(u){try{return Pi.getPublicKey(u,!0)}catch(c){throw ia(c,"ERR_INVALID_PRIVATE_KEY")}}return{generateKey:e,privateKeyLength:t,hashAndSign:r,hashAndVerify:i,compressPublicKey:n,decompressPublicKey:s,validatePrivateKey:a,validatePublicKey:o,computePublicKey:f}}});var l1=E((t5,h1)=>{"use strict";var{sha256:c1}=(rr(),qt),K4=Oe(),{equals:f1}=(ur(),or),{toString:F4}=(yt(),dt),U4=Ao();h1.exports=(t,e,r)=>{r=r||u1()();class i{constructor(u){r.validatePublicKey(u),this._key=u}verify(u,c){return r.hashAndVerify(this._key,c,u)}marshal(){return r.compressPublicKey(this._key)}get bytes(){return t.PublicKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(u){return f1(this.bytes,u.bytes)}async hash(){let{bytes:u}=await c1.digest(this.bytes);return u}}class n{constructor(u,c){this._key=u,this._publicKey=c||r.computePublicKey(u),r.validatePrivateKey(this._key),r.validatePublicKey(this._publicKey)}sign(u){return r.hashAndSign(this._key,u)}get public(){return new i(this._publicKey)}marshal(){return this._key}get bytes(){return t.PrivateKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(u){return f1(this.bytes,u.bytes)}async hash(){let{bytes:u}=await c1.digest(this.bytes);return u}async id(){let u=await this.public.hash();return F4(u,"base58btc")}async export(u,c="libp2p-key"){if(c==="libp2p-key")return U4.export(this.bytes,u);throw K4(new Error(`export format '${c}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function s(f){return new n(f)}function a(f){return new i(f)}async function o(){let f=await r.generateKey();return new n(f)}return{Secp256k1PublicKey:i,Secp256k1PrivateKey:n,unmarshalSecp256k1PrivateKey:s,unmarshalSecp256k1PublicKey:a,generateKeyPair:o}}});var d1=E((r5,p1)=>{"use strict";p1.exports={SHA1:20,SHA256:32,SHA512:64}});var v1=E(g1=>{"use strict";var y1=Hs(),q4=d1(),V4={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"},G4=async(t,e)=>{let r=await y1.get().subtle.sign({name:"HMAC"},t,e);return new Uint8Array(r,r.byteOffset,r.byteLength)};g1.create=async function(t,e){let r=V4[t],i=await y1.get().subtle.importKey("raw",e,{name:"HMAC",hash:{name:r}},!1,["sign"]);return{async digest(n){return G4(i,n)},length:q4[t]}}});var w1=E((n5,E1)=>{"use strict";var x1=Oe(),{concat:b1}=(ar(),sr),{fromString:H4}=(st(),nt),z4=v1(),m1={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,cipherKeySize:32}};E1.exports=async(t,e,r)=>{let i=m1[t];if(!i){let x=Object.keys(m1).join(" / ");throw x1(new Error(`unknown cipher type '${t}'. Must be ${x}`),"ERR_INVALID_CIPHER_TYPE")}if(!e)throw x1(new Error("missing hash type"),"ERR_MISSING_HASH_TYPE");let n=i.keySize,s=i.ivSize,a=20,o=H4("key expansion"),f=2*(s+n+a),u=await z4.create(e,r),c=await u.digest(o),h=[],l=0;for(;l<f;){let x=await u.digest(b1([c,o])),w=x.length;l+w>f&&(w=f-l),h.push(x),l+=w,c=await u.digest(c)}let d=f/2,p=b1(h),y=p.slice(0,d),g=p.slice(d,f),v=x=>({iv:x.slice(0,s),cipherKey:x.slice(s,s+n),macKey:x.slice(s+n)});return{k1:v(y),k2:v(g)}}});var _1=E((s5,S1)=>{"use strict";var j4=Oe();S1.exports=function(t,e){if(!t.includes(e)){let r=t.join(" / ");throw j4(new Error(`Unknown curve: ${e}. Must be ${r}`),"ERR_INVALID_CURVE")}}});var R1=E(T1=>{"use strict";var W4=Oe(),na=Hs(),{base64urlToBuffer:I1}=Bo(),Y4=_1(),{toString:Rc}=(yt(),dt),{concat:$4}=(ar(),sr),{equals:Q4}=(ur(),or),B1={"P-256":256,"P-384":384,"P-521":521};T1.generateEphmeralKeyPair=async function(t){Y4(Object.keys(B1),t);let e=await na.get().subtle.generateKey({name:"ECDH",namedCurve:t},!0,["deriveBits"]),r=async(n,s)=>{let a;s?a=await na.get().subtle.importKey("jwk",X4(t,s),{name:"ECDH",namedCurve:t},!1,["deriveBits"]):a=e.privateKey;let o=[await na.get().subtle.importKey("jwk",C1(t,n),{name:"ECDH",namedCurve:t},!1,[]),a],f=await na.get().subtle.deriveBits({name:"ECDH",namedCurve:t,public:o[0]},o[1],B1[t]);return new Uint8Array(f,f.byteOffset,f.byteLength)},i=await na.get().subtle.exportKey("jwk",e.publicKey);return{key:Z4(i),genSharedKey:r}};var A1={"P-256":32,"P-384":48,"P-521":66};function Z4(t){let e=A1[t.crv];return $4([Uint8Array.from([4]),I1(t.x,e),I1(t.y,e)],1+e*2)}function C1(t,e){let r=A1[t];if(Q4(!e.slice(0,1),Uint8Array.from([4])))throw W4(new Error("Cannot unmarshal public key - invalid key format"),"ERR_INVALID_KEY_FORMAT");return{kty:"EC",crv:t,x:Rc(e.slice(1,r+1),"base64url"),y:Rc(e.slice(1+r),"base64url"),ext:!0}}var X4=(t,e)=>({...C1(t,e.public),d:Rc(e.private,"base64url")})});var P1=E((o5,D1)=>{"use strict";var J4=R1();D1.exports=async t=>J4.generateEphmeralKeyPair(t)});var O1=E((u5,N1)=>{"use strict";var Rr=oo();qs();tg();var Dc=Se(),sa=Oe(),{fromString:eI}=(st(),nt),tI=ag(),Wt={rsa:Rg(),ed25519:Hg(),secp256k1:l1()(Rr,lc())},Mo={message:"secp256k1 support requires libp2p-crypto-secp256k1 package",code:"ERR_MISSING_PACKAGE"};function as(t){let e=Wt[t.toLowerCase()];if(!e){let r=Object.keys(Wt).join(" / ");throw sa(new Error(`invalid or unsupported key type ${t}. Must be ${r}`),"ERR_UNSUPPORTED_KEY_TYPE")}return e}var rI=async(t,e)=>as(t).generateKeyPair(e),iI=async(t,e,r)=>{let i=as(t);if(t.toLowerCase()!=="ed25519")throw sa(new Error("Seed key derivation is unimplemented for RSA or secp256k1"),"ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return i.generateKeyPairFromSeed(e,r)},nI=t=>{let e=Rr.PublicKey.decode(t),r=e.Data;switch(e.Type){case Rr.KeyType.RSA:return Wt.rsa.unmarshalRsaPublicKey(r);case Rr.KeyType.Ed25519:return Wt.ed25519.unmarshalEd25519PublicKey(r);case Rr.KeyType.Secp256k1:if(Wt.secp256k1)return Wt.secp256k1.unmarshalSecp256k1PublicKey(r);throw sa(new Error(Mo.message),Mo.code);default:as(e.Type)}},sI=(t,e)=>(e=(e||"rsa").toLowerCase(),as(e),t.bytes),k1=async t=>{let e=Rr.PrivateKey.decode(t),r=e.Data;switch(e.Type){case Rr.KeyType.RSA:return Wt.rsa.unmarshalRsaPrivateKey(r);case Rr.KeyType.Ed25519:return Wt.ed25519.unmarshalEd25519PrivateKey(r);case Rr.KeyType.Secp256k1:if(Wt.secp256k1)return Wt.secp256k1.unmarshalSecp256k1PrivateKey(r);throw sa(new Error(Mo.message),Mo.code);default:as(e.Type)}},aI=(t,e)=>(e=(e||"rsa").toLowerCase(),as(e),t.bytes),oI=async(t,e)=>{try{let n=await tI.import(t,e);return k1(n)}catch(n){}let r=Dc.pki.decryptRsaPrivateKey(t,e);if(r===null)throw sa(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let i=Dc.asn1.toDer(Dc.pki.privateKeyToAsn1(r));return i=eI(i.getBytes(),"ascii"),Wt.rsa.unmarshalRsaPrivateKey(i)};N1.exports={supportedKeys:Wt,keysPBM:Rr,keyStretcher:w1(),generateEphemeralKeyPair:P1(),generateKeyPair:rI,generateKeyPairFromSeed:iI,unmarshalPublicKey:nI,marshalPublicKey:sI,unmarshalPrivateKey:k1,marshalPrivateKey:aI,import:oI}});var L1=E((c5,Pc)=>{"use strict";function uI(t,{className:e,symbolName:r}){let i=Symbol.for(r),n={[e]:class extends t{constructor(...s){super(...s);Object.defineProperty(this,i,{value:!0})}get[Symbol.toStringTag](){return e}}}[e];return n[`is${e}`]=s=>!!(s&&s[i]),n}function cI(t,{className:e,symbolName:r,withoutNew:i}){let n=Symbol.for(r),s={[e]:function(...a){if(i&&!(this instanceof s))return new s(...a);let o=t.call(this,...a)||this;return o&&!o[n]&&Object.defineProperty(o,n,{value:!0}),o}}[e];return s.prototype=Object.create(t.prototype),s.prototype.constructor=s,Object.defineProperty(s.prototype,Symbol.toStringTag,{get(){return e}}),s[`is${e}`]=a=>!!(a&&a[n]),s}Pc.exports=uI;Pc.exports.proto=cI});var F1=E((f5,K1)=>{"use strict";var os=Xi(),M1=os.Reader,fI=os.Writer,et=os.util,aa=os.roots["libp2p-peer-id"]||(os.roots["libp2p-peer-id"]={});aa.PeerIdProto=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.id=et.newBuffer([]),t.prototype.pubKey=et.newBuffer([]),t.prototype.privKey=et.newBuffer([]),t.encode=function(r,i){return i||(i=fI.create()),i.uint32(10).bytes(r.id),r.pubKey!=null&&Object.hasOwnProperty.call(r,"pubKey")&&i.uint32(18).bytes(r.pubKey),r.privKey!=null&&Object.hasOwnProperty.call(r,"privKey")&&i.uint32(26).bytes(r.privKey),i},t.decode=function(r,i){r instanceof M1||(r=M1.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new aa.PeerIdProto;r.pos<n;){var a=r.uint32();switch(a>>>3){case 1:s.id=r.bytes();break;case 2:s.pubKey=r.bytes();break;case 3:s.privKey=r.bytes();break;default:r.skipType(a&7);break}}if(!s.hasOwnProperty("id"))throw et.ProtocolError("missing required 'id'",{instance:s});return s},t.fromObject=function(r){if(r instanceof aa.PeerIdProto)return r;var i=new aa.PeerIdProto;return r.id!=null&&(typeof r.id=="string"?et.base64.decode(r.id,i.id=et.newBuffer(et.base64.length(r.id)),0):r.id.length&&(i.id=r.id)),r.pubKey!=null&&(typeof r.pubKey=="string"?et.base64.decode(r.pubKey,i.pubKey=et.newBuffer(et.base64.length(r.pubKey)),0):r.pubKey.length&&(i.pubKey=r.pubKey)),r.privKey!=null&&(typeof r.privKey=="string"?et.base64.decode(r.privKey,i.privKey=et.newBuffer(et.base64.length(r.privKey)),0):r.privKey.length&&(i.privKey=r.privKey)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(i.bytes===String?n.id="":(n.id=[],i.bytes!==Array&&(n.id=et.newBuffer(n.id))),i.bytes===String?n.pubKey="":(n.pubKey=[],i.bytes!==Array&&(n.pubKey=et.newBuffer(n.pubKey))),i.bytes===String?n.privKey="":(n.privKey=[],i.bytes!==Array&&(n.privKey=et.newBuffer(n.privKey)))),r.id!=null&&r.hasOwnProperty("id")&&(n.id=i.bytes===String?et.base64.encode(r.id,0,r.id.length):i.bytes===Array?Array.prototype.slice.call(r.id):r.id),r.pubKey!=null&&r.hasOwnProperty("pubKey")&&(n.pubKey=i.bytes===String?et.base64.encode(r.pubKey,0,r.pubKey.length):i.bytes===Array?Array.prototype.slice.call(r.pubKey):r.pubKey),r.privKey!=null&&r.hasOwnProperty("privKey")&&(n.privKey=i.bytes===String?et.base64.encode(r.privKey,0,r.privKey.length):i.bytes===Array?Array.prototype.slice.call(r.privKey):r.privKey),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,os.util.toJSONOptions)},t}();K1.exports=aa});var us=E((bt,W1)=>{"use strict";var{CID:kc}=(Mu(),kd),hI=(ks(),Ps),lI=(Du(),eo),pI=(an(),sn),dI=(on(),Ei),{base58btc:Nc}=(an(),sn),{base32:yI}=(ks(),Ps),{base16:U1}=(Ru(),Ja),oa=($n(),ro),Dr=O1(),gI=L1(),{PeerIdProto:q1}=F1(),{equals:En}=(ur(),or),{fromString:ua}=(st(),nt),{toString:vI}=(yt(),dt),{identity:Ko}=(Ls(),Qn),V1={...hI,...lI,...pI,...dI},xI=Object.keys(V1).reduce((t,e)=>t.or(V1[e]),yI.decoder),bI=112,G1=114,H1=class{constructor(e,r,i){if(!(e instanceof Uint8Array))throw new Error("invalid id provided");if(r&&i&&!En(r.public.bytes,i.bytes))throw new Error("inconsistent arguments");this._id=e,this._idB58String=Nc.encode(this.id).substring(1),this._privKey=r,this._pubKey=i}get id(){return this._id}set id(e){throw new Error("Id is immutable")}get privKey(){return this._privKey}set privKey(e){this._privKey=e}get pubKey(){if(this._pubKey)return this._pubKey;if(this._privKey)return this._privKey.public;try{let e=oa.decode(this.id);e.code===Ko.code&&(this._pubKey=Dr.unmarshalPublicKey(e.digest))}catch(e){}return this._pubKey}set pubKey(e){this._pubKey=e}marshalPubKey(){if(this.pubKey)return Dr.marshalPublicKey(this.pubKey)}marshalPrivKey(){if(this.privKey)return Dr.marshalPrivateKey(this.privKey)}marshal(e){return q1.encode({id:this.toBytes(),pubKey:this.marshalPubKey(),privKey:e?null:this.marshalPrivKey()}).finish()}toPrint(){let e=this.toB58String();e.startsWith("Qm")&&(e=e.slice(2));let r=6;return e.length<r&&(r=e.length),"<peer.ID "+e.substr(0,r)+">"}toJSON(){return{id:this.toB58String(),privKey:j1(this.marshalPrivKey()),pubKey:j1(this.marshalPubKey())}}toHexString(){return U1.encode(this.id).substring(1)}toBytes(){return this.id}toB58String(){return this._idB58String}toString(){if(!this._idCIDString){let e=kc.createV1(G1,oa.decode(this.id));Object.defineProperty(this,"_idCIDString",{value:e.toString(),enumerable:!1})}return this._idCIDString}equals(e){if(e instanceof Uint8Array)return En(this.id,e);if(e.id)return En(this.id,e.id);throw new Error("not valid Id")}isEqual(e){return this.equals(e)}isValid(){return Boolean(this.privKey&&this.privKey.public&&this.privKey.public.bytes&&this.pubKey.bytes instanceof Uint8Array&&En(this.privKey.public.bytes,this.pubKey.bytes))}hasInlinePublicKey(){try{if(oa.decode(this.id).code===Ko.code)return!0}catch(e){}return!1}},Pr=gI(H1,{className:"PeerId",symbolName:"@libp2p/js-peer-id/PeerId"});bt=W1.exports=Pr;var ca=t=>t.bytes.length<=42?oa.create(Ko.code,t.bytes).bytes:t.hash(),Oc=async(t,e)=>{let r=await ca(e);return new Pr(r,t,e)};bt.create=async t=>{t=t||{},t.bits=t.bits||2048,t.keyType=t.keyType||"RSA";let e=await Dr.generateKeyPair(t.keyType,t.bits);return Oc(e,e.public)};bt.createFromHexString=t=>new Pr(U1.decode("f"+t));bt.createFromBytes=t=>{try{let e=kc.decode(t);if(!z1(e))throw new Error("Supplied PeerID CID is invalid");return bt.createFromCID(e)}catch{if(oa.decode(t).code!==Ko.code)throw new Error("Supplied PeerID CID is invalid");return new Pr(t)}};bt.createFromB58String=t=>bt.createFromBytes(Nc.decode("z"+t));var z1=t=>t.code===G1||t.code===bI;bt.createFromCID=t=>{if(t=kc.asCID(t),!t||!z1(t))throw new Error("Supplied PeerID CID is invalid");return new Pr(t.multihash.bytes)};bt.createFromPubKey=async t=>{let e=t;if(typeof e=="string"&&(e=ua(t,"base64pad")),!(e instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let r=await Dr.unmarshalPublicKey(e);return Oc(void 0,r)};bt.createFromPrivKey=async t=>{if(typeof t=="string"&&(t=ua(t,"base64pad")),!(t instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let e=await Dr.unmarshalPrivateKey(t);return Oc(e,e.public)};bt.createFromJSON=async t=>{let e=Nc.decode("z"+t.id),r=t.privKey&&ua(t.privKey,"base64pad"),i=t.pubKey&&ua(t.pubKey,"base64pad"),n=i&&await Dr.unmarshalPublicKey(i);if(!r)return new Pr(e,void 0,n);let s=await Dr.unmarshalPrivateKey(r),a=await ca(s.public),o;if(n&&(o=await ca(n)),n&&!En(a,o))throw new Error("Public and private key do not match");if(e&&!En(a,e))throw new Error("Id and private key do not match");return new Pr(e,s,n)};bt.createFromProtobuf=async t=>{typeof t=="string"&&(t=ua(t,"base16"));let{id:e,privKey:r,pubKey:i}=q1.decode(t);r=r?await Dr.unmarshalPrivateKey(r):!1,i=i?await Dr.unmarshalPublicKey(i):!1;let n,s;if(r&&(s=await ca(r.public)),i&&(n=await ca(i)),r){if(i&&!En(s,n))throw new Error("Public and private key do not match");return new Pr(s,r,r.public)}if(i)return new Pr(n,void 0,i);if(e)return new Pr(e);throw new Error("Protobuf did not contain any usable key material")};bt.parse=t=>((t.charAt(0)==="1"||t.charAt(0)==="Q")&&(t=`z${t}`),bt.createFromBytes(xI.decode(t)));bt.isPeerId=t=>Boolean(typeof t=="object"&&t._id&&t._idB58String);function j1(t){if(t)return vI(t,"base64pad")}});var Lc=E((h5,Q1)=>{"use strict";var mI=nd(),{toString:EI}=(yt(),dt),{fromString:Y1}=(st(),nt),$1=us(),{sha256:wI}=(rr(),qt),SI=()=>mI(8),_I=(t,e)=>{let r;t instanceof Uint8Array?r=$1.createFromBytes(t).id:r=$1.parse(t).id;let i=new Uint8Array(r.length+e.length);return i.set(r,0),i.set(e,r.length),i},II=t=>wI.encode(t),BI=(t,e)=>{let r;Array.isArray(e)?r=i=>e.indexOf(i)>-1:r=i=>e.has(i);for(let i of t)if(r(i))return!0;return!1},AI=t=>Array.isArray(t)?t:[t],CI=(t,e)=>{let r=Object.assign({},t);return t.from instanceof Uint8Array&&(r.from=EI(t.from,"base58btc")),e&&(r.receivedFrom=e),r},TI=t=>{let e=Object.assign({},t);return typeof t.from=="string"&&(e.from=Y1(t.from,"base58btc")),typeof t.data=="string"&&(e.data=Y1(t.data)),e};Q1.exports={randomSeqno:SI,msgId:_I,noSignMsgId:II,anyMatch:BI,ensureArray:AI,normalizeInRpcMessage:CI,normalizeOutRpcMessage:TI}});var t2=E((l5,e2)=>{"use strict";var Mc=us(),{RPC:Z1}=Y0(),{concat:X1}=(ar(),sr),{fromString:RI}=(st(),nt),Kc=RI("libp2p-pubsub:"),{normalizeOutRpcMessage:DI}=Lc();async function PI(t,e){let r=X1([Kc,Z1.Message.encode(DI(e)).finish()]),i=await t.privKey.sign(r);return{...e,signature:i,key:t.pubKey.bytes}}async function kI(t){if(!t.signature)throw new Error("Message must contain a signature to be verified");if(!t.from)throw new Error("Message must contain a from property to be verified");let e=X1([Kc,Z1.Message.encode({...t,from:Mc.createFromB58String(t.from).toBytes(),signature:void 0,key:void 0}).finish()]);return(await J1(t)).verify(e,t.signature)}async function J1(t){if(!t.from)throw new Error("Could not get the public key from the originator id");let e=Mc.createFromB58String(t.from);if(t.key){let r=await Mc.createFromPubKey(t.key);if(r.equals(e))return r.pubKey;throw new Error("Public Key does not match the originator")}else{if(e.pubKey)return e.pubKey;throw new Error("Could not get the public key from the originator id")}}e2.exports={messagePublicKey:J1,signMessage:PI,SignPrefix:Kc,verifySignature:kI}});var s2=E((p5,n2)=>{"use strict";var r2=Is(),{EventEmitter:NI}=B0(),kt=Oe(),{pipe:OI}=C0(),{default:LI}=ah(),MI=vh(),{codes:fr}=Ma(),{RPC:i2}=Y0(),KI=Jp(),{SignaturePolicy:ri}=td(),ki=Lc(),{signMessage:FI,verifySignature:UI}=t2(),Fo=class extends NI{constructor({debugName:e,multicodecs:r,libp2p:i,globalSignaturePolicy:n=ri.StrictSign,canRelayMessage:s=!1,emitSelf:a=!1,messageProcessingConcurrency:o=10}){if(typeof e!="string")throw new Error("a debugname `string` is required");if(!r)throw new Error("multicodecs are required");if(!i)throw new Error("libp2p is required");super();if(this.log=Object.assign(r2(e),{err:r2(`${e}:error`)}),this.multicodecs=ki.ensureArray(r),this._libp2p=i,this.registrar=i.registrar,this.peerId=i.peerId,this.started=!1,this.topics=new Map,this.subscriptions=new Set,this.peers=new Map,!ri[n])throw kt(new Error("Invalid global signature policy"),fr.ERR_INVALID_SIGNATURE_POLICY);this.globalSignaturePolicy=n,this.canRelayMessage=s,this.emitSelf=a,this.topicValidators=new Map,this.queue=new LI({concurrency:o}),this._registrarId=void 0,this._onIncomingStream=this._onIncomingStream.bind(this),this._onPeerConnected=this._onPeerConnected.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this)}async start(){if(this.started)return;this.log("starting"),this.registrar.handle(this.multicodecs,this._onIncomingStream);let e=new MI({multicodecs:this.multicodecs,handlers:{onConnect:this._onPeerConnected,onDisconnect:this._onPeerDisconnected}});this._registrarId=await this.registrar.register(e),this.log("started"),this.started=!0}async stop(){!this.started||(this.registrar.unregister(this._registrarId),this.log("stopping"),this.peers.forEach(e=>e.close()),this.peers=new Map,this.subscriptions=new Set,this.started=!1,this.log("stopped"))}_onIncomingStream({protocol:e,stream:r,connection:i}){let n=i.remotePeer,s=n.toB58String(),a=this._addPeer(n,e),o=a.attachInboundStream(r);this._processMessages(s,o,a)}async _onPeerConnected(e,r){let i=e.toB58String();this.log("connected",i);try{let{stream:n,protocol:s}=await r.newStream(this.multicodecs);await this._addPeer(e,s).attachOutboundStream(n)}catch(n){this.log.err(n)}this._sendSubscriptions(i,Array.from(this.subscriptions),!0)}_onPeerDisconnected(e,r){let i=e.toB58String();this.log("connection ended",i,r?r.message:""),this._removePeer(e)}_addPeer(e,r){let i=e.toB58String(),n=this.peers.get(i);if(n)return n;this.log("new peer",i);let s=new KI({id:e,protocol:r});return this.peers.set(i,s),s.once("close",()=>this._removePeer(e)),s}_removePeer(e){if(!e)return;let r=e.toB58String(),i=this.peers.get(r);if(!!i){i.removeAllListeners(),i.close(),this.log("delete peer",r),this.peers.delete(r);for(let n of this.topics.values())n.delete(r);return i}}async _processMessages(e,r,i){try{await OI(r,async n=>{for await(let s of n){let a=s instanceof Uint8Array?s:s.slice(),o=this._decodeRpc(a);(async()=>{try{await this._processRpc(e,i,o)}catch(f){this.log.err(f)}})()}})}catch(n){this._onPeerDisconnected(i.id,n)}}async _processRpc(e,r,i){this.log("rpc from",e);let n=i.subscriptions,s=i.msgs;return n.length&&(n.forEach(a=>{this._processRpcSubOpt(e,a)}),this.emit("pubsub:subscription-change",r.id,n)),this._acceptFrom(e)?(s.length&&this.queue.addAll(s.map(a=>async()=>{if(!(this.canRelayMessage||a.topicIDs&&a.topicIDs.some(o=>this.subscriptions.has(o)))){this.log("received message we didn't subscribe to. Dropping.");return}try{let o=ki.normalizeInRpcMessage(a,e);await this._processRpcMessage(o)}catch(o){this.log.err(o)}})),!0):(this.log("received message from unacceptable peer %s",e),!1)}_processRpcSubOpt(e,r){let i=r.topicID;if(!i)return;let n=this.topics.get(i);n||(n=new Set,this.topics.set(i,n)),r.subscribe?n.add(e):n.delete(e)}async _processRpcMessage(e){if(!(this.peerId.toB58String()===e.from&&!this.emitSelf)){try{await this.validate(e)}catch(r){this.log("Message is invalid, dropping it. %O",r);return}return this._emitMessage(e),this._publish(ki.normalizeOutRpcMessage(e))}}_emitMessage(e){e.topicIDs.forEach(r=>{this.subscriptions.has(r)&&this.emit(r,e)})}getMsgId(e){let r=this.globalSignaturePolicy;switch(r){case ri.StrictSign:return ki.msgId(e.from,e.seqno);case ri.StrictNoSign:return ki.noSignMsgId(e.data);default:throw kt(new Error("Cannot get message id: unhandled signature policy: "+r),fr.ERR_UNHANDLED_SIGNATURE_POLICY)}}_acceptFrom(e){return!0}_decodeRpc(e){return i2.decode(e)}_encodeRpc(e){return i2.encode(e).finish()}_sendRpc(e,r){let i=this.peers.get(e);if(!i||!i.isWritable){let n=`Cannot send RPC to ${e} as there is no open stream to it available`;this.log.err(n);return}i.write(this._encodeRpc(r))}_sendSubscriptions(e,r,i){return this._sendRpc(e,{subscriptions:r.map(n=>({topicID:n,subscribe:i}))})}async validate(e){let r=this.globalSignaturePolicy;switch(r){case ri.StrictNoSign:if(e.from)throw kt(new Error("StrictNoSigning: from should not be present"),fr.ERR_UNEXPECTED_FROM);if(e.signature)throw kt(new Error("StrictNoSigning: signature should not be present"),fr.ERR_UNEXPECTED_SIGNATURE);if(e.key)throw kt(new Error("StrictNoSigning: key should not be present"),fr.ERR_UNEXPECTED_KEY);if(e.seqno)throw kt(new Error("StrictNoSigning: seqno should not be present"),fr.ERR_UNEXPECTED_SEQNO);break;case ri.StrictSign:if(!e.signature)throw kt(new Error("StrictSigning: Signing required and no signature was present"),fr.ERR_MISSING_SIGNATURE);if(!e.seqno)throw kt(new Error("StrictSigning: Signing required and no seqno was present"),fr.ERR_MISSING_SEQNO);if(!await UI(e))throw kt(new Error("StrictSigning: Invalid message signature"),fr.ERR_INVALID_SIGNATURE);break;default:throw kt(new Error("Cannot validate message: unhandled signature policy: "+r),fr.ERR_UNHANDLED_SIGNATURE_POLICY)}for(let i of e.topicIDs){let n=this.topicValidators.get(i);n&&await n(i,e)}}_buildMessage(e){let r=this.globalSignaturePolicy;switch(r){case ri.StrictSign:return e.from=this.peerId.toB58String(),e.seqno=ki.randomSeqno(),FI(this.peerId,e);case ri.StrictNoSign:return Promise.resolve(e);default:throw kt(new Error("Cannot build message: unhandled signature policy: "+r),fr.ERR_UNHANDLED_SIGNATURE_POLICY)}}getSubscribers(e){if(!this.started)throw kt(new Error("not started yet"),"ERR_NOT_STARTED_YET");if(!e||typeof e!="string")throw kt(new Error("a string topic must be provided"),"ERR_NOT_VALID_TOPIC");let r=this.topics.get(e);return r?Array.from(r):[]}async publish(e,r){if(!this.started)throw new Error("Pubsub has not started");this.log("publish",e,r);let n={receivedFrom:this.peerId.toB58String(),data:r,topicIDs:[e]},s=await this._buildMessage(n),a=ki.normalizeInRpcMessage(s);this.emitSelf&&this._emitMessage(a),await this._publish(a)}_publish(e){throw kt(new Error("publish must be implemented by the subclass"),"ERR_NOT_IMPLEMENTED")}subscribe(e){if(!this.started)throw new Error("Pubsub has not started");this.subscriptions.has(e)||(this.subscriptions.add(e),this.peers.forEach((r,i)=>this._sendSubscriptions(i,[e],!0)))}unsubscribe(e){if(!this.started)throw new Error("Pubsub is not started");this.subscriptions.has(e)&&this.listenerCount(e)===0&&(this.subscriptions.delete(e),this.peers.forEach((r,i)=>this._sendSubscriptions(i,[e],!1)))}getTopics(){if(!this.started)throw new Error("Pubsub is not started");return Array.from(this.subscriptions)}};Fo.utils=ki;Fo.SignaturePolicy=ri;n2.exports=Fo});var a2=E(Uo=>{"use strict";Object.defineProperty(Uo,"__esModule",{value:!0});Uo.createGossipRpc=void 0;function qI(t=[],e={}){return{subscriptions:[],msgs:t,control:Object.assign({ihave:[],iwant:[],graft:[],prune:[]},e)}}Uo.createGossipRpc=qI});var o2=E(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});qo.shuffle=void 0;function VI(t){if(t.length<=1)return t;let e=()=>Math.floor(Math.random()*Math.floor(t.length));for(let r=0;r<t.length;r++){let i=e(),n=t[r];t[r]=t[i],t[i]=n}return t}qo.shuffle=VI});var Ni=E(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.ACCEPT_FROM_WHITELIST_DURATION_MS=K.ACCEPT_FROM_WHITELIST_MAX_MESSAGES=K.ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE=K.ERR_TOPIC_VALIDATOR_IGNORE=K.ERR_TOPIC_VALIDATOR_REJECT=K.TimeCacheDuration=K.GossipsubSeenTTL=K.GossipsubIWantFollowupTime=K.GossipsubMaxIHaveMessages=K.GossipsubMaxIHaveLength=K.GossipsubGraftFloodThreshold=K.GossipsubOpportunisticGraftPeers=K.GossipsubOpportunisticGraftTicks=K.GossipsubDirectConnectInitialDelay=K.GossipsubDirectConnectTicks=K.GossipsubConnectionTimeout=K.GossipsubMaxPendingConnections=K.GossipsubConnectors=K.GossipsubPruneBackoffTicks=K.GossipsubPruneBackoff=K.GossipsubPrunePeers=K.GossipsubFanoutTTL=K.GossipsubHeartbeatInterval=K.GossipsubHeartbeatInitialDelay=K.GossipsubGossipRetransmission=K.GossipsubGossipFactor=K.GossipsubDlazy=K.GossipsubHistoryGossip=K.GossipsubHistoryLength=K.GossipsubDout=K.GossipsubDscore=K.GossipsubDhi=K.GossipsubDlo=K.GossipsubD=K.GossipsubIDv11=K.GossipsubIDv10=K.FloodsubID=K.minute=K.second=void 0;K.second=1e3;K.minute=60*K.second;K.FloodsubID="/floodsub/1.0.0";K.GossipsubIDv10="/meshsub/1.0.0";K.GossipsubIDv11="/meshsub/1.1.0";K.GossipsubD=6;K.GossipsubDlo=4;K.GossipsubDhi=12;K.GossipsubDscore=4;K.GossipsubDout=2;K.GossipsubHistoryLength=5;K.GossipsubHistoryGossip=3;K.GossipsubDlazy=6;K.GossipsubGossipFactor=.25;K.GossipsubGossipRetransmission=3;K.GossipsubHeartbeatInitialDelay=100;K.GossipsubHeartbeatInterval=K.second;K.GossipsubFanoutTTL=K.minute;K.GossipsubPrunePeers=16;K.GossipsubPruneBackoff=K.minute;K.GossipsubPruneBackoffTicks=15;K.GossipsubConnectors=8;K.GossipsubMaxPendingConnections=128;K.GossipsubConnectionTimeout=30*K.second;K.GossipsubDirectConnectTicks=300;K.GossipsubDirectConnectInitialDelay=K.second;K.GossipsubOpportunisticGraftTicks=60;K.GossipsubOpportunisticGraftPeers=2;K.GossipsubGraftFloodThreshold=10*K.second;K.GossipsubMaxIHaveLength=5e3;K.GossipsubMaxIHaveMessages=10;K.GossipsubIWantFollowupTime=3*K.second;K.GossipsubSeenTTL=30*K.second;K.TimeCacheDuration=120*1e3;K.ERR_TOPIC_VALIDATOR_REJECT="ERR_TOPIC_VALIDATOR_REJECT";K.ERR_TOPIC_VALIDATOR_IGNORE="ERR_TOPIC_VALIDATOR_IGNORE";K.ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE=0;K.ACCEPT_FROM_WHITELIST_MAX_MESSAGES=128;K.ACCEPT_FROM_WHITELIST_DURATION_MS=1e3});var c2=E(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.hasGossipProtocol=void 0;var u2=Ni();function GI(t){return t===u2.GossipsubIDv10||t===u2.GossipsubIDv11}Vo.hasGossipProtocol=GI});var f2=E(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});cs.messageIdFromString=cs.messageIdToString=void 0;var HI=(st(),nt),zI=(yt(),dt);function jI(t){return zI.toString(t,"base64")}cs.messageIdToString=jI;function WI(t){return HI.fromString(t,"base64")}cs.messageIdFromString=WI});var fs=E(kr=>{"use strict";var YI=kr&&kr.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Go=kr&&kr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&YI(e,t,r)};Object.defineProperty(kr,"__esModule",{value:!0});Go(a2(),kr);Go(o2(),kr);Go(c2(),kr);Go(f2(),kr)});var l2=E(hs=>{"use strict";var $I=hs&&hs.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(i.next(c))}catch(h){a(h)}}function f(c){try{u(i.throw(c))}catch(h){a(h)}}function u(c){c.done?s(c.value):n(c.value).then(o,f)}u((i=i.apply(t,e||[])).next())})};Object.defineProperty(hs,"__esModule",{value:!0});hs.MessageCache=void 0;var Fc=fs(),h2=class{constructor(e,r){this.msgs=new Map,this.peertx=new Map,this.history=[];for(let i=0;i<r;i++)this.history[i]=[];this.gossip=e}put(e,r){return $I(this,void 0,void 0,function*(){this.msgs.set(r,e);let i=Fc.messageIdFromString(r);this.history[0].push({msgId:i,topics:e.topicIDs})})}get(e){return this.msgs.get(Fc.messageIdToString(e))}getForPeer(e,r){let i=this.msgs.get(e);if(!i)return[void 0,0];let n=this.peertx.get(e);n||(n=new Map,this.peertx.set(e,n));let s=(n.get(r)||0)+1;return n.set(r,s),[i,s]}getGossipIDs(e){let r=[];for(let i=0;i<this.gossip;i++)this.history[i].forEach(n=>{for(let s of n.topics)if(s===e){r.push(n.msgId);break}});return r}shift(){this.history[this.history.length-1].forEach(r=>{let i=Fc.messageIdToString(r.msgId);this.msgs.delete(i),this.peertx.delete(i)}),this.history.pop(),this.history.unshift([])}};hs.MessageCache=h2});var d2=E((p2,fa)=>{(function(t,e){typeof define=="function"&&define.amd?define(["protobufjs/minimal"],e):typeof Rf=="function"&&typeof fa=="object"&&fa&&fa.exports&&(fa.exports=e(Xi()))})(p2,function(t){"use strict";var e=t.Reader,r=t.Writer,i=t.util,n=t.roots.default||(t.roots.default={});return n.RPC=function(){function s(o){if(this.subscriptions=[],this.msgs=[],o)for(var f=Object.keys(o),u=0;u<f.length;++u)o[f[u]]!=null&&(this[f[u]]=o[f[u]])}s.prototype.subscriptions=i.emptyArray,s.prototype.msgs=i.emptyArray,s.prototype.control=null;var a;return Object.defineProperty(s.prototype,"_control",{get:i.oneOfGetter(a=["control"]),set:i.oneOfSetter(a)}),s.encode=function(f,u){if(u||(u=r.create()),f.subscriptions!=null&&f.subscriptions.length)for(var c=0;c<f.subscriptions.length;++c)n.RPC.SubOpts.encode(f.subscriptions[c],u.uint32(10).fork()).ldelim();if(f.msgs!=null&&f.msgs.length)for(var c=0;c<f.msgs.length;++c)n.RPC.Message.encode(f.msgs[c],u.uint32(18).fork()).ldelim();return f.control!=null&&Object.hasOwnProperty.call(f,"control")&&n.RPC.ControlMessage.encode(f.control,u.uint32(26).fork()).ldelim(),u},s.decode=function(f,u){f instanceof e||(f=e.create(f));for(var c=u===void 0?f.len:f.pos+u,h=new n.RPC;f.pos<c;){var l=f.uint32();switch(l>>>3){case 1:h.subscriptions&&h.subscriptions.length||(h.subscriptions=[]),h.subscriptions.push(n.RPC.SubOpts.decode(f,f.uint32()));break;case 2:h.msgs&&h.msgs.length||(h.msgs=[]),h.msgs.push(n.RPC.Message.decode(f,f.uint32()));break;case 3:h.control=n.RPC.ControlMessage.decode(f,f.uint32());break;default:f.skipType(l&7);break}}return h},s.fromObject=function(f){if(f instanceof n.RPC)return f;var u=new n.RPC;if(f.subscriptions){if(!Array.isArray(f.subscriptions))throw TypeError(".RPC.subscriptions: array expected");u.subscriptions=[];for(var c=0;c<f.subscriptions.length;++c){if(typeof f.subscriptions[c]!="object")throw TypeError(".RPC.subscriptions: object expected");u.subscriptions[c]=n.RPC.SubOpts.fromObject(f.subscriptions[c])}}if(f.msgs){if(!Array.isArray(f.msgs))throw TypeError(".RPC.msgs: array expected");u.msgs=[];for(var c=0;c<f.msgs.length;++c){if(typeof f.msgs[c]!="object")throw TypeError(".RPC.msgs: object expected");u.msgs[c]=n.RPC.Message.fromObject(f.msgs[c])}}if(f.control!=null){if(typeof f.control!="object")throw TypeError(".RPC.control: object expected");u.control=n.RPC.ControlMessage.fromObject(f.control)}return u},s.toObject=function(f,u){u||(u={});var c={};if((u.arrays||u.defaults)&&(c.subscriptions=[],c.msgs=[]),f.subscriptions&&f.subscriptions.length){c.subscriptions=[];for(var h=0;h<f.subscriptions.length;++h)c.subscriptions[h]=n.RPC.SubOpts.toObject(f.subscriptions[h],u)}if(f.msgs&&f.msgs.length){c.msgs=[];for(var h=0;h<f.msgs.length;++h)c.msgs[h]=n.RPC.Message.toObject(f.msgs[h],u)}return f.control!=null&&f.hasOwnProperty("control")&&(c.control=n.RPC.ControlMessage.toObject(f.control,u),u.oneofs&&(c._control="control")),c},s.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},s.SubOpts=function(){function o(u){if(u)for(var c=Object.keys(u),h=0;h<c.length;++h)u[c[h]]!=null&&(this[c[h]]=u[c[h]])}o.prototype.subscribe=null,o.prototype.topicID=null;var f;return Object.defineProperty(o.prototype,"_subscribe",{get:i.oneOfGetter(f=["subscribe"]),set:i.oneOfSetter(f)}),Object.defineProperty(o.prototype,"_topicID",{get:i.oneOfGetter(f=["topicID"]),set:i.oneOfSetter(f)}),o.encode=function(c,h){return h||(h=r.create()),c.subscribe!=null&&Object.hasOwnProperty.call(c,"subscribe")&&h.uint32(8).bool(c.subscribe),c.topicID!=null&&Object.hasOwnProperty.call(c,"topicID")&&h.uint32(18).string(c.topicID),h},o.decode=function(c,h){c instanceof e||(c=e.create(c));for(var l=h===void 0?c.len:c.pos+h,d=new n.RPC.SubOpts;c.pos<l;){var p=c.uint32();switch(p>>>3){case 1:d.subscribe=c.bool();break;case 2:d.topicID=c.string();break;default:c.skipType(p&7);break}}return d},o.fromObject=function(c){if(c instanceof n.RPC.SubOpts)return c;var h=new n.RPC.SubOpts;return c.subscribe!=null&&(h.subscribe=Boolean(c.subscribe)),c.topicID!=null&&(h.topicID=String(c.topicID)),h},o.toObject=function(c,h){h||(h={});var l={};return c.subscribe!=null&&c.hasOwnProperty("subscribe")&&(l.subscribe=c.subscribe,h.oneofs&&(l._subscribe="subscribe")),c.topicID!=null&&c.hasOwnProperty("topicID")&&(l.topicID=c.topicID,h.oneofs&&(l._topicID="topicID")),l},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s.Message=function(){function o(u){if(this.topicIDs=[],u)for(var c=Object.keys(u),h=0;h<c.length;++h)u[c[h]]!=null&&(this[c[h]]=u[c[h]])}o.prototype.from=null,o.prototype.data=null,o.prototype.seqno=null,o.prototype.topicIDs=i.emptyArray,o.prototype.signature=null,o.prototype.key=null;var f;return Object.defineProperty(o.prototype,"_from",{get:i.oneOfGetter(f=["from"]),set:i.oneOfSetter(f)}),Object.defineProperty(o.prototype,"_data",{get:i.oneOfGetter(f=["data"]),set:i.oneOfSetter(f)}),Object.defineProperty(o.prototype,"_seqno",{get:i.oneOfGetter(f=["seqno"]),set:i.oneOfSetter(f)}),Object.defineProperty(o.prototype,"_signature",{get:i.oneOfGetter(f=["signature"]),set:i.oneOfSetter(f)}),Object.defineProperty(o.prototype,"_key",{get:i.oneOfGetter(f=["key"]),set:i.oneOfSetter(f)}),o.encode=function(c,h){if(h||(h=r.create()),c.from!=null&&Object.hasOwnProperty.call(c,"from")&&h.uint32(10).bytes(c.from),c.data!=null&&Object.hasOwnProperty.call(c,"data")&&h.uint32(18).bytes(c.data),c.seqno!=null&&Object.hasOwnProperty.call(c,"seqno")&&h.uint32(26).bytes(c.seqno),c.topicIDs!=null&&c.topicIDs.length)for(var l=0;l<c.topicIDs.length;++l)h.uint32(34).string(c.topicIDs[l]);return c.signature!=null&&Object.hasOwnProperty.call(c,"signature")&&h.uint32(42).bytes(c.signature),c.key!=null&&Object.hasOwnProperty.call(c,"key")&&h.uint32(50).bytes(c.key),h},o.decode=function(c,h){c instanceof e||(c=e.create(c));for(var l=h===void 0?c.len:c.pos+h,d=new n.RPC.Message;c.pos<l;){var p=c.uint32();switch(p>>>3){case 1:d.from=c.bytes();break;case 2:d.data=c.bytes();break;case 3:d.seqno=c.bytes();break;case 4:d.topicIDs&&d.topicIDs.length||(d.topicIDs=[]),d.topicIDs.push(c.string());break;case 5:d.signature=c.bytes();break;case 6:d.key=c.bytes();break;default:c.skipType(p&7);break}}return d},o.fromObject=function(c){if(c instanceof n.RPC.Message)return c;var h=new n.RPC.Message;if(c.from!=null&&(typeof c.from=="string"?i.base64.decode(c.from,h.from=i.newBuffer(i.base64.length(c.from)),0):c.from.length&&(h.from=c.from)),c.data!=null&&(typeof c.data=="string"?i.base64.decode(c.data,h.data=i.newBuffer(i.base64.length(c.data)),0):c.data.length&&(h.data=c.data)),c.seqno!=null&&(typeof c.seqno=="string"?i.base64.decode(c.seqno,h.seqno=i.newBuffer(i.base64.length(c.seqno)),0):c.seqno.length&&(h.seqno=c.seqno)),c.topicIDs){if(!Array.isArray(c.topicIDs))throw TypeError(".RPC.Message.topicIDs: array expected");h.topicIDs=[];for(var l=0;l<c.topicIDs.length;++l)h.topicIDs[l]=String(c.topicIDs[l])}return c.signature!=null&&(typeof c.signature=="string"?i.base64.decode(c.signature,h.signature=i.newBuffer(i.base64.length(c.signature)),0):c.signature.length&&(h.signature=c.signature)),c.key!=null&&(typeof c.key=="string"?i.base64.decode(c.key,h.key=i.newBuffer(i.base64.length(c.key)),0):c.key.length&&(h.key=c.key)),h},o.toObject=function(c,h){h||(h={});var l={};if((h.arrays||h.defaults)&&(l.topicIDs=[]),c.from!=null&&c.hasOwnProperty("from")&&(l.from=h.bytes===String?i.base64.encode(c.from,0,c.from.length):h.bytes===Array?Array.prototype.slice.call(c.from):c.from,h.oneofs&&(l._from="from")),c.data!=null&&c.hasOwnProperty("data")&&(l.data=h.bytes===String?i.base64.encode(c.data,0,c.data.length):h.bytes===Array?Array.prototype.slice.call(c.data):c.data,h.oneofs&&(l._data="data")),c.seqno!=null&&c.hasOwnProperty("seqno")&&(l.seqno=h.bytes===String?i.base64.encode(c.seqno,0,c.seqno.length):h.bytes===Array?Array.prototype.slice.call(c.seqno):c.seqno,h.oneofs&&(l._seqno="seqno")),c.topicIDs&&c.topicIDs.length){l.topicIDs=[];for(var d=0;d<c.topicIDs.length;++d)l.topicIDs[d]=c.topicIDs[d]}return c.signature!=null&&c.hasOwnProperty("signature")&&(l.signature=h.bytes===String?i.base64.encode(c.signature,0,c.signature.length):h.bytes===Array?Array.prototype.slice.call(c.signature):c.signature,h.oneofs&&(l._signature="signature")),c.key!=null&&c.hasOwnProperty("key")&&(l.key=h.bytes===String?i.base64.encode(c.key,0,c.key.length):h.bytes===Array?Array.prototype.slice.call(c.key):c.key,h.oneofs&&(l._key="key")),l},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s.ControlMessage=function(){function o(f){if(this.ihave=[],this.iwant=[],this.graft=[],this.prune=[],f)for(var u=Object.keys(f),c=0;c<u.length;++c)f[u[c]]!=null&&(this[u[c]]=f[u[c]])}return o.prototype.ihave=i.emptyArray,o.prototype.iwant=i.emptyArray,o.prototype.graft=i.emptyArray,o.prototype.prune=i.emptyArray,o.encode=function(u,c){if(c||(c=r.create()),u.ihave!=null&&u.ihave.length)for(var h=0;h<u.ihave.length;++h)n.RPC.ControlIHave.encode(u.ihave[h],c.uint32(10).fork()).ldelim();if(u.iwant!=null&&u.iwant.length)for(var h=0;h<u.iwant.length;++h)n.RPC.ControlIWant.encode(u.iwant[h],c.uint32(18).fork()).ldelim();if(u.graft!=null&&u.graft.length)for(var h=0;h<u.graft.length;++h)n.RPC.ControlGraft.encode(u.graft[h],c.uint32(26).fork()).ldelim();if(u.prune!=null&&u.prune.length)for(var h=0;h<u.prune.length;++h)n.RPC.ControlPrune.encode(u.prune[h],c.uint32(34).fork()).ldelim();return c},o.decode=function(u,c){u instanceof e||(u=e.create(u));for(var h=c===void 0?u.len:u.pos+c,l=new n.RPC.ControlMessage;u.pos<h;){var d=u.uint32();switch(d>>>3){case 1:l.ihave&&l.ihave.length||(l.ihave=[]),l.ihave.push(n.RPC.ControlIHave.decode(u,u.uint32()));break;case 2:l.iwant&&l.iwant.length||(l.iwant=[]),l.iwant.push(n.RPC.ControlIWant.decode(u,u.uint32()));break;case 3:l.graft&&l.graft.length||(l.graft=[]),l.graft.push(n.RPC.ControlGraft.decode(u,u.uint32()));break;case 4:l.prune&&l.prune.length||(l.prune=[]),l.prune.push(n.RPC.ControlPrune.decode(u,u.uint32()));break;default:u.skipType(d&7);break}}return l},o.fromObject=function(u){if(u instanceof n.RPC.ControlMessage)return u;var c=new n.RPC.ControlMessage;if(u.ihave){if(!Array.isArray(u.ihave))throw TypeError(".RPC.ControlMessage.ihave: array expected");c.ihave=[];for(var h=0;h<u.ihave.length;++h){if(typeof u.ihave[h]!="object")throw TypeError(".RPC.ControlMessage.ihave: object expected");c.ihave[h]=n.RPC.ControlIHave.fromObject(u.ihave[h])}}if(u.iwant){if(!Array.isArray(u.iwant))throw TypeError(".RPC.ControlMessage.iwant: array expected");c.iwant=[];for(var h=0;h<u.iwant.length;++h){if(typeof u.iwant[h]!="object")throw TypeError(".RPC.ControlMessage.iwant: object expected");c.iwant[h]=n.RPC.ControlIWant.fromObject(u.iwant[h])}}if(u.graft){if(!Array.isArray(u.graft))throw TypeError(".RPC.ControlMessage.graft: array expected");c.graft=[];for(var h=0;h<u.graft.length;++h){if(typeof u.graft[h]!="object")throw TypeError(".RPC.ControlMessage.graft: object expected");c.graft[h]=n.RPC.ControlGraft.fromObject(u.graft[h])}}if(u.prune){if(!Array.isArray(u.prune))throw TypeError(".RPC.ControlMessage.prune: array expected");c.prune=[];for(var h=0;h<u.prune.length;++h){if(typeof u.prune[h]!="object")throw TypeError(".RPC.ControlMessage.prune: object expected");c.prune[h]=n.RPC.ControlPrune.fromObject(u.prune[h])}}return c},o.toObject=function(u,c){c||(c={});var h={};if((c.arrays||c.defaults)&&(h.ihave=[],h.iwant=[],h.graft=[],h.prune=[]),u.ihave&&u.ihave.length){h.ihave=[];for(var l=0;l<u.ihave.length;++l)h.ihave[l]=n.RPC.ControlIHave.toObject(u.ihave[l],c)}if(u.iwant&&u.iwant.length){h.iwant=[];for(var l=0;l<u.iwant.length;++l)h.iwant[l]=n.RPC.ControlIWant.toObject(u.iwant[l],c)}if(u.graft&&u.graft.length){h.graft=[];for(var l=0;l<u.graft.length;++l)h.graft[l]=n.RPC.ControlGraft.toObject(u.graft[l],c)}if(u.prune&&u.prune.length){h.prune=[];for(var l=0;l<u.prune.length;++l)h.prune[l]=n.RPC.ControlPrune.toObject(u.prune[l],c)}return h},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s.ControlIHave=function(){function o(u){if(this.messageIDs=[],u)for(var c=Object.keys(u),h=0;h<c.length;++h)u[c[h]]!=null&&(this[c[h]]=u[c[h]])}o.prototype.topicID=null,o.prototype.messageIDs=i.emptyArray;var f;return Object.defineProperty(o.prototype,"_topicID",{get:i.oneOfGetter(f=["topicID"]),set:i.oneOfSetter(f)}),o.encode=function(c,h){if(h||(h=r.create()),c.topicID!=null&&Object.hasOwnProperty.call(c,"topicID")&&h.uint32(10).string(c.topicID),c.messageIDs!=null&&c.messageIDs.length)for(var l=0;l<c.messageIDs.length;++l)h.uint32(18).bytes(c.messageIDs[l]);return h},o.decode=function(c,h){c instanceof e||(c=e.create(c));for(var l=h===void 0?c.len:c.pos+h,d=new n.RPC.ControlIHave;c.pos<l;){var p=c.uint32();switch(p>>>3){case 1:d.topicID=c.string();break;case 2:d.messageIDs&&d.messageIDs.length||(d.messageIDs=[]),d.messageIDs.push(c.bytes());break;default:c.skipType(p&7);break}}return d},o.fromObject=function(c){if(c instanceof n.RPC.ControlIHave)return c;var h=new n.RPC.ControlIHave;if(c.topicID!=null&&(h.topicID=String(c.topicID)),c.messageIDs){if(!Array.isArray(c.messageIDs))throw TypeError(".RPC.ControlIHave.messageIDs: array expected");h.messageIDs=[];for(var l=0;l<c.messageIDs.length;++l)typeof c.messageIDs[l]=="string"?i.base64.decode(c.messageIDs[l],h.messageIDs[l]=i.newBuffer(i.base64.length(c.messageIDs[l])),0):c.messageIDs[l].length&&(h.messageIDs[l]=c.messageIDs[l])}return h},o.toObject=function(c,h){h||(h={});var l={};if((h.arrays||h.defaults)&&(l.messageIDs=[]),c.topicID!=null&&c.hasOwnProperty("topicID")&&(l.topicID=c.topicID,h.oneofs&&(l._topicID="topicID")),c.messageIDs&&c.messageIDs.length){l.messageIDs=[];for(var d=0;d<c.messageIDs.length;++d)l.messageIDs[d]=h.bytes===String?i.base64.encode(c.messageIDs[d],0,c.messageIDs[d].length):h.bytes===Array?Array.prototype.slice.call(c.messageIDs[d]):c.messageIDs[d]}return l},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s.ControlIWant=function(){function o(f){if(this.messageIDs=[],f)for(var u=Object.keys(f),c=0;c<u.length;++c)f[u[c]]!=null&&(this[u[c]]=f[u[c]])}return o.prototype.messageIDs=i.emptyArray,o.encode=function(u,c){if(c||(c=r.create()),u.messageIDs!=null&&u.messageIDs.length)for(var h=0;h<u.messageIDs.length;++h)c.uint32(10).bytes(u.messageIDs[h]);return c},o.decode=function(u,c){u instanceof e||(u=e.create(u));for(var h=c===void 0?u.len:u.pos+c,l=new n.RPC.ControlIWant;u.pos<h;){var d=u.uint32();switch(d>>>3){case 1:l.messageIDs&&l.messageIDs.length||(l.messageIDs=[]),l.messageIDs.push(u.bytes());break;default:u.skipType(d&7);break}}return l},o.fromObject=function(u){if(u instanceof n.RPC.ControlIWant)return u;var c=new n.RPC.ControlIWant;if(u.messageIDs){if(!Array.isArray(u.messageIDs))throw TypeError(".RPC.ControlIWant.messageIDs: array expected");c.messageIDs=[];for(var h=0;h<u.messageIDs.length;++h)typeof u.messageIDs[h]=="string"?i.base64.decode(u.messageIDs[h],c.messageIDs[h]=i.newBuffer(i.base64.length(u.messageIDs[h])),0):u.messageIDs[h].length&&(c.messageIDs[h]=u.messageIDs[h])}return c},o.toObject=function(u,c){c||(c={});var h={};if((c.arrays||c.defaults)&&(h.messageIDs=[]),u.messageIDs&&u.messageIDs.length){h.messageIDs=[];for(var l=0;l<u.messageIDs.length;++l)h.messageIDs[l]=c.bytes===String?i.base64.encode(u.messageIDs[l],0,u.messageIDs[l].length):c.bytes===Array?Array.prototype.slice.call(u.messageIDs[l]):u.messageIDs[l]}return h},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s.ControlGraft=function(){function o(u){if(u)for(var c=Object.keys(u),h=0;h<c.length;++h)u[c[h]]!=null&&(this[c[h]]=u[c[h]])}o.prototype.topicID=null;var f;return Object.defineProperty(o.prototype,"_topicID",{get:i.oneOfGetter(f=["topicID"]),set:i.oneOfSetter(f)}),o.encode=function(c,h){return h||(h=r.create()),c.topicID!=null&&Object.hasOwnProperty.call(c,"topicID")&&h.uint32(10).string(c.topicID),h},o.decode=function(c,h){c instanceof e||(c=e.create(c));for(var l=h===void 0?c.len:c.pos+h,d=new n.RPC.ControlGraft;c.pos<l;){var p=c.uint32();switch(p>>>3){case 1:d.topicID=c.string();break;default:c.skipType(p&7);break}}return d},o.fromObject=function(c){if(c instanceof n.RPC.ControlGraft)return c;var h=new n.RPC.ControlGraft;return c.topicID!=null&&(h.topicID=String(c.topicID)),h},o.toObject=function(c,h){h||(h={});var l={};return c.topicID!=null&&c.hasOwnProperty("topicID")&&(l.topicID=c.topicID,h.oneofs&&(l._topicID="topicID")),l},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s.ControlPrune=function(){function o(u){if(this.peers=[],u)for(var c=Object.keys(u),h=0;h<c.length;++h)u[c[h]]!=null&&(this[c[h]]=u[c[h]])}o.prototype.topicID=null,o.prototype.peers=i.emptyArray,o.prototype.backoff=null;var f;return Object.defineProperty(o.prototype,"_topicID",{get:i.oneOfGetter(f=["topicID"]),set:i.oneOfSetter(f)}),Object.defineProperty(o.prototype,"_backoff",{get:i.oneOfGetter(f=["backoff"]),set:i.oneOfSetter(f)}),o.encode=function(c,h){if(h||(h=r.create()),c.topicID!=null&&Object.hasOwnProperty.call(c,"topicID")&&h.uint32(10).string(c.topicID),c.peers!=null&&c.peers.length)for(var l=0;l<c.peers.length;++l)n.RPC.PeerInfo.encode(c.peers[l],h.uint32(18).fork()).ldelim();return c.backoff!=null&&Object.hasOwnProperty.call(c,"backoff")&&h.uint32(24).uint64(c.backoff),h},o.decode=function(c,h){c instanceof e||(c=e.create(c));for(var l=h===void 0?c.len:c.pos+h,d=new n.RPC.ControlPrune;c.pos<l;){var p=c.uint32();switch(p>>>3){case 1:d.topicID=c.string();break;case 2:d.peers&&d.peers.length||(d.peers=[]),d.peers.push(n.RPC.PeerInfo.decode(c,c.uint32()));break;case 3:d.backoff=c.uint64();break;default:c.skipType(p&7);break}}return d},o.fromObject=function(c){if(c instanceof n.RPC.ControlPrune)return c;var h=new n.RPC.ControlPrune;if(c.topicID!=null&&(h.topicID=String(c.topicID)),c.peers){if(!Array.isArray(c.peers))throw TypeError(".RPC.ControlPrune.peers: array expected");h.peers=[];for(var l=0;l<c.peers.length;++l){if(typeof c.peers[l]!="object")throw TypeError(".RPC.ControlPrune.peers: object expected");h.peers[l]=n.RPC.PeerInfo.fromObject(c.peers[l])}}return c.backoff!=null&&(i.Long?(h.backoff=i.Long.fromValue(c.backoff)).unsigned=!0:typeof c.backoff=="string"?h.backoff=parseInt(c.backoff,10):typeof c.backoff=="number"?h.backoff=c.backoff:typeof c.backoff=="object"&&(h.backoff=new i.LongBits(c.backoff.low>>>0,c.backoff.high>>>0).toNumber(!0))),h},o.toObject=function(c,h){h||(h={});var l={};if((h.arrays||h.defaults)&&(l.peers=[]),c.topicID!=null&&c.hasOwnProperty("topicID")&&(l.topicID=c.topicID,h.oneofs&&(l._topicID="topicID")),c.peers&&c.peers.length){l.peers=[];for(var d=0;d<c.peers.length;++d)l.peers[d]=n.RPC.PeerInfo.toObject(c.peers[d],h)}return c.backoff!=null&&c.hasOwnProperty("backoff")&&(typeof c.backoff=="number"?l.backoff=h.longs===String?String(c.backoff):c.backoff:l.backoff=h.longs===String?i.Long.prototype.toString.call(c.backoff):h.longs===Number?new i.LongBits(c.backoff.low>>>0,c.backoff.high>>>0).toNumber(!0):c.backoff,h.oneofs&&(l._backoff="backoff")),l},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s.PeerInfo=function(){function o(u){if(u)for(var c=Object.keys(u),h=0;h<c.length;++h)u[c[h]]!=null&&(this[c[h]]=u[c[h]])}o.prototype.peerID=null,o.prototype.signedPeerRecord=null;var f;return Object.defineProperty(o.prototype,"_peerID",{get:i.oneOfGetter(f=["peerID"]),set:i.oneOfSetter(f)}),Object.defineProperty(o.prototype,"_signedPeerRecord",{get:i.oneOfGetter(f=["signedPeerRecord"]),set:i.oneOfSetter(f)}),o.encode=function(c,h){return h||(h=r.create()),c.peerID!=null&&Object.hasOwnProperty.call(c,"peerID")&&h.uint32(10).bytes(c.peerID),c.signedPeerRecord!=null&&Object.hasOwnProperty.call(c,"signedPeerRecord")&&h.uint32(18).bytes(c.signedPeerRecord),h},o.decode=function(c,h){c instanceof e||(c=e.create(c));for(var l=h===void 0?c.len:c.pos+h,d=new n.RPC.PeerInfo;c.pos<l;){var p=c.uint32();switch(p>>>3){case 1:d.peerID=c.bytes();break;case 2:d.signedPeerRecord=c.bytes();break;default:c.skipType(p&7);break}}return d},o.fromObject=function(c){if(c instanceof n.RPC.PeerInfo)return c;var h=new n.RPC.PeerInfo;return c.peerID!=null&&(typeof c.peerID=="string"?i.base64.decode(c.peerID,h.peerID=i.newBuffer(i.base64.length(c.peerID)),0):c.peerID.length&&(h.peerID=c.peerID)),c.signedPeerRecord!=null&&(typeof c.signedPeerRecord=="string"?i.base64.decode(c.signedPeerRecord,h.signedPeerRecord=i.newBuffer(i.base64.length(c.signedPeerRecord)),0):c.signedPeerRecord.length&&(h.signedPeerRecord=c.signedPeerRecord)),h},o.toObject=function(c,h){h||(h={});var l={};return c.peerID!=null&&c.hasOwnProperty("peerID")&&(l.peerID=h.bytes===String?i.base64.encode(c.peerID,0,c.peerID.length):h.bytes===Array?Array.prototype.slice.call(c.peerID):c.peerID,h.oneofs&&(l._peerID="peerID")),c.signedPeerRecord!=null&&c.hasOwnProperty("signedPeerRecord")&&(l.signedPeerRecord=h.bytes===String?i.base64.encode(c.signedPeerRecord,0,c.signedPeerRecord.length):h.bytes===Array?Array.prototype.slice.call(c.signedPeerRecord):c.signedPeerRecord,h.oneofs&&(l._signedPeerRecord="signedPeerRecord")),l},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s}(),n})});var Uc=E(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});Ho.getGossipPeers=void 0;var y2=fs();function QI(t,e,r,i=()=>!0){let n=t.topics.get(e);if(!n)return new Set;let s=[];return n.forEach(a=>{let o=t.peers.get(a);!o||y2.hasGossipProtocol(o.protocol)&&i(a)&&s.push(a)}),s=y2.shuffle(s),r>0&&s.length>r&&(s=s.slice(0,r)),new Set(s)}Ho.getGossipPeers=QI});var v2=E(Nr=>{"use strict";var ZI=Nr&&Nr.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),XI=Nr&&Nr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),JI=Nr&&Nr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ZI(e,t,r);return XI(e,t),e};Object.defineProperty(Nr,"__esModule",{value:!0});Nr.Heartbeat=void 0;var qc=JI(Ni()),zo=Uc(),eB=fs(),g2=class{constructor(e){this.gossipsub=e}start(){if(this._heartbeatTimer)return;let e=this._heartbeat.bind(this),r=setTimeout(()=>{e(),this._heartbeatTimer.runPeriodically(e,this.gossipsub._options.heartbeatInterval)},qc.GossipsubHeartbeatInitialDelay);this._heartbeatTimer={_intervalId:void 0,runPeriodically:(i,n)=>{this._heartbeatTimer._intervalId=setInterval(i,n)},cancel:()=>{clearTimeout(r),clearInterval(this._heartbeatTimer._intervalId)}}}stop(){!this._heartbeatTimer||(this._heartbeatTimer.cancel(),this._heartbeatTimer=null)}_heartbeat(){let{D:e,Dlo:r,Dhi:i,Dscore:n,Dout:s,fanoutTTL:a}=this.gossipsub._options;this.gossipsub.heartbeatTicks++;let o=new Map,f=d=>{let p=o.get(d);return p===void 0&&(p=this.gossipsub.score.score(d),o.set(d,p)),p},u=new Map,c=new Map,h=new Map;this.gossipsub._clearBackoff(),this.gossipsub.peerhave.clear(),this.gossipsub.iasked.clear(),this.gossipsub._applyIwantPenalties(),this.gossipsub._directConnect(),this.gossipsub.mesh.forEach((d,p)=>{let y=v=>{this.gossipsub.log("HEARTBEAT: Remove mesh link to %s in %s",v,p),this.gossipsub.score.prune(v,p),this.gossipsub._addBackoff(v,p),d.delete(v);let x=c.get(v);x?x.push(p):c.set(v,[p])},g=v=>{this.gossipsub.log("HEARTBEAT: Add mesh link to %s in %s",v,p),this.gossipsub.score.graft(v,p),d.add(v);let x=u.get(v);x?x.push(p):u.set(v,[p])};if(d.forEach(v=>{let x=f(v);x<0&&(this.gossipsub.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",v,x,p),y(v),h.set(v,!0))}),d.size<r){let v=this.gossipsub.backoff.get(p),x=e-d.size;zo.getGossipPeers(this.gossipsub,p,x,P=>!d.has(P)&&!this.gossipsub.direct.has(P)&&(!v||!v.has(P))&&f(P)>=0).forEach(g)}if(d.size>i){let v=Array.from(d);v.sort((w,P)=>f(P)-f(w)),v=v.slice(0,n).concat(eB.shuffle(v.slice(n)));let x=0;if(v.slice(0,e).forEach(w=>{this.gossipsub.outbound.get(w)&&x++}),x<s){let w=B=>{let S=v[B];for(let G=B;G>0;G--)v[G]=v[G-1];v[0]=S};if(x>0){let B=x;for(let S=1;S<e&&B>0;S++)this.gossipsub.outbound.get(v[S])&&(w(S),B--)}let P=e-x;for(let B=e;B<v.length&&P>0;B++)this.gossipsub.outbound.get(v[B])&&(w(B),P--)}v.slice(e).forEach(y)}if(d.size>=r){let v=0;if(d.forEach(x=>{this.gossipsub.outbound.get(x)&&v++}),v<s){let x=s-v,w=this.gossipsub.backoff.get(p);zo.getGossipPeers(this.gossipsub,p,x,P=>!d.has(P)&&!this.gossipsub.direct.has(P)&&(!w||!w.has(P))&&f(P)>=0).forEach(g)}}if(this.gossipsub.heartbeatTicks%qc.GossipsubOpportunisticGraftTicks==0&&d.size>1){let v=Array.from(d).sort((P,B)=>f(P)-f(B)),x=Math.floor(d.size/2),w=f(v[x]);if(w<this.gossipsub._options.scoreThresholds.opportunisticGraftThreshold){let P=this.gossipsub.backoff.get(p);zo.getGossipPeers(this.gossipsub,p,qc.GossipsubOpportunisticGraftPeers,S=>d.has(S)&&!this.gossipsub.direct.has(S)&&(!P||!P.has(S))&&f(S)>w).forEach(S=>{this.gossipsub.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",S,p),g(S)})}}this.gossipsub._emitGossip(p,d)});let l=this.gossipsub._now();this.gossipsub.lastpub.forEach((d,p)=>{d+a<l&&(this.gossipsub.fanout.delete(p),this.gossipsub.lastpub.delete(p))}),this.gossipsub.fanout.forEach((d,p)=>{let y=this.gossipsub.topics.get(p);if(d.forEach(g=>{(!y.has(g)||f(g)<this.gossipsub._options.scoreThresholds.publishThreshold)&&d.delete(g)}),d.size<e){let g=e-d.size;zo.getGossipPeers(this.gossipsub,p,g,x=>!d.has(x)&&!this.gossipsub.direct.has(x)&&f(x)>=this.gossipsub._options.scoreThresholds.publishThreshold).forEach(x=>{d.add(x)})}this.gossipsub._emitGossip(p,d)}),this.gossipsub._sendGraftPrune(u,c,h),this.gossipsub._flush(),this.gossipsub.messageCache.shift(),this.gossipsub.emit("gossipsub:heartbeat")}};Nr.Heartbeat=g2});var Vc=E(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});ls.ERR_INVALID_PEER_SCORE_THRESHOLDS=ls.ERR_INVALID_PEER_SCORE_PARAMS=void 0;ls.ERR_INVALID_PEER_SCORE_PARAMS="ERR_INVALID_PEER_SCORE_PARAMS";ls.ERR_INVALID_PEER_SCORE_THRESHOLDS="ERR_INVALID_PEER_SCORE_THRESHOLDS"});var Gc=E(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.validateTopicScoreParams=mt.validatePeerScoreParams=mt.createTopicScoreParams=mt.createPeerScoreParams=mt.defaultTopicScoreParams=mt.defaultPeerScoreParams=void 0;var Ae=Vc(),Ce=Oe();mt.defaultPeerScoreParams={topics:{},topicScoreCap:10,appSpecificScore:()=>0,appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:3600*1e3};mt.defaultTopicScoreParams={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3};function tB(t={}){return Object.assign(Object.assign(Object.assign({},mt.defaultPeerScoreParams),t),{topics:t.topics?Object.entries(t.topics).reduce((e,[r,i])=>(e[r]=x2(i),e),{}):{}})}mt.createPeerScoreParams=tB;function x2(t={}){return Object.assign(Object.assign({},mt.defaultTopicScoreParams),t)}mt.createTopicScoreParams=x2;function rB(t){for(let[e,r]of Object.entries(t.topics))try{b2(r)}catch(i){throw Ce(new Error(`invalid score parameters for topic ${e}: ${i.message}`),Ae.ERR_INVALID_PEER_SCORE_PARAMS)}if(t.topicScoreCap<0)throw Ce(new Error("invalid topic score cap; must be positive (or 0 for no cap)"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.appSpecificScore===null||t.appSpecificScore===void 0)throw Ce(new Error("missing application specific score function"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.IPColocationFactorWeight>0)throw Ce(new Error("invalid IPColocationFactorWeight; must be negative (or 0 to disable)"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.IPColocationFactorWeight!==0&&t.IPColocationFactorThreshold<1)throw Ce(new Error("invalid IPColocationFactorThreshold; must be at least 1"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.behaviourPenaltyWeight>0)throw Ce(new Error("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.behaviourPenaltyWeight!==0&&(t.behaviourPenaltyDecay<=0||t.behaviourPenaltyDecay>=1))throw Ce(new Error("invalid BehaviourPenaltyDecay; must be between 0 and 1"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.decayInterval<1e3)throw Ce(new Error("invalid DecayInterval; must be at least 1s"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.decayToZero<=0||t.decayToZero>=1)throw Ce(new Error("invalid DecayToZero; must be between 0 and 1"),Ae.ERR_INVALID_PEER_SCORE_PARAMS)}mt.validatePeerScoreParams=rB;function b2(t){if(t.topicWeight<0)throw Ce(new Error("invalid topic weight; must be >= 0"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshQuantum===0)throw Ce(new Error("invalid TimeInMeshQuantum; must be non zero"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshWeight<0)throw Ce(new Error("invalid TimeInMeshWeight; must be positive (or 0 to disable)"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshWeight!==0&&t.timeInMeshQuantum<=0)throw Ce(new Error("invalid TimeInMeshQuantum; must be positive"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshWeight!==0&&t.timeInMeshCap<=0)throw Ce(new Error("invalid TimeInMeshCap; must be positive"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.firstMessageDeliveriesWeight<0)throw Ce(new Error("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.firstMessageDeliveriesWeight!==0&&(t.firstMessageDeliveriesDecay<=0||t.firstMessageDeliveriesDecay>=1))throw Ce(new Error("invalid FirstMessageDeliveriesDecay; must be between 0 and 1"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.firstMessageDeliveriesWeight!==0&&t.firstMessageDeliveriesCap<=0)throw Ce(new Error("invalid FirstMessageDeliveriesCap; must be positive"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight>0)throw Ce(new Error("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight!==0&&(t.meshMessageDeliveriesDecay<=0||t.meshMessageDeliveriesDecay>=1))throw Ce(new Error("invalid MeshMessageDeliveriesDecay; must be between 0 and 1"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight!==0&&t.meshMessageDeliveriesCap<=0)throw Ce(new Error("invalid MeshMessageDeliveriesCap; must be positive"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight!==0&&t.meshMessageDeliveriesThreshold<=0)throw Ce(new Error("invalid MeshMessageDeliveriesThreshold; must be positive"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWindow<0)throw Ce(new Error("invalid MeshMessageDeliveriesWindow; must be non-negative"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight!==0&&t.meshMessageDeliveriesActivation<1e3)throw Ce(new Error("invalid MeshMessageDeliveriesActivation; must be at least 1s"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshFailurePenaltyWeight>0)throw Ce(new Error("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshFailurePenaltyWeight!==0&&(t.meshFailurePenaltyDecay<=0||t.meshFailurePenaltyDecay>=1))throw Ce(new Error("invalid MeshFailurePenaltyDecay; must be between 0 and 1"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.invalidMessageDeliveriesWeight>0)throw Ce(new Error("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)"),Ae.ERR_INVALID_PEER_SCORE_PARAMS);if(t.invalidMessageDeliveriesDecay<=0||t.invalidMessageDeliveriesDecay>=1)throw Ce(new Error("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1"),Ae.ERR_INVALID_PEER_SCORE_PARAMS)}mt.validateTopicScoreParams=b2});var m2=E(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.validatePeerScoreThresholds=ii.createPeerScoreThresholds=ii.defaultPeerScoreThresholds=void 0;var ha=Vc(),la=Oe();ii.defaultPeerScoreThresholds={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20};function iB(t={}){return Object.assign(Object.assign({},ii.defaultPeerScoreThresholds),t)}ii.createPeerScoreThresholds=iB;function nB(t){if(t.gossipThreshold>0)throw la(new Error("invalid gossip threshold; it must be <= 0"),ha.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.publishThreshold>0||t.publishThreshold>t.gossipThreshold)throw la(new Error("invalid publish threshold; it must be <= 0 and <= gossip threshold"),ha.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.graylistThreshold>0||t.graylistThreshold>t.publishThreshold)throw la(new Error("invalid graylist threshold; it must be <= 0 and <= publish threshold"),ha.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.acceptPXThreshold<0)throw la(new Error("invalid accept PX threshold; it must be >= 0"),ha.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.opportunisticGraftThreshold<0)throw la(new Error("invalid opportunistic grafting threshold; it must be >= 0"),ha.ERR_INVALID_PEER_SCORE_THRESHOLDS)}ii.validatePeerScoreThresholds=nB});var E2=E(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});Oi.ensureTopicStats=Oi.createTopicStats=Oi.createPeerStats=void 0;function sB(t={}){return Object.assign(Object.assign({connected:!1,expire:0,ips:[],behaviourPenalty:0},t),{topics:t.topics?Object.entries(t.topics).reduce((e,[r,i])=>(e[r]=Hc(i),e),{}):{}})}Oi.createPeerStats=sB;function Hc(t={}){return Object.assign({inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},t)}Oi.createTopicStats=Hc;function aB(t,e,r){let i=e.topics[t];if(i)return i;if(!!r.topics[t])return e.topics[t]=i=Hc(),i}Oi.ensureTopicStats=aB});var w2=E(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.computeScore=void 0;function oB(t,e,r,i){let n=0;return Object.entries(e.topics).forEach(([o,f])=>{let u=r.topics[o];if(!u)return;let c=0;if(f.inMesh){let p=f.meshTime/u.timeInMeshQuantum;p>u.timeInMeshCap&&(p=u.timeInMeshCap),c+=p*u.timeInMeshWeight}if(c+=f.firstMessageDeliveries*u.firstMessageDeliveriesWeight,f.meshMessageDeliveriesActive&&f.meshMessageDeliveries<u.meshMessageDeliveriesThreshold){let p=u.meshMessageDeliveriesThreshold-f.meshMessageDeliveries;c+=p*p*u.meshMessageDeliveriesWeight}c+=f.meshFailurePenalty*u.meshFailurePenaltyWeight,c+=f.invalidMessageDeliveries*f.invalidMessageDeliveries*u.invalidMessageDeliveriesWeight,n+=c*u.topicWeight}),r.topicScoreCap>0&&n>r.topicScoreCap&&(n=r.topicScoreCap),n+=r.appSpecificScore(t)*r.appSpecificWeight,e.ips.forEach(o=>{if(r.IPColocationFactorWhitelist.has(o))return;let f=i.get(o),u=f?f.size:0;if(u>r.IPColocationFactorThreshold){let c=u-r.IPColocationFactorThreshold;n+=c*c*r.IPColocationFactorWeight}}),n+=e.behaviourPenalty*e.behaviourPenalty*r.behaviourPenaltyWeight,n}jo.computeScore=oB});var _2=E((C5,S2)=>{"use strict";function ze(t,e){var e=e||{};this._head=0,this._tail=0,this._capacity=e.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(t)&&this._fromArray(t)}ze.prototype.peekAt=function(e){var r=e;if(r===(r|0)){var i=this.size();if(!(r>=i||r<-i))return r<0&&(r+=i),r=this._head+r&this._capacityMask,this._list[r]}};ze.prototype.get=function(e){return this.peekAt(e)};ze.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};ze.prototype.peekFront=function(){return this.peek()};ze.prototype.peekBack=function(){return this.peekAt(-1)};Object.defineProperty(ze.prototype,"length",{get:function(){return this.size()}});ze.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};ze.prototype.unshift=function(e){if(e===void 0)return this.size();var r=this._list.length;return this._head=this._head-1+r&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};ze.prototype.shift=function(){var e=this._head;if(e!==this._tail){var r=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),r}};ze.prototype.push=function(e){if(e===void 0)return this.size();var r=this._tail;return this._list[r]=e,this._tail=r+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};ze.prototype.pop=function(){var e=this._tail;if(e!==this._head){var r=this._list.length;this._tail=e-1+r&this._capacityMask;var i=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=r>>>2&&this._shrinkArray(),i}};ze.prototype.removeOne=function(e){var r=e;if(r===(r|0)&&this._head!==this._tail){var i=this.size(),n=this._list.length;if(!(r>=i||r<-i)){r<0&&(r+=i),r=this._head+r&this._capacityMask;var s=this._list[r],a;if(e<i/2){for(a=e;a>0;a--)this._list[r]=this._list[r=r-1+n&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+n&this._capacityMask}else{for(a=i-1-e;a>0;a--)this._list[r]=this._list[r=r+1+n&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+n&this._capacityMask}return s}}};ze.prototype.remove=function(e,r){var i=e,n,s=r;if(i===(i|0)&&this._head!==this._tail){var a=this.size(),o=this._list.length;if(!(i>=a||i<-a||r<1)){if(i<0&&(i+=a),r===1||!r)return n=new Array(1),n[0]=this.removeOne(i),n;if(i===0&&i+r>=a)return n=this.toArray(),this.clear(),n;i+r>a&&(r=a-i);var f;for(n=new Array(r),f=0;f<r;f++)n[f]=this._list[this._head+i+f&this._capacityMask];if(i=this._head+i&this._capacityMask,e+r===a){for(this._tail=this._tail-r+o&this._capacityMask,f=r;f>0;f--)this._list[i=i+1+o&this._capacityMask]=void 0;return n}if(e===0){for(this._head=this._head+r+o&this._capacityMask,f=r-1;f>0;f--)this._list[i=i+1+o&this._capacityMask]=void 0;return n}if(i<a/2){for(this._head=this._head+e+r+o&this._capacityMask,f=e;f>0;f--)this.unshift(this._list[i=i-1+o&this._capacityMask]);for(i=this._head-1+o&this._capacityMask;s>0;)this._list[i=i-1+o&this._capacityMask]=void 0,s--;e<0&&(this._tail=i)}else{for(this._tail=i,i=i+r+o&this._capacityMask,f=a-(r+e);f>0;f--)this.push(this._list[i++]);for(i=this._tail;s>0;)this._list[i=i+1+o&this._capacityMask]=void 0,s--}return this._head<2&&this._tail>1e4&&this._tail<=o>>>2&&this._shrinkArray(),n}}};ze.prototype.splice=function(e,r){var i=e;if(i===(i|0)){var n=this.size();if(i<0&&(i+=n),!(i>n))if(arguments.length>2){var s,a,o,f=arguments.length,u=this._list.length,c=2;if(!n||i<n/2){for(a=new Array(i),s=0;s<i;s++)a[s]=this._list[this._head+s&this._capacityMask];for(r===0?(o=[],i>0&&(this._head=this._head+i+u&this._capacityMask)):(o=this.remove(i,r),this._head=this._head+i+u&this._capacityMask);f>c;)this.unshift(arguments[--f]);for(s=i;s>0;s--)this.unshift(a[s-1])}else{a=new Array(n-(i+r));var h=a.length;for(s=0;s<h;s++)a[s]=this._list[this._head+i+r+s&this._capacityMask];for(r===0?(o=[],i!=n&&(this._tail=this._head+i+u&this._capacityMask)):(o=this.remove(i,r),this._tail=this._tail-h+u&this._capacityMask);c<f;)this.push(arguments[c++]);for(s=0;s<h;s++)this.push(a[s])}return o}else return this.remove(i,r)}};ze.prototype.clear=function(){this._head=0,this._tail=0};ze.prototype.isEmpty=function(){return this._head===this._tail};ze.prototype.toArray=function(){return this._copyArray(!1)};ze.prototype._fromArray=function(e){for(var r=0;r<e.length;r++)this.push(e[r])};ze.prototype._copyArray=function(e){var r=[],i=this._list,n=i.length,s;if(e||this._head>this._tail){for(s=this._head;s<n;s++)r.push(i[s]);for(s=0;s<this._tail;s++)r.push(i[s])}else for(s=this._head;s<this._tail;s++)r.push(i[s]);return r};ze.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1};ze.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};S2.exports=ze});var A2=E(ni=>{"use strict";var uB=ni&&ni.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ni,"__esModule",{value:!0});ni.MessageDeliveries=ni.DeliveryRecordStatus=void 0;var cB=Ni(),fB=uB(_2()),I2;(function(t){t[t.unknown=0]="unknown",t[t.valid=1]="valid",t[t.invalid=2]="invalid",t[t.ignored=3]="ignored"})(I2=ni.DeliveryRecordStatus||(ni.DeliveryRecordStatus={}));var B2=class{constructor(){this.records=new Map,this.queue=new fB.default}ensureRecord(e){let r=this.records.get(e);if(r)return r;r={status:I2.unknown,firstSeen:Date.now(),validated:0,peers:new Set},this.records.set(e,r);let i={msgId:e,expire:Date.now()+cB.TimeCacheDuration};return this.queue.push(i),r}gc(){let e=Date.now(),r=this.queue.peekFront();for(;r&&r.expire<e;)this.records.delete(r.msgId),this.queue.shift(),r=this.queue.peekFront()}clear(){this.records.clear(),this.queue.clear()}};ni.MessageDeliveries=B2});var T2=E(Li=>{"use strict";var Wo=Li&&Li.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(i.next(c))}catch(h){a(h)}}function f(c){try{u(i.throw(c))}catch(h){a(h)}}function u(c){c.done?s(c.value):n(c.value).then(o,f)}u((i=i.apply(t,e||[])).next())})},hB=Li&&Li.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Li,"__esModule",{value:!0});Li.PeerScore=void 0;var lB=Gc(),ps=E2(),pB=w2(),hr=A2(),dB=Ni(),yB=hB(us()),gB=Is(),vB=Ma(),{ERR_INVALID_SIGNATURE:xB,ERR_MISSING_SIGNATURE:bB}=vB.codes,ds=gB("libp2p:gossipsub:score"),C2=class{constructor(e,r){lB.validatePeerScoreParams(e),this.params=e,this._connectionManager=r,this.peerStats=new Map,this.peerIPs=new Map,this.scoreCache=new Map,this.deliveryRecords=new hr.MessageDeliveries}start(){if(this._backgroundInterval){ds("Peer score already running");return}this._backgroundInterval=setInterval(()=>this.background(),this.params.decayInterval),ds("started")}stop(){if(!this._backgroundInterval){ds("Peer score already stopped");return}clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),ds("stopped")}background(){this._refreshScores(),this._updateIPs(),this.deliveryRecords.gc()}_refreshScores(){let e=Date.now(),r=this.params.decayToZero;this.peerStats.forEach((i,n)=>{if(!i.connected){e>i.expire&&(this._removeIPs(n,i.ips),this.peerStats.delete(n));return}Object.entries(i.topics).forEach(([s,a])=>{let o=this.params.topics[s];!o||(a.firstMessageDeliveries*=o.firstMessageDeliveriesDecay,a.firstMessageDeliveries<r&&(a.firstMessageDeliveries=0),a.meshMessageDeliveries*=o.meshMessageDeliveriesDecay,a.meshMessageDeliveries<r&&(a.meshMessageDeliveries=0),a.meshFailurePenalty*=o.meshFailurePenaltyDecay,a.meshFailurePenalty<r&&(a.meshFailurePenalty=0),a.invalidMessageDeliveries*=o.invalidMessageDeliveriesDecay,a.invalidMessageDeliveries<r&&(a.invalidMessageDeliveries=0),a.inMesh&&(a.meshTime=e-a.graftTime,a.meshTime>o.meshMessageDeliveriesActivation&&(a.meshMessageDeliveriesActive=!0)))}),i.behaviourPenalty*=this.params.behaviourPenaltyDecay,i.behaviourPenalty<r&&(i.behaviourPenalty=0),this.scoreCache.set(n,{score:null,cacheUntil:0})})}score(e){let r=this.peerStats.get(e);if(!r)return 0;let i=Date.now(),n=this.scoreCache.get(e);n===void 0&&(n={score:null,cacheUntil:0},this.scoreCache.set(e,n));let{score:s,cacheUntil:a}=n;return a>i&&s!==null?s:(n.score=pB.computeScore(e,r,this.params,this.peerIPs),n.cacheUntil=i+this.params.decayInterval,n.score)}addPenalty(e,r){let i=this.peerStats.get(e);!i||(i.behaviourPenalty+=r,this.scoreCache.set(e,{score:null,cacheUntil:0}))}addPeer(e){let r=ps.createPeerStats({connected:!0});this.peerStats.set(e,r);let i=this._getIPs(e);this._setIPs(e,i,r.ips),r.ips=i}removePeer(e){let r=this.peerStats.get(e);if(!!r){if(this.score(e)>0){this._removeIPs(e,r.ips),this.peerStats.delete(e);return}this.scoreCache.delete(e),Object.entries(r.topics).forEach(([i,n])=>{n.firstMessageDeliveries=0;let s=this.params.topics[i].meshMessageDeliveriesThreshold;if(n.inMesh&&n.meshMessageDeliveriesActive&&n.meshMessageDeliveries<s){let a=s-n.meshMessageDeliveries;n.meshFailurePenalty+=a*a}n.inMesh=!1}),r.connected=!1,r.expire=Date.now()+this.params.retainScore}}graft(e,r){let i=this.peerStats.get(e);if(!i)return;let n=ps.ensureTopicStats(r,i,this.params);!n||(n.inMesh=!0,n.graftTime=Date.now(),n.meshTime=0,n.meshMessageDeliveriesActive=!1,this.scoreCache.set(e,{score:null,cacheUntil:0}))}prune(e,r){let i=this.peerStats.get(e);if(!i)return;let n=ps.ensureTopicStats(r,i,this.params);if(!n)return;let s=this.params.topics[r].meshMessageDeliveriesThreshold;if(n.meshMessageDeliveriesActive&&n.meshMessageDeliveries<s){let a=s-n.meshMessageDeliveries;n.meshFailurePenalty+=a*a}n.inMesh=!1,this.scoreCache.set(e,{score:null,cacheUntil:0})}validateMessage(e){return Wo(this,void 0,void 0,function*(){this.deliveryRecords.ensureRecord(e)})}deliverMessage(e,r){return Wo(this,void 0,void 0,function*(){let i=e.receivedFrom;this._markFirstMessageDelivery(i,e);let n=this.deliveryRecords.ensureRecord(r),s=Date.now();if(n.status!==hr.DeliveryRecordStatus.unknown){ds("unexpected delivery: message from %s was first seen %s ago and has delivery status %d",i,s-n.firstSeen,hr.DeliveryRecordStatus[n.status]);return}n.status=hr.DeliveryRecordStatus.valid,n.validated=s,n.peers.forEach(a=>{a!==i&&this._markDuplicateMessageDelivery(a,e)})})}rejectMessage(e,r,i){return Wo(this,void 0,void 0,function*(){let n=e.receivedFrom;switch(i){case bB:case xB:this._markInvalidMessageDelivery(n,e);return}let s=this.deliveryRecords.ensureRecord(r);if(s.status!==hr.DeliveryRecordStatus.unknown){ds("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",n,Date.now()-s.firstSeen,hr.DeliveryRecordStatus[s.status]);return}switch(i){case dB.ERR_TOPIC_VALIDATOR_IGNORE:s.status=hr.DeliveryRecordStatus.ignored;return}s.status=hr.DeliveryRecordStatus.invalid,this._markInvalidMessageDelivery(n,e),s.peers.forEach(a=>{this._markInvalidMessageDelivery(a,e)})})}duplicateMessage(e,r){return Wo(this,void 0,void 0,function*(){let i=e.receivedFrom,n=this.deliveryRecords.ensureRecord(r);if(!n.peers.has(i))switch(n.status){case hr.DeliveryRecordStatus.unknown:n.peers.add(i);break;case hr.DeliveryRecordStatus.valid:n.peers.add(i),this._markDuplicateMessageDelivery(i,e,n.validated);break;case hr.DeliveryRecordStatus.invalid:this._markInvalidMessageDelivery(i,e);break}})}_markInvalidMessageDelivery(e,r){let i=this.peerStats.get(e);!i||(r.topicIDs.forEach(n=>{let s=ps.ensureTopicStats(n,i,this.params);!s||(s.invalidMessageDeliveries+=1)}),this.scoreCache.set(e,{score:null,cacheUntil:0}))}_markFirstMessageDelivery(e,r){let i=this.peerStats.get(e);!i||(r.topicIDs.forEach(n=>{let s=ps.ensureTopicStats(n,i,this.params);if(!s)return;let a=this.params.topics[n].firstMessageDeliveriesCap;s.firstMessageDeliveries+=1,s.firstMessageDeliveries>a&&(s.firstMessageDeliveries=a),!!s.inMesh&&(a=this.params.topics[n].meshMessageDeliveriesCap,s.meshMessageDeliveries+=1,s.meshMessageDeliveries>a&&(s.meshMessageDeliveries=a))}),this.scoreCache.set(e,{score:null,cacheUntil:0}))}_markDuplicateMessageDelivery(e,r,i=0){let n=this.peerStats.get(e);if(!n)return;let s=i?Date.now():0;r.topicIDs.forEach(a=>{let o=ps.ensureTopicStats(a,n,this.params);if(!o||!o.inMesh)return;let f=this.params.topics[a];if(i&&s>i+f.meshMessageDeliveriesWindow)return;let u=f.meshMessageDeliveriesCap;o.meshMessageDeliveries+=1,o.meshMessageDeliveries>u&&(o.meshMessageDeliveries=u)}),this.scoreCache.set(e,{score:null,cacheUntil:0})}_getIPs(e){return this._connectionManager.getAll(yB.default.createFromB58String(e)).map(r=>r.remoteAddr.toOptions().host)}_setIPs(e,r,i){e:for(let n of r){for(let a of i)if(n===a)continue e;let s=this.peerIPs.get(n);s||(s=new Set,this.peerIPs.set(n,s)),s.add(e)}e:for(let n of i){for(let a of r)if(n===a)continue e;let s=this.peerIPs.get(n);!s||(s.delete(e),s.size||this.peerIPs.delete(n))}this.scoreCache.set(e,{score:null,cacheUntil:0})}_removeIPs(e,r){r.forEach(i=>{let n=this.peerIPs.get(i);!n||(n.delete(e),n.size||this.peerIPs.delete(i))}),this.scoreCache.set(e,{score:null,cacheUntil:0})}_updateIPs(){this.peerStats.forEach((e,r)=>{let i=this._getIPs(r);this._setIPs(r,i,e.ips),e.ips=i,this.scoreCache.set(r,{score:null,cacheUntil:0})})}};Li.PeerScore=C2});var R2=E(si=>{"use strict";var mB=si&&si.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),zc=si&&si.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&mB(e,t,r)};Object.defineProperty(si,"__esModule",{value:!0});zc(Gc(),si);zc(m2(),si);zc(T2(),si)});var k2=E(ys=>{"use strict";var D2=ys&&ys.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(i.next(c))}catch(h){a(h)}}function f(c){try{u(i.throw(c))}catch(h){a(h)}}function u(c){c.done?s(c.value):n(c.value).then(o,f)}u((i=i.apply(t,e||[])).next())})};Object.defineProperty(ys,"__esModule",{value:!0});ys.IWantTracer=void 0;var EB=Ni(),wB=fs(),SB=Ma(),{ERR_INVALID_SIGNATURE:_B,ERR_MISSING_SIGNATURE:IB}=SB.codes,P2=class{constructor(){this.promises=new Map}addPromise(e,r){let i=Math.floor(Math.random()*r.length),n=r[i],s=wB.messageIdToString(n),a=this.promises.get(s);a||(a=new Map,this.promises.set(s,a)),a.has(e)||a.set(e,Date.now()+EB.GossipsubIWantFollowupTime)}getBrokenPromises(){let e=Date.now(),r=new Map;return this.promises.forEach((i,n)=>{i.forEach((s,a)=>{s<e&&(r.set(a,(r.get(a)||0)+1),i.delete(a))}),i.size||this.promises.delete(n)}),r}deliverMessage(e){return D2(this,void 0,void 0,function*(){this.promises.delete(e)})}rejectMessage(e,r){return D2(this,void 0,void 0,function*(){switch(r){case _B:case IB:return}this.promises.delete(e)})}clear(){this.promises.clear()}};ys.IWantTracer=P2});var O2=E(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.SimpleTimeCache=void 0;var N2=class{constructor(e){this.lastPruneTime=0,this.entries=new Map,this.validityMs=e.validityMs}put(e,r){this.entries.set(e,{value:r,validUntilMs:Date.now()+this.validityMs}),this.prune()}prune(){let e=Date.now();if(!(e-this.lastPruneTime<200)){this.lastPruneTime=e;for(let[r,i]of this.entries.entries())if(i.validUntilMs<e)this.entries.delete(r);else break}}has(e){return this.entries.has(e)}get(e){let r=this.entries.get(e);return r&&r.validUntilMs>=Date.now()?r.value:void 0}clear(){this.entries=new Map,this.lastPruneTime=0}};Yo.SimpleTimeCache=N2});var Qo=E((N5,M2)=>{"use strict";var wn=Xi(),$o=wn.Reader,L2=wn.Writer,Et=wn.util,Yt=wn.roots["libp2p-crypto-keys"]||(wn.roots["libp2p-crypto-keys"]={});Yt.KeyType=function(){var t={},e=Object.create(t);return e[t[0]="RSA"]=0,e[t[1]="Ed25519"]=1,e[t[2]="Secp256k1"]=2,e}();Yt.PublicKey=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.Type=0,t.prototype.Data=Et.newBuffer([]),t.encode=function(r,i){return i||(i=L2.create()),i.uint32(8).int32(r.Type),i.uint32(18).bytes(r.Data),i},t.decode=function(r,i){r instanceof $o||(r=$o.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Yt.PublicKey;r.pos<n;){var a=r.uint32();switch(a>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;default:r.skipType(a&7);break}}if(!s.hasOwnProperty("Type"))throw Et.ProtocolError("missing required 'Type'",{instance:s});if(!s.hasOwnProperty("Data"))throw Et.ProtocolError("missing required 'Data'",{instance:s});return s},t.fromObject=function(r){if(r instanceof Yt.PublicKey)return r;var i=new Yt.PublicKey;switch(r.Type){case"RSA":case 0:i.Type=0;break;case"Ed25519":case 1:i.Type=1;break;case"Secp256k1":case 2:i.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?Et.base64.decode(r.Data,i.Data=Et.newBuffer(Et.base64.length(r.Data)),0):r.Data.length&&(i.Data=r.Data)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(n.Type=i.enums===String?"RSA":0,i.bytes===String?n.Data="":(n.Data=[],i.bytes!==Array&&(n.Data=Et.newBuffer(n.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(n.Type=i.enums===String?Yt.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(n.Data=i.bytes===String?Et.base64.encode(r.Data,0,r.Data.length):i.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,wn.util.toJSONOptions)},t}();Yt.PrivateKey=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.Type=0,t.prototype.Data=Et.newBuffer([]),t.encode=function(r,i){return i||(i=L2.create()),i.uint32(8).int32(r.Type),i.uint32(18).bytes(r.Data),i},t.decode=function(r,i){r instanceof $o||(r=$o.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Yt.PrivateKey;r.pos<n;){var a=r.uint32();switch(a>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;default:r.skipType(a&7);break}}if(!s.hasOwnProperty("Type"))throw Et.ProtocolError("missing required 'Type'",{instance:s});if(!s.hasOwnProperty("Data"))throw Et.ProtocolError("missing required 'Data'",{instance:s});return s},t.fromObject=function(r){if(r instanceof Yt.PrivateKey)return r;var i=new Yt.PrivateKey;switch(r.Type){case"RSA":case 0:i.Type=0;break;case"Ed25519":case 1:i.Type=1;break;case"Secp256k1":case 2:i.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?Et.base64.decode(r.Data,i.Data=Et.newBuffer(Et.base64.length(r.Data)),0):r.Data.length&&(i.Data=r.Data)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(n.Type=i.enums===String?"RSA":0,i.bytes===String?n.Data="":(n.Data=[],i.bytes!==Array&&(n.Data=Et.newBuffer(n.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(n.Type=i.enums===String?Yt.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(n.Data=i.bytes===String?Et.base64.encode(r.Data,0,r.Data.length):i.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,wn.util.toJSONOptions)},t}();M2.exports=Yt});var _e=E((O5,K2)=>{K2.exports={options:{usePureJavaScript:!1}}});var q2=E((L5,U2)=>{var jc={};U2.exports=jc;var F2={};jc.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var i="";if(!(t instanceof Uint8Array))i=BB(t,e);else{var n=0,s=e.length,a=e.charAt(0),o=[0];for(n=0;n<t.length;++n){for(var f=0,u=t[n];f<o.length;++f)u+=o[f]<<8,o[f]=u%s,u=u/s|0;for(;u>0;)o.push(u%s),u=u/s|0}for(n=0;t[n]===0&&n<t.length-1;++n)i+=a;for(n=o.length-1;n>=0;--n)i+=e[o[n]]}if(r){var c=new RegExp(".{1,"+r+"}","g");i=i.match(c).join(`\r
`)}return i};jc.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=F2[e];if(!r){r=F2[e]=[];for(var i=0;i<e.length;++i)r[e.charCodeAt(i)]=i}t=t.replace(/\s/g,"");for(var n=e.length,s=e.charAt(0),a=[0],i=0;i<t.length;i++){var o=r[t.charCodeAt(i)];if(o===void 0)return;for(var f=0,u=o;f<a.length;++f)u+=a[f]*n,a[f]=u&255,u>>=8;for(;u>0;)a.push(u&255),u>>=8}for(var c=0;t[c]===s&&c<t.length-1;++c)a.push(0);return typeof Buffer!="undefined"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function BB(t,e){var r=0,i=e.length,n=e.charAt(0),s=[0];for(r=0;r<t.length();++r){for(var a=0,o=t.at(r);a<s.length;++a)o+=s[a]<<8,s[a]=o%i,o=o/i|0;for(;o>0;)s.push(o%i),o=o/i|0}var f="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)f+=n;for(r=s.length-1;r>=0;--r)f+=e[s[r]];return f}});var Qe=E((M5,z2)=>{var V2=_e(),G2=q2(),m=z2.exports=V2.util=V2.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){m.nextTick=process.nextTick,typeof setImmediate=="function"?m.setImmediate=setImmediate:m.setImmediate=m.nextTick;return}if(typeof setImmediate=="function"){m.setImmediate=function(){return setImmediate.apply(void 0,arguments)},m.nextTick=function(o){return setImmediate(o)};return}if(m.setImmediate=function(o){setTimeout(o,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let o=function(f){if(f.source===window&&f.data===t){f.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(c){c()})}};var a=o,t="forge.setImmediate",e=[];m.setImmediate=function(f){e.push(f),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",o,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),i=!0,n=document.createElement("div"),e=[];new MutationObserver(function(){var f=e.slice();e.length=0,f.forEach(function(u){u()})}).observe(n,{attributes:!0});var s=m.setImmediate;m.setImmediate=function(f){Date.now()-r>15?(r=Date.now(),s(f)):(e.push(f),e.length===1&&n.setAttribute("a",i=!i))}}m.nextTick=m.setImmediate})();m.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;m.globalScope=function(){return m.isNodejs?globalThis:typeof self=="undefined"?window:self}();m.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};m.isArrayBuffer=function(t){return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer};m.isArrayBufferView=function(t){return t&&m.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function pa(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}m.ByteBuffer=Wc;function Wc(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(m.isArrayBuffer(t)||m.isArrayBufferView(t))if(typeof Buffer!="undefined"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(i){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof Wc||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}m.ByteStringBuffer=Wc;var AB=4096;m.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>AB&&(this.data.substr(0,1),this._constructedStringLength=0)};m.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};m.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};m.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};m.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};m.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};m.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(m.encodeUtf8(t))};m.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};m.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};m.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};m.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};m.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};m.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};m.ByteStringBuffer.prototype.putInt=function(t,e){pa(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};m.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};m.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};m.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};m.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};m.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};m.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};m.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};m.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};m.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};m.ByteStringBuffer.prototype.getInt=function(t){pa(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};m.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};m.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};m.ByteStringBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};m.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};m.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};m.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};m.ByteStringBuffer.prototype.copy=function(){var t=m.createBuffer(this.data);return t.read=this.read,t};m.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};m.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};m.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};m.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};m.ByteStringBuffer.prototype.toString=function(){return m.decodeUtf8(this.bytes())};function CB(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=m.isArrayBuffer(t),i=m.isArrayBufferView(t);if(r||i){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}m.DataBuffer=CB;m.DataBuffer.prototype.length=function(){return this.write-this.read};m.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};m.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),i=new Uint8Array(this.length()+e);return i.set(r),this.data=new DataView(i.buffer),this};m.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};m.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};m.DataBuffer.prototype.putBytes=function(t,e){if(m.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),i=r.byteLength-r.byteOffset;this.accommodate(i);var n=new Uint8Array(this.data.buffer,this.write);return n.set(r),this.write+=i,this}if(m.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var n=new Uint8Array(this.data.buffer);return n.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof m.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&m.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var n=new Uint8Array(t.data.byteLength,this.write);return n.set(r),this.write+=r.byteLength,this}if(t instanceof m.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var s;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=m.binary.hex.decode(t,s,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=m.binary.base64.decode(t,s,this.write),this;if(e==="utf8"&&(t=m.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=m.binary.raw.decode(s),this;if(e==="utf16")return this.accommodate(t.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=m.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};m.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};m.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};m.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};m.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};m.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};m.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};m.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};m.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};m.DataBuffer.prototype.putInt=function(t,e){pa(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};m.DataBuffer.prototype.putSignedInt=function(t,e){return pa(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};m.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};m.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};m.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};m.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};m.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};m.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};m.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};m.DataBuffer.prototype.getInt=function(t){pa(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};m.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};m.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};m.DataBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};m.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};m.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};m.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};m.DataBuffer.prototype.copy=function(){return new m.DataBuffer(this)};m.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};m.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};m.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};m.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};m.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return m.binary.raw.encode(e);if(t==="hex")return m.binary.hex.encode(e);if(t==="base64")return m.binary.base64.encode(e);if(t==="utf8")return m.text.utf8.decode(e);if(t==="utf16")return m.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};m.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=m.encodeUtf8(t)),new m.ByteBuffer(t)};m.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};m.xorBytes=function(t,e,r){for(var i="",n="",s="",a=0,o=0;r>0;--r,++a)n=t.charCodeAt(a)^e.charCodeAt(a),o>=10&&(i+=s,s="",o=0),s+=String.fromCharCode(n),++o;return i+=s,i};m.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};m.bytesToHex=function(t){return m.createBuffer(t).toHex()};m.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var Mi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Ki=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],H2="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";m.encode64=function(t,e){for(var r="",i="",n,s,a,o=0;o<t.length;)n=t.charCodeAt(o++),s=t.charCodeAt(o++),a=t.charCodeAt(o++),r+=Mi.charAt(n>>2),r+=Mi.charAt((n&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Mi.charAt((s&15)<<2|a>>6),r+=isNaN(a)?"=":Mi.charAt(a&63)),e&&r.length>e&&(i+=r.substr(0,e)+`\r
`,r=r.substr(e));return i+=r,i};m.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,i,n,s,a=0;a<t.length;)r=Ki[t.charCodeAt(a++)-43],i=Ki[t.charCodeAt(a++)-43],n=Ki[t.charCodeAt(a++)-43],s=Ki[t.charCodeAt(a++)-43],e+=String.fromCharCode(r<<2|i>>4),n!==64&&(e+=String.fromCharCode((i&15)<<4|n>>2),s!==64&&(e+=String.fromCharCode((n&3)<<6|s)));return e};m.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};m.decodeUtf8=function(t){return decodeURIComponent(escape(t))};m.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:G2.encode,decode:G2.decode}};m.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};m.binary.raw.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(t.length)),r=r||0;for(var n=r,s=0;s<t.length;++s)i[n++]=t.charCodeAt(s);return e?n-r:i};m.binary.hex.encode=m.bytesToHex;m.binary.hex.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var n=0,s=r;for(t.length&1&&(n=1,i[s++]=parseInt(t[0],16));n<t.length;n+=2)i[s++]=parseInt(t.substr(n,2),16);return e?s-r:i};m.binary.base64.encode=function(t,e){for(var r="",i="",n,s,a,o=0;o<t.byteLength;)n=t[o++],s=t[o++],a=t[o++],r+=Mi.charAt(n>>2),r+=Mi.charAt((n&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Mi.charAt((s&15)<<2|a>>6),r+=isNaN(a)?"=":Mi.charAt(a&63)),e&&r.length>e&&(i+=r.substr(0,e)+`\r
`,r=r.substr(e));return i+=r,i};m.binary.base64.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var n,s,a,o,f=0,u=r;f<t.length;)n=Ki[t.charCodeAt(f++)-43],s=Ki[t.charCodeAt(f++)-43],a=Ki[t.charCodeAt(f++)-43],o=Ki[t.charCodeAt(f++)-43],i[u++]=n<<2|s>>4,a!==64&&(i[u++]=(s&15)<<4|a>>2,o!==64&&(i[u++]=(a&3)<<6|o));return e?u-r:i.subarray(0,u)};m.binary.base58.encode=function(t,e){return m.binary.baseN.encode(t,H2,e)};m.binary.base58.decode=function(t,e){return m.binary.baseN.decode(t,H2,e)};m.text={utf8:{},utf16:{}};m.text.utf8.encode=function(t,e,r){t=m.encodeUtf8(t);var i=e;i||(i=new Uint8Array(t.length)),r=r||0;for(var n=r,s=0;s<t.length;++s)i[n++]=t.charCodeAt(s);return e?n-r:i};m.text.utf8.decode=function(t){return m.decodeUtf8(String.fromCharCode.apply(null,t))};m.text.utf16.encode=function(t,e,r){var i=e;i||(i=new Uint8Array(t.length*2));var n=new Uint16Array(i.buffer);r=r||0;for(var s=r,a=r,o=0;o<t.length;++o)n[a++]=t.charCodeAt(o),s+=2;return e?s-r:i};m.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};m.deflate=function(t,e,r){if(e=m.decode64(t.deflate(m.encode64(e)).rval),r){var i=2,n=e.charCodeAt(1);n&32&&(i=6),e=e.substring(i,e.length-4)}return e};m.inflate=function(t,e,r){var i=t.inflate(m.encode64(e)).rval;return i===null?null:m.decode64(i)};var Yc=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var i;if(r===null?i=t.removeItem(e):(r=m.encode64(JSON.stringify(r)),i=t.setItem(e,r)),typeof i!="undefined"&&i.rval!==!0){var n=new Error(i.error.message);throw n.id=i.error.id,n.name=i.error.name,n}},$c=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(m.decode64(r))),r},TB=function(t,e,r,i){var n=$c(t,e);n===null&&(n={}),n[r]=i,Yc(t,e,n)},RB=function(t,e,r){var i=$c(t,e);return i!==null&&(i=r in i?i[r]:null),i},DB=function(t,e,r){var i=$c(t,e);if(i!==null&&r in i){delete i[r];var n=!0;for(var s in i){n=!1;break}n&&(i=null),Yc(t,e,i)}},PB=function(t,e){Yc(t,e,null)},Zo=function(t,e,r){var i=null;typeof r=="undefined"&&(r=["web","flash"]);var n,s=!1,a=null;for(var o in r){n=r[o];try{if(n==="flash"||n==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");i=t.apply(this,e),s=n==="flash"}(n==="web"||n==="both")&&(e[0]=localStorage,i=t.apply(this,e),s=!0)}catch(f){a=f}if(s)break}if(!s)throw a;return i};m.setItem=function(t,e,r,i,n){Zo(TB,arguments,n)};m.getItem=function(t,e,r,i){return Zo(RB,arguments,i)};m.removeItem=function(t,e,r,i){Zo(DB,arguments,i)};m.clearItems=function(t,e,r){Zo(PB,arguments,r)};m.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};m.format=function(t){for(var e=/%./g,r,i,n=0,s=[],a=0;r=e.exec(t);){i=t.substring(a,e.lastIndex-2),i.length>0&&s.push(i),a=e.lastIndex;var o=r[0][1];switch(o){case"s":case"o":n<arguments.length?s.push(arguments[n+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+o+"?>")}}return s.push(t.substring(a)),s.join("")};m.formatNumber=function(t,e,r,i){var n=t,s=isNaN(e=Math.abs(e))?2:e,a=r===void 0?",":r,o=i===void 0?".":i,f=n<0?"-":"",u=parseInt(n=Math.abs(+n||0).toFixed(s),10)+"",c=u.length>3?u.length%3:0;return f+(c?u.substr(0,c)+o:"")+u.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+o)+(s?a+Math.abs(n-u).toFixed(s).slice(2):"")};m.formatSize=function(t){return t>=1073741824?t=m.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=m.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=m.formatNumber(t/1024,0)+" KiB":t=m.formatNumber(t,0)+" bytes",t};m.bytesFromIP=function(t){return t.indexOf(".")!==-1?m.bytesFromIPv4(t):t.indexOf(":")!==-1?m.bytesFromIPv6(t):null};m.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=m.createBuffer(),r=0;r<t.length;++r){var i=parseInt(t[r],10);if(isNaN(i))return null;e.putByte(i)}return e.getBytes()};m.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(a){return a.length===0&&++e,!0});for(var r=(8-t.length+e)*2,i=m.createBuffer(),n=0;n<8;++n){if(!t[n]||t[n].length===0){i.fillWithByte(0,r),r=0;continue}var s=m.hexToBytes(t[n]);s.length<2&&i.putByte(0),i.putBytes(s)}return i.getBytes()};m.bytesToIP=function(t){return t.length===4?m.bytesToIPv4(t):t.length===16?m.bytesToIPv6(t):null};m.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};m.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],i=0,n=0;n<t.length;n+=2){for(var s=m.bytesToHex(t[n]+t[n+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var a=r[r.length-1],o=e.length;!a||o!==a.end+1?r.push({start:o,end:o}):(a.end=o,a.end-a.start>r[i].end-r[i].start&&(i=r.length-1))}e.push(s)}if(r.length>0){var f=r[i];f.end-f.start>0&&(e.splice(f.start,f.end-f.start+1,""),f.start===0&&e.unshift(""),f.end===7&&e.push(""))}return e.join(":")};m.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in m&&!t.update)return e(null,m.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return m.cores=navigator.hardwareConcurrency,e(null,m.cores);if(typeof Worker=="undefined")return m.cores=1,e(null,m.cores);if(typeof Blob=="undefined")return m.cores=2,e(null,m.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){for(var o=Date.now(),f=o+4;Date.now()<f;);self.postMessage({st:o,et:f})})}.toString(),")()"],{type:"application/javascript"}));i([],5,16);function i(a,o,f){if(o===0){var u=Math.floor(a.reduce(function(c,h){return c+h},0)/a.length);return m.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,m.cores)}n(f,function(c,h){a.push(s(f,h)),i(a,o-1,f)})}function n(a,o){for(var f=[],u=[],c=0;c<a;++c){var h=new Worker(r);h.addEventListener("message",function(l){if(u.push(l.data),u.length===a){for(var d=0;d<a;++d)f[d].terminate();o(null,u)}}),f.push(h)}for(var c=0;c<a;++c)f[c].postMessage(c)}function s(a,o){for(var f=[],u=0;u<a;++u)for(var c=o[u],h=f[u]=[],l=0;l<a;++l)if(u!==l){var d=o[l];(c.st>d.st&&c.st<d.et||d.st>c.st&&d.st<c.et)&&h.push(l)}return f.reduce(function(p,y){return Math.max(p,y.length)},0)}}});var Xo=E((K5,j2)=>{var da=_e();da.pki=da.pki||{};var Qc=j2.exports=da.pki.oids=da.oids=da.oids||{};function M(t,e){Qc[t]=e,Qc[e]=t}function xe(t,e){Qc[t]=e}M("1.2.840.113549.1.1.1","rsaEncryption");M("1.2.840.113549.1.1.4","md5WithRSAEncryption");M("1.2.840.113549.1.1.5","sha1WithRSAEncryption");M("1.2.840.113549.1.1.7","RSAES-OAEP");M("1.2.840.113549.1.1.8","mgf1");M("1.2.840.113549.1.1.9","pSpecified");M("1.2.840.113549.1.1.10","RSASSA-PSS");M("1.2.840.113549.1.1.11","sha256WithRSAEncryption");M("1.2.840.113549.1.1.12","sha384WithRSAEncryption");M("1.2.840.113549.1.1.13","sha512WithRSAEncryption");M("1.3.101.112","EdDSA25519");M("1.2.840.10040.4.3","dsa-with-sha1");M("1.3.14.3.2.7","desCBC");M("1.3.14.3.2.26","sha1");M("1.3.14.3.2.29","sha1WithRSASignature");M("2.16.840.1.101.3.4.2.1","sha256");M("2.16.840.1.101.3.4.2.2","sha384");M("2.16.840.1.101.3.4.2.3","sha512");M("1.2.840.113549.2.5","md5");M("1.2.840.113549.1.7.1","data");M("1.2.840.113549.1.7.2","signedData");M("1.2.840.113549.1.7.3","envelopedData");M("1.2.840.113549.1.7.4","signedAndEnvelopedData");M("1.2.840.113549.1.7.5","digestedData");M("1.2.840.113549.1.7.6","encryptedData");M("1.2.840.113549.1.9.1","emailAddress");M("1.2.840.113549.1.9.2","unstructuredName");M("1.2.840.113549.1.9.3","contentType");M("1.2.840.113549.1.9.4","messageDigest");M("1.2.840.113549.1.9.5","signingTime");M("1.2.840.113549.1.9.6","counterSignature");M("1.2.840.113549.1.9.7","challengePassword");M("1.2.840.113549.1.9.8","unstructuredAddress");M("1.2.840.113549.1.9.14","extensionRequest");M("1.2.840.113549.1.9.20","friendlyName");M("1.2.840.113549.1.9.21","localKeyId");M("1.2.840.113549.1.9.22.1","x509Certificate");M("1.2.840.113549.1.12.10.1.1","keyBag");M("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");M("1.2.840.113549.1.12.10.1.3","certBag");M("1.2.840.113549.1.12.10.1.4","crlBag");M("1.2.840.113549.1.12.10.1.5","secretBag");M("1.2.840.113549.1.12.10.1.6","safeContentsBag");M("1.2.840.113549.1.5.13","pkcs5PBES2");M("1.2.840.113549.1.5.12","pkcs5PBKDF2");M("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");M("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");M("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");M("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");M("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");M("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");M("1.2.840.113549.2.7","hmacWithSHA1");M("1.2.840.113549.2.8","hmacWithSHA224");M("1.2.840.113549.2.9","hmacWithSHA256");M("1.2.840.113549.2.10","hmacWithSHA384");M("1.2.840.113549.2.11","hmacWithSHA512");M("1.2.840.113549.3.7","des-EDE3-CBC");M("2.16.840.1.101.3.4.1.2","aes128-CBC");M("2.16.840.1.101.3.4.1.22","aes192-CBC");M("2.16.840.1.101.3.4.1.42","aes256-CBC");M("2.5.4.3","commonName");M("2.5.4.4","surname");M("2.5.4.5","serialNumber");M("2.5.4.6","countryName");M("2.5.4.7","localityName");M("2.5.4.8","stateOrProvinceName");M("2.5.4.9","streetAddress");M("2.5.4.10","organizationName");M("2.5.4.11","organizationalUnitName");M("2.5.4.12","title");M("2.5.4.13","description");M("2.5.4.15","businessCategory");M("2.5.4.17","postalCode");M("2.5.4.42","givenName");M("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");M("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");M("2.16.840.1.113730.1.1","nsCertType");M("2.16.840.1.113730.1.13","nsComment");xe("2.5.29.1","authorityKeyIdentifier");xe("2.5.29.2","keyAttributes");xe("2.5.29.3","certificatePolicies");xe("2.5.29.4","keyUsageRestriction");xe("2.5.29.5","policyMapping");xe("2.5.29.6","subtreesConstraint");xe("2.5.29.7","subjectAltName");xe("2.5.29.8","issuerAltName");xe("2.5.29.9","subjectDirectoryAttributes");xe("2.5.29.10","basicConstraints");xe("2.5.29.11","nameConstraints");xe("2.5.29.12","policyConstraints");xe("2.5.29.13","basicConstraints");M("2.5.29.14","subjectKeyIdentifier");M("2.5.29.15","keyUsage");xe("2.5.29.16","privateKeyUsagePeriod");M("2.5.29.17","subjectAltName");M("2.5.29.18","issuerAltName");M("2.5.29.19","basicConstraints");xe("2.5.29.20","cRLNumber");xe("2.5.29.21","cRLReason");xe("2.5.29.22","expirationDate");xe("2.5.29.23","instructionCode");xe("2.5.29.24","invalidityDate");xe("2.5.29.25","cRLDistributionPoints");xe("2.5.29.26","issuingDistributionPoint");xe("2.5.29.27","deltaCRLIndicator");xe("2.5.29.28","issuingDistributionPoint");xe("2.5.29.29","certificateIssuer");xe("2.5.29.30","nameConstraints");M("2.5.29.31","cRLDistributionPoints");M("2.5.29.32","certificatePolicies");xe("2.5.29.33","policyMappings");xe("2.5.29.34","policyConstraints");M("2.5.29.35","authorityKeyIdentifier");xe("2.5.29.36","policyConstraints");M("2.5.29.37","extKeyUsage");xe("2.5.29.46","freshestCRL");xe("2.5.29.54","inhibitAnyPolicy");M("1.3.6.1.4.1.11129.2.4.2","timestampList");M("1.3.6.1.5.5.7.1.1","authorityInfoAccess");M("1.3.6.1.5.5.7.3.1","serverAuth");M("1.3.6.1.5.5.7.3.2","clientAuth");M("1.3.6.1.5.5.7.3.3","codeSigning");M("1.3.6.1.5.5.7.3.4","emailProtection");M("1.3.6.1.5.5.7.3.8","timeStamping")});var ga=E((F5,Y2)=>{var Fe=_e();Qe();Xo();var U=Y2.exports=Fe.asn1=Fe.asn1||{};U.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};U.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};U.create=function(t,e,r,i,n){if(Fe.util.isArray(i)){for(var s=[],a=0;a<i.length;++a)i[a]!==void 0&&s.push(i[a]);i=s}var o={tagClass:t,type:e,constructed:r,composed:r||Fe.util.isArray(i),value:i};return n&&"bitStringContents"in n&&(o.bitStringContents=n.bitStringContents,o.original=U.copy(o)),o};U.copy=function(t,e){var r;if(Fe.util.isArray(t)){r=[];for(var i=0;i<t.length;++i)r.push(U.copy(t[i],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:U.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};U.equals=function(t,e,r){if(Fe.util.isArray(t)){if(!Fe.util.isArray(e)||t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(!U.equals(t[i],e[i]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var n=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&U.equals(t.value,e.value);return r&&r.includeBitStringContents&&(n=n&&t.bitStringContents===e.bitStringContents),n};U.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,i=e&128;return i?r=t.getInt((e&127)<<3):r=e,r}};function ya(t,e,r){if(r>e){var i=new Error("Too few bytes to parse DER.");throw i.available=t.length(),i.remaining=e,i.requested=r,i}}var kB=function(t,e){var r=t.getByte();if(e--,r!==128){var i,n=r&128;if(!n)i=r;else{var s=r&127;ya(t,e,s),i=t.getInt(s<<3)}if(i<0)throw new Error("Negative length: "+i);return i}};U.fromDer=function(t,e){return e===void 0&&(e={strict:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=Fe.util.createBuffer(t)),Jo(t,t.length(),0,e)};function Jo(t,e,r,i){var n;ya(t,e,2);var s=t.getByte();e--;var a=s&192,o=s&31;n=t.length();var f=kB(t,e);if(e-=n-t.length(),f!==void 0&&f>e){if(i.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=f,u}f=e}var c,h,l=(s&32)==32;if(l)if(c=[],f===void 0)for(;;){if(ya(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}n=t.length(),c.push(Jo(t,e,r+1,i)),e-=n-t.length()}else for(;f>0;)n=t.length(),c.push(Jo(t,f,r+1,i)),e-=n-t.length(),f-=n-t.length();if(c===void 0&&a===U.Class.UNIVERSAL&&o===U.Type.BITSTRING&&(h=t.bytes(f)),c===void 0&&i.decodeBitStrings&&a===U.Class.UNIVERSAL&&o===U.Type.BITSTRING&&f>1){var d=t.read,p=e,y=0;if(o===U.Type.BITSTRING&&(ya(t,e,1),y=t.getByte(),e--),y===0)try{n=t.length();var g={verbose:i.verbose,strict:!0,decodeBitStrings:!0},v=Jo(t,e,r+1,g),x=n-t.length();e-=x,o==U.Type.BITSTRING&&x++;var w=v.tagClass;x===f&&(w===U.Class.UNIVERSAL||w===U.Class.CONTEXT_SPECIFIC)&&(c=[v])}catch(B){}c===void 0&&(t.read=d,e=p)}if(c===void 0){if(f===void 0){if(i.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");f=e}if(o===U.Type.BMPSTRING)for(c="";f>0;f-=2)ya(t,e,2),c+=String.fromCharCode(t.getInt16()),e-=2;else c=t.getBytes(f)}var P=h===void 0?null:{bitStringContents:h};return U.create(a,o,l,c,P)}U.toDer=function(t){var e=Fe.util.createBuffer(),r=t.tagClass|t.type,i=Fe.util.createBuffer(),n=!1;if("bitStringContents"in t&&(n=!0,t.original&&(n=U.equals(t,t.original))),n)i.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:i.putByte(0);for(var s=0;s<t.value.length;++s)t.value[s]!==void 0&&i.putBuffer(U.toDer(t.value[s]))}else if(t.type===U.Type.BMPSTRING)for(var s=0;s<t.value.length;++s)i.putInt16(t.value.charCodeAt(s));else t.type===U.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)==0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)==128)?i.putBytes(t.value.substr(1)):i.putBytes(t.value);if(e.putByte(r),i.length()<=127)e.putByte(i.length()&127);else{var a=i.length(),o="";do o+=String.fromCharCode(a&255),a=a>>>8;while(a>0);e.putByte(o.length|128);for(var s=o.length-1;s>=0;--s)e.putByte(o.charCodeAt(s))}return e.putBuffer(i),e};U.oidToDer=function(t){var e=t.split("."),r=Fe.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var i,n,s,a,o=2;o<e.length;++o){i=!0,n=[],s=parseInt(e[o],10);do a=s&127,s=s>>>7,i||(a|=128),n.push(a),i=!1;while(s>0);for(var f=n.length-1;f>=0;--f)r.putByte(n[f])}return r};U.derToOid=function(t){var e;typeof t=="string"&&(t=Fe.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var i=0;t.length()>0;)r=t.getByte(),i=i<<7,r&128?i+=r&127:(e+="."+(i+r),i=0);return e};U.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var i=parseInt(t.substr(2,2),10)-1,n=parseInt(t.substr(4,2),10),s=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),o=0;if(t.length>11){var f=t.charAt(10),u=10;f!=="+"&&f!=="-"&&(o=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,i,n),e.setUTCHours(s,a,o,0),u&&(f=t.charAt(u),f==="+"||f==="-")){var c=parseInt(t.substr(u+1,2),10),h=parseInt(t.substr(u+4,2),10),l=c*60+h;l*=6e4,f==="+"?e.setTime(+e-l):e.setTime(+e+l)}return e};U.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),i=parseInt(t.substr(4,2),10)-1,n=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),o=parseInt(t.substr(12,2),10),f=0,u=0,c=!1;t.charAt(t.length-1)==="Z"&&(c=!0);var h=t.length-5,l=t.charAt(h);if(l==="+"||l==="-"){var d=parseInt(t.substr(h+1,2),10),p=parseInt(t.substr(h+4,2),10);u=d*60+p,u*=6e4,l==="+"&&(u*=-1),c=!0}return t.charAt(14)==="."&&(f=parseFloat(t.substr(14),10)*1e3),c?(e.setUTCFullYear(r,i,n),e.setUTCHours(s,a,o,f),e.setTime(+e+u)):(e.setFullYear(r,i,n),e.setHours(s,a,o,f)),e};U.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var i=0;i<r.length;++i)r[i].length<2&&(e+="0"),e+=r[i];return e+="Z",e};U.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var i=0;i<r.length;++i)r[i].length<2&&(e+="0"),e+=r[i];return e+="Z",e};U.integerToDer=function(t){var e=Fe.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};U.derToInteger=function(t){typeof t=="string"&&(t=Fe.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};U.validate=function(t,e,r,i){var n=!1;if((t.tagClass===e.tagClass||typeof e.tagClass=="undefined")&&(t.type===e.type||typeof e.type=="undefined"))if(t.constructed===e.constructed||typeof e.constructed=="undefined"){if(n=!0,e.value&&Fe.util.isArray(e.value))for(var s=0,a=0;n&&a<e.value.length;++a)n=e.value[a].optional||!1,t.value[s]&&(n=U.validate(t.value[s],e.value[a],r,i),n?++s:e.value[a].optional&&(n=!0)),!n&&i&&i.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(n&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var o;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var f=t.bitStringContents.charCodeAt(0);if(f!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else i&&i.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else i&&(t.tagClass!==e.tagClass&&i.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&i.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return n};var W2=/[^\\u0000-\\u00ff]/;U.prettyPrint=function(t,e,r){var i="";e=e||0,r=r||2,e>0&&(i+=`
`);for(var n="",s=0;s<e*r;++s)n+=" ";switch(i+=n+"Tag: ",t.tagClass){case U.Class.UNIVERSAL:i+="Universal:";break;case U.Class.APPLICATION:i+="Application:";break;case U.Class.CONTEXT_SPECIFIC:i+="Context-Specific:";break;case U.Class.PRIVATE:i+="Private:";break}if(t.tagClass===U.Class.UNIVERSAL)switch(i+=t.type,t.type){case U.Type.NONE:i+=" (None)";break;case U.Type.BOOLEAN:i+=" (Boolean)";break;case U.Type.INTEGER:i+=" (Integer)";break;case U.Type.BITSTRING:i+=" (Bit string)";break;case U.Type.OCTETSTRING:i+=" (Octet string)";break;case U.Type.NULL:i+=" (Null)";break;case U.Type.OID:i+=" (Object Identifier)";break;case U.Type.ODESC:i+=" (Object Descriptor)";break;case U.Type.EXTERNAL:i+=" (External or Instance of)";break;case U.Type.REAL:i+=" (Real)";break;case U.Type.ENUMERATED:i+=" (Enumerated)";break;case U.Type.EMBEDDED:i+=" (Embedded PDV)";break;case U.Type.UTF8:i+=" (UTF8)";break;case U.Type.ROID:i+=" (Relative Object Identifier)";break;case U.Type.SEQUENCE:i+=" (Sequence)";break;case U.Type.SET:i+=" (Set)";break;case U.Type.PRINTABLESTRING:i+=" (Printable String)";break;case U.Type.IA5String:i+=" (IA5String (ASCII))";break;case U.Type.UTCTIME:i+=" (UTC time)";break;case U.Type.GENERALIZEDTIME:i+=" (Generalized time)";break;case U.Type.BMPSTRING:i+=" (BMP String)";break}else i+=t.type;if(i+=`
`,i+=n+"Constructed: "+t.constructed+`
`,t.composed){for(var a=0,o="",s=0;s<t.value.length;++s)t.value[s]!==void 0&&(a+=1,o+=U.prettyPrint(t.value[s],e+1,r),s+1<t.value.length&&(o+=","));i+=n+"Sub values: "+a+o}else{if(i+=n+"Value: ",t.type===U.Type.OID){var f=U.derToOid(t.value);i+=f,Fe.pki&&Fe.pki.oids&&f in Fe.pki.oids&&(i+=" ("+Fe.pki.oids[f]+") ")}if(t.type===U.Type.INTEGER)try{i+=U.derToInteger(t.value)}catch(c){i+="0x"+Fe.util.bytesToHex(t.value)}else if(t.type===U.Type.BITSTRING){if(t.value.length>1?i+="0x"+Fe.util.bytesToHex(t.value.slice(1)):i+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?i+=" (1 unused bit shown)":u>1&&(i+=" ("+u+" unused bits shown)")}}else t.type===U.Type.OCTETSTRING?(W2.test(t.value)||(i+="("+t.value+") "),i+="0x"+Fe.util.bytesToHex(t.value)):t.type===U.Type.UTF8?i+=Fe.util.decodeUtf8(t.value):t.type===U.Type.PRINTABLESTRING||t.type===U.Type.IA5String?i+=t.value:W2.test(t.value)?i+="0x"+Fe.util.bytesToHex(t.value):t.value.length===0?i+="[null]":i+=t.value}return i}});var Xc=E((U5,$2)=>{var ct=_e();Qe();$2.exports=ct.cipher=ct.cipher||{};ct.cipher.algorithms=ct.cipher.algorithms||{};ct.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=ct.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new ct.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};ct.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=ct.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new ct.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};ct.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),ct.cipher.algorithms[t]=e};ct.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in ct.cipher.algorithms?ct.cipher.algorithms[t]:null};var Zc=ct.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};Zc.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=ct.util.createBuffer(),this.output=t.output||ct.util.createBuffer(),this.mode.start(e)};Zc.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};Zc.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var ef=E((q5,Q2)=>{var ft=_e();Qe();ft.cipher=ft.cipher||{};var re=Q2.exports=ft.cipher.modes=ft.cipher.modes||{};re.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};re.ecb.prototype.start=function(t){};re.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i])};re.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i])};re.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};re.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),i=t.at(r-1);return i>this.blockSize<<2?!1:(t.truncate(i),!0)};re.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};re.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=e0(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};re.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=this._prev[i]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]);this._prev=this._outBlock};re.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._prev[i]^this._outBlock[i]);this._prev=this._inBlock.slice(0)};re.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};re.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),i=t.at(r-1);return i>this.blockSize<<2?!1:(t.truncate(i),!0)};re.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=ft.util.createBuffer(),this._partialBytes=0};re.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=e0(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};re.cfb.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32()^this._outBlock[n],e.putInt32(this._inBlock[n]);return}var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialBlock[n]=t.getInt32()^this._outBlock[n],this._partialOutput.putInt32(this._partialBlock[n]);if(s>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};re.cfb.prototype.decrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32(),e.putInt32(this._inBlock[n]^this._outBlock[n]);return}var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialBlock[n]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[n]^this._outBlock[n]);if(s>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};re.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=ft.util.createBuffer(),this._partialBytes=0};re.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=e0(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};re.ofb.prototype.encrypt=function(t,e,r){var i=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)e.putInt32(t.getInt32()^this._outBlock[n]),this._inBlock[n]=this._outBlock[n];return}var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._outBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};re.ofb.prototype.decrypt=re.ofb.prototype.encrypt;re.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=ft.util.createBuffer(),this._partialBytes=0};re.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=e0(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};re.ctr.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize)for(var n=0;n<this._ints;++n)e.putInt32(t.getInt32()^this._outBlock[n]);else{var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}t0(this._inBlock)};re.ctr.prototype.decrypt=re.ctr.prototype.encrypt;re.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=ft.util.createBuffer(),this._partialBytes=0,this._R=3774873600};re.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=ft.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=ft.util.createBuffer(t.additionalData):r=ft.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=ft.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var i=e.length();if(i===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Jc(i*8)))}this._inBlock=this._j0.slice(0),t0(this._inBlock),this._partialBytes=0,r=ft.util.createBuffer(r),this._aDataLength=Jc(r.length()*8);var n=r.length()%this.blockSize;for(n&&r.fillWithByte(0,this.blockSize-n),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};re.gcm.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]^=t.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s<=0||r){if(r){var a=i%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var n=0;n<this._ints;++n)this._outBlock[n]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),t0(this._inBlock)};re.gcm.prototype.decrypt=function(t,e,r){var i=t.length();if(i<this.blockSize&&!(r&&i>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),t0(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]^this._hashBlock[n]);i<this.blockSize?this._cipherLength+=i%this.blockSize:this._cipherLength+=this.blockSize};re.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=ft.util.createBuffer();var i=this._aDataLength.concat(Jc(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,i);var n=[];this.cipher.encrypt(this._j0,n);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^n[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};re.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],i=e.slice(0),n=0;n<128;++n){var s=t[n/32|0]&1<<31-n%32;s&&(r[0]^=i[0],r[1]^=i[1],r[2]^=i[2],r[3]^=i[3]),this.pow(i,i)}return r};re.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,i=3;i>0;--i)e[i]=t[i]>>>1|(t[i-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};re.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var i=r/8|0,n=t[i]>>>(7-r%8)*4&15,s=this._m[r][n];e[0]^=s[0],e[1]^=s[1],e[2]^=s[2],e[3]^=s[3]}return e};re.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};re.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,i=4*r,n=16*r,s=new Array(n),a=0;a<n;++a){var o=[0,0,0,0],f=a/i|0,u=(i-1-a%i)*e;o[f]=1<<e-1<<u,s[a]=this.generateSubHashTable(this.multiply(o,t),e)}return s};re.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,i=r>>>1,n=new Array(r);n[i]=t.slice(0);for(var s=i>>>1;s>0;)this.pow(n[2*s],n[s]=[]),s>>=1;for(s=2;s<i;){for(var a=1;a<s;++a){var o=n[s],f=n[a];n[s+a]=[o[0]^f[0],o[1]^f[1],o[2]^f[2],o[3]^f[3]]}s*=2}for(n[0]=[0,0,0,0],s=i+1;s<r;++s){var u=n[s^i];n[s]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return n};function e0(t,e){if(typeof t=="string"&&(t=ft.util.createBuffer(t)),ft.util.isArray(t)&&t.length>4){var r=t;t=ft.util.createBuffer();for(var i=0;i<r.length;++i)t.putByte(r[i])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!ft.util.isArray(t)){for(var n=[],s=e/4,i=0;i<s;++i)n.push(t.getInt32());t=n}return t}function t0(t){t[t.length-1]=t[t.length-1]+1&4294967295}function Jc(t){return[t/4294967296|0,t&4294967295]}});var sf=E((V5,ev)=>{var Pe=_e();Xc();ef();Qe();ev.exports=Pe.aes=Pe.aes||{};Pe.aes.startEncrypting=function(t,e,r,i){var n=r0({key:t,output:r,decrypt:!1,mode:i});return n.start(e),n};Pe.aes.createEncryptionCipher=function(t,e){return r0({key:t,output:null,decrypt:!1,mode:e})};Pe.aes.startDecrypting=function(t,e,r,i){var n=r0({key:t,output:r,decrypt:!0,mode:i});return n.start(e),n};Pe.aes.createDecryptionCipher=function(t,e){return r0({key:t,output:null,decrypt:!0,mode:e})};Pe.aes.Algorithm=function(t,e){tf||X2();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(i,n){return nf(r._w,i,n,!1)},decrypt:function(i,n){return nf(r._w,i,n,!0)}}}),r._init=!1};Pe.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=Pe.util.createBuffer(e);else if(Pe.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=Pe.util.createBuffer();for(var i=0;i<r.length;++i)e.putByte(r[i])}if(!Pe.util.isArray(e)){r=e,e=[];var n=r.length();if(n===16||n===24||n===32){n=n>>>2;for(var i=0;i<n;++i)e.push(r.getInt32())}}if(!Pe.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=J2(e,t.decrypt&&!a),this._init=!0}};Pe.aes._expandKey=function(t,e){return tf||X2(),J2(t,e)};Pe.aes._updateBlock=nf;gs("AES-ECB",Pe.cipher.modes.ecb);gs("AES-CBC",Pe.cipher.modes.cbc);gs("AES-CFB",Pe.cipher.modes.cfb);gs("AES-OFB",Pe.cipher.modes.ofb);gs("AES-CTR",Pe.cipher.modes.ctr);gs("AES-GCM",Pe.cipher.modes.gcm);function gs(t,e){var r=function(){return new Pe.aes.Algorithm(t,e)};Pe.cipher.registerAlgorithm(t,r)}var tf=!1,vs=4,Bt,rf,Z2,Sn,lr;function X2(){tf=!0,Z2=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;Bt=new Array(256),rf=new Array(256),Sn=new Array(4),lr=new Array(4);for(var e=0;e<4;++e)Sn[e]=new Array(256),lr[e]=new Array(256);for(var r=0,i=0,n,s,a,o,f,u,c,e=0;e<256;++e){o=i^i<<1^i<<2^i<<3^i<<4,o=o>>8^o&255^99,Bt[r]=o,rf[o]=r,f=t[o],n=t[r],s=t[n],a=t[s],u=f<<24^o<<16^o<<8^(o^f),c=(n^s^a)<<24^(r^a)<<16^(r^s^a)<<8^(r^n^a);for(var h=0;h<4;++h)Sn[h][r]=u,lr[h][o]=c,u=u<<24|u>>>8,c=c<<24|c>>>8;r===0?r=i=1:(r=n^t[t[t[n^a]]],i^=t[t[i]])}}function J2(t,e){for(var r=t.slice(0),i,n=1,s=r.length,a=s+6+1,o=vs*a,f=s;f<o;++f)i=r[f-1],f%s==0?(i=Bt[i>>>16&255]<<24^Bt[i>>>8&255]<<16^Bt[i&255]<<8^Bt[i>>>24]^Z2[n]<<24,n++):s>6&&f%s==4&&(i=Bt[i>>>24]<<24^Bt[i>>>16&255]<<16^Bt[i>>>8&255]<<8^Bt[i&255]),r[f]=r[f-s]^i;if(e){var u,c=lr[0],h=lr[1],l=lr[2],d=lr[3],p=r.slice(0);o=r.length;for(var f=0,y=o-vs;f<o;f+=vs,y-=vs)if(f===0||f===o-vs)p[f]=r[y],p[f+1]=r[y+3],p[f+2]=r[y+2],p[f+3]=r[y+1];else for(var g=0;g<vs;++g)u=r[y+g],p[f+(3&-g)]=c[Bt[u>>>24]]^h[Bt[u>>>16&255]]^l[Bt[u>>>8&255]]^d[Bt[u&255]];r=p}return r}function nf(t,e,r,i){var n=t.length/4-1,s,a,o,f,u;i?(s=lr[0],a=lr[1],o=lr[2],f=lr[3],u=rf):(s=Sn[0],a=Sn[1],o=Sn[2],f=Sn[3],u=Bt);var c,h,l,d,p,y,g;c=e[0]^t[0],h=e[i?3:1]^t[1],l=e[2]^t[2],d=e[i?1:3]^t[3];for(var v=3,x=1;x<n;++x)p=s[c>>>24]^a[h>>>16&255]^o[l>>>8&255]^f[d&255]^t[++v],y=s[h>>>24]^a[l>>>16&255]^o[d>>>8&255]^f[c&255]^t[++v],g=s[l>>>24]^a[d>>>16&255]^o[c>>>8&255]^f[h&255]^t[++v],d=s[d>>>24]^a[c>>>16&255]^o[h>>>8&255]^f[l&255]^t[++v],c=p,h=y,l=g;r[0]=u[c>>>24]<<24^u[h>>>16&255]<<16^u[l>>>8&255]<<8^u[d&255]^t[++v],r[i?3:1]=u[h>>>24]<<24^u[l>>>16&255]<<16^u[d>>>8&255]<<8^u[c&255]^t[++v],r[2]=u[l>>>24]<<24^u[d>>>16&255]<<16^u[c>>>8&255]<<8^u[h&255]^t[++v],r[i?1:3]=u[d>>>24]<<24^u[c>>>16&255]<<16^u[h>>>8&255]<<8^u[l&255]^t[++v]}function r0(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,i;t.decrypt?i=Pe.cipher.createDecipher(r,t.key):i=Pe.cipher.createCipher(r,t.key);var n=i.start;return i.start=function(s,a){var o=null;a instanceof Pe.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=s,n.call(i,a)},i}});var iv=E((G5,rv)=>{var Ue=_e();Xc();ef();Qe();rv.exports=Ue.des=Ue.des||{};Ue.des.startEncrypting=function(t,e,r,i){var n=i0({key:t,output:r,decrypt:!1,mode:i||(e===null?"ECB":"CBC")});return n.start(e),n};Ue.des.createEncryptionCipher=function(t,e){return i0({key:t,output:null,decrypt:!1,mode:e})};Ue.des.startDecrypting=function(t,e,r,i){var n=i0({key:t,output:r,decrypt:!0,mode:i||(e===null?"ECB":"CBC")});return n.start(e),n};Ue.des.createDecryptionCipher=function(t,e){return i0({key:t,output:null,decrypt:!0,mode:e})};Ue.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(i,n){return tv(r._keys,i,n,!1)},decrypt:function(i,n){return tv(r._keys,i,n,!0)}}}),r._init=!1};Ue.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Ue.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=VB(e),this._init=!0}};Or("DES-ECB",Ue.cipher.modes.ecb);Or("DES-CBC",Ue.cipher.modes.cbc);Or("DES-CFB",Ue.cipher.modes.cfb);Or("DES-OFB",Ue.cipher.modes.ofb);Or("DES-CTR",Ue.cipher.modes.ctr);Or("3DES-ECB",Ue.cipher.modes.ecb);Or("3DES-CBC",Ue.cipher.modes.cbc);Or("3DES-CFB",Ue.cipher.modes.cfb);Or("3DES-OFB",Ue.cipher.modes.ofb);Or("3DES-CTR",Ue.cipher.modes.ctr);function Or(t,e){var r=function(){return new Ue.des.Algorithm(t,e)};Ue.cipher.registerAlgorithm(t,r)}var NB=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],OB=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],LB=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],MB=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],KB=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],FB=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],UB=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],qB=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function VB(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],n=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],f=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],c=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],l=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],d=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],p=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,g=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],x=0,w,P=0;P<y;P++){var B=t.getInt32(),S=t.getInt32();w=(B>>>4^S)&252645135,S^=w,B^=w<<4,w=(S>>>-16^B)&65535,B^=w,S^=w<<-16,w=(B>>>2^S)&858993459,S^=w,B^=w<<2,w=(S>>>-16^B)&65535,B^=w,S^=w<<-16,w=(B>>>1^S)&1431655765,S^=w,B^=w<<1,w=(S>>>8^B)&16711935,B^=w,S^=w<<8,w=(B>>>1^S)&1431655765,S^=w,B^=w<<1,w=B<<8|S>>>20&240,B=S<<24|S<<8&16711680|S>>>8&65280|S>>>24&240,S=w;for(var G=0;G<v.length;++G){v[G]?(B=B<<2|B>>>26,S=S<<2|S>>>26):(B=B<<1|B>>>27,S=S<<1|S>>>27),B&=-15,S&=-15;var z=e[B>>>28]|r[B>>>24&15]|i[B>>>20&15]|n[B>>>16&15]|s[B>>>12&15]|a[B>>>8&15]|o[B>>>4&15],se=f[S>>>28]|u[S>>>24&15]|c[S>>>20&15]|h[S>>>16&15]|l[S>>>12&15]|d[S>>>8&15]|p[S>>>4&15];w=(se>>>16^z)&65535,g[x++]=z^w,g[x++]=se^w<<16}}return g}function tv(t,e,r,i){var n=t.length===32?3:9,s;n===3?s=i?[30,-2,-2]:[0,32,2]:s=i?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,o=e[0],f=e[1];a=(o>>>4^f)&252645135,f^=a,o^=a<<4,a=(o>>>16^f)&65535,f^=a,o^=a<<16,a=(f>>>2^o)&858993459,o^=a,f^=a<<2,a=(f>>>8^o)&16711935,o^=a,f^=a<<8,a=(o>>>1^f)&1431655765,f^=a,o^=a<<1,o=o<<1|o>>>31,f=f<<1|f>>>31;for(var u=0;u<n;u+=3){for(var c=s[u+1],h=s[u+2],l=s[u];l!=c;l+=h){var d=f^t[l],p=(f>>>4|f<<28)^t[l+1];a=o,o=f,f=a^(OB[d>>>24&63]|MB[d>>>16&63]|FB[d>>>8&63]|qB[d&63]|NB[p>>>24&63]|LB[p>>>16&63]|KB[p>>>8&63]|UB[p&63])}a=o,o=f,f=a}o=o>>>1|o<<31,f=f>>>1|f<<31,a=(o>>>1^f)&1431655765,f^=a,o^=a<<1,a=(f>>>8^o)&16711935,o^=a,f^=a<<8,a=(f>>>2^o)&858993459,o^=a,f^=a<<2,a=(o>>>16^f)&65535,f^=a,o^=a<<16,a=(o>>>4^f)&252645135,f^=a,o^=a<<4,r[0]=o,r[1]=f}function i0(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,i;t.decrypt?i=Ue.cipher.createDecipher(r,t.key):i=Ue.cipher.createCipher(r,t.key);var n=i.start;return i.start=function(s,a){var o=null;a instanceof Ue.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=s,n.call(i,a)},i}});var _n=E((H5,nv)=>{var n0=_e();nv.exports=n0.md=n0.md||{};n0.md.algorithms=n0.md.algorithms||{}});var av=E((z5,sv)=>{var ai=_e();_n();Qe();var GB=sv.exports=ai.hmac=ai.hmac||{};GB.create=function(){var t=null,e=null,r=null,i=null,n={};return n.start=function(s,a){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in ai.md.algorithms)e=ai.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else e=s;if(a===null)a=t;else{if(typeof a=="string")a=ai.util.createBuffer(a);else if(ai.util.isArray(a)){var o=a;a=ai.util.createBuffer();for(var f=0;f<o.length;++f)a.putByte(o[f])}var u=a.length();u>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),r=ai.util.createBuffer(),i=ai.util.createBuffer(),u=a.length();for(var f=0;f<u;++f){var o=a.at(f);r.putByte(54^o),i.putByte(92^o)}if(u<e.blockLength)for(var o=e.blockLength-u,f=0;f<o;++f)r.putByte(54),i.putByte(92);t=a,r=r.bytes(),i=i.bytes()}e.start(),e.update(r)},n.update=function(s){e.update(s)},n.getMac=function(){var s=e.digest().bytes();return e.start(),e.update(i),e.update(s),e.digest()},n.digest=n.getMac,n}});var uv=E((j5,ov)=>{var At=_e();av();_n();Qe();var HB=At.pkcs5=At.pkcs5||{},oi;At.util.isNodejs&&!At.options.usePureJavaScript&&(oi=$r());ov.exports=At.pbkdf2=HB.pbkdf2=function(t,e,r,i,n,s){if(typeof n=="function"&&(s=n,n=null),At.util.isNodejs&&!At.options.usePureJavaScript&&oi.pbkdf2&&(n===null||typeof n!="object")&&(oi.pbkdf2Sync.length>4||!n||n==="sha1"))return typeof n!="string"&&(n="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),s?oi.pbkdf2Sync.length===4?oi.pbkdf2(t,e,r,i,function(w,P){if(w)return s(w);s(null,P.toString("binary"))}):oi.pbkdf2(t,e,r,i,n,function(w,P){if(w)return s(w);s(null,P.toString("binary"))}):oi.pbkdf2Sync.length===4?oi.pbkdf2Sync(t,e,r,i).toString("binary"):oi.pbkdf2Sync(t,e,r,i,n).toString("binary");if((typeof n=="undefined"||n===null)&&(n="sha1"),typeof n=="string"){if(!(n in At.md.algorithms))throw new Error("Unknown hash algorithm: "+n);n=At.md[n].create()}var a=n.digestLength;if(i>4294967295*a){var o=new Error("Derived key is too long.");if(s)return s(o);throw o}var f=Math.ceil(i/a),u=i-(f-1)*a,c=At.hmac.create();c.start(n,t);var h="",l,d,p;if(!s){for(var y=1;y<=f;++y){c.start(null,null),c.update(e),c.update(At.util.int32ToBytes(y)),l=p=c.digest().getBytes();for(var g=2;g<=r;++g)c.start(null,null),c.update(p),d=c.digest().getBytes(),l=At.util.xorBytes(l,d,a),p=d;h+=y<f?l:l.substr(0,u)}return h}var y=1,g;function v(){if(y>f)return s(null,h);c.start(null,null),c.update(e),c.update(At.util.int32ToBytes(y)),l=p=c.digest().getBytes(),g=2,x()}function x(){if(g<=r)return c.start(null,null),c.update(p),d=c.digest().getBytes(),l=At.util.xorBytes(l,d,a),p=d,++g,At.util.setImmediate(x);h+=y<f?l:l.substr(0,u),++y,v()}v()}});var hv=E((W5,fv)=>{var s0=_e();Qe();var cv=fv.exports=s0.pem=s0.pem||{};cv.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,i;if(t.procType&&(i={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=a0(i)),t.contentDomain&&(i={name:"Content-Domain",values:[t.contentDomain]},r+=a0(i)),t.dekInfo&&(i={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&i.values.push(t.dekInfo.parameters),r+=a0(i)),t.headers)for(var n=0;n<t.headers.length;++n)r+=a0(t.headers[n]);return t.procType&&(r+=`\r
`),r+=s0.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};cv.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,i=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,n=/\r?\n/,s;s=r.exec(t),!!s;){var a=s[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var o={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:s0.util.decode64(s[3])};if(e.push(o),!!s[2]){for(var f=s[2].split(n),u=0;s&&u<f.length;){for(var c=f[u].replace(/\s+$/,""),h=u+1;h<f.length;++h){var l=f[h];if(!/\s/.test(l[0]))break;c+=l,u=h}if(s=c.match(i),s){for(var d={name:s[1],values:[]},p=s[2].split(","),y=0;y<p.length;++y)d.values.push(zB(p[y]));if(o.procType)if(!o.contentDomain&&d.name==="Content-Domain")o.contentDomain=p[0]||"";else if(!o.dekInfo&&d.name==="DEK-Info"){if(d.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:p[0],parameters:p[1]||null}}else o.headers.push(d);else{if(d.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(d.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:p[0],type:p[1]}}}++u}if(o.procType==="ENCRYPTED"&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function a0(t){for(var e=t.name+": ",r=[],i=function(f,u){return" "+u},n=0;n<t.values.length;++n)r.push(t.values[n].replace(/^(\S+\r\n)/,i));e+=r.join(",")+`\r
`;for(var s=0,a=-1,n=0;n<e.length;++n,++s)if(s>65&&a!==-1){var o=e[a];o===","?(++a,e=e.substr(0,a)+`\r
 `+e.substr(a)):e=e.substr(0,a)+`\r
`+o+e.substr(a+1),s=n-a-1,a=-1,++n}else(e[n]===" "||e[n]==="	"||e[n]===",")&&(a=n);return e}function zB(t){return t.replace(/^\s+/,"")}});var vv=E((Y5,gv)=>{var Lr=_e();_n();Qe();var lv=gv.exports=Lr.sha256=Lr.sha256||{};Lr.md.sha256=Lr.md.algorithms.sha256=lv;lv.create=function(){pv||jB();var t=null,e=Lr.util.createBuffer(),r=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return i.start=function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,s=0;s<n;++s)i.fullMessageLength.push(0);return e=Lr.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i},i.start(),i.update=function(n,s){s==="utf8"&&(n=Lr.util.encodeUtf8(n));var a=n.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=i.fullMessageLength.length-1;o>=0;--o)i.fullMessageLength[o]+=a[1],a[1]=a[0]+(i.fullMessageLength[o]/4294967296>>>0),i.fullMessageLength[o]=i.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(n),yv(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),i},i.digest=function(){var n=Lr.util.createBuffer();n.putBytes(e.bytes());var s=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,a=s&i.blockLength-1;n.putBytes(af.substr(0,i.blockLength-a));for(var o,f,u=i.fullMessageLength[0]*8,c=0;c<i.fullMessageLength.length-1;++c)o=i.fullMessageLength[c+1]*8,f=o/4294967296>>>0,u+=f,n.putInt32(u>>>0),u=o>>>0;n.putInt32(u);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};yv(h,r,n);var l=Lr.util.createBuffer();return l.putInt32(h.h0),l.putInt32(h.h1),l.putInt32(h.h2),l.putInt32(h.h3),l.putInt32(h.h4),l.putInt32(h.h5),l.putInt32(h.h6),l.putInt32(h.h7),l},i};var af=null,pv=!1,dv=null;function jB(){af=String.fromCharCode(128),af+=Lr.util.fillString(String.fromCharCode(0),64),dv=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],pv=!0}function yv(t,e,r){for(var i,n,s,a,o,f,u,c,h,l,d,p,y,g,v,x=r.length();x>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)i=e[u-2],i=(i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,n=e[u-15],n=(n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,e[u]=i+e[u-7]+n+e[u-16]|0;for(c=t.h0,h=t.h1,l=t.h2,d=t.h3,p=t.h4,y=t.h5,g=t.h6,v=t.h7,u=0;u<64;++u)a=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7),o=g^p&(y^g),s=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),f=c&h|l&(c^h),i=v+a+o+dv[u]+e[u],n=s+f,v=g,g=y,y=p,p=d+i>>>0,d=l,l=h,h=c,c=i+n>>>0;t.h0=t.h0+c|0,t.h1=t.h1+h|0,t.h2=t.h2+l|0,t.h3=t.h3+d|0,t.h4=t.h4+p|0,t.h5=t.h5+y|0,t.h6=t.h6+g|0,t.h7=t.h7+v|0,x-=64}}});var bv=E(($5,xv)=>{var Mr=_e();Qe();var o0=null;Mr.util.isNodejs&&!Mr.options.usePureJavaScript&&!process.versions["node-webkit"]&&(o0=$r());var WB=xv.exports=Mr.prng=Mr.prng||{};WB.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,i=new Array(32),n=0;n<32;++n)i[n]=r.create();e.pools=i,e.pool=0,e.generate=function(u,c){if(!c)return e.generateSync(u);var h=e.plugin.cipher,l=e.plugin.increment,d=e.plugin.formatKey,p=e.plugin.formatSeed,y=Mr.util.createBuffer();e.key=null,g();function g(v){if(v)return c(v);if(y.length()>=u)return c(null,y.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return Mr.util.nextTick(function(){s(g)});var x=h(e.key,e.seed);e.generated+=x.length,y.putBytes(x),e.key=d(h(e.key,l(e.seed))),e.seed=p(h(e.key,e.seed)),Mr.util.setImmediate(g)}},e.generateSync=function(u){var c=e.plugin.cipher,h=e.plugin.increment,l=e.plugin.formatKey,d=e.plugin.formatSeed;e.key=null;for(var p=Mr.util.createBuffer();p.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&a();var y=c(e.key,e.seed);e.generated+=y.length,p.putBytes(y),e.key=l(c(e.key,h(e.seed))),e.seed=d(c(e.key,e.seed))}return p.getBytes(u)};function s(u){if(e.pools[0].messageLength>=32)return o(),u();var c=32-e.pools[0].messageLength<<5;e.seedFile(c,function(h,l){if(h)return u(h);e.collect(l),o(),u()})}function a(){if(e.pools[0].messageLength>=32)return o();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),o()}function o(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var c=1,h=0;h<32;++h)e.reseeds%c==0&&(u.update(e.pools[h].digest().getBytes()),e.pools[h].start()),c=c<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var l=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(l),e.generated=0}function f(u){var c=null,h=Mr.util.globalScope,l=h.crypto||h.msCrypto;l&&l.getRandomValues&&(c=function(B){return l.getRandomValues(B)});var d=Mr.util.createBuffer();if(c)for(;d.length()<u;){var p=Math.max(1,Math.min(u-d.length(),65536)/4),y=new Uint32Array(Math.floor(p));try{c(y);for(var g=0;g<y.length;++g)d.putInt32(y[g])}catch(B){if(!(typeof QuotaExceededError!="undefined"&&B instanceof QuotaExceededError))throw B}}if(d.length()<u)for(var v,x,w,P=Math.floor(Math.random()*65536);d.length()<u;){x=16807*(P&65535),v=16807*(P>>16),x+=(v&32767)<<16,x+=v>>15,x=(x&2147483647)+(x>>31),P=x&4294967295;for(var g=0;g<3;++g)w=P>>>(g<<3),w^=Math.floor(Math.random()*256),d.putByte(w&255)}return d.getBytes(u)}return o0?(e.seedFile=function(u,c){o0.randomBytes(u,function(h,l){if(h)return c(h);c(null,l.toString())})},e.seedFileSync=function(u){return o0.randomBytes(u).toString()}):(e.seedFile=function(u,c){try{c(null,f(u))}catch(h){c(h)}},e.seedFileSync=f),e.collect=function(u){for(var c=u.length,h=0;h<c;++h)e.pools[e.pool].update(u.substr(h,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,c){for(var h="",l=0;l<c;l+=8)h+=String.fromCharCode(u>>l&255);e.collect(h)},e.registerWorker=function(u){if(u===self)e.seedFile=function(h,l){function d(p){var y=p.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",d),l(y.forge.prng.err,y.forge.prng.bytes))}self.addEventListener("message",d),self.postMessage({forge:{prng:{needed:h}}})};else{var c=function(h){var l=h.data;l.forge&&l.forge.prng&&e.seedFile(l.forge.prng.needed,function(d,p){u.postMessage({forge:{prng:{err:d,bytes:p}}})})};u.addEventListener("message",c)}},e}});var va=E((Q5,of)=>{var ht=_e();sf();vv();bv();Qe();(function(){if(ht.random&&ht.random.getBytes){of.exports=ht.random;return}(function(t){var e={},r=new Array(4),i=ht.util.createBuffer();e.formatKey=function(h){var l=ht.util.createBuffer(h);return h=new Array(4),h[0]=l.getInt32(),h[1]=l.getInt32(),h[2]=l.getInt32(),h[3]=l.getInt32(),ht.aes._expandKey(h,!1)},e.formatSeed=function(h){var l=ht.util.createBuffer(h);return h=new Array(4),h[0]=l.getInt32(),h[1]=l.getInt32(),h[2]=l.getInt32(),h[3]=l.getInt32(),h},e.cipher=function(h,l){return ht.aes._updateBlock(h,l,r,!1),i.putInt32(r[0]),i.putInt32(r[1]),i.putInt32(r[2]),i.putInt32(r[3]),i.getBytes()},e.increment=function(h){return++h[3],h},e.md=ht.md.sha256;function n(){var h=ht.prng.create(e);return h.getBytes=function(l,d){return h.generate(l,d)},h.getBytesSync=function(l){return h.generate(l)},h}var s=n(),a=null,o=ht.util.globalScope,f=o.crypto||o.msCrypto;if(f&&f.getRandomValues&&(a=function(h){return f.getRandomValues(h)}),ht.options.usePureJavaScript||!ht.util.isNodejs&&!a){if(typeof window=="undefined"||window.document===void 0,s.collectInt(+new Date,32),typeof navigator!="undefined"){var u="";for(var c in navigator)try{typeof navigator[c]=="string"&&(u+=navigator[c])}catch(h){}s.collect(u),u=null}t&&(t().mousemove(function(h){s.collectInt(h.clientX,16),s.collectInt(h.clientY,16)}),t().keypress(function(h){s.collectInt(h.charCode,8)}))}if(!ht.random)ht.random=s;else for(var c in s)ht.random[c]=s[c];ht.random.createInstance=n,of.exports=ht.random})(typeof jQuery!="undefined"?jQuery:null)})()});var Sv=E((Z5,wv)=>{var Nt=_e();Qe();var uf=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],mv=[1,2,3,5],YB=function(t,e){return t<<e&65535|(t&65535)>>16-e},$B=function(t,e){return(t&65535)>>e|t<<16-e&65535};wv.exports=Nt.rc2=Nt.rc2||{};Nt.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Nt.util.createBuffer(t)),e=e||128;var r=t,i=t.length(),n=e,s=Math.ceil(n/8),a=255>>(n&7),o;for(o=i;o<128;o++)r.putByte(uf[r.at(o-1)+r.at(o-i)&255]);for(r.setAt(128-s,uf[r.at(128-s)&a]),o=127-s;o>=0;o--)r.setAt(o,uf[r.at(o+1)^r.at(o+s)]);return r};var Ev=function(t,e,r){var i=!1,n=null,s=null,a=null,o,f,u,c,h=[];for(t=Nt.rc2.expandKey(t,e),u=0;u<64;u++)h.push(t.getInt16Le());r?(o=function(p){for(u=0;u<4;u++)p[u]+=h[c]+(p[(u+3)%4]&p[(u+2)%4])+(~p[(u+3)%4]&p[(u+1)%4]),p[u]=YB(p[u],mv[u]),c++},f=function(p){for(u=0;u<4;u++)p[u]+=h[p[(u+3)%4]&63]}):(o=function(p){for(u=3;u>=0;u--)p[u]=$B(p[u],mv[u]),p[u]-=h[c]+(p[(u+3)%4]&p[(u+2)%4])+(~p[(u+3)%4]&p[(u+1)%4]),c--},f=function(p){for(u=3;u>=0;u--)p[u]-=h[p[(u+3)%4]&63]});var l=function(p){var y=[];for(u=0;u<4;u++){var g=n.getInt16Le();a!==null&&(r?g^=a.getInt16Le():a.putInt16Le(g)),y.push(g&65535)}c=r?0:63;for(var v=0;v<p.length;v++)for(var x=0;x<p[v][0];x++)p[v][1](y);for(u=0;u<4;u++)a!==null&&(r?a.putInt16Le(y[u]):y[u]^=a.getInt16Le()),s.putInt16Le(y[u])},d=null;return d={start:function(p,y){p&&typeof p=="string"&&(p=Nt.util.createBuffer(p)),i=!1,n=Nt.util.createBuffer(),s=y||new Nt.util.createBuffer,a=p,d.output=s},update:function(p){for(i||n.putBuffer(p);n.length()>=8;)l([[5,o],[1,f],[6,o],[1,f],[5,o]])},finish:function(p){var y=!0;if(r)if(p)y=p(8,n,!r);else{var g=n.length()===8?8:8-n.length();n.fillWithByte(g,g)}if(y&&(i=!0,d.update()),!r&&(y=n.length()===0,y))if(p)y=p(8,s,!r);else{var v=s.length(),x=s.at(v-1);x>v?y=!1:s.truncate(x)}return y}},d};Nt.rc2.startEncrypting=function(t,e,r){var i=Nt.rc2.createEncryptionCipher(t,128);return i.start(e,r),i};Nt.rc2.createEncryptionCipher=function(t,e){return Ev(t,e,!0)};Nt.rc2.startDecrypting=function(t,e,r){var i=Nt.rc2.createDecryptionCipher(t,128);return i.start(e,r),i};Nt.rc2.createDecryptionCipher=function(t,e){return Ev(t,e,!1)}});var f0=E((X5,Dv)=>{var cf=_e();Dv.exports=cf.jsbn=cf.jsbn||{};var ui,QB=244837814094590,_v=(QB&16777215)==15715070;function N(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}cf.jsbn.BigInteger=N;function he(){return new N(null)}function ZB(t,e,r,i,n,s){for(;--s>=0;){var a=e*this.data[t++]+r.data[i]+n;n=Math.floor(a/67108864),r.data[i++]=a&67108863}return n}function XB(t,e,r,i,n,s){for(var a=e&32767,o=e>>15;--s>=0;){var f=this.data[t]&32767,u=this.data[t++]>>15,c=o*f+u*a;f=a*f+((c&32767)<<15)+r.data[i]+(n&1073741823),n=(f>>>30)+(c>>>15)+o*u+(n>>>30),r.data[i++]=f&1073741823}return n}function Iv(t,e,r,i,n,s){for(var a=e&16383,o=e>>14;--s>=0;){var f=this.data[t]&16383,u=this.data[t++]>>14,c=o*f+u*a;f=a*f+((c&16383)<<14)+r.data[i]+n,n=(f>>28)+(c>>14)+o*u,r.data[i++]=f&268435455}return n}typeof navigator=="undefined"?(N.prototype.am=Iv,ui=28):_v&&navigator.appName=="Microsoft Internet Explorer"?(N.prototype.am=XB,ui=30):_v&&navigator.appName!="Netscape"?(N.prototype.am=ZB,ui=26):(N.prototype.am=Iv,ui=28);N.prototype.DB=ui;N.prototype.DM=(1<<ui)-1;N.prototype.DV=1<<ui;var ff=52;N.prototype.FV=Math.pow(2,ff);N.prototype.F1=ff-ui;N.prototype.F2=2*ui-ff;var JB="0123456789abcdefghijklmnopqrstuvwxyz",u0=new Array,xs,$t;xs="0".charCodeAt(0);for($t=0;$t<=9;++$t)u0[xs++]=$t;xs="a".charCodeAt(0);for($t=10;$t<36;++$t)u0[xs++]=$t;xs="A".charCodeAt(0);for($t=10;$t<36;++$t)u0[xs++]=$t;function Bv(t){return JB.charAt(t)}function Av(t,e){var r=u0[t.charCodeAt(e)];return r??-1}function eA(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function tA(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function Fi(t){var e=he();return e.fromInt(t),e}function rA(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var i=t.length,n=!1,s=0;--i>=0;){var a=r==8?t[i]&255:Av(t,i);if(a<0){t.charAt(i)=="-"&&(n=!0);continue}n=!1,s==0?this.data[this.t++]=a:s+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this.data[this.t++]=a>>this.DB-s):this.data[this.t-1]|=a<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),n&&N.ZERO.subTo(this,this)}function iA(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function nA(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,i,n=!1,s="",a=this.t,o=this.DB-a*this.DB%e;if(a-- >0)for(o<this.DB&&(i=this.data[a]>>o)>0&&(n=!0,s=Bv(i));a>=0;)o<e?(i=(this.data[a]&(1<<o)-1)<<e-o,i|=this.data[--a]>>(o+=this.DB-e)):(i=this.data[a]>>(o-=e)&r,o<=0&&(o+=this.DB,--a)),i>0&&(n=!0),n&&(s+=Bv(i));return n?s:"0"}function sA(){var t=he();return N.ZERO.subTo(this,t),t}function aA(){return this.s<0?this.negate():this}function oA(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function c0(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function uA(){return this.t<=0?0:this.DB*(this.t-1)+c0(this.data[this.t-1]^this.s&this.DM)}function cA(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function fA(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function hA(t,e){var r=t%this.DB,i=this.DB-r,n=(1<<i)-1,s=Math.floor(t/this.DB),a=this.s<<r&this.DM,o;for(o=this.t-1;o>=0;--o)e.data[o+s+1]=this.data[o]>>i|a,a=(this.data[o]&n)<<r;for(o=s-1;o>=0;--o)e.data[o]=0;e.data[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()}function lA(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var i=t%this.DB,n=this.DB-i,s=(1<<i)-1;e.data[0]=this.data[r]>>i;for(var a=r+1;a<this.t;++a)e.data[a-r-1]|=(this.data[a]&s)<<n,e.data[a-r]=this.data[a]>>i;i>0&&(e.data[this.t-r-1]|=(this.s&s)<<n),e.t=this.t-r,e.clamp()}function pA(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);r<n;)i+=this.data[r]-t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i-=t.s;r<this.t;)i+=this.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i-=t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i-=t.s}e.s=i<0?-1:0,i<-1?e.data[r++]=this.DV+i:i>0&&(e.data[r++]=i),e.t=r,e.clamp()}function dA(t,e){var r=this.abs(),i=t.abs(),n=r.t;for(e.t=n+i.t;--n>=0;)e.data[n]=0;for(n=0;n<i.t;++n)e.data[n+r.t]=r.am(0,i.data[n],e,n,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&N.ZERO.subTo(e,e)}function yA(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var i=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,i,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function gA(t,e,r){var i=t.abs();if(!(i.t<=0)){var n=this.abs();if(n.t<i.t){e!=null&&e.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=he());var s=he(),a=this.s,o=t.s,f=this.DB-c0(i.data[i.t-1]);f>0?(i.lShiftTo(f,s),n.lShiftTo(f,r)):(i.copyTo(s),n.copyTo(r));var u=s.t,c=s.data[u-1];if(c!=0){var h=c*(1<<this.F1)+(u>1?s.data[u-2]>>this.F2:0),l=this.FV/h,d=(1<<this.F1)/h,p=1<<this.F2,y=r.t,g=y-u,v=e??he();for(s.dlShiftTo(g,v),r.compareTo(v)>=0&&(r.data[r.t++]=1,r.subTo(v,r)),N.ONE.dlShiftTo(u,v),v.subTo(s,s);s.t<u;)s.data[s.t++]=0;for(;--g>=0;){var x=r.data[--y]==c?this.DM:Math.floor(r.data[y]*l+(r.data[y-1]+p)*d);if((r.data[y]+=s.am(0,x,r,g,0,u))<x)for(s.dlShiftTo(g,v),r.subTo(v,r);r.data[y]<--x;)r.subTo(v,r)}e!=null&&(r.drShiftTo(u,e),a!=o&&N.ZERO.subTo(e,e)),r.t=u,r.clamp(),f>0&&r.rShiftTo(f,r),a<0&&N.ZERO.subTo(r,r)}}}function vA(t){var e=he();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(N.ZERO)>0&&t.subTo(e,e),e}function In(t){this.m=t}function xA(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function bA(t){return t}function mA(t){t.divRemTo(this.m,null,t)}function EA(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function wA(t,e){t.squareTo(e),this.reduce(e)}In.prototype.convert=xA;In.prototype.revert=bA;In.prototype.reduce=mA;In.prototype.mulTo=EA;In.prototype.sqrTo=wA;function SA(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Bn(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function _A(t){var e=he();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(N.ZERO)>0&&this.m.subTo(e,e),e}function IA(t){var e=he();return t.copyTo(e),this.reduce(e),e}function BA(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,i=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,i,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function AA(t,e){t.squareTo(e),this.reduce(e)}function CA(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Bn.prototype.convert=_A;Bn.prototype.revert=IA;Bn.prototype.reduce=BA;Bn.prototype.mulTo=CA;Bn.prototype.sqrTo=AA;function TA(){return(this.t>0?this.data[0]&1:this.s)==0}function RA(t,e){if(t>4294967295||t<1)return N.ONE;var r=he(),i=he(),n=e.convert(this),s=c0(t)-1;for(n.copyTo(r);--s>=0;)if(e.sqrTo(r,i),(t&1<<s)>0)e.mulTo(i,n,r);else{var a=r;r=i,i=a}return e.revert(r)}function DA(t,e){var r;return t<256||e.isEven()?r=new In(e):r=new Bn(e),this.exp(t,r)}N.prototype.copyTo=eA;N.prototype.fromInt=tA;N.prototype.fromString=rA;N.prototype.clamp=iA;N.prototype.dlShiftTo=cA;N.prototype.drShiftTo=fA;N.prototype.lShiftTo=hA;N.prototype.rShiftTo=lA;N.prototype.subTo=pA;N.prototype.multiplyTo=dA;N.prototype.squareTo=yA;N.prototype.divRemTo=gA;N.prototype.invDigit=SA;N.prototype.isEven=TA;N.prototype.exp=RA;N.prototype.toString=nA;N.prototype.negate=sA;N.prototype.abs=aA;N.prototype.compareTo=oA;N.prototype.bitLength=uA;N.prototype.mod=vA;N.prototype.modPowInt=DA;N.ZERO=Fi(0);N.ONE=Fi(1);function PA(){var t=he();return this.copyTo(t),t}function kA(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function NA(){return this.t==0?this.s:this.data[0]<<24>>24}function OA(){return this.t==0?this.s:this.data[0]<<16>>16}function LA(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function MA(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function KA(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),i=Fi(r),n=he(),s=he(),a="";for(this.divRemTo(i,n,s);n.signum()>0;)a=(r+s.intValue()).toString(t).substr(1)+a,n.divRemTo(i,n,s);return s.intValue().toString(t)+a}function FA(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),i=Math.pow(e,r),n=!1,s=0,a=0,o=0;o<t.length;++o){var f=Av(t,o);if(f<0){t.charAt(o)=="-"&&this.signum()==0&&(n=!0);continue}a=e*a+f,++s>=r&&(this.dMultiply(i),this.dAddOffset(a,0),s=0,a=0)}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(a,0)),n&&N.ZERO.subTo(this,this)}function UA(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(N.ONE.shiftLeft(t-1),hf,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(N.ONE.shiftLeft(t-1),this);else{var i=new Array,n=t&7;i.length=(t>>3)+1,e.nextBytes(i),n>0?i[0]&=(1<<n)-1:i[0]=0,this.fromString(i,256)}}function qA(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,i,n=0;if(t-- >0)for(r<this.DB&&(i=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[n++]=i|this.s<<this.DB-r);t>=0;)r<8?(i=(this.data[t]&(1<<r)-1)<<8-r,i|=this.data[--t]>>(r+=this.DB-8)):(i=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(i&128)!=0&&(i|=-256),n==0&&(this.s&128)!=(i&128)&&++n,(n>0||i!=this.s)&&(e[n++]=i);return e}function VA(t){return this.compareTo(t)==0}function GA(t){return this.compareTo(t)<0?this:t}function HA(t){return this.compareTo(t)>0?this:t}function zA(t,e,r){var i,n,s=Math.min(t.t,this.t);for(i=0;i<s;++i)r.data[i]=e(this.data[i],t.data[i]);if(t.t<this.t){for(n=t.s&this.DM,i=s;i<this.t;++i)r.data[i]=e(this.data[i],n);r.t=this.t}else{for(n=this.s&this.DM,i=s;i<t.t;++i)r.data[i]=e(n,t.data[i]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function jA(t,e){return t&e}function WA(t){var e=he();return this.bitwiseTo(t,jA,e),e}function hf(t,e){return t|e}function YA(t){var e=he();return this.bitwiseTo(t,hf,e),e}function Cv(t,e){return t^e}function $A(t){var e=he();return this.bitwiseTo(t,Cv,e),e}function Tv(t,e){return t&~e}function QA(t){var e=he();return this.bitwiseTo(t,Tv,e),e}function ZA(){for(var t=he(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function XA(t){var e=he();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function JA(t){var e=he();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function eC(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}function tC(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+eC(this.data[t]);return this.s<0?this.t*this.DB:-1}function rC(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function iC(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=rC(this.data[r]^e);return t}function nC(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function sC(t,e){var r=N.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function aC(t){return this.changeBit(t,hf)}function oC(t){return this.changeBit(t,Tv)}function uC(t){return this.changeBit(t,Cv)}function cC(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);r<n;)i+=this.data[r]+t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i+=t.s;r<this.t;)i+=this.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i+=t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=t.s}e.s=i<0?-1:0,i>0?e.data[r++]=i:i<-1&&(e.data[r++]=this.DV+i),e.t=r,e.clamp()}function fC(t){var e=he();return this.addTo(t,e),e}function hC(t){var e=he();return this.subTo(t,e),e}function lC(t){var e=he();return this.multiplyTo(t,e),e}function pC(t){var e=he();return this.divRemTo(t,e,null),e}function dC(t){var e=he();return this.divRemTo(t,null,e),e}function yC(t){var e=he(),r=he();return this.divRemTo(t,e,r),new Array(e,r)}function gC(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function vC(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function xa(){}function Rv(t){return t}function xC(t,e,r){t.multiplyTo(e,r)}function bC(t,e){t.squareTo(e)}xa.prototype.convert=Rv;xa.prototype.revert=Rv;xa.prototype.mulTo=xC;xa.prototype.sqrTo=bC;function mC(t){return this.exp(t,new xa)}function EC(t,e,r){var i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;var n;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,t.data[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t.data[i],r,i,0,e-i);r.clamp()}function wC(t,e,r){--e;var i=r.t=this.t+t.t-e;for(r.s=0;--i>=0;)r.data[i]=0;for(i=Math.max(e-this.t,0);i<t.t;++i)r.data[this.t+i-e]=this.am(e-i,t.data[i],r,0,0,this.t+i-e);r.clamp(),r.drShiftTo(1,r)}function bs(t){this.r2=he(),this.q3=he(),N.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function SC(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=he();return t.copyTo(e),this.reduce(e),e}function _C(t){return t}function IC(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function BC(t,e){t.squareTo(e),this.reduce(e)}function AC(t,e,r){t.multiplyTo(e,r),this.reduce(r)}bs.prototype.convert=SC;bs.prototype.revert=_C;bs.prototype.reduce=IC;bs.prototype.mulTo=AC;bs.prototype.sqrTo=BC;function CC(t,e){var r=t.bitLength(),i,n=Fi(1),s;if(r<=0)return n;r<18?i=1:r<48?i=3:r<144?i=4:r<768?i=5:i=6,r<8?s=new In(e):e.isEven()?s=new bs(e):s=new Bn(e);var a=new Array,o=3,f=i-1,u=(1<<i)-1;if(a[1]=s.convert(this),i>1){var c=he();for(s.sqrTo(a[1],c);o<=u;)a[o]=he(),s.mulTo(c,a[o-2],a[o]),o+=2}var h=t.t-1,l,d=!0,p=he(),y;for(r=c0(t.data[h])-1;h>=0;){for(r>=f?l=t.data[h]>>r-f&u:(l=(t.data[h]&(1<<r+1)-1)<<f-r,h>0&&(l|=t.data[h-1]>>this.DB+r-f)),o=i;(l&1)==0;)l>>=1,--o;if((r-=o)<0&&(r+=this.DB,--h),d)a[l].copyTo(n),d=!1;else{for(;o>1;)s.sqrTo(n,p),s.sqrTo(p,n),o-=2;o>0?s.sqrTo(n,p):(y=n,n=p,p=y),s.mulTo(p,a[l],n)}for(;h>=0&&(t.data[h]&1<<r)==0;)s.sqrTo(n,p),y=n,n=p,p=y,--r<0&&(r=this.DB-1,--h)}return s.revert(n)}function TC(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var i=e;e=r,r=i}var n=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(n<s&&(s=n),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),(n=r.getLowestSetBit())>0&&r.rShiftTo(n,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function RC(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var i=this.t-1;i>=0;--i)r=(e*r+this.data[i])%t;return r}function DC(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return N.ZERO;for(var r=t.clone(),i=this.clone(),n=Fi(1),s=Fi(0),a=Fi(0),o=Fi(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!n.isEven()||!s.isEven())&&(n.addTo(this,n),s.subTo(t,s)),n.rShiftTo(1,n)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;i.isEven();)i.rShiftTo(1,i),e?((!a.isEven()||!o.isEven())&&(a.addTo(this,a),o.subTo(t,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);r.compareTo(i)>=0?(r.subTo(i,r),e&&n.subTo(a,n),s.subTo(o,s)):(i.subTo(r,i),e&&a.subTo(n,a),o.subTo(s,o))}if(i.compareTo(N.ONE)!=0)return N.ZERO;if(o.compareTo(t)>=0)return o.subtract(t);if(o.signum()<0)o.addTo(t,o);else return o;return o.signum()<0?o.add(t):o}var pr=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],PC=(1<<26)/pr[pr.length-1];function kC(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=pr[pr.length-1]){for(e=0;e<pr.length;++e)if(r.data[0]==pr[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<pr.length;){for(var i=pr[e],n=e+1;n<pr.length&&i<PC;)i*=pr[n++];for(i=r.modInt(i);e<n;)if(i%pr[e++]==0)return!1}return r.millerRabin(t)}function NC(t){var e=this.subtract(N.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var i=e.shiftRight(r),n=OC(),s,a=0;a<t;++a){do s=new N(this.bitLength(),n);while(s.compareTo(N.ONE)<=0||s.compareTo(e)>=0);var o=s.modPow(i,this);if(o.compareTo(N.ONE)!=0&&o.compareTo(e)!=0){for(var f=1;f++<r&&o.compareTo(e)!=0;)if(o=o.modPowInt(2,this),o.compareTo(N.ONE)==0)return!1;if(o.compareTo(e)!=0)return!1}}return!0}function OC(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}N.prototype.chunkSize=LA;N.prototype.toRadix=KA;N.prototype.fromRadix=FA;N.prototype.fromNumber=UA;N.prototype.bitwiseTo=zA;N.prototype.changeBit=sC;N.prototype.addTo=cC;N.prototype.dMultiply=gC;N.prototype.dAddOffset=vC;N.prototype.multiplyLowerTo=EC;N.prototype.multiplyUpperTo=wC;N.prototype.modInt=RC;N.prototype.millerRabin=NC;N.prototype.clone=PA;N.prototype.intValue=kA;N.prototype.byteValue=NA;N.prototype.shortValue=OA;N.prototype.signum=MA;N.prototype.toByteArray=qA;N.prototype.equals=VA;N.prototype.min=GA;N.prototype.max=HA;N.prototype.and=WA;N.prototype.or=YA;N.prototype.xor=$A;N.prototype.andNot=QA;N.prototype.not=ZA;N.prototype.shiftLeft=XA;N.prototype.shiftRight=JA;N.prototype.getLowestSetBit=tC;N.prototype.bitCount=iC;N.prototype.testBit=nC;N.prototype.setBit=aC;N.prototype.clearBit=oC;N.prototype.flipBit=uC;N.prototype.add=fC;N.prototype.subtract=hC;N.prototype.multiply=lC;N.prototype.divide=pC;N.prototype.remainder=dC;N.prototype.divideAndRemainder=yC;N.prototype.modPow=CC;N.prototype.modInverse=DC;N.prototype.pow=mC;N.prototype.gcd=TC;N.prototype.isProbablePrime=kC});var Lv=E((J5,Ov)=>{var Kr=_e();_n();Qe();var Pv=Ov.exports=Kr.sha1=Kr.sha1||{};Kr.md.sha1=Kr.md.algorithms.sha1=Pv;Pv.create=function(){kv||LC();var t=null,e=Kr.util.createBuffer(),r=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return i.start=function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,s=0;s<n;++s)i.fullMessageLength.push(0);return e=Kr.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i},i.start(),i.update=function(n,s){s==="utf8"&&(n=Kr.util.encodeUtf8(n));var a=n.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=i.fullMessageLength.length-1;o>=0;--o)i.fullMessageLength[o]+=a[1],a[1]=a[0]+(i.fullMessageLength[o]/4294967296>>>0),i.fullMessageLength[o]=i.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(n),Nv(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),i},i.digest=function(){var n=Kr.util.createBuffer();n.putBytes(e.bytes());var s=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,a=s&i.blockLength-1;n.putBytes(lf.substr(0,i.blockLength-a));for(var o,f,u=i.fullMessageLength[0]*8,c=0;c<i.fullMessageLength.length-1;++c)o=i.fullMessageLength[c+1]*8,f=o/4294967296>>>0,u+=f,n.putInt32(u>>>0),u=o>>>0;n.putInt32(u);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};Nv(h,r,n);var l=Kr.util.createBuffer();return l.putInt32(h.h0),l.putInt32(h.h1),l.putInt32(h.h2),l.putInt32(h.h3),l.putInt32(h.h4),l},i};var lf=null,kv=!1;function LC(){lf=String.fromCharCode(128),lf+=Kr.util.fillString(String.fromCharCode(0),64),kv=!0}function Nv(t,e,r){for(var i,n,s,a,o,f,u,c,h=r.length();h>=64;){for(n=t.h0,s=t.h1,a=t.h2,o=t.h3,f=t.h4,c=0;c<16;++c)i=r.getInt32(),e[c]=i,u=o^s&(a^o),i=(n<<5|n>>>27)+u+f+1518500249+i,f=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;c<20;++c)i=e[c-3]^e[c-8]^e[c-14]^e[c-16],i=i<<1|i>>>31,e[c]=i,u=o^s&(a^o),i=(n<<5|n>>>27)+u+f+1518500249+i,f=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;c<32;++c)i=e[c-3]^e[c-8]^e[c-14]^e[c-16],i=i<<1|i>>>31,e[c]=i,u=s^a^o,i=(n<<5|n>>>27)+u+f+1859775393+i,f=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;c<40;++c)i=e[c-6]^e[c-16]^e[c-28]^e[c-32],i=i<<2|i>>>30,e[c]=i,u=s^a^o,i=(n<<5|n>>>27)+u+f+1859775393+i,f=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;c<60;++c)i=e[c-6]^e[c-16]^e[c-28]^e[c-32],i=i<<2|i>>>30,e[c]=i,u=s&a|o&(s^a),i=(n<<5|n>>>27)+u+f+2400959708+i,f=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;for(;c<80;++c)i=e[c-6]^e[c-16]^e[c-28]^e[c-32],i=i<<2|i>>>30,e[c]=i,u=s^a^o,i=(n<<5|n>>>27)+u+f+3395469782+i,f=o,o=a,a=(s<<30|s>>>2)>>>0,s=n,n=i;t.h0=t.h0+n|0,t.h1=t.h1+s|0,t.h2=t.h2+a|0,t.h3=t.h3+o|0,t.h4=t.h4+f|0,h-=64}}});var Fv=E((eD,Kv)=>{var Fr=_e();Qe();va();Lv();var Mv=Kv.exports=Fr.pkcs1=Fr.pkcs1||{};Mv.encode_rsa_oaep=function(t,e,r){var i,n,s,a;typeof r=="string"?(i=r,n=arguments[3]||void 0,s=arguments[4]||void 0):r&&(i=r.label||void 0,n=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md)),s?s.start():s=Fr.md.sha1.create(),a||(a=s);var o=Math.ceil(t.n.bitLength()/8),f=o-2*s.digestLength-2;if(e.length>f){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=f,u}i||(i=""),s.update(i,"raw");for(var c=s.digest(),h="",l=f-e.length,d=0;d<l;d++)h+="\0";var p=c.getBytes()+h+""+e;if(!n)n=Fr.random.getBytes(s.digestLength);else if(n.length!==s.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=n.length,u.digestLength=s.digestLength,u}var y=h0(n,o-s.digestLength-1,a),g=Fr.util.xorBytes(p,y,p.length),v=h0(g,s.digestLength,a),x=Fr.util.xorBytes(n,v,n.length);return"\0"+x+g};Mv.decode_rsa_oaep=function(t,e,r){var i,n,s;typeof r=="string"?(i=r,n=arguments[3]||void 0):r&&(i=r.label||void 0,n=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var g=new Error("RSAES-OAEP encoded message length is invalid.");throw g.length=e.length,g.expectedLength=a,g}if(n===void 0?n=Fr.md.sha1.create():n.start(),s||(s=n),a<2*n.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),n.update(i,"raw");for(var o=n.digest().getBytes(),f=e.charAt(0),u=e.substring(1,n.digestLength+1),c=e.substring(1+n.digestLength),h=h0(c,n.digestLength,s),l=Fr.util.xorBytes(u,h,u.length),d=h0(l,a-n.digestLength-1,s),p=Fr.util.xorBytes(c,d,c.length),y=p.substring(0,n.digestLength),g=f!=="\0",v=0;v<n.digestLength;++v)g|=o.charAt(v)!==y.charAt(v);for(var x=1,w=n.digestLength,P=n.digestLength;P<p.length;P++){var B=p.charCodeAt(P),S=B&1^1,G=x?65534:0;g|=B&G,x=x&S,w+=x}if(g||p.charCodeAt(w)!==1)throw new Error("Invalid RSAES-OAEP padding.");return p.substring(w+1)};function h0(t,e,r){r||(r=Fr.md.sha1.create());for(var i="",n=Math.ceil(e/r.digestLength),s=0;s<n;++s){var a=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(t+a),i+=r.digest().getBytes()}return i.substring(0,e)}});var Uv=E((tD,pf)=>{var Ui=_e();Qe();f0();va();(function(){if(Ui.prime){pf.exports=Ui.prime;return}var t=pf.exports=Ui.prime=Ui.prime||{},e=Ui.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],i=new e(null);i.fromInt(30);var n=function(h,l){return h|l};t.generateProbablePrime=function(h,l,d){typeof l=="function"&&(d=l,l={}),l=l||{};var p=l.algorithm||"PRIMEINC";typeof p=="string"&&(p={name:p}),p.options=p.options||{};var y=l.prng||Ui.random,g={nextBytes:function(v){for(var x=y.getBytesSync(v.length),w=0;w<v.length;++w)v[w]=x.charCodeAt(w)}};if(p.name==="PRIMEINC")return s(h,g,p.options,d);throw new Error("Invalid prime generation algorithm: "+p.name)};function s(h,l,d,p){return"workers"in d?f(h,l,d,p):a(h,l,d,p)}function a(h,l,d,p){var y=u(h,l),g=0,v=c(y.bitLength());"millerRabinTests"in d&&(v=d.millerRabinTests);var x=10;"maxBlockTime"in d&&(x=d.maxBlockTime),o(y,h,l,g,v,x,p)}function o(h,l,d,p,y,g,v){var x=+new Date;do{if(h.bitLength()>l&&(h=u(l,d)),h.isProbablePrime(y))return v(null,h);h.dAddOffset(r[p++%8],0)}while(g<0||+new Date-x<g);Ui.util.setImmediate(function(){o(h,l,d,p,y,g,v)})}function f(h,l,d,p){if(typeof Worker=="undefined")return a(h,l,d,p);var y=u(h,l),g=d.workers,v=d.workLoad||100,x=v*30/8,w=d.workerScript||"forge/prime.worker.js";if(g===-1)return Ui.util.estimateCores(function(B,S){B&&(S=2),g=S-1,P()});P();function P(){g=Math.max(1,g);for(var B=[],S=0;S<g;++S)B[S]=new Worker(w);for(var G=g,S=0;S<g;++S)B[S].addEventListener("message",se);var z=!1;function se(Te){if(!z){--G;var ye=Te.data;if(ye.found){for(var pe=0;pe<B.length;++pe)B[pe].terminate();return z=!0,p(null,new e(ye.prime,16))}y.bitLength()>h&&(y=u(h,l));var Ot=y.toString(16);Te.target.postMessage({hex:Ot,workLoad:v}),y.dAddOffset(x,0)}}}}function u(h,l){var d=new e(h,l),p=h-1;return d.testBit(p)||d.bitwiseTo(e.ONE.shiftLeft(p),n,d),d.dAddOffset(31-d.mod(i).byteValue(),0),d}function c(h){return h<=100?27:h<=150?18:h<=200?15:h<=250?12:h<=300?9:h<=350?8:h<=400?7:h<=500?6:h<=600?5:h<=800?4:h<=1250?3:2}})()});var p0=E((rD,Wv)=>{var $=_e();ga();f0();Xo();Fv();Uv();va();Qe();typeof ue=="undefined"&&(ue=$.jsbn.BigInteger);var ue,df=$.util.isNodejs?$r():null,I=$.asn1,Qt=$.util;$.pki=$.pki||{};Wv.exports=$.pki.rsa=$.rsa=$.rsa||{};var Q=$.pki,MC=[6,4,2,4,2,4,6,2],KC={name:"PrivateKeyInfo",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:I.Class.UNIVERSAL,type:I.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},FC={name:"RSAPrivateKey",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},UC={name:"RSAPublicKey",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},qC=$.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:I.Class.UNIVERSAL,type:I.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},VC=function(t){var e;if(t.algorithm in Q.oids)e=Q.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var i=I.oidToDer(e).getBytes(),n=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[]),s=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[]);s.value.push(I.create(I.Class.UNIVERSAL,I.Type.OID,!1,i)),s.value.push(I.create(I.Class.UNIVERSAL,I.Type.NULL,!1,""));var a=I.create(I.Class.UNIVERSAL,I.Type.OCTETSTRING,!1,t.digest().getBytes());return n.value.push(s),n.value.push(a),I.toDer(n).getBytes()},qv=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(ue.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(ue.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var i;do i=new ue($.util.bytesToHex($.random.getBytes(e.n.bitLength()/8)),16);while(i.compareTo(e.n)>=0||!i.gcd(e.n).equals(ue.ONE));t=t.multiply(i.modPow(e.e,e.n)).mod(e.n);for(var n=t.mod(e.p).modPow(e.dP,e.p),s=t.mod(e.q).modPow(e.dQ,e.q);n.compareTo(s)<0;)n=n.add(e.p);var a=n.subtract(s).multiply(e.qInv).mod(e.p).multiply(e.q).add(s);return a=a.multiply(i.modInverse(e.n)).mod(e.n),a};Q.rsa.encrypt=function(t,e,r){var i=r,n,s=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(i=r===2,n=Vv(t,e,r)):(n=$.util.createBuffer(),n.putBytes(t));for(var a=new ue(n.toHex(),16),o=qv(a,e,i),f=o.toString(16),u=$.util.createBuffer(),c=s-Math.ceil(f.length/2);c>0;)u.putByte(0),--c;return u.putBytes($.util.hexToBytes(f)),u.getBytes()};Q.rsa.decrypt=function(t,e,r,i){var n=Math.ceil(e.n.bitLength()/8);if(t.length!==n){var s=new Error("Encrypted message length is invalid.");throw s.length=t.length,s.expected=n,s}var a=new ue($.util.createBuffer(t).toHex(),16);if(a.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var o=qv(a,e,r),f=o.toString(16),u=$.util.createBuffer(),c=n-Math.ceil(f.length/2);c>0;)u.putByte(0),--c;return u.putBytes($.util.hexToBytes(f)),i!==!1?l0(u.getBytes(),e,r):u.getBytes()};Q.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var i=r.prng||$.random,n={nextBytes:function(o){for(var f=i.getBytesSync(o.length),u=0;u<o.length;++u)o[u]=f.charCodeAt(u)}},s=r.algorithm||"PRIMEINC",a;if(s==="PRIMEINC")a={algorithm:s,state:0,bits:t,rng:n,eInt:e||65537,e:new ue(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+s);return a};Q.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new ue(null);r.fromInt(30);for(var i=0,n=function(h,l){return h|l},s=+new Date,a,o=0;t.keys===null&&(e<=0||o<e);){if(t.state===0){var f=t.p===null?t.pBits:t.qBits,u=f-1;t.pqState===0?(t.num=new ue(f,t.rng),t.num.testBit(u)||t.num.bitwiseTo(ue.ONE.shiftLeft(u),n,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),i=0,++t.pqState):t.pqState===1?t.num.bitLength()>f?t.pqState=0:t.num.isProbablePrime(HC(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(MC[i++%8],0):t.pqState===2?t.pqState=t.num.subtract(ue.ONE).gcd(t.e).compareTo(ue.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(ue.ONE),t.q1=t.q.subtract(ue.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(ue.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var c=t.e.modInverse(t.phi);t.keys={privateKey:Q.rsa.setPrivateKey(t.n,t.e,c,t.p,t.q,c.mod(t.p1),c.mod(t.q1),t.q.modInverse(t.p)),publicKey:Q.rsa.setPublicKey(t.n,t.e)}}a=+new Date,o+=a-s,s=a}return t.keys!==null};Q.rsa.generateKeyPair=function(t,e,r,i){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(i=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(i=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,i=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(i=r,r=void 0):(i=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!$.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(i){if(Gv("generateKeyPair"))return df.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(o,f,u){if(o)return i(o);i(null,{privateKey:Q.privateKeyFromPem(u),publicKey:Q.publicKeyFromPem(f)})});if(Hv("generateKey")&&Hv("exportKey"))return Qt.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:jv(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(o){return Qt.globalScope.crypto.subtle.exportKey("pkcs8",o.privateKey)}).then(void 0,function(o){i(o)}).then(function(o){if(o){var f=Q.privateKeyFromAsn1(I.fromDer($.util.createBuffer(o)));i(null,{privateKey:f,publicKey:Q.setRsaPublicKey(f.n,f.e)})}});if(zv("generateKey")&&zv("exportKey")){var n=Qt.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:jv(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);n.oncomplete=function(o){var f=o.target.result,u=Qt.globalScope.msCrypto.subtle.exportKey("pkcs8",f.privateKey);u.oncomplete=function(c){var h=c.target.result,l=Q.privateKeyFromAsn1(I.fromDer($.util.createBuffer(h)));i(null,{privateKey:l,publicKey:Q.setRsaPublicKey(l.n,l.e)})},u.onerror=function(c){i(c)}},n.onerror=function(o){i(o)};return}}else if(Gv("generateKeyPairSync")){var s=df.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Q.privateKeyFromPem(s.privateKey),publicKey:Q.publicKeyFromPem(s.publicKey)}}}var a=Q.rsa.createKeyPairGenerationState(t,e,r);if(!i)return Q.rsa.stepKeyPairGenerationState(a,0),a.keys;GC(a,r,i)};Q.setRsaPublicKey=Q.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(i,n,s){if(typeof n=="string"?n=n.toUpperCase():n===void 0&&(n="RSAES-PKCS1-V1_5"),n==="RSAES-PKCS1-V1_5")n={encode:function(o,f,u){return Vv(o,f,2).getBytes()}};else if(n==="RSA-OAEP"||n==="RSAES-OAEP")n={encode:function(o,f){return $.pkcs1.encode_rsa_oaep(f,o,s)}};else if(["RAW","NONE","NULL",null].indexOf(n)!==-1)n={encode:function(o){return o}};else if(typeof n=="string")throw new Error('Unsupported encryption scheme: "'+n+'".');var a=n.encode(i,r,!0);return Q.rsa.encrypt(a,r,!0)},r.verify=function(i,n,s){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),s==="RSASSA-PKCS1-V1_5"?s={verify:function(o,f){f=l0(f,r,!0);var u=I.fromDer(f);return o===u.value[1].value}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(o,f){return f=l0(f,r,!0),o===f}});var a=Q.rsa.decrypt(n,r,!0,!1);return s.verify(i,a,r.n.bitLength())},r};Q.setRsaPrivateKey=Q.rsa.setPrivateKey=function(t,e,r,i,n,s,a,o){var f={n:t,e,d:r,p:i,q:n,dP:s,dQ:a,qInv:o};return f.decrypt=function(u,c,h){typeof c=="string"?c=c.toUpperCase():c===void 0&&(c="RSAES-PKCS1-V1_5");var l=Q.rsa.decrypt(u,f,!1,!1);if(c==="RSAES-PKCS1-V1_5")c={decode:l0};else if(c==="RSA-OAEP"||c==="RSAES-OAEP")c={decode:function(d,p){return $.pkcs1.decode_rsa_oaep(p,d,h)}};else if(["RAW","NONE","NULL",null].indexOf(c)!==-1)c={decode:function(d){return d}};else throw new Error('Unsupported encryption scheme: "'+c+'".');return c.decode(l,f,!1)},f.sign=function(u,c){var h=!1;typeof c=="string"&&(c=c.toUpperCase()),c===void 0||c==="RSASSA-PKCS1-V1_5"?(c={encode:VC},h=1):(c==="NONE"||c==="NULL"||c===null)&&(c={encode:function(){return u}},h=1);var l=c.encode(u,f.n.bitLength());return Q.rsa.encrypt(l,f,h)},f};Q.wrapRsaPrivateKey=function(t){return I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,I.integerToDer(0).getBytes()),I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(Q.oids.rsaEncryption).getBytes()),I.create(I.Class.UNIVERSAL,I.Type.NULL,!1,"")]),I.create(I.Class.UNIVERSAL,I.Type.OCTETSTRING,!1,I.toDer(t).getBytes())])};Q.privateKeyFromAsn1=function(t){var e={},r=[];if(I.validate(t,KC,e,r)&&(t=I.fromDer($.util.createBuffer(e.privateKey))),e={},r=[],!I.validate(t,FC,e,r)){var i=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw i.errors=r,i}var n,s,a,o,f,u,c,h;return n=$.util.createBuffer(e.privateKeyModulus).toHex(),s=$.util.createBuffer(e.privateKeyPublicExponent).toHex(),a=$.util.createBuffer(e.privateKeyPrivateExponent).toHex(),o=$.util.createBuffer(e.privateKeyPrime1).toHex(),f=$.util.createBuffer(e.privateKeyPrime2).toHex(),u=$.util.createBuffer(e.privateKeyExponent1).toHex(),c=$.util.createBuffer(e.privateKeyExponent2).toHex(),h=$.util.createBuffer(e.privateKeyCoefficient).toHex(),Q.setRsaPrivateKey(new ue(n,16),new ue(s,16),new ue(a,16),new ue(o,16),new ue(f,16),new ue(u,16),new ue(c,16),new ue(h,16))};Q.privateKeyToAsn1=Q.privateKeyToRSAPrivateKey=function(t){return I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,I.integerToDer(0).getBytes()),I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,Ur(t.n)),I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,Ur(t.e)),I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,Ur(t.d)),I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,Ur(t.p)),I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,Ur(t.q)),I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,Ur(t.dP)),I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,Ur(t.dQ)),I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,Ur(t.qInv))])};Q.publicKeyFromAsn1=function(t){var e={},r=[];if(I.validate(t,qC,e,r)){var i=I.derToOid(e.publicKeyOid);if(i!==Q.oids.rsaEncryption){var n=new Error("Cannot read public key. Unknown OID.");throw n.oid=i,n}t=e.rsaPublicKey}if(r=[],!I.validate(t,UC,e,r)){var n=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw n.errors=r,n}var s=$.util.createBuffer(e.publicKeyModulus).toHex(),a=$.util.createBuffer(e.publicKeyExponent).toHex();return Q.setRsaPublicKey(new ue(s,16),new ue(a,16))};Q.publicKeyToAsn1=Q.publicKeyToSubjectPublicKeyInfo=function(t){return I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(Q.oids.rsaEncryption).getBytes()),I.create(I.Class.UNIVERSAL,I.Type.NULL,!1,"")]),I.create(I.Class.UNIVERSAL,I.Type.BITSTRING,!1,[Q.publicKeyToRSAPublicKey(t)])])};Q.publicKeyToRSAPublicKey=function(t){return I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,Ur(t.n)),I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,Ur(t.e))])};function Vv(t,e,r){var i=$.util.createBuffer(),n=Math.ceil(e.n.bitLength()/8);if(t.length>n-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=t.length,s.max=n-11,s}i.putByte(0),i.putByte(r);var a=n-3-t.length,o;if(r===0||r===1){o=r===0?0:255;for(var f=0;f<a;++f)i.putByte(o)}else for(;a>0;){for(var u=0,c=$.random.getBytes(a),f=0;f<a;++f)o=c.charCodeAt(f),o===0?++u:i.putByte(o);a=u}return i.putByte(0),i.putBytes(t),i}function l0(t,e,r,i){var n=Math.ceil(e.n.bitLength()/8),s=$.util.createBuffer(t),a=s.getByte(),o=s.getByte();if(a!==0||r&&o!==0&&o!==1||!r&&o!=2||r&&o===0&&typeof i=="undefined")throw new Error("Encryption block is invalid.");var f=0;if(o===0){f=n-3-i;for(var u=0;u<f;++u)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(o===1)for(f=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++f}else if(o===2)for(f=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++f}var c=s.getByte();if(c!==0||f!==n-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function GC(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var i={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(i.prng=e.prng),n();function n(){s(t.pBits,function(o,f){if(o)return r(o);if(t.p=f,t.q!==null)return a(o,t.q);s(t.qBits,a)})}function s(o,f){$.prime.generateProbablePrime(o,i,f)}function a(o,f){if(o)return r(o);if(t.q=f,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(ue.ONE).gcd(t.e).compareTo(ue.ONE)!==0){t.p=null,n();return}if(t.q.subtract(ue.ONE).gcd(t.e).compareTo(ue.ONE)!==0){t.q=null,s(t.qBits,a);return}if(t.p1=t.p.subtract(ue.ONE),t.q1=t.q.subtract(ue.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(ue.ONE)!==0){t.p=t.q=null,n();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,s(t.qBits,a);return}var c=t.e.modInverse(t.phi);t.keys={privateKey:Q.rsa.setPrivateKey(t.n,t.e,c,t.p,t.q,c.mod(t.p1),c.mod(t.q1),t.q.modInverse(t.p)),publicKey:Q.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function Ur(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=$.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)==0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)==128)?r.substr(1):r}function HC(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function Gv(t){return $.util.isNodejs&&typeof df[t]=="function"}function Hv(t){return typeof Qt.globalScope!="undefined"&&typeof Qt.globalScope.crypto=="object"&&typeof Qt.globalScope.crypto.subtle=="object"&&typeof Qt.globalScope.crypto.subtle[t]=="function"}function zv(t){return typeof Qt.globalScope!="undefined"&&typeof Qt.globalScope.msCrypto=="object"&&typeof Qt.globalScope.msCrypto.subtle=="object"&&typeof Qt.globalScope.msCrypto.subtle[t]=="function"}function jv(t){for(var e=$.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),i=0;i<e.length;++i)r[i]=e.charCodeAt(i);return r}});var Jv=E((iD,Xv)=>{var V=_e();sf();ga();iv();_n();Xo();uv();hv();va();Sv();p0();Qe();typeof Yv=="undefined"&&(Yv=V.jsbn.BigInteger);var Yv,R=V.asn1,J=V.pki=V.pki||{};Xv.exports=J.pbe=V.pbe=V.pbe||{};var An=J.oids,zC={name:"EncryptedPrivateKeyInfo",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:R.Class.UNIVERSAL,type:R.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:R.Class.UNIVERSAL,type:R.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},jC={name:"PBES2Algorithms",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:R.Class.UNIVERSAL,type:R.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:R.Class.UNIVERSAL,type:R.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:R.Class.UNIVERSAL,type:R.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:R.Class.UNIVERSAL,type:R.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:R.Class.UNIVERSAL,type:R.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:R.Class.UNIVERSAL,type:R.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:R.Class.UNIVERSAL,type:R.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},WC={name:"pkcs-12PbeParams",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:R.Class.UNIVERSAL,type:R.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:R.Class.UNIVERSAL,type:R.Type.INTEGER,constructed:!1,capture:"iterations"}]};J.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var i=V.random.getBytesSync(r.saltSize),n=r.count,s=R.integerToDer(n),a,o,f;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,c,h;switch(r.algorithm){case"aes128":a=16,u=16,c=An["aes128-CBC"],h=V.aes.createEncryptionCipher;break;case"aes192":a=24,u=16,c=An["aes192-CBC"],h=V.aes.createEncryptionCipher;break;case"aes256":a=32,u=16,c=An["aes256-CBC"],h=V.aes.createEncryptionCipher;break;case"des":a=8,u=8,c=An.desCBC,h=V.des.createEncryptionCipher;break;default:var l=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw l.algorithm=r.algorithm,l}var d="hmacWith"+r.prfAlgorithm.toUpperCase(),p=Zv(d),y=V.pkcs5.pbkdf2(e,i,n,a,p),g=V.random.getBytesSync(u),v=h(y);v.start(g),v.update(R.toDer(t)),v.finish(),f=v.output.getBytes();var x=YC(i,s,a,d);o=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(An.pkcs5PBES2).getBytes()),R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(An.pkcs5PBKDF2).getBytes()),x]),R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(c).getBytes()),R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,g)])])])}else if(r.algorithm==="3des"){a=24;var w=new V.util.ByteBuffer(i),y=J.pbe.generatePkcs12Key(e,w,1,n,a),g=J.pbe.generatePkcs12Key(e,w,2,n,a),v=V.des.createEncryptionCipher(y);v.start(g),v.update(R.toDer(t)),v.finish(),f=v.output.getBytes(),o=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(An["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,i),R.create(R.Class.UNIVERSAL,R.Type.INTEGER,!1,s.getBytes())])])}else{var l=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw l.algorithm=r.algorithm,l}var P=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[o,R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,f)]);return P};J.decryptPrivateKeyInfo=function(t,e){var r=null,i={},n=[];if(!R.validate(t,zC,i,n)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=n,s}var a=R.derToOid(i.encryptionOid),o=J.pbe.getCipher(a,i.encryptionParams,e),f=V.util.createBuffer(i.encryptedData);return o.update(f),o.finish()&&(r=R.fromDer(o.output)),r};J.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:R.toDer(t).getBytes()};return V.pem.encode(r,{maxline:e})};J.encryptedPrivateKeyFromPem=function(t){var e=V.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return R.fromDer(e.body)};J.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var i=J.wrapRsaPrivateKey(J.privateKeyToAsn1(t));return i=J.encryptPrivateKeyInfo(i,e,r),J.encryptedPrivateKeyToPem(i)}var n,s,a,o;switch(r.algorithm){case"aes128":n="AES-128-CBC",a=16,s=V.random.getBytesSync(16),o=V.aes.createEncryptionCipher;break;case"aes192":n="AES-192-CBC",a=24,s=V.random.getBytesSync(16),o=V.aes.createEncryptionCipher;break;case"aes256":n="AES-256-CBC",a=32,s=V.random.getBytesSync(16),o=V.aes.createEncryptionCipher;break;case"3des":n="DES-EDE3-CBC",a=24,s=V.random.getBytesSync(8),o=V.des.createEncryptionCipher;break;case"des":n="DES-CBC",a=8,s=V.random.getBytesSync(8),o=V.des.createEncryptionCipher;break;default:var f=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw f.algorithm=r.algorithm,f}var u=V.pbe.opensslDeriveBytes(e,s.substr(0,8),a),c=o(u);c.start(s),c.update(R.toDer(J.privateKeyToAsn1(t))),c.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:n,parameters:V.util.bytesToHex(s).toUpperCase()},body:c.output.getBytes()};return V.pem.encode(h)};J.decryptRsaPrivateKey=function(t,e){var r=null,i=V.pem.decode(t)[0];if(i.type!=="ENCRYPTED PRIVATE KEY"&&i.type!=="PRIVATE KEY"&&i.type!=="RSA PRIVATE KEY"){var n=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw n.headerType=n,n}if(i.procType&&i.procType.type==="ENCRYPTED"){var s,a;switch(i.dekInfo.algorithm){case"DES-CBC":s=8,a=V.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,a=V.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,a=V.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,a=V.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,a=V.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,a=function(h){return V.rc2.createDecryptionCipher(h,40)};break;case"RC2-64-CBC":s=8,a=function(h){return V.rc2.createDecryptionCipher(h,64)};break;case"RC2-128-CBC":s=16,a=function(h){return V.rc2.createDecryptionCipher(h,128)};break;default:var n=new Error('Could not decrypt private key; unsupported encryption algorithm "'+i.dekInfo.algorithm+'".');throw n.algorithm=i.dekInfo.algorithm,n}var o=V.util.hexToBytes(i.dekInfo.parameters),f=V.pbe.opensslDeriveBytes(e,o.substr(0,8),s),u=a(f);if(u.start(o),u.update(V.util.createBuffer(i.body)),u.finish())r=u.output.getBytes();else return r}else r=i.body;return i.type==="ENCRYPTED PRIVATE KEY"?r=J.decryptPrivateKeyInfo(R.fromDer(r),e):r=R.fromDer(r),r!==null&&(r=J.privateKeyFromAsn1(r)),r};J.pbe.generatePkcs12Key=function(t,e,r,i,n,s){var a,o;if(typeof s=="undefined"||s===null){if(!("sha1"in V.md))throw new Error('"sha1" hash algorithm unavailable.');s=V.md.sha1.create()}var f=s.digestLength,u=s.blockLength,c=new V.util.ByteBuffer,h=new V.util.ByteBuffer;if(t!=null){for(o=0;o<t.length;o++)h.putInt16(t.charCodeAt(o));h.putInt16(0)}var l=h.length(),d=e.length(),p=new V.util.ByteBuffer;p.fillWithByte(r,u);var y=u*Math.ceil(d/u),g=new V.util.ByteBuffer;for(o=0;o<y;o++)g.putByte(e.at(o%d));var v=u*Math.ceil(l/u),x=new V.util.ByteBuffer;for(o=0;o<v;o++)x.putByte(h.at(o%l));var w=g;w.putBuffer(x);for(var P=Math.ceil(n/f),B=1;B<=P;B++){var S=new V.util.ByteBuffer;S.putBytes(p.bytes()),S.putBytes(w.bytes());for(var G=0;G<i;G++)s.start(),s.update(S.getBytes()),S=s.digest();var z=new V.util.ByteBuffer;for(o=0;o<u;o++)z.putByte(S.at(o%f));var se=Math.ceil(d/u)+Math.ceil(l/u),Te=new V.util.ByteBuffer;for(a=0;a<se;a++){var ye=new V.util.ByteBuffer(w.getBytes(u)),pe=511;for(o=z.length()-1;o>=0;o--)pe=pe>>8,pe+=z.at(o)+ye.at(o),ye.setAt(o,pe&255);Te.putBuffer(ye)}w=Te,c.putBuffer(S)}return c.truncate(c.length()-n),c};J.pbe.getCipher=function(t,e,r){switch(t){case J.oids.pkcs5PBES2:return J.pbe.getCipherForPBES2(t,e,r);case J.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case J.oids["pbewithSHAAnd40BitRC2-CBC"]:return J.pbe.getCipherForPKCS12PBE(t,e,r);default:var i=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw i.oid=t,i.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],i}};J.pbe.getCipherForPBES2=function(t,e,r){var i={},n=[];if(!R.validate(e,jC,i,n)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=n,s}if(t=R.derToOid(i.kdfOid),t!==J.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=t,s.supportedOids=["pkcs5PBKDF2"],s}if(t=R.derToOid(i.encOid),t!==J.oids["aes128-CBC"]&&t!==J.oids["aes192-CBC"]&&t!==J.oids["aes256-CBC"]&&t!==J.oids["des-EDE3-CBC"]&&t!==J.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=t,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var a=i.kdfSalt,o=V.util.createBuffer(i.kdfIterationCount);o=o.getInt(o.length()<<3);var f,u;switch(J.oids[t]){case"aes128-CBC":f=16,u=V.aes.createDecryptionCipher;break;case"aes192-CBC":f=24,u=V.aes.createDecryptionCipher;break;case"aes256-CBC":f=32,u=V.aes.createDecryptionCipher;break;case"des-EDE3-CBC":f=24,u=V.des.createDecryptionCipher;break;case"desCBC":f=8,u=V.des.createDecryptionCipher;break}var c=Qv(i.prfOid),h=V.pkcs5.pbkdf2(r,a,o,f,c),l=i.encIv,d=u(h);return d.start(l),d};J.pbe.getCipherForPKCS12PBE=function(t,e,r){var i={},n=[];if(!R.validate(e,WC,i,n)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=n,s}var a=V.util.createBuffer(i.salt),o=V.util.createBuffer(i.iterations);o=o.getInt(o.length()<<3);var f,u,c;switch(t){case J.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:f=24,u=8,c=V.des.startDecrypting;break;case J.oids["pbewithSHAAnd40BitRC2-CBC"]:f=5,u=8,c=function(y,g){var v=V.rc2.createDecryptionCipher(y,40);return v.start(g,null),v};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=t,s}var h=Qv(i.prfOid),l=J.pbe.generatePkcs12Key(r,a,1,o,f,h);h.start();var d=J.pbe.generatePkcs12Key(r,a,2,o,u,h);return c(l,d)};J.pbe.opensslDeriveBytes=function(t,e,r,i){if(typeof i=="undefined"||i===null){if(!("md5"in V.md))throw new Error('"md5" hash algorithm unavailable.');i=V.md.md5.create()}e===null&&(e="");for(var n=[$v(i,t+e)],s=16,a=1;s<r;++a,s+=16)n.push($v(i,n[a-1]+t+e));return n.join("").substr(0,r)};function $v(t,e){return t.start().update(e).digest().getBytes()}function Qv(t){var e;if(!t)e="hmacWithSHA1";else if(e=J.oids[R.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return Zv(e)}function Zv(t){var e=V.md;switch(t){case"hmacWithSHA224":e=V.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function YC(t,e,r,i){var n=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,t),R.create(R.Class.UNIVERSAL,R.Type.INTEGER,!1,e.getBytes())]);return i!=="hmacWithSHA1"&&n.value.push(R.create(R.Class.UNIVERSAL,R.Type.INTEGER,!1,V.util.hexToBytes(r.toString(16))),R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(J.oids[i]).getBytes()),R.create(R.Class.UNIVERSAL,R.Type.NULL,!1,"")])),n}});var ba=E(ex=>{"use strict";ex.get=(t=globalThis)=>{let e=t.crypto;if(!e||!e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}});var yf=E((sD,rx)=>{"use strict";var{concat:$C}=(ar(),sr),{fromString:tx}=(st(),nt),QC=ba();function ZC({algorithm:t="AES-GCM",nonceLength:e=12,keyLength:r=16,digest:i="SHA-256",saltLength:n=16,iterations:s=32767}={}){let a=QC.get();r*=8;async function o(u,c){let h=a.getRandomValues(new Uint8Array(n)),l=a.getRandomValues(new Uint8Array(e)),d={name:t,iv:l},p={name:"PBKDF2",salt:h,iterations:s,hash:{name:i}},y=await a.subtle.importKey("raw",tx(c),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),g=await a.subtle.deriveKey(p,y,{name:t,length:r},!0,["encrypt"]),v=await a.subtle.encrypt(d,g,u);return $C([h,d.iv,new Uint8Array(v)])}async function f(u,c){let h=u.slice(0,n),l=u.slice(n,n+e),d=u.slice(n+e),p={name:t,iv:l},y={name:"PBKDF2",salt:h,iterations:s,hash:{name:i}},g=await a.subtle.importKey("raw",tx(c),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),v=await a.subtle.deriveKey(y,g,{name:t,length:r},!0,["decrypt"]),x=await a.subtle.decrypt(p,v,d);return new Uint8Array(x)}return{encrypt:o,decrypt:f}}rx.exports={create:ZC}});var nx=E((aD,ix)=>{"use strict";var{base64:XC}=(on(),Ei),JC=yf();ix.exports={import:async function(t,e){let r=XC.decode(t);return await JC.create().decrypt(r,e)}}});var cx=E((oD,ux)=>{var Ne=_e();_n();Qe();var ma=ux.exports=Ne.sha512=Ne.sha512||{};Ne.md.sha512=Ne.md.algorithms.sha512=ma;var sx=Ne.sha384=Ne.sha512.sha384=Ne.sha512.sha384||{};sx.create=function(){return ma.create("SHA-384")};Ne.md.sha384=Ne.md.algorithms.sha384=sx;Ne.sha512.sha256=Ne.sha512.sha256||{create:function(){return ma.create("SHA-512/256")}};Ne.md["sha512/256"]=Ne.md.algorithms["sha512/256"]=Ne.sha512.sha256;Ne.sha512.sha224=Ne.sha512.sha224||{create:function(){return ma.create("SHA-512/224")}};Ne.md["sha512/224"]=Ne.md.algorithms["sha512/224"]=Ne.sha512.sha224;ma.create=function(t){if(ax||e3(),typeof t=="undefined"&&(t="SHA-512"),!(t in Cn))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=Cn[t],r=null,i=Ne.util.createBuffer(),n=new Array(80),s=0;s<80;++s)n[s]=new Array(2);var a=64;switch(t){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var o={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength128=[];for(var f=o.messageLengthSize/4,u=0;u<f;++u)o.fullMessageLength.push(0);i=Ne.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return o},o.start(),o.update=function(f,u){u==="utf8"&&(f=Ne.util.encodeUtf8(f));var c=f.length;o.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var h=o.fullMessageLength.length-1;h>=0;--h)o.fullMessageLength[h]+=c[1],c[1]=c[0]+(o.fullMessageLength[h]/4294967296>>>0),o.fullMessageLength[h]=o.fullMessageLength[h]>>>0,c[0]=c[1]/4294967296>>>0;return i.putBytes(f),ox(r,n,i),(i.read>2048||i.length()===0)&&i.compact(),o},o.digest=function(){var f=Ne.util.createBuffer();f.putBytes(i.bytes());var u=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,c=u&o.blockLength-1;f.putBytes(gf.substr(0,o.blockLength-c));for(var h,l,d=o.fullMessageLength[0]*8,p=0;p<o.fullMessageLength.length-1;++p)h=o.fullMessageLength[p+1]*8,l=h/4294967296>>>0,d+=l,f.putInt32(d>>>0),d=h>>>0;f.putInt32(d);for(var y=new Array(r.length),p=0;p<r.length;++p)y[p]=r[p].slice(0);ox(y,n,f);var g=Ne.util.createBuffer(),v;t==="SHA-512"?v=y.length:t==="SHA-384"?v=y.length-2:v=y.length-4;for(var p=0;p<v;++p)g.putInt32(y[p][0]),(p!==v-1||t!=="SHA-512/224")&&g.putInt32(y[p][1]);return g},o};var gf=null,ax=!1,vf=null,Cn=null;function e3(){gf=String.fromCharCode(128),gf+=Ne.util.fillString(String.fromCharCode(0),128),vf=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Cn={},Cn["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Cn["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Cn["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Cn["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],ax=!0}function ox(t,e,r){for(var i,n,s,a,o,f,u,c,h,l,d,p,y,g,v,x,w,P,B,S,G,z,se,Te,ye,pe,Ot,Hr,Z,be,O,zi,ji,Wi,Yi,_s=r.length();_s>=128;){for(Z=0;Z<16;++Z)e[Z][0]=r.getInt32()>>>0,e[Z][1]=r.getInt32()>>>0;for(;Z<80;++Z)zi=e[Z-2],be=zi[0],O=zi[1],i=((be>>>19|O<<13)^(O>>>29|be<<3)^be>>>6)>>>0,n=((be<<13|O>>>19)^(O<<3|be>>>29)^(be<<26|O>>>6))>>>0,Wi=e[Z-15],be=Wi[0],O=Wi[1],s=((be>>>1|O<<31)^(be>>>8|O<<24)^be>>>7)>>>0,a=((be<<31|O>>>1)^(be<<24|O>>>8)^(be<<25|O>>>7))>>>0,ji=e[Z-7],Yi=e[Z-16],O=n+ji[1]+a+Yi[1],e[Z][0]=i+ji[0]+s+Yi[0]+(O/4294967296>>>0)>>>0,e[Z][1]=O>>>0;for(y=t[0][0],g=t[0][1],v=t[1][0],x=t[1][1],w=t[2][0],P=t[2][1],B=t[3][0],S=t[3][1],G=t[4][0],z=t[4][1],se=t[5][0],Te=t[5][1],ye=t[6][0],pe=t[6][1],Ot=t[7][0],Hr=t[7][1],Z=0;Z<80;++Z)u=((G>>>14|z<<18)^(G>>>18|z<<14)^(z>>>9|G<<23))>>>0,c=((G<<18|z>>>14)^(G<<14|z>>>18)^(z<<23|G>>>9))>>>0,h=(ye^G&(se^ye))>>>0,l=(pe^z&(Te^pe))>>>0,o=((y>>>28|g<<4)^(g>>>2|y<<30)^(g>>>7|y<<25))>>>0,f=((y<<4|g>>>28)^(g<<30|y>>>2)^(g<<25|y>>>7))>>>0,d=(y&v|w&(y^v))>>>0,p=(g&x|P&(g^x))>>>0,O=Hr+c+l+vf[Z][1]+e[Z][1],i=Ot+u+h+vf[Z][0]+e[Z][0]+(O/4294967296>>>0)>>>0,n=O>>>0,O=f+p,s=o+d+(O/4294967296>>>0)>>>0,a=O>>>0,Ot=ye,Hr=pe,ye=se,pe=Te,se=G,Te=z,O=S+n,G=B+i+(O/4294967296>>>0)>>>0,z=O>>>0,B=w,S=P,w=v,P=x,v=y,x=g,O=n+a,y=i+s+(O/4294967296>>>0)>>>0,g=O>>>0;O=t[0][1]+g,t[0][0]=t[0][0]+y+(O/4294967296>>>0)>>>0,t[0][1]=O>>>0,O=t[1][1]+x,t[1][0]=t[1][0]+v+(O/4294967296>>>0)>>>0,t[1][1]=O>>>0,O=t[2][1]+P,t[2][0]=t[2][0]+w+(O/4294967296>>>0)>>>0,t[2][1]=O>>>0,O=t[3][1]+S,t[3][0]=t[3][0]+B+(O/4294967296>>>0)>>>0,t[3][1]=O>>>0,O=t[4][1]+z,t[4][0]=t[4][0]+G+(O/4294967296>>>0)>>>0,t[4][1]=O>>>0,O=t[5][1]+Te,t[5][0]=t[5][0]+se+(O/4294967296>>>0)>>>0,t[5][1]=O>>>0,O=t[6][1]+pe,t[6][0]=t[6][0]+ye+(O/4294967296>>>0)>>>0,t[6][1]=O>>>0,O=t[7][1]+Hr,t[7][0]=t[7][0]+Ot+(O/4294967296>>>0)>>>0,t[7][1]=O>>>0,_s-=128}}});var xf=E((uD,fx)=>{"use strict";var t3=Za(),r3=Oe();fx.exports=function(t){if(isNaN(t)||t<=0)throw r3(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return t3(t)}});var d0=E(Ea=>{"use strict";Qe();f0();var i3=_e(),{fromString:n3}=(st(),nt),{toString:hx}=(yt(),dt),{concat:lx}=(ar(),sr);Ea.bigIntegerToUintBase64url=(t,e)=>{let r=Uint8Array.from(t.abs().toByteArray());if(r=r[0]===0?r.slice(1):r,e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=lx([new Uint8Array(e-r.length),r])}return hx(r,"base64url")};Ea.base64urlToBigInteger=t=>{let e=Ea.base64urlToBuffer(t);return new i3.jsbn.BigInteger(hx(e,"base16"),16)};Ea.base64urlToBuffer=(t,e)=>{let r=n3(t,"base64urlpad");if(e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=lx([new Uint8Array(e-r.length),r])}return r}});var yx=E(wa=>{"use strict";ga();p0();var qi=_e(),{bigIntegerToUintBase64url:qr,base64urlToBigInteger:Vr}=d0(),{fromString:px}=(st(),nt),{toString:dx}=(yt(),dt);wa.pkcs1ToJwk=function(t){let e=qi.asn1.fromDer(dx(t,"ascii")),r=qi.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:qr(r.n),e:qr(r.e),d:qr(r.d),p:qr(r.p),q:qr(r.q),dp:qr(r.dP),dq:qr(r.dQ),qi:qr(r.qInv),alg:"RS256",kid:"2011-04-29"}};wa.jwkToPkcs1=function(t){let e=qi.pki.privateKeyToAsn1({n:Vr(t.n),e:Vr(t.e),d:Vr(t.d),p:Vr(t.p),q:Vr(t.q),dP:Vr(t.dp),dQ:Vr(t.dq),qInv:Vr(t.qi)});return px(qi.asn1.toDer(e).getBytes(),"ascii")};wa.pkixToJwk=function(t){let e=qi.asn1.fromDer(dx(t,"ascii")),r=qi.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:qr(r.n),e:qr(r.e),alg:"RS256",kid:"2011-04-29"}};wa.jwkToPkix=function(t){let e=qi.pki.publicKeyToAsn1({n:Vr(t.n),e:Vr(t.e)});return px(qi.asn1.toDer(e).getBytes(),"ascii")}});var bx=E((hD,xx)=>{"use strict";p0();var gx=_e(),{base64urlToBigInteger:s3}=d0();function vx(t,e){return e.map(r=>s3(t[r]))}function a3(t){return gx.pki.setRsaPrivateKey(...vx(t,["n","e","d","p","q","dp","dq","qi"]))}function o3(t){return gx.pki.setRsaPublicKey(...vx(t,["n","e"]))}xx.exports={jwk2pub:o3,jwk2priv:a3}});var wx=E(fi=>{"use strict";var ci=ba(),u3=xf(),{toString:c3}=(yt(),dt),{fromString:f3}=(st(),nt);fi.utils=yx();fi.generateKey=async function(t){let e=await ci.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await mx(e);return{privateKey:r[0],publicKey:r[1]}};fi.unmarshalPrivateKey=async function(t){let r=[await ci.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await h3(t)],i=await mx({privateKey:r[0],publicKey:r[1]});return{privateKey:i[0],publicKey:i[1]}};fi.getRandomValues=u3;fi.hashAndSign=async function(t,e){let r=await ci.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),i=await ci.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(e));return new Uint8Array(i,i.byteOffset,i.byteLength)};fi.hashAndVerify=async function(t,e,r){let i=await ci.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return ci.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},i,e,r)};function mx(t){return Promise.all([ci.get().subtle.exportKey("jwk",t.privateKey),ci.get().subtle.exportKey("jwk",t.publicKey)])}function h3(t){return ci.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}var{jwk2pub:l3,jwk2priv:p3}=bx();function Ex(t,e,r,i){let n=e?l3(t):p3(t),s=c3(Uint8Array.from(r),"ascii"),a=i(s,n);return f3(a,"ascii")}fi.encrypt=function(t,e){return Ex(t,!0,e,(r,i)=>i.encrypt(r))};fi.decrypt=function(t,e){return Ex(t,!1,e,(r,i)=>i.decrypt(r))}});var y0=E((pD,Sx)=>{"use strict";var{base64:d3}=(on(),Ei),y3=yf();Sx.exports={export:async function(t,e){let i=await y3.create().encrypt(t,e);return d3.encode(i)}}});var Cx=E((dD,Ax)=>{"use strict";var{sha256:_x}=(rr(),qt),Ix=Oe(),{equals:Bx}=(ur(),or),{toString:g3}=(yt(),dt);cx();var g0=_e(),Zt=wx(),v0=Qo(),v3=y0(),x0=class{constructor(e){this._key=e}async verify(e,r){return Zt.hashAndVerify(this._key,r,e)}marshal(){return Zt.utils.jwkToPkix(this._key)}get bytes(){return v0.PublicKey.encode({Type:v0.KeyType.RSA,Data:this.marshal()}).finish()}encrypt(e){return Zt.encrypt(this._key,e)}equals(e){return Bx(this.bytes,e.bytes)}async hash(){let{bytes:e}=await _x.digest(this.bytes);return e}},Sa=class{constructor(e,r){this._key=e,this._publicKey=r}genSecret(){return Zt.getRandomValues(16)}async sign(e){return Zt.hashAndSign(this._key,e)}get public(){if(!this._publicKey)throw Ix(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new x0(this._publicKey)}decrypt(e){return Zt.decrypt(this._key,e)}marshal(){return Zt.utils.jwkToPkcs1(this._key)}get bytes(){return v0.PrivateKey.encode({Type:v0.KeyType.RSA,Data:this.marshal()}).finish()}equals(e){return Bx(this.bytes,e.bytes)}async hash(){let{bytes:e}=await _x.digest(this.bytes);return e}async id(){let e=await this.public.hash();return g3(e,"base58btc")}async export(e,r="pkcs-8"){if(r==="pkcs-8"){let i=new g0.util.ByteBuffer(this.marshal()),n=g0.asn1.fromDer(i),s=g0.pki.privateKeyFromAsn1(n),a={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return g0.pki.encryptRsaPrivateKey(s,e,a)}else{if(r==="libp2p-key")return v3.export(this.bytes,e);throw Ix(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}};async function x3(t){let e=Zt.utils.pkcs1ToJwk(t),r=await Zt.unmarshalPrivateKey(e);return new Sa(r.privateKey,r.publicKey)}function b3(t){let e=Zt.utils.pkixToJwk(t);return new x0(e)}async function m3(t){let e=await Zt.unmarshalPrivateKey(t);return new Sa(e.privateKey,e.publicKey)}async function E3(t){let e=await Zt.generateKey(t);return new Sa(e.privateKey,e.publicKey)}Ax.exports={RsaPublicKey:x0,RsaPrivateKey:Sa,unmarshalRsaPublicKey:b3,unmarshalRsaPrivateKey:x3,generateKeyPair:E3,fromJwk:m3}});var Rx=E(Vi=>{"use strict";var _a=bc(),w3=32,S3=64,b0=32;Vi.publicKeyLength=w3;Vi.privateKeyLength=S3;Vi.generateKey=async function(){let t=_a.utils.randomPrivateKey(),e=await _a.getPublicKey(t);return{privateKey:Tx(t,e),publicKey:e}};Vi.generateKeyFromSeed=async function(t){if(t.length!==b0)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let e=t,r=await _a.getPublicKey(e);return{privateKey:Tx(e,r),publicKey:r}};Vi.hashAndSign=function(t,e){let r=t.slice(0,b0);return _a.sign(e,r)};Vi.hashAndVerify=function(t,e,r){return _a.verify(e,r,t)};function Tx(t,e){let r=new Uint8Array(Vi.privateKeyLength);for(let i=0;i<b0;i++)r[i]=t[i],r[b0+i]=e[i];return r}});var Ox=E((gD,Nx)=>{"use strict";var Dx=Oe(),{equals:Px}=(ur(),or),{sha256:kx}=(rr(),qt),{base58btc:_3}=(an(),sn),{identity:I3}=(Ls(),Qn),wt=Rx(),m0=Qo(),B3=y0(),E0=class{constructor(e){this._key=Es(e,wt.publicKeyLength)}async verify(e,r){return wt.hashAndVerify(this._key,r,e)}marshal(){return this._key}get bytes(){return m0.PublicKey.encode({Type:m0.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return Px(this.bytes,e.bytes)}async hash(){let{bytes:e}=await kx.digest(this.bytes);return e}},ms=class{constructor(e,r){this._key=Es(e,wt.privateKeyLength),this._publicKey=Es(r,wt.publicKeyLength)}async sign(e){return wt.hashAndSign(this._key,e)}get public(){return new E0(this._publicKey)}marshal(){return this._key}get bytes(){return m0.PrivateKey.encode({Type:m0.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return Px(this.bytes,e.bytes)}async hash(){let{bytes:e}=await kx.digest(this.bytes);return e}async id(){let e=await I3.digest(this.public.bytes);return _3.encode(e.bytes).substring(1)}async export(e,r="libp2p-key"){if(r==="libp2p-key")return B3.export(this.bytes,e);throw Dx(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}};function A3(t){if(t.length>wt.privateKeyLength){t=Es(t,wt.privateKeyLength+wt.publicKeyLength);let i=t.slice(0,wt.privateKeyLength),n=t.slice(wt.privateKeyLength,t.length);return new ms(i,n)}t=Es(t,wt.privateKeyLength);let e=t.slice(0,wt.privateKeyLength),r=t.slice(wt.publicKeyLength);return new ms(e,r)}function C3(t){return t=Es(t,wt.publicKeyLength),new E0(t)}async function T3(){let{privateKey:t,publicKey:e}=await wt.generateKey();return new ms(t,e)}async function R3(t){let{privateKey:e,publicKey:r}=await wt.generateKeyFromSeed(t);return new ms(e,r)}function Es(t,e){if(t=Uint8Array.from(t||[]),t.length!==e)throw Dx(new Error(`Key must be a Uint8Array of length ${e}, got ${t.length}`),"ERR_INVALID_KEY_TYPE");return t}Nx.exports={Ed25519PublicKey:E0,Ed25519PrivateKey:ms,unmarshalEd25519PrivateKey:A3,unmarshalEd25519PublicKey:C3,generateKeyPair:T3,generateKeyPairFromSeed:R3}});var Kx=E((vD,Mx)=>{"use strict";var Ia=Oe(),Gi=Tc(),{sha256:Lx}=(rr(),qt);Mx.exports=()=>{let t=32;function e(){return Gi.utils.randomPrivateKey()}async function r(u,c){let{digest:h}=await Lx.digest(c);try{return await Gi.sign(h,u)}catch(l){throw Ia(l,"ERR_INVALID_INPUT")}}async function i(u,c,h){try{let{digest:l}=await Lx.digest(h);return Gi.verify(c,l,u)}catch(l){throw Ia(l,"ERR_INVALID_INPUT")}}function n(u){return Gi.Point.fromHex(u).toRawBytes(!0)}function s(u){return Gi.Point.fromHex(u).toRawBytes(!1)}function a(u){try{Gi.getPublicKey(u,!0)}catch(c){throw Ia(c,"ERR_INVALID_PRIVATE_KEY")}}function o(u){try{Gi.Point.fromHex(u)}catch(c){throw Ia(c,"ERR_INVALID_PUBLIC_KEY")}}function f(u){try{return Gi.getPublicKey(u,!0)}catch(c){throw Ia(c,"ERR_INVALID_PRIVATE_KEY")}}return{generateKey:e,privateKeyLength:t,hashAndSign:r,hashAndVerify:i,compressPublicKey:n,decompressPublicKey:s,validatePrivateKey:a,validatePublicKey:o,computePublicKey:f}}});var Vx=E((xD,qx)=>{"use strict";var{sha256:Fx}=(rr(),qt),D3=Oe(),{equals:Ux}=(ur(),or),{toString:P3}=(yt(),dt),k3=y0();qx.exports=(t,e,r)=>{r=r||Kx()();class i{constructor(u){r.validatePublicKey(u),this._key=u}verify(u,c){return r.hashAndVerify(this._key,c,u)}marshal(){return r.compressPublicKey(this._key)}get bytes(){return t.PublicKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(u){return Ux(this.bytes,u.bytes)}async hash(){let{bytes:u}=await Fx.digest(this.bytes);return u}}class n{constructor(u,c){this._key=u,this._publicKey=c||r.computePublicKey(u),r.validatePrivateKey(this._key),r.validatePublicKey(this._publicKey)}sign(u){return r.hashAndSign(this._key,u)}get public(){return new i(this._publicKey)}marshal(){return this._key}get bytes(){return t.PrivateKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(u){return Ux(this.bytes,u.bytes)}async hash(){let{bytes:u}=await Fx.digest(this.bytes);return u}async id(){let u=await this.public.hash();return P3(u,"base58btc")}async export(u,c="libp2p-key"){if(c==="libp2p-key")return k3.export(this.bytes,u);throw D3(new Error(`export format '${c}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function s(f){return new n(f)}function a(f){return new i(f)}async function o(){let f=await r.generateKey();return new n(f)}return{Secp256k1PublicKey:i,Secp256k1PrivateKey:n,unmarshalSecp256k1PrivateKey:s,unmarshalSecp256k1PublicKey:a,generateKeyPair:o}}});var Hx=E((bD,Gx)=>{"use strict";Gx.exports={SHA1:20,SHA256:32,SHA512:64}});var Wx=E(jx=>{"use strict";var zx=ba(),N3=Hx(),O3={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"},L3=async(t,e)=>{let r=await zx.get().subtle.sign({name:"HMAC"},t,e);return new Uint8Array(r,r.byteOffset,r.byteLength)};jx.create=async function(t,e){let r=O3[t],i=await zx.get().subtle.importKey("raw",e,{name:"HMAC",hash:{name:r}},!1,["sign"]);return{async digest(n){return L3(i,n)},length:N3[t]}}});var Xx=E((ED,Zx)=>{"use strict";var Yx=Oe(),{concat:$x}=(ar(),sr),{fromString:M3}=(st(),nt),K3=Wx(),Qx={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,cipherKeySize:32}};Zx.exports=async(t,e,r)=>{let i=Qx[t];if(!i){let x=Object.keys(Qx).join(" / ");throw Yx(new Error(`unknown cipher type '${t}'. Must be ${x}`),"ERR_INVALID_CIPHER_TYPE")}if(!e)throw Yx(new Error("missing hash type"),"ERR_MISSING_HASH_TYPE");let n=i.keySize,s=i.ivSize,a=20,o=M3("key expansion"),f=2*(s+n+a),u=await K3.create(e,r),c=await u.digest(o),h=[],l=0;for(;l<f;){let x=await u.digest($x([c,o])),w=x.length;l+w>f&&(w=f-l),h.push(x),l+=w,c=await u.digest(c)}let d=f/2,p=$x(h),y=p.slice(0,d),g=p.slice(d,f),v=x=>({iv:x.slice(0,s),cipherKey:x.slice(s,s+n),macKey:x.slice(s+n)});return{k1:v(y),k2:v(g)}}});var eb=E((wD,Jx)=>{"use strict";var F3=Oe();Jx.exports=function(t,e){if(!t.includes(e)){let r=t.join(" / ");throw F3(new Error(`Unknown curve: ${e}. Must be ${r}`),"ERR_INVALID_CURVE")}}});var ab=E(sb=>{"use strict";var U3=Oe(),Ba=ba(),{base64urlToBuffer:tb}=d0(),q3=eb(),{toString:bf}=(yt(),dt),{concat:V3}=(ar(),sr),{equals:G3}=(ur(),or),rb={"P-256":256,"P-384":384,"P-521":521};sb.generateEphmeralKeyPair=async function(t){q3(Object.keys(rb),t);let e=await Ba.get().subtle.generateKey({name:"ECDH",namedCurve:t},!0,["deriveBits"]),r=async(n,s)=>{let a;s?a=await Ba.get().subtle.importKey("jwk",z3(t,s),{name:"ECDH",namedCurve:t},!1,["deriveBits"]):a=e.privateKey;let o=[await Ba.get().subtle.importKey("jwk",nb(t,n),{name:"ECDH",namedCurve:t},!1,[]),a],f=await Ba.get().subtle.deriveBits({name:"ECDH",namedCurve:t,public:o[0]},o[1],rb[t]);return new Uint8Array(f,f.byteOffset,f.byteLength)},i=await Ba.get().subtle.exportKey("jwk",e.publicKey);return{key:H3(i),genSharedKey:r}};var ib={"P-256":32,"P-384":48,"P-521":66};function H3(t){let e=ib[t.crv];return V3([Uint8Array.from([4]),tb(t.x,e),tb(t.y,e)],1+e*2)}function nb(t,e){let r=ib[t];if(G3(!e.slice(0,1),Uint8Array.from([4])))throw U3(new Error("Cannot unmarshal public key - invalid key format"),"ERR_INVALID_KEY_FORMAT");return{kty:"EC",crv:t,x:bf(e.slice(1,r+1),"base64url"),y:bf(e.slice(1+r),"base64url"),ext:!0}}var z3=(t,e)=>({...nb(t,e.public),d:bf(e.private,"base64url")})});var ub=E((_D,ob)=>{"use strict";var j3=ab();ob.exports=async t=>j3.generateEphmeralKeyPair(t)});var hb=E((ID,fb)=>{"use strict";var Gr=Qo();ga();Jv();var mf=_e(),Aa=Oe(),{fromString:W3}=(st(),nt),Y3=nx(),Xt={rsa:Cx(),ed25519:Ox(),secp256k1:Vx()(Gr,xf())},w0={message:"secp256k1 support requires libp2p-crypto-secp256k1 package",code:"ERR_MISSING_PACKAGE"};function ws(t){let e=Xt[t.toLowerCase()];if(!e){let r=Object.keys(Xt).join(" / ");throw Aa(new Error(`invalid or unsupported key type ${t}. Must be ${r}`),"ERR_UNSUPPORTED_KEY_TYPE")}return e}var $3=async(t,e)=>ws(t).generateKeyPair(e),Q3=async(t,e,r)=>{let i=ws(t);if(t.toLowerCase()!=="ed25519")throw Aa(new Error("Seed key derivation is unimplemented for RSA or secp256k1"),"ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return i.generateKeyPairFromSeed(e,r)},Z3=t=>{let e=Gr.PublicKey.decode(t),r=e.Data;switch(e.Type){case Gr.KeyType.RSA:return Xt.rsa.unmarshalRsaPublicKey(r);case Gr.KeyType.Ed25519:return Xt.ed25519.unmarshalEd25519PublicKey(r);case Gr.KeyType.Secp256k1:if(Xt.secp256k1)return Xt.secp256k1.unmarshalSecp256k1PublicKey(r);throw Aa(new Error(w0.message),w0.code);default:ws(e.Type)}},X3=(t,e)=>(e=(e||"rsa").toLowerCase(),ws(e),t.bytes),cb=async t=>{let e=Gr.PrivateKey.decode(t),r=e.Data;switch(e.Type){case Gr.KeyType.RSA:return Xt.rsa.unmarshalRsaPrivateKey(r);case Gr.KeyType.Ed25519:return Xt.ed25519.unmarshalEd25519PrivateKey(r);case Gr.KeyType.Secp256k1:if(Xt.secp256k1)return Xt.secp256k1.unmarshalSecp256k1PrivateKey(r);throw Aa(new Error(w0.message),w0.code);default:ws(e.Type)}},J3=(t,e)=>(e=(e||"rsa").toLowerCase(),ws(e),t.bytes),eT=async(t,e)=>{try{let n=await Y3.import(t,e);return cb(n)}catch(n){}let r=mf.pki.decryptRsaPrivateKey(t,e);if(r===null)throw Aa(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let i=mf.asn1.toDer(mf.pki.privateKeyToAsn1(r));return i=W3(i.getBytes(),"ascii"),Xt.rsa.unmarshalRsaPrivateKey(i)};fb.exports={supportedKeys:Xt,keysPBM:Gr,keyStretcher:Xx(),generateEphemeralKeyPair:ub(),generateKeyPair:$3,generateKeyPairFromSeed:Q3,unmarshalPublicKey:Z3,marshalPublicKey:X3,unmarshalPrivateKey:cb,marshalPrivateKey:J3,import:eT}});var lb=E(Ef=>{"use strict";Ef.messages={NOT_STARTED_YET:"The libp2p node is not started yet",DHT_DISABLED:"DHT is not available",CONN_ENCRYPTION_REQUIRED:"At least one connection encryption module is required",NOT_FOUND:"Not found"};Ef.codes={DHT_DISABLED:"ERR_DHT_DISABLED",PUBSUB_NOT_STARTED:"ERR_PUBSUB_NOT_STARTED",DHT_NOT_STARTED:"ERR_DHT_NOT_STARTED",CONN_ENCRYPTION_REQUIRED:"ERR_CONN_ENCRYPTION_REQUIRED",ERR_INVALID_PROTOCOLS_FOR_STREAM:"ERR_INVALID_PROTOCOLS_FOR_STREAM",ERR_CONNECTION_ENDED:"ERR_CONNECTION_ENDED",ERR_CONNECTION_FAILED:"ERR_CONNECTION_FAILED",ERR_NODE_NOT_STARTED:"ERR_NODE_NOT_STARTED",ERR_ALREADY_ABORTED:"ERR_ALREADY_ABORTED",ERR_TOO_MANY_ADDRESSES:"ERR_TOO_MANY_ADDRESSES",ERR_NO_VALID_ADDRESSES:"ERR_NO_VALID_ADDRESSES",ERR_RELAYED_DIAL:"ERR_RELAYED_DIAL",ERR_DIALED_SELF:"ERR_DIALED_SELF",ERR_DISCOVERED_SELF:"ERR_DISCOVERED_SELF",ERR_DUPLICATE_TRANSPORT:"ERR_DUPLICATE_TRANSPORT",ERR_ENCRYPTION_FAILED:"ERR_ENCRYPTION_FAILED",ERR_HOP_REQUEST_FAILED:"ERR_HOP_REQUEST_FAILED",ERR_INVALID_KEY:"ERR_INVALID_KEY",ERR_INVALID_MESSAGE:"ERR_INVALID_MESSAGE",ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS",ERR_INVALID_PEER:"ERR_INVALID_PEER",ERR_MUXER_UNAVAILABLE:"ERR_MUXER_UNAVAILABLE",ERR_NOT_FOUND:"ERR_NOT_FOUND",ERR_TIMEOUT:"ERR_TIMEOUT",ERR_TRANSPORT_UNAVAILABLE:"ERR_TRANSPORT_UNAVAILABLE",ERR_TRANSPORT_DIAL_FAILED:"ERR_TRANSPORT_DIAL_FAILED",ERR_UNSUPPORTED_PROTOCOL:"ERR_UNSUPPORTED_PROTOCOL",ERR_INVALID_MULTIADDR:"ERR_INVALID_MULTIADDR",ERR_SIGNATURE_NOT_VALID:"ERR_SIGNATURE_NOT_VALID",ERR_FIND_SELF:"ERR_FIND_SELF",ERR_NO_ROUTERS_AVAILABLE:"ERR_NO_ROUTERS_AVAILABLE",ERR_CONNECTION_NOT_MULTIPLEXED:"ERR_CONNECTION_NOT_MULTIPLEXED",ERR_NO_DIAL_TOKENS:"ERR_NO_DIAL_TOKENS",ERR_KEYCHAIN_REQUIRED:"ERR_KEYCHAIN_REQUIRED",ERR_INVALID_CMS:"ERR_INVALID_CMS",ERR_MISSING_KEYS:"ERR_MISSING_KEYS",ERR_NO_KEY:"ERR_NO_KEY",ERR_INVALID_KEY_NAME:"ERR_INVALID_KEY_NAME",ERR_INVALID_KEY_TYPE:"ERR_INVALID_KEY_TYPE",ERR_KEY_ALREADY_EXISTS:"ERR_KEY_ALREADY_EXISTS",ERR_INVALID_KEY_SIZE:"ERR_INVALID_KEY_SIZE",ERR_KEY_NOT_FOUND:"ERR_KEY_NOT_FOUND",ERR_OLD_KEY_NAME_INVALID:"ERR_OLD_KEY_NAME_INVALID",ERR_NEW_KEY_NAME_INVALID:"ERR_NEW_KEY_NAME_INVALID",ERR_PASSWORD_REQUIRED:"ERR_PASSWORD_REQUIRED",ERR_PEM_REQUIRED:"ERR_PEM_REQUIRED",ERR_CANNOT_READ_KEY:"ERR_CANNOT_READ_KEY",ERR_MISSING_PRIVATE_KEY:"ERR_MISSING_PRIVATE_KEY",ERR_INVALID_OLD_PASS_TYPE:"ERR_INVALID_OLD_PASS_TYPE",ERR_INVALID_NEW_PASS_TYPE:"ERR_INVALID_NEW_PASS_TYPE",ERR_INVALID_PASS_LENGTH:"ERR_INVALID_PASS_LENGTH",ERR_NOT_IMPLEMENTED:"ERR_NOT_IMPLEMENTED",ERR_WRONG_PING_ACK:"ERR_WRONG_PING_ACK"}});var yb=E((AD,db)=>{"use strict";var Ss=Xi(),pb=Ss.Reader,tT=Ss.Writer,qe=Ss.util,Ca=Ss.roots["libp2p-envelope"]||(Ss.roots["libp2p-envelope"]={});Ca.Envelope=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.publicKey=qe.newBuffer([]),t.prototype.payloadType=qe.newBuffer([]),t.prototype.payload=qe.newBuffer([]),t.prototype.signature=qe.newBuffer([]),t.encode=function(r,i){return i||(i=tT.create()),r.publicKey!=null&&Object.hasOwnProperty.call(r,"publicKey")&&i.uint32(10).bytes(r.publicKey),r.payloadType!=null&&Object.hasOwnProperty.call(r,"payloadType")&&i.uint32(18).bytes(r.payloadType),r.payload!=null&&Object.hasOwnProperty.call(r,"payload")&&i.uint32(26).bytes(r.payload),r.signature!=null&&Object.hasOwnProperty.call(r,"signature")&&i.uint32(42).bytes(r.signature),i},t.decode=function(r,i){r instanceof pb||(r=pb.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Ca.Envelope;r.pos<n;){var a=r.uint32();switch(a>>>3){case 1:s.publicKey=r.bytes();break;case 2:s.payloadType=r.bytes();break;case 3:s.payload=r.bytes();break;case 5:s.signature=r.bytes();break;default:r.skipType(a&7);break}}return s},t.fromObject=function(r){if(r instanceof Ca.Envelope)return r;var i=new Ca.Envelope;return r.publicKey!=null&&(typeof r.publicKey=="string"?qe.base64.decode(r.publicKey,i.publicKey=qe.newBuffer(qe.base64.length(r.publicKey)),0):r.publicKey.length&&(i.publicKey=r.publicKey)),r.payloadType!=null&&(typeof r.payloadType=="string"?qe.base64.decode(r.payloadType,i.payloadType=qe.newBuffer(qe.base64.length(r.payloadType)),0):r.payloadType.length&&(i.payloadType=r.payloadType)),r.payload!=null&&(typeof r.payload=="string"?qe.base64.decode(r.payload,i.payload=qe.newBuffer(qe.base64.length(r.payload)),0):r.payload.length&&(i.payload=r.payload)),r.signature!=null&&(typeof r.signature=="string"?qe.base64.decode(r.signature,i.signature=qe.newBuffer(qe.base64.length(r.signature)),0):r.signature.length&&(i.signature=r.signature)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(i.bytes===String?n.publicKey="":(n.publicKey=[],i.bytes!==Array&&(n.publicKey=qe.newBuffer(n.publicKey))),i.bytes===String?n.payloadType="":(n.payloadType=[],i.bytes!==Array&&(n.payloadType=qe.newBuffer(n.payloadType))),i.bytes===String?n.payload="":(n.payload=[],i.bytes!==Array&&(n.payload=qe.newBuffer(n.payload))),i.bytes===String?n.signature="":(n.signature=[],i.bytes!==Array&&(n.signature=qe.newBuffer(n.signature)))),r.publicKey!=null&&r.hasOwnProperty("publicKey")&&(n.publicKey=i.bytes===String?qe.base64.encode(r.publicKey,0,r.publicKey.length):i.bytes===Array?Array.prototype.slice.call(r.publicKey):r.publicKey),r.payloadType!=null&&r.hasOwnProperty("payloadType")&&(n.payloadType=i.bytes===String?qe.base64.encode(r.payloadType,0,r.payloadType.length):i.bytes===Array?Array.prototype.slice.call(r.payloadType):r.payloadType),r.payload!=null&&r.hasOwnProperty("payload")&&(n.payload=i.bytes===String?qe.base64.encode(r.payload,0,r.payload.length):i.bytes===Array?Array.prototype.slice.call(r.payload):r.payload),r.signature!=null&&r.hasOwnProperty("signature")&&(n.signature=i.bytes===String?qe.base64.encode(r.signature,0,r.signature.length):i.bytes===Array?Array.prototype.slice.call(r.signature):r.signature),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ss.util.toJSONOptions)},t}();db.exports=Ca});var bb=E((CD,xb)=>{"use strict";var rT=Oe(),{concat:iT}=(ar(),sr),{fromString:nT}=(st(),nt),sT=hb(),aT=us(),wf=Wa(),{equals:S0}=(ur(),or),{codes:oT}=lb(),{Envelope:gb}=yb(),Hi=class{constructor({peerId:e,payloadType:r,payload:i,signature:n}){this.peerId=e,this.payloadType=r,this.payload=i,this.signature=n,this._marshal=void 0}marshal(){if(this._marshal)return this._marshal;let e=sT.marshalPublicKey(this.peerId.pubKey);return this._marshal=gb.encode({publicKey:e,payloadType:this.payloadType,payload:this.payload,signature:this.signature}).finish(),this._marshal}equals(e){return S0(this.peerId.pubKey.bytes,e.peerId.pubKey.bytes)&&S0(this.payloadType,e.payloadType)&&S0(this.payload,e.payload)&&S0(this.signature,e.signature)}validate(e){let r=vb(e,this.payloadType,this.payload);return this.peerId.pubKey.verify(r,this.signature)}},vb=(t,e,r)=>{let i=nT(t),n=wf.encode(i.byteLength),s=wf.encode(e.length),a=wf.encode(r.length);return iT([new Uint8Array(n),i,new Uint8Array(s),e,new Uint8Array(a),r])};Hi.createFromProtobuf=async t=>{let e=gb.decode(t),r=await aT.createFromPubKey(e.publicKey);return new Hi({peerId:r,payloadType:e.payloadType,payload:e.payload,signature:e.signature})};Hi.seal=async(t,e)=>{let r=t.domain,i=t.codec,n=t.marshal(),s=vb(r,i,n),a=await e.privKey.sign(s);return new Hi({peerId:e,payloadType:i,payload:n,signature:a})};Hi.openAndCertify=async(t,e)=>{let r=await Hi.createFromProtobuf(t);if(!await r.validate(e))throw rT(new Error("envelope signature is not valid for the given domain"),oT.ERR_SIGNATURE_NOT_VALID);return r};xb.exports=Hi});var dT=E((hi,wb)=>{"use strict";var uT=hi&&hi.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),cT=hi&&hi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),mb=hi&&hi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&uT(e,t,r);return cT(e,t),e},Ct=hi&&hi.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(i.next(c))}catch(h){a(h)}}function f(c){try{u(i.throw(c))}catch(h){a(h)}}function u(c){c.done?s(c.value):n(c.value).then(o,f)}u((i=i.apply(t,e||[])).next())})},Sf=mb(s2()),fT=l2(),_f=d2(),ne=mb(Ni()),hT=v2(),_0=Uc(),Ze=fs(),If=R2(),lT=k2(),Eb=O2(),Bf=us(),pT=bb(),Af=Ni(),Cf=class extends Sf.default{constructor(e,r={}){var i;let n=[ne.GossipsubIDv11,ne.GossipsubIDv10],s=Object.assign(Object.assign({gossipIncoming:!0,fallbackToFloodsub:!0,floodPublish:!0,doPX:!1,directPeers:[],D:ne.GossipsubD,Dlo:ne.GossipsubDlo,Dhi:ne.GossipsubDhi,Dscore:ne.GossipsubDscore,Dout:ne.GossipsubDout,Dlazy:ne.GossipsubDlazy,heartbeatInterval:ne.GossipsubHeartbeatInterval,fanoutTTL:ne.GossipsubFanoutTTL,mcacheLength:ne.GossipsubHistoryLength,mcacheGossip:ne.GossipsubHistoryGossip,seenTTL:ne.GossipsubSeenTTL},r),{scoreParams:If.createPeerScoreParams(r.scoreParams),scoreThresholds:If.createPeerScoreThresholds(r.scoreThresholds)});s.fallbackToFloodsub&&n.push(ne.FloodsubID);super(Object.assign({debugName:"libp2p:gossipsub",multicodecs:n,libp2p:e},s));this._options=s,this.direct=new Set(s.directPeers.map(a=>a.id.toB58String())),this.acceptFromWhitelist=new Map,s.directPeers.forEach(a=>{e.peerStore.addressBook.add(a.id,a.addrs)}),this.seenCache=new Eb.SimpleTimeCache({validityMs:s.seenTTL}),this.mesh=new Map,this.fanout=new Map,this.lastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.messageCache=r.messageCache||new fT.MessageCache(s.mcacheGossip,s.mcacheLength),this.getFastMsgIdStr=(i=r.fastMsgIdFn)!==null&&i!==void 0?i:void 0,this.fastMsgIdCache=r.fastMsgIdFn?new Eb.SimpleTimeCache({validityMs:s.seenTTL}):void 0,this.heartbeat=new hT.Heartbeat(this),this.heartbeatTicks=0,this.gossipTracer=new lT.IWantTracer,this._libp2p=e,this.score=new If.PeerScore(this._options.scoreParams,e.connectionManager)}_decodeRpc(e){return _f.RPC.decode(e)}_encodeRpc(e){return _f.RPC.encode(e).finish()}_addPeer(e,r){let i=super._addPeer(e,r);this.score.addPeer(e.toB58String());let n=!1;for(let s of this._libp2p.connectionManager.getAll(e))if(s.stat.direction==="outbound"&&Array.from(s.registry.values()).some(a=>r===a.protocol)){n=!0;break}return this.outbound.set(i.id.toB58String(),n),i}_removePeer(e){let r=super._removePeer(e),i=e.toB58String();for(let n of this.mesh.values())n.delete(i);for(let n of this.fanout.values())n.delete(i);return this.gossip.delete(i),this.control.delete(i),this.outbound.delete(i),this.score.removePeer(i),this.acceptFromWhitelist.delete(i),r}_processRpc(e,r,i){let n=Object.create(null,{_processRpc:{get:()=>super._processRpc}});return Ct(this,void 0,void 0,function*(){return(yield n._processRpc.call(this,e,r,i))?(i.control&&(yield this._processRpcControlMessage(e,i.control)),!0):!1})}_processRpcControlMessage(e,r){return Ct(this,void 0,void 0,function*(){if(!r)return;let i=r.ihave?this._handleIHave(e,r.ihave):[],n=r.iwant?this._handleIWant(e,r.iwant):[],s=r.graft?yield this._handleGraft(e,r.graft):[];if(r.prune&&this._handlePrune(e,r.prune),!i.length&&!n.length&&!s.length)return;let a=Ze.createGossipRpc(n,{iwant:i,prune:s});this._sendRpc(e,a)})}_processRpcMessage(e){let r=Object.create(null,{_processRpcMessage:{get:()=>super._processRpcMessage}});return Ct(this,void 0,void 0,function*(){let i;if(this.getFastMsgIdStr&&this.fastMsgIdCache){let n=yield this.getFastMsgIdStr(e);if(i=this.fastMsgIdCache.get(n),i!==void 0){this.score.duplicateMessage(e,i);return}i=Ze.messageIdToString(yield this.getMsgId(e)),this.fastMsgIdCache.put(n,i)}else if(i=Ze.messageIdToString(yield this.getMsgId(e)),this.seenCache.has(i)){this.score.duplicateMessage(e,i);return}this.seenCache.put(i),yield this.score.validateMessage(i),yield r._processRpcMessage.call(this,e)})}_acceptFrom(e){if(this.direct.has(e))return!0;let r=Date.now(),i=this.acceptFromWhitelist.get(e);if(i&&i.messagesAccepted<Af.ACCEPT_FROM_WHITELIST_MAX_MESSAGES&&i.acceptUntil>=r)return i.messagesAccepted+=1,!0;let n=this.score.score(e);return n>=Af.ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE?this.acceptFromWhitelist.set(e,{messagesAccepted:0,acceptUntil:r+Af.ACCEPT_FROM_WHITELIST_DURATION_MS}):this.acceptFromWhitelist.delete(e),n>=this._options.scoreThresholds.graylistThreshold}validate(e){let r=Object.create(null,{validate:{get:()=>super.validate}});return Ct(this,void 0,void 0,function*(){try{yield r.validate.call(this,e)}catch(i){let n=yield this.getCanonicalMsgIdStr(e);throw this.score.rejectMessage(e,n,i.code),this.gossipTracer.rejectMessage(n,i.code),i}})}_handleIHave(e,r){if(!r.length)return[];let i=this.score.score(e);if(i<this._options.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",e,i),[];let n=(this.peerhave.get(e)||0)+1;if(this.peerhave.set(e,n),n>ne.GossipsubMaxIHaveMessages)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",e,n),[];let s=this.iasked.get(e)||0;if(s>=ne.GossipsubMaxIHaveLength)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",e,s),[];let a=new Map;if(r.forEach(({topicID:u,messageIDs:c})=>{!u||!c||!this.mesh.has(u)||c.forEach(h=>{let l=Ze.messageIdToString(h);this.seenCache.has(l)||a.set(l,h)})}),!a.size)return[];let o=a.size;o+s>ne.GossipsubMaxIHaveLength&&(o=ne.GossipsubMaxIHaveLength-s),this.log("IHAVE: Asking for %d out of %d messages from %s",o,a.size,e);let f=Array.from(a.values());return Ze.shuffle(f),f=f.slice(0,o),this.iasked.set(e,s+o),this.gossipTracer.addPromise(e,f),[{messageIDs:f}]}_handleIWant(e,r){if(!r.length)return[];let i=this.score.score(e);if(i<this._options.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",e,i),[];let n=new Map;return r.forEach(({messageIDs:s})=>{s&&s.forEach(a=>{let o=Ze.messageIdToString(a),[f,u]=this.messageCache.getForPeer(o,e);if(!!f){if(u>ne.GossipsubGossipRetransmission){this.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",e,a);return}n.set(o,f)}})}),n.size?(this.log("IWANT: Sending %d messages to %s",n.size,e),Array.from(n.values()).map(Sf.utils.normalizeOutRpcMessage)):[]}_handleGraft(e,r){return Ct(this,void 0,void 0,function*(){let i=[],n=this.score.score(e),s=this._now(),a=this._options.doPX;return r.forEach(({topicID:o})=>{var f;if(!o)return;let u=this.mesh.get(o);if(!u){a=!1;return}if(u.has(e))return;if(this.direct.has(e)){this.log("GRAFT: ignoring request from direct peer %s",e),i.push(o),a=!1;return}let c=(f=this.backoff.get(o))===null||f===void 0?void 0:f.get(e);if(typeof c=="number"&&s<c){this.log("GRAFT: ignoring backed off peer %s",e),this.score.addPenalty(e,1),a=!1;let h=c+ne.GossipsubGraftFloodThreshold-ne.GossipsubPruneBackoff;s<h&&this.score.addPenalty(e,1),this._addBackoff(e,o),i.push(o);return}if(n<0){this.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",e,n,o),i.push(o),a=!1,this._addBackoff(e,o);return}if(u.size>=this._options.Dhi&&!this.outbound.get(e)){i.push(o),this._addBackoff(e,o);return}this.log("GRAFT: Add mesh link from %s in %s",e,o),this.score.graft(e,o),u.add(e)}),i.length?Promise.all(i.map(o=>this._makePrune(e,o,a))):[]})}_handlePrune(e,r){let i=this.score.score(e);r.forEach(({topicID:n,backoff:s,peers:a})=>{if(!n)return;let o=this.mesh.get(n);if(!!o&&(this.log("PRUNE: Remove mesh link to %s in %s",e,n),this.score.prune(e,n),o.delete(e),typeof s=="number"&&s>0?this._doAddBackoff(e,n,s*1e3):this._addBackoff(e,n),a&&a.length)){if(i<this._options.scoreThresholds.acceptPXThreshold){this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",e,i,n);return}this._pxConnect(a)}})}_addBackoff(e,r){this._doAddBackoff(e,r,ne.GossipsubPruneBackoff)}_doAddBackoff(e,r,i){let n=this.backoff.get(r);n||(n=new Map,this.backoff.set(r,n));let s=this._now()+i;(n.get(e)||0)<s&&n.set(e,s)}_applyIwantPenalties(){this.gossipTracer.getBrokenPromises().forEach((e,r)=>{this.log("peer %s didn't follow up in %d IWANT requests; adding penalty",r,e),this.score.addPenalty(r,e)})}_clearBackoff(){if(this.heartbeatTicks%ne.GossipsubPruneBackoffTicks!=0)return;let e=this._now();this.backoff.forEach((r,i)=>{r.forEach((n,s)=>{n<e&&r.delete(s)}),r.size===0&&this.backoff.delete(i)})}_directConnect(){if(this.heartbeatTicks%ne.GossipsubDirectConnectTicks!=0)return;let e=[];this.direct.forEach(r=>{let i=this.peers.get(r);(!i||!i.isWritable)&&e.push(r)}),e.length&&e.forEach(r=>{this._connect(r)})}_pxConnect(e){return Ct(this,void 0,void 0,function*(){e.length>ne.GossipsubPrunePeers&&(Ze.shuffle(e),e=e.slice(0,ne.GossipsubPrunePeers));let r=[];yield Promise.all(e.map(i=>Ct(this,void 0,void 0,function*(){if(!i.peerID)return;let s=Bf.createFromBytes(i.peerID).toB58String();if(!this.peers.has(s)){if(!i.signedPeerRecord){r.push(s);return}try{let a=yield pT.openAndCertify(i.signedPeerRecord,"libp2p-peer-record"),o=a.peerId.toB58String();if(s!==o){this.log("bogus peer record obtained through px: peer ID %s doesn't match expected peer %s",o,s);return}if(!this._libp2p.peerStore.addressBook.consumePeerRecord(a)){this.log("bogus peer record obtained through px: could not add peer record to address book");return}r.push(s)}catch(a){this.log("bogus peer record obtained through px: invalid signature or not a peer record")}}}))),!!r.length&&r.forEach(i=>this._connect(i))})}start(){let e=Object.create(null,{start:{get:()=>super.start}});return Ct(this,void 0,void 0,function*(){yield e.start.call(this),this.heartbeat.start(),this.score.start(),this._directPeerInitial=setTimeout(()=>{this.direct.forEach(r=>{this._connect(r)})},ne.GossipsubDirectConnectInitialDelay)})}stop(){let e=Object.create(null,{stop:{get:()=>super.stop}});return Ct(this,void 0,void 0,function*(){yield e.stop.call(this),this.heartbeat.stop(),this.score.stop(),this.mesh=new Map,this.fanout=new Map,this.lastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.gossipTracer.clear(),this.seenCache.clear(),this.fastMsgIdCache&&this.fastMsgIdCache.clear(),clearTimeout(this._directPeerInitial)})}_connect(e){this.log("Initiating connection with %s",e),this._libp2p.dialProtocol(Bf.createFromB58String(e),this.multicodecs)}subscribe(e){super.subscribe(e),this.join(e)}unsubscribe(e){super.unsubscribe(e),this.leave(e)}join(e){if(!this.started)throw new Error("Gossipsub has not started");this.log("JOIN %s",e);let r=this.fanout.get(e);if(r)r.forEach(i=>{this.score.score(i)<0&&r.delete(i)}),r.size<this._options.D&&_0.getGossipPeers(this,e,this._options.D-r.size,i=>!r.has(i)&&!this.direct.has(i)&&this.score.score(i)>=0).forEach(i=>r.add(i)),this.mesh.set(e,r),this.fanout.delete(e),this.lastpub.delete(e);else{let i=_0.getGossipPeers(this,e,this._options.D,n=>!this.direct.has(n)&&this.score.score(n)>=0);this.mesh.set(e,i)}this.mesh.get(e).forEach(i=>{this.log("JOIN: Add mesh link to %s in %s",i,e),this._sendGraft(i,e)})}leave(e){if(!this.started)throw new Error("Gossipsub has not started");this.log("LEAVE %s",e);let r=this.mesh.get(e);r&&(r.forEach(i=>{this.log("LEAVE: Remove mesh link to %s in %s",i,e),this._sendPrune(i,e)}),this.mesh.delete(e))}getCanonicalMsgIdStr(e){var r,i;return Ct(this,void 0,void 0,function*(){return this.fastMsgIdCache&&this.getFastMsgIdStr?(i=(r=this.getCachedMsgIdStr(e))!==null&&r!==void 0?r:this.fastMsgIdCache.get(this.getFastMsgIdStr(e)))!==null&&i!==void 0?i:Ze.messageIdToString(yield this.getMsgId(e)):Ze.messageIdToString(yield this.getMsgId(e))})}getCachedMsgIdStr(e){}_publish(e){return Ct(this,void 0,void 0,function*(){let r=yield this.getCanonicalMsgIdStr(e);e.receivedFrom!==this.peerId.toB58String()&&(this.score.deliverMessage(e,r),this.gossipTracer.deliverMessage(r)),this.seenCache.put(r),this.messageCache.put(e,r);let i=new Set;e.topicIDs.forEach(s=>{let a=this.topics.get(s);if(!!a)if(this._options.floodPublish&&e.from===this.peerId.toB58String())a.forEach(o=>{(this.direct.has(o)||this.score.score(o)>=this._options.scoreThresholds.publishThreshold)&&i.add(o)});else{this.direct.forEach(f=>{i.add(f)}),a.forEach(f=>{let u=this.score.score(f),c=this.peers.get(f);!c||c.protocol===ne.FloodsubID&&u>=this._options.scoreThresholds.publishThreshold&&i.add(f)});let o=this.mesh.get(s);if(!o||!o.size){if(o=this.fanout.get(s),!o){let f=_0.getGossipPeers(this,s,this._options.D,u=>this.score.score(u)>=this._options.scoreThresholds.publishThreshold);f.size>0?(o=f,this.fanout.set(s,f)):o=new Set}this.lastpub.set(s,this._now())}o.forEach(f=>{i.add(f)})}});let n=Ze.createGossipRpc([Sf.utils.normalizeOutRpcMessage(e)]);i.forEach(s=>{s!==e.from&&this._sendRpc(s,n)})})}_sendGraft(e,r){let i=[{topicID:r}],n=Ze.createGossipRpc([],{graft:i});this._sendRpc(e,n)}_sendPrune(e,r){return Ct(this,void 0,void 0,function*(){let i=[yield this._makePrune(e,r,this._options.doPX)],n=Ze.createGossipRpc([],{prune:i});this._sendRpc(e,n)})}_sendRpc(e,r){let i=this.peers.get(e);if(!i||!i.isWritable)return;let n=this.control.get(e);n&&(this._piggybackControl(e,r,n),this.control.delete(e));let s=this.gossip.get(e);s&&(this._piggybackGossip(e,r,s),this.gossip.delete(e)),i.write(_f.RPC.encode(r).finish())}_piggybackControl(e,r,i){let n=(i.graft||[]).filter(({topicID:a})=>(a&&this.mesh.get(a)||new Set).has(e)),s=(i.prune||[]).filter(({topicID:a})=>!(a&&this.mesh.get(a)||new Set).has(e));!n.length&&!s.length||(r.control?(r.control.graft=r.control.graft&&r.control.graft.concat(n),r.control.prune=r.control.prune&&r.control.prune.concat(s)):r.control={ihave:[],iwant:[],graft:n,prune:s})}_piggybackGossip(e,r,i){r.control||(r.control={ihave:[],iwant:[],graft:[],prune:[]}),r.control.ihave=i}_sendGraftPrune(e,r,i){return Ct(this,void 0,void 0,function*(){let n=this._options.doPX;for(let[s,a]of e){let o=a.map(h=>({topicID:h})),f=[],u=r.get(s);u&&(f=yield Promise.all(u.map(h=>this._makePrune(s,h,n&&!i.get(s)))),r.delete(s));let c=Ze.createGossipRpc([],{graft:o,prune:f});this._sendRpc(s,c)}for(let[s,a]of r){let o=yield Promise.all(a.map(u=>this._makePrune(s,u,n&&!i.get(s)))),f=Ze.createGossipRpc([],{prune:o});this._sendRpc(s,f)}})}_emitGossip(e,r){let i=this.messageCache.getGossipIDs(e);if(!i.length)return;Ze.shuffle(i),i.length>ne.GossipsubMaxIHaveLength&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",i.length);let n=[],s=this.topics.get(e);if(!s)return;s.forEach(f=>{let u=this.peers.get(f);!u||!r.has(f)&&!this.direct.has(f)&&Ze.hasGossipProtocol(u.protocol)&&this.score.score(f)>=this._options.scoreThresholds.gossipThreshold&&n.push(f)});let a=this._options.Dlazy,o=ne.GossipsubGossipFactor*n.length;o>a&&(a=o),a>n.length?a=n.length:Ze.shuffle(n),n.slice(0,a).forEach(f=>{let u=i;i.length>ne.GossipsubMaxIHaveLength&&(u=Ze.shuffle(u.slice()).slice(0,ne.GossipsubMaxIHaveLength)),this._pushGossip(f,{topicID:e,messageIDs:u})})}_flush(){for(let[e,r]of this.gossip.entries()){this.gossip.delete(e);let i=Ze.createGossipRpc([],{ihave:r});this._sendRpc(e,i)}for(let[e,r]of this.control.entries()){this.control.delete(e);let i=Ze.createGossipRpc([],{graft:r.graft,prune:r.prune});this._sendRpc(e,i)}}_pushGossip(e,r){this.log("Add gossip to %s",e);let i=this.gossip.get(e)||[];this.gossip.set(e,i.concat(r))}_now(){return Date.now()}_makePrune(e,r,i){return Ct(this,void 0,void 0,function*(){if(this.peers.get(e).protocol===ne.GossipsubIDv10)return{topicID:r,peers:[]};let n=ne.GossipsubPruneBackoff/1e3;if(!i)return{topicID:r,peers:[],backoff:n};let s=_0.getGossipPeers(this,r,ne.GossipsubPrunePeers,o=>o!==e&&this.score.score(o)>=0),a=yield Promise.all(Array.from(s).map(o=>Ct(this,void 0,void 0,function*(){let f=Bf.createFromB58String(o);return{peerID:f.toBytes(),signedPeerRecord:yield this._libp2p.peerStore.addressBook.getRawEnvelope(f)}})));return{topicID:r,peers:a,backoff:n}})}};Cf.multicodec=ne.GossipsubIDv11;wb.exports=Cf});return dT();})();
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */
/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */
return Libp2pGossipsub}));
