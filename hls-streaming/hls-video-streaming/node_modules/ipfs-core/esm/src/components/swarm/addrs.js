import { withTimeoutOption } from 'ipfs-core-utils/with-timeout-option';
export function createAddrs({network}) {
  async function addrs(options = {}) {
    const peers = [];
    const {libp2p} = await network.use(options);
    for await (const peer of libp2p.peerStore.getPeers()) {
      peers.push({
        id: peer.id.toB58String(),
        addrs: peer.addresses.map(mi => mi.multiaddr)
      });
    }
    return peers;
  }
  return withTimeoutOption(addrs);
}