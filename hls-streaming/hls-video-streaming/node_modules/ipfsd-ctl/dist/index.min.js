(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.IpfsdCtl = factory()}(typeof self !== 'undefined' ? self : this, function () {
var IpfsdCtl=(()=>{var Rs=Object.defineProperty;var D=(t,e)=>()=>(t&&(e=t(t=0)),e),d=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ue=(t,e)=>{for(var r in e)Rs(t,r,{get:e[r],enumerable:!0})};var jt=d((pc,Dt)=>{"use strict";Dt.exports=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}});var de=d((Nt,Mt)=>{"use strict";var Ae=jt(),{hasOwnProperty:zt}=Object.prototype,{propertyIsEnumerable:Us}=Object,W=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0}),Is=Nt,Pt={concatArrays:!1,ignoreUndefined:!1},Ee=t=>{let e=[];for(let r in t)zt.call(t,r)&&e.push(r);if(Object.getOwnPropertySymbols){let r=Object.getOwnPropertySymbols(t);for(let n of r)Us.call(t,n)&&e.push(n)}return e};function J(t){return Array.isArray(t)?$s(t):Ae(t)?Ds(t):t}function $s(t){let e=t.slice(0,0);return Ee(t).forEach(r=>{W(e,r,J(t[r]))}),e}function Ds(t){let e=Object.getPrototypeOf(t)===null?Object.create(null):{};return Ee(t).forEach(r=>{W(e,r,J(t[r]))}),e}var Bt=(t,e,r,n)=>(r.forEach(s=>{typeof e[s]=="undefined"&&n.ignoreUndefined||(s in t&&t[s]!==Object.getPrototypeOf(t)?W(t,s,Je(t[s],e[s],n)):W(t,s,J(e[s])))}),t),js=(t,e,r)=>{let n=t.slice(0,0),s=0;return[t,e].forEach(o=>{let i=[];for(let a=0;a<o.length;a++)!zt.call(o,a)||(i.push(String(a)),o===t?W(n,s++,o[a]):W(n,s++,J(o[a])));n=Bt(n,o,Ee(o).filter(a=>!i.includes(a)),r)}),n};function Je(t,e,r){return r.concatArrays&&Array.isArray(t)&&Array.isArray(e)?js(t,e,r):!Ae(e)||!Ae(t)?J(e):Bt(t,e,Ee(e),r)}Mt.exports=function(...t){let e=Je(J(Pt),this!==Is&&this||{},Pt),r={_:{}};for(let n of t)if(n!==void 0){if(!Ae(n))throw new TypeError("`"+n+"` is not an Option Object");r=Je(r,{_:n},e)}return r._}});var Lt,kt=D(()=>{Lt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"});var Vt={};ue(Vt,{customAlphabet:()=>Ns,customRandom:()=>Ht,nanoid:()=>Ms,random:()=>_t,urlAlphabet:()=>Lt});var _t,Ht,Ns,Ms,Gt=D(()=>{kt();_t=t=>crypto.getRandomValues(new Uint8Array(t)),Ht=(t,e,r)=>{let n=(2<<Math.log(t.length-1)/Math.LN2)-1,s=-~(1.6*n*e/t.length);return()=>{let o="";for(;;){let i=r(s),a=s;for(;a--;)if(o+=t[i[a]&n]||"",o.length===e)return o}}},Ns=(t,e)=>Ht(t,e,_t),Ms=(t=21)=>{let e="",r=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let n=r[t]&63;n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n<63?e+="_":e+="-"}return e}});var Ke=d((wc,Wt)=>{"use strict";var{nanoid:zs}=(Gt(),Vt),Ce=t=>new Promise((e,r)=>{let n=self.indexedDB.deleteDatabase(t);n.onerror=s=>r(s),n.onsuccess=()=>e()}),Ps=async t=>{await Ce(t),await Ce(t+"/keys"),await Ce(t+"/blocks"),await Ce(t+"/datastore")},Bs=t=>new Promise((e,r)=>{let n=self.indexedDB.open(t),s=!0;n.onerror=()=>r(n.error),n.onsuccess=function(){n.result.close(),s||self.indexedDB.deleteDatabase(t),e(s)},n.onupgradeneeded=function(){s=!1}}),Ls=t=>"ipfs",ks=t=>null,Vs=(t="")=>`${t}_ipfs_${zs()}`;Wt.exports={removeRepo:Ps,repoExists:Bs,defaultRepo:Ls,checkForRunningApi:ks,tmpDir:Vs}});var Kt=d((gc,Jt)=>{function _s(){return typeof window!="undefined"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process!="undefined"&&typeof process.versions=="object"&&!!process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0}Jt.exports=_s});var Te=d((yc,Qt)=>{"use strict";var Hs=Kt(),Se=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,le=Hs(),Gs=Se&&!le,Ws=le&&!Se,Js=le&&Se,Ks=typeof process!="undefined"&&typeof process.release!="undefined"&&process.release.name==="node"&&!le,Qs=typeof importScripts=="function"&&typeof self!="undefined"&&typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope,Xs=typeof process!="undefined"&&typeof process.env!="undefined"&&!1;Qt.exports={isTest:Xs,isElectron:le,isElectronMain:Ws,isElectronRenderer:Js,isNode:Ks,isBrowser:Gs,isWebWorker:Qs,isEnvWithDom:Se}});var Qe=d(qe=>{"use strict";var Xt=class extends Error{constructor(e="Request timed out"){super(e);this.name="TimeoutError"}};qe.TimeoutError=Xt;var Zt=class extends Error{constructor(e="The operation was aborted."){super(e);this.name="AbortError"}};qe.AbortError=Zt;var Yt=class extends Error{constructor(e){super(e.statusText);this.name="HTTPError",this.response=e}};qe.HTTPError=Yt});var er=d(()=>{});var pe=d((K,tr)=>{"use strict";var Zs=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof P!="undefined")return P;throw new Error("unable to locate global object")},P=Zs();tr.exports=K=P.fetch;P.fetch&&(K.default=P.fetch.bind(P));K.Headers=P.Headers;K.Request=P.Request;K.Response=P.Response});var rr=d((xc,Xe)=>{"use strict";globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?Xe.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:Xe.exports={default:pe().default,Headers:pe().Headers,Request:pe().Request,Response:pe().Response}});var nr=d((Ac,Ze)=>{"use strict";var{isElectronMain:Ys}=Te();Ys?Ze.exports=er():Ze.exports=rr()});var ar=d((Ec,sr)=>{"use strict";var{TimeoutError:eo,AbortError:to}=Qe(),{Response:or,Request:ro,Headers:Ye,default:no}=nr(),oo=(t,e={})=>{let r=new XMLHttpRequest;r.open(e.method||"GET",t.toString(),!0);let{timeout:n,headers:s}=e;if(n&&n>0&&n<Infinity&&(r.timeout=n),e.overrideMimeType!=null&&r.overrideMimeType(e.overrideMimeType),s)for(let[o,i]of new Ye(s))r.setRequestHeader(o,i);return e.signal&&(e.signal.onabort=()=>r.abort()),e.onUploadProgress&&(r.upload.onprogress=e.onUploadProgress),r.responseType="arraybuffer",new Promise((o,i)=>{let a=g=>{switch(g.type){case"error":{o(or.error());break}case"load":{o(new ir(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:so(r.getAllResponseHeaders())}));break}case"timeout":{i(new eo);break}case"abort":{i(new to);break}default:break}};r.onerror=a,r.onload=a,r.ontimeout=a,r.onabort=a,r.send(e.body)})},io=no,ao=(t,e={})=>e.onUploadProgress!=null?oo(t,e):io(t,e),so=t=>{let e=new Ye;for(let r of t.trim().split(/[\r\n]+/)){let n=r.indexOf(": ");n>0&&e.set(r.slice(0,n),r.slice(n+1))}return e},ir=class extends or{constructor(e,r,n){super(r,n);Object.defineProperty(this,"url",{value:e})}};sr.exports={fetch:ao,Request:ro,Headers:Ye}});var et=d((Cc,cr)=>{"use strict";var co=typeof navigator!="undefined"&&navigator.product==="ReactNative";function uo(){return co?"http://localhost":self.location.protocol+"//"+self.location.host}var fe=self.URL,ur=uo(),dr=class{constructor(e="",r=ur){this.super=new fe(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return fe.createObjectURL(e)}static revokeObjectURL(e){fe.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function lo(t){if(typeof t=="string")return new fe(t).toString();if(!(t instanceof fe)){let e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",s=t.protocol?t.protocol+"//":"",o=t.host||"",i=t.hostname||"",a=t.search||(t.query?"?"+t.query:""),g=t.hash||"",A=t.pathname||"",u=t.path||A+a;return`${s}${e||r}${o||i+n}${u}${g}`}}cr.exports={URLWithLegacySupport:dr,URLSearchParams:self.URLSearchParams,defaultBase:ur,format:lo}});var fr=d((Sc,lr)=>{"use strict";var{URLWithLegacySupport:pr,format:po}=et();lr.exports=(t,e={},r={},n)=>{let s=e.protocol?e.protocol.replace(":",""):"http";s=(r[s]||n||s)+":";let o;try{o=new pr(t)}catch(a){o={}}let i=Object.assign({},e,{protocol:s||o.protocol,host:e.host||o.host});return new pr(t,po(i)).toString()}});var wr=d((Tc,hr)=>{"use strict";var{URLWithLegacySupport:fo,format:ho,URLSearchParams:wo,defaultBase:go}=et(),yo=fr();hr.exports={URL:fo,URLSearchParams:wo,format:ho,relative:yo,defaultBase:go}});var yr=d((qc,Oe)=>{"use strict";var{AbortController:gr,AbortSignal:bo}=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;Oe.exports=gr;Oe.exports.AbortSignal=bo;Oe.exports.default=gr});var tt=d((Oc,br)=>{"use strict";var Fe;globalThis.AbortController&&globalThis.AbortSignal?Fe=globalThis:Fe=yr();br.exports={AbortController:Fe.AbortController,AbortSignal:Fe.AbortSignal}});var vr=d((Fc,rt)=>{var{AbortController:mo}=tt();function mr(t){let e=new mo;function r(){e.abort();for(let n of t)!n||!n.removeEventListener||n.removeEventListener("abort",r)}for(let n of t)if(!(!n||!n.addEventListener)){if(n.aborted){r();break}n.addEventListener("abort",r)}return e.signal}rt.exports=mr;rt.exports.anySignal=mr});var st=d((Rc,xr)=>{"use strict";var{fetch:vo,Request:xo,Headers:Ao}=ar(),{TimeoutError:nt,HTTPError:Ar}=Qe(),Er=de().bind({ignoreUndefined:!0}),{URL:Cr,URLSearchParams:Sr}=wr(),{AbortController:Eo}=tt(),Co=vr(),So=(t,e,r)=>{if(e===void 0)return t;let n=Date.now(),s=()=>Date.now()-n>=e;return new Promise((o,i)=>{let a=setTimeout(()=>{s()&&(i(new nt),r.abort())},e),g=A=>l=>{if(clearTimeout(a),s()){i(new nt);return}A(l)};t.then(g(o),g(i))})},To={throwHttpErrors:!0,credentials:"same-origin"},O=class{constructor(e={}){this.opts=Er(To,e)}async fetch(e,r={}){let n=Er(this.opts,r),s=new Ao(n.headers);if(typeof e!="string"&&!(e instanceof Cr||e instanceof xo))throw new TypeError("`resource` must be a string, URL, or Request");let o=new Cr(e.toString(),n.base),{searchParams:i,transformSearchParams:a,json:g}=n;i&&(typeof a=="function"?o.search=a(new Sr(n.searchParams)):o.search=new Sr(n.searchParams)),g&&(n.body=JSON.stringify(n.json),s.set("content-type","application/json"));let A=new Eo,u=Co([A.signal,n.signal]),l=await So(vo(o.toString(),{...n,signal:u,timeout:void 0,headers:s}),n.timeout,A);if(!l.ok&&n.throwHttpErrors)throw n.handleError&&await n.handleError(l),new Ar(l);return l.iterator=function(){return Tr(l.body)},l.ndjson=async function*(){for await(let w of qo(l.iterator()))r.transform?yield r.transform(w):yield w},l}post(e,r={}){return this.fetch(e,{...r,method:"POST"})}get(e,r={}){return this.fetch(e,{...r,method:"GET"})}put(e,r={}){return this.fetch(e,{...r,method:"PUT"})}delete(e,r={}){return this.fetch(e,{...r,method:"DELETE"})}options(e,r={}){return this.fetch(e,{...r,method:"OPTIONS"})}},qo=async function*(t){let e=new TextDecoder,r="";for await(let n of t){r+=e.decode(n,{stream:!0});let s=r.split(/\r?\n/);for(let o=0;o<s.length-1;o++){let i=s[o].trim();i.length>0&&(yield JSON.parse(i))}r=s[s.length-1]}r+=e.decode(),r=r.trim(),r.length!==0&&(yield JSON.parse(r))},Tr=t=>{if(Ro(t)){let e=t[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:e.next.bind(e),return(r){return t.destroy(),typeof e.return=="function"?e.return():Promise.resolve({done:!0,value:r})}}}}}if(Fo(t)){let e=t.getReader();return async function*(){try{for(;;){let{done:r,value:n}=await e.read();if(r)return;n&&(yield n)}}finally{e.releaseLock()}}()}if(Oo(t))return t;throw new TypeError("Body can't be converted to AsyncIterable")},Oo=t=>typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function",Fo=t=>t&&typeof t.getReader=="function",Ro=t=>Object.prototype.hasOwnProperty.call(t,"readable")&&Object.prototype.hasOwnProperty.call(t,"writable");O.HTTPError=Ar;O.TimeoutError=nt;O.streamToAsyncIterator=Tr;O.post=(t,e)=>new O(e).post(t,e);O.get=(t,e)=>new O(e).get(t,e);O.put=(t,e)=>new O(e).put(t,e);O.delete=(t,e)=>new O(e).delete(t,e);O.options=(t,e)=>new O(e).options(t,e);xr.exports=O});var Fr=d((Uc,qr)=>{"use strict";var Or="[a-fA-F\\d:]",V=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${Or})|(?<=${Or})(?=\\s|$))`:"",j="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",C="[a-fA-F\\d]{1,4}",Re=`
(?:
(?:${C}:){7}(?:${C}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${C}:){6}(?:${j}|:${C}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${C}:){5}(?::${j}|(?::${C}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${C}:){4}(?:(?::${C}){0,1}:${j}|(?::${C}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${C}:){3}(?:(?::${C}){0,2}:${j}|(?::${C}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${C}:){2}(?:(?::${C}){0,3}:${j}|(?::${C}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${C}:){1}(?:(?::${C}){0,4}:${j}|(?::${C}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${C}){0,5}:${j}|(?::${C}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),Uo=new RegExp(`(?:^${j}$)|(?:^${Re}$)`),Io=new RegExp(`^${j}$`),$o=new RegExp(`^${Re}$`),ot=t=>t&&t.exact?Uo:new RegExp(`(?:${V(t)}${j}${V(t)})|(?:${V(t)}${Re}${V(t)})`,"g");ot.v4=t=>t&&t.exact?Io:new RegExp(`${V(t)}${j}${V(t)}`,"g");ot.v6=t=>t&&t.exact?$o:new RegExp(`${V(t)}${Re}${V(t)}`,"g");qr.exports=ot});var Ur=d((Ic,Rr)=>{"use strict";var it=Fr(),Q=t=>it({exact:!0}).test(t);Q.v4=t=>it.v4({exact:!0}).test(t);Q.v6=t=>it.v6({exact:!0}).test(t);Q.version=t=>Q(t)?Q.v4(t)?4:6:void 0;Rr.exports=Q});var $r=d(($c,Ir)=>{"use strict";function Do(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(e[o]!==255)throw new TypeError(s+" is ambiguous");e[o]=n}var i=t.length,a=t.charAt(0),g=Math.log(i)/Math.log(256),A=Math.log(256)/Math.log(i);function u(c){if(c instanceof Uint8Array||(ArrayBuffer.isView(c)?c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength):Array.isArray(c)&&(c=Uint8Array.from(c))),!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length===0)return"";for(var f=0,m=0,p=0,h=c.length;p!==h&&c[p]===0;)p++,f++;for(var v=(h-p)*A+1>>>0,y=new Uint8Array(v);p!==h;){for(var x=c[p],S=0,b=v-1;(x!==0||S<m)&&b!==-1;b--,S++)x+=256*y[b]>>>0,y[b]=x%i>>>0,x=x/i>>>0;if(x!==0)throw new Error("Non-zero carry");m=S,p++}for(var E=v-m;E!==v&&y[E]===0;)E++;for(var I=a.repeat(f);E<v;++E)I+=t.charAt(y[E]);return I}function l(c){if(typeof c!="string")throw new TypeError("Expected String");if(c.length===0)return new Uint8Array;var f=0;if(c[f]!==" "){for(var m=0,p=0;c[f]===a;)m++,f++;for(var h=(c.length-f)*g+1>>>0,v=new Uint8Array(h);c[f];){var y=e[c.charCodeAt(f)];if(y===255)return;for(var x=0,S=h-1;(y!==0||x<p)&&S!==-1;S--,x++)y+=i*v[S]>>>0,v[S]=y%256>>>0,y=y/256>>>0;if(y!==0)throw new Error("Non-zero carry");p=x,f++}if(c[f]!==" "){for(var b=h-p;b!==h&&v[b]===0;)b++;for(var E=new Uint8Array(m+(h-b)),I=m;b!==h;)E[I++]=v[b++];return E}}}function w(c){var f=l(c);if(f)return f;throw new Error("Non-base"+i+" character")}return{encode:u,decodeUnsafe:l,decode:w}}Ir.exports=Do});var Ue=d((Dc,Dr)=>{"use strict";var jo=new TextDecoder,No=t=>jo.decode(t),Mo=new TextEncoder,zo=t=>Mo.encode(t);function Po(t,e){let r=new Uint8Array(e),n=0;for(let s of t)r.set(s,n),n+=s.length;return r}Dr.exports={decodeText:No,encodeText:zo,concat:Po}});var Mr=d((jc,jr)=>{"use strict";var{encodeText:Bo}=Ue(),Nr=class{constructor(e,r,n,s){this.name=e,this.code=r,this.codeBuf=Bo(this.code),this.alphabet=s,this.codec=n(s)}encode(e){return this.codec.encode(e)}decode(e){for(let r of e)if(this.alphabet&&this.alphabet.indexOf(r)<0)throw new Error(`invalid character '${r}' in '${e}'`);return this.codec.decode(e)}};jr.exports=Nr});var Pr=d((Nc,zr)=>{"use strict";var Lo=(t,e,r)=>{let n={};for(let A=0;A<e.length;++A)n[e[A]]=A;let s=t.length;for(;t[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),i=0,a=0,g=0;for(let A=0;A<s;++A){let u=n[t[A]];if(u===void 0)throw new SyntaxError("Invalid character "+t[A]);a=a<<r|u,i+=r,i>=8&&(i-=8,o[g++]=255&a>>i)}if(i>=r||255&a<<8-i)throw new SyntaxError("Unexpected end of data");return o},ko=(t,e,r)=>{let n=e[e.length-1]==="=",s=(1<<r)-1,o="",i=0,a=0;for(let g=0;g<t.length;++g)for(a=a<<8|t[g],i+=8;i>r;)i-=r,o+=e[s&a>>i];if(i&&(o+=e[s&a<<r-i]),n)for(;o.length*r&7;)o+="=";return o},Vo=t=>e=>({encode(r){return ko(r,e,t)},decode(r){return Lo(r,e,t)}});zr.exports={rfc4648:Vo}});var Vr=d((Mc,Br)=>{"use strict";var he=$r(),_o=Mr(),{rfc4648:T}=Pr(),{decodeText:Ho,encodeText:Go}=Ue(),Wo=()=>({encode:Ho,decode:Go}),Lr=[["identity","\0",Wo,""],["base2","0",T(1),"01"],["base8","7",T(3),"01234567"],["base10","9",he,"0123456789"],["base16","f",T(4),"0123456789abcdef"],["base16upper","F",T(4),"0123456789ABCDEF"],["base32hex","v",T(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",T(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",T(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",T(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",T(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",T(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",T(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",T(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",T(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",he,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",he,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",he,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",he,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",T(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",T(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",T(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",T(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],kr=Lr.reduce((t,e)=>(t[e[0]]=new _o(e[0],e[1],e[2],e[3]),t),{}),Jo=Lr.reduce((t,e)=>(t[e[1]]=kr[e[0]],t),{});Br.exports={names:kr,codes:Jo}});var at=d((B,_r)=>{"use strict";var X=Vr(),{encodeText:Ko,decodeText:Ie,concat:Hr}=Ue();function Xo(t,e){if(!e)throw new Error("requires an encoded Uint8Array");let{name:r,codeBuf:n}=H(t);return Qo(r,e),Hr([n,e],n.length+e.length)}function Zo(t,e){let r=H(t),n=Ko(r.encode(e));return Hr([r.codeBuf,n],r.codeBuf.length+n.length)}function Yo(t){t instanceof Uint8Array&&(t=Ie(t));let e=t[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(e)&&(t=t.toLowerCase()),H(t[0]).decode(t.substring(1))}function ei(t){if(t instanceof Uint8Array&&(t=Ie(t)),Object.prototype.toString.call(t)!=="[object String]")return!1;try{return H(t[0]).name}catch(e){return!1}}function Qo(t,e){H(t).decode(Ie(e))}function H(t){if(Object.prototype.hasOwnProperty.call(X.names,t))return X.names[t];if(Object.prototype.hasOwnProperty.call(X.codes,t))return X.codes[t];throw new Error(`Unsupported encoding: ${t}`)}function ti(t){return t instanceof Uint8Array&&(t=Ie(t)),H(t[0])}B=_r.exports=Xo;B.encode=Zo;B.decode=Yo;B.isEncoded=ei;B.encoding=H;B.encodingFromData=ti;var ri=Object.freeze(X.names),ni=Object.freeze(X.codes);B.names=ri;B.codes=ni});var we=d((zc,Gr)=>{"use strict";var{encoding:si}=at(),oi=new TextDecoder("utf8");function ii(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e}function ai(t,e="utf8"){return e==="utf8"||e==="utf-8"?oi.decode(t):e==="ascii"?ii(t):si(e).encode(t)}Gr.exports=ai});var Xr=d((Pc,Wr)=>{"use strict";var ct=Ur(),Jr=we(),ci=ct,ut=ct.v4,Kr=ct.v6,Qr=function(t,e,r){r=~~r;let n;if(ut(t))n=e||new Uint8Array(r+4),t.split(/\./g).map(function(s){n[r++]=parseInt(s,10)&255});else if(Kr(t)){let s=t.split(":",8),o;for(o=0;o<s.length;o++){let i=ut(s[o]),a;i&&(a=Qr(s[o]),s[o]=Jr(a.slice(0,2),"base16")),a&&++o<8&&s.splice(o,0,Jr(a.slice(2,4),"base16"))}if(s[0]==="")for(;s.length<8;)s.unshift("0");else if(s[s.length-1]==="")for(;s.length<8;)s.push("0");else if(s.length<8){for(o=0;o<s.length&&s[o]!=="";o++);let i=[o,"1"];for(o=9-s.length;o>0;o--)i.push("0");s.splice.apply(s,i)}for(n=e||new Uint8Array(r+16),o=0;o<s.length;o++){let i=parseInt(s[o],16);n[r++]=i>>8&255,n[r++]=i&255}}if(!n)throw Error("Invalid ip address: "+t);return n},ui=function(t,e,r){e=~~e,r=r||t.length-e;let n=[],s,o=new DataView(t.buffer);if(r===4){for(let i=0;i<r;i++)n.push(t[e+i]);s=n.join(".")}else if(r===16){for(let i=0;i<r;i+=2)n.push(o.getUint16(e+i).toString(16));s=n.join(":"),s=s.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),s=s.replace(/:{3,4}/,"::")}return s};Wr.exports={isIP:ci,isV4:ut,isV6:Kr,toBytes:Qr,toString:ui}});var $e=d((Bc,Zr)=>{"use strict";function R(t){if(typeof t=="number"){if(R.codes[t])return R.codes[t];throw new Error("no protocol with code: "+t)}else if(typeof t=="string"){if(R.names[t])return R.names[t];throw new Error("no protocol with name: "+t)}throw new Error("invalid protocol id type: "+t)}var $=-1;R.lengthPrefixedVarSize=$;R.V=$;R.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,$,"ip6zone"],[53,$,"dns","resolvable"],[54,$,"dns4","resolvable"],[55,$,"dns6","resolvable"],[56,$,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,$,"unix",!1,"path"],[421,$,"ipfs"],[421,$,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,$,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,$,"memory"]];R.names={};R.codes={};R.table.map(t=>{let e=Yr.apply(null,t);return R.codes[e.code]=e,R.names[e.name]=e,null});R.object=Yr;function Yr(t,e,r,n,s){return{code:t,size:e,name:r,resolvable:Boolean(n),path:Boolean(s)}}Zr.exports=R});function en(t,e,r){e=e||[],r=r||0;for(var n=r;t>=fi;)e[r++]=t&255|tn,t/=128;for(;t&pi;)e[r++]=t&255|tn,t>>>=7;return e[r]=t|0,en.bytes=r-n+1,e}function dt(t,e){var r=0,e=e||0,n=0,s=e,o,i=t.length;do{if(s>=i)throw dt.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=n<28?(o&rn)<<n:(o&rn)*Math.pow(2,n),n+=7}while(o>=wi);return dt.bytes=s-e,r}var di,tn,li,pi,fi,hi,wi,rn,gi,yi,bi,mi,vi,xi,Ai,Ei,Ci,Si,Ti,qi,ge,nn=D(()=>{di=en,tn=128,li=127,pi=~li,fi=Math.pow(2,31);hi=dt,wi=128,rn=127;gi=Math.pow(2,7),yi=Math.pow(2,14),bi=Math.pow(2,21),mi=Math.pow(2,28),vi=Math.pow(2,35),xi=Math.pow(2,42),Ai=Math.pow(2,49),Ei=Math.pow(2,56),Ci=Math.pow(2,63),Si=function(t){return t<gi?1:t<yi?2:t<bi?3:t<mi?4:t<vi?5:t<xi?6:t<Ai?7:t<Ei?8:t<Ci?9:10},Ti={encode:di,decode:hi,encodingLength:Si},qi=Ti,ge=qi});var ye,Z,Y,lt=D(()=>{nn();ye=t=>[ge.decode(t),ge.decode.bytes],Z=(t,e,r=0)=>(ge.encode(t,e,r),e),Y=t=>ge.encodingLength(t)});var Hc,sn,ee,De=D(()=>{Hc=new Uint8Array(0),sn=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},ee=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}});var on={};ue(on,{Digest:()=>te,create:()=>pt,decode:()=>ft,equals:()=>ht});var pt,ft,ht,te,wt=D(()=>{De();lt();pt=(t,e)=>{let r=e.byteLength,n=Y(t),s=n+Y(r),o=new Uint8Array(s+r);return Z(t,o,0),Z(r,o,n),o.set(e,s),new te(t,r,e,o)},ft=t=>{let e=ee(t),[r,n]=ye(e),[s,o]=ye(e.subarray(n)),i=e.subarray(n+o);if(i.byteLength!==s)throw new Error("Incorrect length");return new te(r,s,i,e)},ht=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&sn(t.bytes,e.bytes),te=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}}});function Oi(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(e[o]!==255)throw new TypeError(s+" is ambiguous");e[o]=n}var i=t.length,a=t.charAt(0),g=Math.log(i)/Math.log(256),A=Math.log(256)/Math.log(i);function u(c){if(c instanceof Uint8Array||(ArrayBuffer.isView(c)?c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength):Array.isArray(c)&&(c=Uint8Array.from(c))),!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length===0)return"";for(var f=0,m=0,p=0,h=c.length;p!==h&&c[p]===0;)p++,f++;for(var v=(h-p)*A+1>>>0,y=new Uint8Array(v);p!==h;){for(var x=c[p],S=0,b=v-1;(x!==0||S<m)&&b!==-1;b--,S++)x+=256*y[b]>>>0,y[b]=x%i>>>0,x=x/i>>>0;if(x!==0)throw new Error("Non-zero carry");m=S,p++}for(var E=v-m;E!==v&&y[E]===0;)E++;for(var I=a.repeat(f);E<v;++E)I+=t.charAt(y[E]);return I}function l(c){if(typeof c!="string")throw new TypeError("Expected String");if(c.length===0)return new Uint8Array;var f=0;if(c[f]!==" "){for(var m=0,p=0;c[f]===a;)m++,f++;for(var h=(c.length-f)*g+1>>>0,v=new Uint8Array(h);c[f];){var y=e[c.charCodeAt(f)];if(y===255)return;for(var x=0,S=h-1;(y!==0||x<p)&&S!==-1;S--,x++)y+=i*v[S]>>>0,v[S]=y%256>>>0,y=y/256>>>0;if(y!==0)throw new Error("Non-zero carry");p=x,f++}if(c[f]!==" "){for(var b=h-p;b!==h&&v[b]===0;)b++;for(var E=new Uint8Array(m+(h-b)),I=m;b!==h;)E[I++]=v[b++];return E}}}function w(c){var f=l(c);if(f)return f;throw new Error("Non-base"+i+" character")}return{encode:u,decodeUnsafe:l,decode:w}}var Fi,Ri,an,cn=D(()=>{Fi=Oi,Ri=Fi,an=Ri});var un,dn,je,ln,M,Ne,gt=D(()=>{un=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},dn=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseDecode=n}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){let r={[this.prefix]:this,...e.decoders||{[e.prefix]:e}};return new je(r)}},je=class{constructor(e){this.decoders=e}or(e){let r=e.decoders||{[e.prefix]:e};return new je({...this.decoders,...r})}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},ln=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new un(e,r,n),this.decoder=new dn(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},M=({name:t,prefix:e,encode:r,decode:n,alphabet:s})=>Ne({name:t,prefix:e,encode:o=>r(o,s),decode:o=>{for(let i of o)if(s.indexOf(i)<0)throw new Error(`invalid ${t} character`);return n(o,s)}}),Ne=({name:t,prefix:e,encode:r,decode:n})=>new ln(t,e,r,n)});var yt={};ue(yt,{base58btc:()=>z,base58flickr:()=>Ui});var pn,z,Ui,Me=D(()=>{cn();De();gt();pn=t=>{let{encode:e,decode:r}=an(t);return{encode:e,decode:n=>ee(r(n))}},z=Ne({name:"base58btc",prefix:"z",...pn("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")}),Ui=Ne({name:"base58flickr",prefix:"Z",...pn("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ")})});var fn={};ue(fn,{base32:()=>re,base32hex:()=>ji,base32hexpad:()=>Mi,base32hexpadupper:()=>zi,base32hexupper:()=>Ni,base32pad:()=>$i,base32padupper:()=>Di,base32upper:()=>Ii,base32z:()=>Pi});function L(t,e){t=t.replace(/=/g,"");let r=t.length,n=0,s=0,o=0,i=new Uint8Array(r*5/8|0);for(let a=0;a<r;a++)s=s<<5|e.indexOf(t[a]),n+=5,n>=8&&(i[o++]=s>>>n-8&255,n-=8);return i}function k(t,e){let r=t.byteLength,n=new Uint8Array(t),s=e.indexOf("=")===e.length-1;s&&(e=e.substring(0,e.length-1));let o=0,i=0,a="";for(let g=0;g<r;g++)for(i=i<<8|n[g],o+=8;o>=5;)a+=e[i>>>o-5&31],o-=5;if(o>0&&(a+=e[i<<5-o&31]),s)for(;a.length%8!=0;)a+="=";return a}var re,Ii,$i,Di,ji,Ni,Mi,zi,Pi,bt=D(()=>{gt();re=M({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",encode:k,decode:L}),Ii=M({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",encode:k,decode:L}),$i=M({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",encode:k,decode:L}),Di=M({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",encode:k,decode:L}),ji=M({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",encode:k,decode:L}),Ni=M({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",encode:k,decode:L}),Mi=M({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",encode:k,decode:L}),zi=M({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",encode:k,decode:L}),Pi=M({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",encode:k,decode:L})});var mt={};ue(mt,{CID:()=>q});var q,Bi,Li,ki,be,Vi,hn,wn,ze,Pe,Gi,_i,Hi,vt=D(()=>{lt();wt();Me();bt();De();q=class{constructor(e,r,n,s){this.code=r,this.version=e,this.multihash=n,this.bytes=s,this.byteOffset=s.byteOffset,this.byteLength=s.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Pe,byteLength:Pe,code:ze,version:ze,multihash:ze,bytes:ze,_baseCache:Pe,asCID:Pe})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==be)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Vi)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return q.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=pt(e,r);return q.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&ht(this.multihash,e.multihash)}toString(e){let{bytes:r,version:n,_baseCache:s}=this;switch(n){case 0:return Li(r,s,e||z.encoder);default:return ki(r,s,e||re.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return _i(/^0\.0/,Hi),!!(e&&(e[wn]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof q)return e;if(e!=null&&e.asCID===e){let{version:r,code:n,multihash:s,bytes:o}=e;return new q(r,n,s,o||hn(r,n,s.bytes))}else if(e!=null&&e[wn]===!0){let{version:r,multihash:n,code:s}=e,o=ft(n);return q.create(r,s,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==be)throw new Error(`Version 0 CID must use dag-pb (code: ${be}) block encoding`);return new q(e,r,n,n.bytes)}case 1:{let s=hn(e,r,n.bytes);return new q(e,r,n,s)}default:throw new Error("Invalid version")}}static createV0(e){return q.create(0,be,e)}static createV1(e,r){return q.create(1,e,r)}static decode(e){let[r,n]=q.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=q.inspectBytes(e),n=r.size-r.multihashSize,s=ee(e.subarray(n,n+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");let o=s.subarray(r.multihashSize-r.digestSize),i=new te(r.multihashCode,r.digestSize,o,s);return[r.version===0?q.createV0(i):q.createV1(r.codec,i),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[l,w]=ye(e.subarray(r));return r+=w,l},s=n(),o=be;if(s===18?(s=0,r=0):s===1&&(o=n()),s!==0&&s!==1)throw new RangeError(`Invalid CID version ${s}`);let i=r,a=n(),g=n(),A=r+g,u=A-i;return{version:s,codec:o,multihashCode:a,digestSize:g,multihashSize:u,size:A}}static parse(e,r){let[n,s]=Bi(e,r),o=q.decode(s);return o._baseCache.set(n,e),o}},Bi=(t,e)=>{switch(t[0]){case"Q":{let r=e||z;return[z.prefix,r.decode(`${z.prefix}${t}`)]}case z.prefix:{let r=e||z;return[z.prefix,r.decode(t)]}case re.prefix:{let r=e||re;return[re.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},Li=(t,e,r)=>{let{prefix:n}=r;if(n!==z.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let s=e.get(n);if(s==null){let o=r.encode(t).slice(1);return e.set(n,o),o}else return s},ki=(t,e,r)=>{let{prefix:n}=r,s=e.get(n);if(s==null){let o=r.encode(t);return e.set(n,o),o}else return s},be=112,Vi=18,hn=(t,e,r)=>{let n=Y(t),s=n+Y(e),o=new Uint8Array(s+r.byteLength);return Z(t,o,0),Z(e,o,n),o.set(r,s),o},wn=Symbol.for("@ipld/js-cid/CID"),ze={writable:!1,configurable:!1,enumerable:!0},Pe={writable:!1,enumerable:!1,configurable:!1},Gi="0.0.0-dev",_i=(t,e)=>{if(t.test(Gi))console.warn(e);else throw new Error(e)},Hi=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var bn=d((ou,gn)=>{gn.exports=xt;var yn=128,Wi=127,Ji=~Wi,Ki=Math.pow(2,31);function xt(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw xt.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var n=r;t>=Ki;)e[r++]=t&255|yn,t/=128;for(;t&Ji;)e[r++]=t&255|yn,t>>>=7;return e[r]=t|0,xt.bytes=r-n+1,e}});var xn=d((iu,mn)=>{mn.exports=At;var Qi=128,vn=127;function At(t,e){var r=0,e=e||0,n=0,s=e,o,i=t.length;do{if(s>=i||n>49)throw At.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=n<28?(o&vn)<<n:(o&vn)*Math.pow(2,n),n+=7}while(o>=Qi);return At.bytes=s-e,r}});var En=d((au,An)=>{var Xi=Math.pow(2,7),Zi=Math.pow(2,14),Yi=Math.pow(2,21),ea=Math.pow(2,28),ta=Math.pow(2,35),ra=Math.pow(2,42),na=Math.pow(2,49),sa=Math.pow(2,56),oa=Math.pow(2,63);An.exports=function(t){return t<Xi?1:t<Zi?2:t<Yi?3:t<ea?4:t<ta?5:t<ra?6:t<na?7:t<sa?8:t<oa?9:10}});var Be=d((cu,Cn)=>{Cn.exports={encode:bn(),decode:xn(),encodingLength:En()}});var Tn=d((uu,Sn)=>{"use strict";var{encoding:ia}=at(),aa=new TextEncoder;function ca(t){let e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}function ua(t,e="utf8"){return e==="utf8"||e==="utf-8"?aa.encode(t):e==="ascii"?ca(t):ia(e).decode(t)}Sn.exports=ua});var Et=d((du,qn)=>{"use strict";function da(t,e){e||(e=t.reduce((s,o)=>s+o.length,0));let r=new Uint8Array(e),n=0;for(let s of t)r.set(s,n),n+=s.length;return r}qn.exports=da});var jn=d((lu,On)=>{"use strict";var Le=Xr(),Fn=$e(),{CID:la}=(vt(),mt),{base32:Rn}=(bt(),fn),{base58btc:pa}=(Me(),yt),fa=(wt(),on),ne=Be(),ke=we(),Un=Tn(),Ve=Et();On.exports=me;function me(t,e){return e instanceof Uint8Array?me.toString(t,e):me.toBytes(t,e)}me.toString=function(e,r){switch(Fn(e).code){case 4:case 41:return ha(r);case 6:case 273:case 33:case 132:return In(r).toString();case 53:case 54:case 55:case 56:case 400:case 777:return wa(r);case 421:return ga(r);case 444:return $n(r);case 445:return $n(r);default:return ke(r,"base16")}};me.toBytes=function(e,r){switch(Fn(e).code){case 4:return Dn(r);case 41:return Dn(r);case 6:case 273:case 33:case 132:return Ct(parseInt(r,10));case 53:case 54:case 55:case 56:case 400:case 777:return ya(r);case 421:return ba(r);case 444:return ma(r);case 445:return va(r);default:return Un(r,"base16")}};function Dn(t){if(!Le.isIP(t))throw new Error("invalid ip address");return Le.toBytes(t)}function ha(t){let e=Le.toString(t);if(!e||!Le.isIP(e))throw new Error("invalid ip address");return e}function Ct(t){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function In(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function ya(t){let e=Un(t),r=Uint8Array.from(ne.encode(e.length));return Ve([r,e],r.length+e.length)}function wa(t){let e=ne.decode(t);if(t=t.slice(ne.decode.bytes),t.length!==e)throw new Error("inconsistent lengths");return ke(t)}function ba(t){let e;t[0]==="Q"||t[0]==="1"?e=fa.decode(pa.decode(`z${t}`)).bytes:e=la.parse(t).multihash.bytes;let r=Uint8Array.from(ne.encode(e.length));return Ve([r,e],r.length+e.length)}function ga(t){let e=ne.decode(t),r=t.slice(ne.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return ke(r,"base58btc")}function ma(t){let e=t.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==16)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion address.");let r=Rn.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let s=Ct(n);return Ve([r,s],r.length+s.length)}function va(t){let e=t.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==56)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion3 address.");let r=Rn.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let s=Ct(n);return Ve([r,s],r.length+s.length)}function $n(t){let e=t.slice(0,t.length-2),r=t.slice(t.length-2),n=ke(e,"base32"),s=In(r);return n+":"+s}});var Wn=d((pu,Nn)=>{"use strict";var Mn=jn(),St=$e(),ve=Be(),zn=Et(),xa=we();Nn.exports={stringToStringTuples:Pn,stringTuplesToString:Bn,tuplesToStringTuples:kn,stringTuplesToTuples:Ln,bytesToTuples:Tt,tuplesToBytes:Vn,bytesToString:Aa,stringToBytes:Hn,fromString:Ea,fromBytes:Gn,validateBytes:qt,isValidBytes:Ca,cleanPath:_e,ParseError:Ot,protoFromTuple:xe,sizeForAddr:_n};function Pn(t){let e=[],r=t.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let n=0;n<r.length;n++){let s=r[n],o=St(s);if(o.size===0){e.push([s]);continue}if(n++,n>=r.length)throw Ot("invalid address: "+t);if(o.path){e.push([s,_e(r.slice(n).join("/"))]);break}e.push([s,r[n]])}return e}function Bn(t){let e=[];return t.map(r=>{let n=xe(r);return e.push(n.name),r.length>1&&e.push(r[1]),null}),_e(e.join("/"))}function Ln(t){return t.map(e=>{Array.isArray(e)||(e=[e]);let r=xe(e);return e.length>1?[r.code,Mn.toBytes(r.code,e[1])]:[r.code]})}function kn(t){return t.map(e=>{let r=xe(e);return e[1]?[r.code,Mn.toString(r.code,e[1])]:[r.code]})}function Vn(t){return Gn(zn(t.map(e=>{let r=xe(e),n=Uint8Array.from(ve.encode(r.code));return e.length>1&&(n=zn([n,e[1]])),n})))}function _n(t,e){return t.size>0?t.size/8:t.size===0?0:ve.decode(e)+ve.decode.bytes}function Tt(t){let e=[],r=0;for(;r<t.length;){let n=ve.decode(t,r),s=ve.decode.bytes,o=St(n),i=_n(o,t.slice(r+s));if(i===0){e.push([n]),r+=s;continue}let a=t.slice(r+s,r+s+i);if(r+=i+s,r>t.length)throw Ot("Invalid address Uint8Array: "+xa(t,"base16"));e.push([n,a])}return e}function Aa(t){let e=Tt(t),r=kn(e);return Bn(r)}function Hn(t){t=_e(t);let e=Pn(t),r=Ln(e);return Vn(r)}function Ea(t){return Hn(t)}function Gn(t){let e=qt(t);if(e)throw e;return Uint8Array.from(t)}function qt(t){try{Tt(t)}catch(e){return e}}function Ca(t){return qt(t)===void 0}function _e(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function Ot(t){return new Error("Error parsing address: "+t)}function xe(t){return St(t[0])}});var Qn=d((fu,Jn)=>{"use strict";function Kn(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Sa(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Kn(t,r)}catch(n){r.message=t.message,r.stack=t.stack;let s=function(){};return s.prototype=Object.create(Object.getPrototypeOf(t)),Kn(new s,r)}}Jn.exports=Sa});var Zn=d((hu,Xn)=>{"use strict";function Ta(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}Xn.exports=Ta});var Rt=d((wu,Yn)=>{"use strict";var N=Wn(),se=$e(),es=Be(),{CID:qa}=(vt(),mt),{base58btc:Oa}=(Me(),yt),Fa=Qn(),Ra=Symbol.for("nodejs.util.inspect.custom"),He=we(),Ua=Zn(),Ft=new Map,ts=Symbol.for("@multiformats/js-multiaddr/multiaddr"),F=class{constructor(e){if(e==null&&(e=""),Object.defineProperty(this,ts,{value:!0}),e instanceof Uint8Array)this.bytes=N.fromBytes(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=N.fromString(e)}else if(F.isMultiaddr(e))this.bytes=N.fromBytes(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return N.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){let e={},r=this.toString().split("/");return e.family=r[1]==="ip4"?4:6,e.host=r[2],e.transport=r[3],e.port=parseInt(r[4]),e}protos(){return this.protoCodes().map(e=>Object.assign({},se(e)))}protoCodes(){let e=[],r=this.bytes,n=0;for(;n<r.length;){let s=es.decode(r,n),o=es.decode.bytes,i=se(s);n+=N.sizeForAddr(i,r.slice(n+o))+o,e.push(s)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return N.bytesToTuples(this.bytes)}stringTuples(){let e=N.bytesToTuples(this.bytes);return N.tuplesToStringTuples(e)}encapsulate(e){return e=new F(e),new F(this.toString()+e.toString())}decapsulate(e){let r=e.toString(),n=this.toString(),s=n.lastIndexOf(r);if(s<0)throw new Error("Address "+this+" does not contain subaddress: "+e);return new F(n.slice(0,s))}decapsulateCode(e){let r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===e)return new F(N.tuplesToBytes(r.slice(0,n)));return this}getPeerId(){try{let r=this.stringTuples().filter(n=>n[0]===se.names.ipfs.code).pop();if(r&&r[1]){let n=r[1];return n[0]==="Q"||n[0]==="1"?He(Oa.decode(`z${n}`),"base58btc"):He(qa.parse(n).multihash.bytes,"base58btc")}return null}catch(e){return null}}getPath(){let e=null;try{e=this.stringTuples().filter(r=>!!se(r[0]).path)[0][1],e||(e=null)}catch(r){e=null}return e}equals(e){return Ua(this.bytes,e.bytes)}async resolve(){let e=this.protos().find(s=>s.resolvable);if(!e)return[this];let r=Ft.get(e.name);if(!r)throw Fa(new Error(`no available resolver for ${e.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await r(this)).map(s=>new F(s))}nodeAddress(){let e=this.protoCodes(),r=this.protoNames(),n=this.toString().split("/").slice(1);if(n.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(e[0]!==4&&e[0]!==41&&e[0]!==54&&e[0]!==55)throw new Error(`no protocol with name: "'${r[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if(n[2]!=="tcp"&&n[2]!=="udp")throw new Error(`no protocol with name: "'${r[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:e[0]===41||e[0]===55?6:4,address:n[1],port:parseInt(n[3])}}isThinWaistAddress(e){let r=(e||this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}static fromNodeAddress(e,r){if(!e)throw new Error("requires node address object");if(!r)throw new Error("requires transport protocol");let n;switch(e.family){case 4:n="ip4";break;case 6:n="ip6";break;default:throw Error(`Invalid addr family. Got '${e.family}' instead of 4 or 6`)}return new F("/"+[n,e.address,r,e.port].join("/"))}static isName(e){return F.isMultiaddr(e)?e.protos().some(r=>r.resolvable):!1}static isMultiaddr(e){return e instanceof F||Boolean(e&&e[ts])}[Ra](){return"<Multiaddr "+He(this.bytes,"base16")+" - "+N.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+He(this.bytes,"base16")+" - "+N.bytesToString(this.bytes)+">"}};F.protocols=se;F.resolvers=Ft;function Ia(t){return new F(t)}Yn.exports={Multiaddr:F,multiaddr:Ia,protocols:se,resolvers:Ft}});var ns=d((gu,rs)=>{var oe=1e3,ie=oe*60,ae=ie*60,G=ae*24,$a=G*7,Da=G*365.25;rs.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return ja(t);if(r==="number"&&isFinite(t))return e.long?Ma(t):Na(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function ja(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Da;case"weeks":case"week":case"w":return r*$a;case"days":case"day":case"d":return r*G;case"hours":case"hour":case"hrs":case"hr":case"h":return r*ae;case"minutes":case"minute":case"mins":case"min":case"m":return r*ie;case"seconds":case"second":case"secs":case"sec":case"s":return r*oe;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Na(t){var e=Math.abs(t);return e>=G?Math.round(t/G)+"d":e>=ae?Math.round(t/ae)+"h":e>=ie?Math.round(t/ie)+"m":e>=oe?Math.round(t/oe)+"s":t+"ms"}function Ma(t){var e=Math.abs(t);return e>=G?Ge(t,e,G,"day"):e>=ae?Ge(t,e,ae,"hour"):e>=ie?Ge(t,e,ie,"minute"):e>=oe?Ge(t,e,oe,"second"):t+" ms"}function Ge(t,e,r,n){var s=e>=r*1.5;return Math.round(t/r)+" "+n+(s?"s":"")}});var os=d((yu,ss)=>{function za(t){r.debug=r,r.default=r,r.coerce=g,r.disable=o,r.enable=s,r.enabled=i,r.humanize=ns(),r.destroy=A,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let l=0;for(let w=0;w<u.length;w++)l=(l<<5)-l+u.charCodeAt(w),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=e;function r(u){let l,w=null,c,f;function m(...p){if(!m.enabled)return;let h=m,v=Number(new Date),y=v-(l||v);h.diff=y,h.prev=l,h.curr=v,l=v,p[0]=r.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");let x=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,(b,E)=>{if(b==="%%")return"%";x++;let I=r.formatters[E];if(typeof I=="function"){let Fs=p[x];b=I.call(h,Fs),p.splice(x,1),x--}return b}),r.formatArgs.call(h,p),(h.log||r.log).apply(h,p)}return m.namespace=u,m.useColors=r.useColors(),m.color=r.selectColor(u),m.extend=n,m.destroy=r.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>w!==null?w:(c!==r.namespaces&&(c=r.namespaces,f=r.enabled(u)),f),set:p=>{w=p}}),typeof r.init=="function"&&r.init(m),m}function n(u,l){let w=r(this.namespace+(typeof l=="undefined"?":":l)+u);return w.log=this.log,w}function s(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let l,w=(typeof u=="string"?u:"").split(/[\s,]+/),c=w.length;for(l=0;l<c;l++)!w[l]||(u=w[l].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.substr(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function o(){let u=[...r.names.map(a),...r.skips.map(a).map(l=>"-"+l)].join(",");return r.enable(""),u}function i(u){if(u[u.length-1]==="*")return!0;let l,w;for(l=0,w=r.skips.length;l<w;l++)if(r.skips[l].test(u))return!1;for(l=0,w=r.names.length;l<w;l++)if(r.names[l].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function g(u){return u instanceof Error?u.stack||u.message:u}function A(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}ss.exports=za});var Ut=d((U,We)=>{U.formatArgs=Pa;U.save=Ba;U.load=La;U.useColors=ka;U.storage=Va();U.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();U.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function ka(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Pa(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+We.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(r++,s==="%c"&&(n=r))}),t.splice(n,0,e)}U.log=console.debug||console.log||(()=>{});function Ba(t){try{t?U.storage.setItem("debug",t):U.storage.removeItem("debug")}catch(e){}}function La(){let t;try{t=U.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function Va(){try{return localStorage}catch(t){}}We.exports=os()(U);var{formatters:_a}=We.exports;_a.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var $t=d((bu,is)=>{"use strict";var{Multiaddr:It}=Rt(),ce=st(),Ha=de().bind({ignoreUndefined:!0}),as=Ut(),Ga={info:as("ipfsd-ctl:client:stdout"),err:as("ipfsd-ctl:client:stderr")},cs=class{constructor(e,r,n){this.opts=n,this.baseUrl=e,this.id=r.id,this.path=r.path,this.initialized=r.initialized,this.started=r.started,this.disposable=r.disposable,this.clean=r.clean,this.api=null,this._setApi(r.apiAddr),this._setGateway(r.gatewayAddr),this._setGrpc(r.grpcAddr),this._createApi()}_setApi(e){e&&(this.apiAddr=new It(e))}_setGateway(e){e&&(this.gatewayAddr=new It(e))}_setGrpc(e){e&&(this.grpcAddr=new It(e))}_createApi(){this.opts.ipfsClientModule&&this.grpcAddr&&this.apiAddr?this.api=this.opts.ipfsClientModule.create({grpc:this.grpcAddr,http:this.apiAddr}):this.apiAddr&&(this.api=this.opts.ipfsHttpModule.create(this.apiAddr)),this.api&&(this.apiAddr&&(this.api.apiHost=this.apiAddr.nodeAddress().address,this.api.apiPort=this.apiAddr.nodeAddress().port),this.gatewayAddr&&(this.api.gatewayHost=this.gatewayAddr.nodeAddress().address,this.api.gatewayPort=this.gatewayAddr.nodeAddress().port),this.grpcAddr&&(this.api.grpcHost=this.grpcAddr.nodeAddress().address,this.api.grpcPort=this.grpcAddr.nodeAddress().port))}async init(e){if(this.initialized)return this;let r=Ha({emptyRepo:!1,profiles:this.opts.test?["test"]:[]},typeof this.opts.ipfsOptions.init=="boolean"?{}:this.opts.ipfsOptions.init,typeof e=="boolean"?{}:e),s=await(await ce.post(`${this.baseUrl}/init`,{searchParams:{id:this.id},json:r})).json();return this.initialized=s.initialized,this.clean=!1,this}async cleanup(){return this.clean?this:(await ce.post(`${this.baseUrl}/cleanup`,{searchParams:{id:this.id}}),this.clean=!0,this)}async start(){if(!this.started){let n=await(await ce.post(`${this.baseUrl}/start`,{searchParams:{id:this.id}})).json();this._setApi(n.apiAddr),this._setGateway(n.gatewayAddr),this._setGrpc(n.grpcAddr),this._createApi(),this.started=!0}let e=await this.api.id();return this.api.peerId=e,Ga.info(e),this}async stop(){return this.started?(await ce.post(`${this.baseUrl}/stop`,{searchParams:{id:this.id}}),this.started=!1,this.disposable&&await this.cleanup(),this):this}async pid(){return(await(await ce.get(`${this.baseUrl}/pid`,{searchParams:{id:this.id}})).json()).pid}async version(){return(await(await ce.get(`${this.baseUrl}/version`,{searchParams:{id:this.id}})).json()).version}};is.exports=cs});var hs=d((mu,us)=>{"use strict";var{Multiaddr:ds}=Rt(),Wa=de().bind({ignoreUndefined:!0}),{repoExists:Ja,removeRepo:Ka,checkForRunningApi:Qa,tmpDir:Xa,defaultRepo:Za}=Ke(),ls=Ut(),Ya={info:ls("ipfsd-ctl:proc:stdout"),err:ls("ipfsd-ctl:proc:stderr")},ps=class{constructor(e){this.opts=e,this.path=this.opts.ipfsOptions.repo||(e.disposable?Xa(e.type):Za(e.type)),this.initOptions=fs(e.ipfsOptions.init),this.disposable=e.disposable,this.initialized=!1,this.started=!1,this.clean=!0,this.apiAddr=null,this.gatewayAddr=null,this.api=null}async setExec(){if(this.api!==null)return;let e=this.opts.ipfsModule;this.api=await e.create({...this.opts.ipfsOptions,silent:!0,repo:this.path,init:this.initOptions})}_setApi(e){this.apiAddr=new ds(e),this.api=this.opts.ipfsHttpModule.create(e),this.api.apiHost=this.apiAddr.nodeAddress().address,this.api.apiPort=this.apiAddr.nodeAddress().port}_setGateway(e){this.gatewayAddr=new ds(e),this.api.gatewayHost=this.gatewayAddr.nodeAddress().address,this.api.gatewayPort=this.gatewayAddr.nodeAddress().port}async init(e){return this.initialized=await Ja(this.path),this.initialized?(this.clean=!1,this):(this.initOptions=Wa({emptyRepo:!1,profiles:this.opts.test?["test"]:[]},this.initOptions,fs(e)),await this.setExec(),this.clean=!1,this.initialized=!0,this)}async cleanup(){return this.clean||(await Ka(this.path),this.clean=!0),this}async start(){let e=Qa(this.path);e?this._setApi(e):(await this.setExec(),await this.api.start()),this.started=!0;let r=await this.api.id();return this.api.peerId=r,Ya.info(r),this}async stop(){return this.started?(await this.api.stop(),this.started=!1,this.disposable&&await this.cleanup(),this):this}pid(){throw new Error("not implemented")}async version(){return await this.setExec(),this.api.version()}},fs=t=>typeof t=="boolean"?{}:t;us.exports=ps});var bs=d((vu,ws)=>{"use strict";var{isBrowser:gs,isWebWorker:ys}=Te();ws.exports=({type:t})=>{let e;return t!=="proc"&&(gs||ys)?e=["/ip4/127.0.0.1/tcp/0/ws"]:t==="proc"&&(gs||ys)?e=[]:e=["/ip4/127.0.0.1/tcp/0"],{API:{HTTPHeaders:{"Access-Control-Allow-Origin":["*"],"Access-Control-Allow-Methods":["PUT","POST","GET"]}},Addresses:{Swarm:e,API:"/ip4/127.0.0.1/tcp/0",Gateway:"/ip4/127.0.0.1/tcp/0",RPC:"/ip4/127.0.0.1/tcp/0"}}}});var As=d((xu,ms)=>{"use strict";var _=de().bind({ignoreUndefined:!0}),{tmpDir:ec}=Ke(),{isNode:tc}=Te(),vs=st(),rc=$t(),nc=$t(),sc=hs(),oc=bs(),ic={remote:!tc,endpoint:process.env.IPFSD_CTL_SERVER||"http://localhost:43134",disposable:!0,test:!1,type:"go",env:{},args:[],ipfsOptions:{},forceKill:!0,forceKillTimeout:5e3},xs=class{constructor(e={},r={}){this.opts=_(ic,e),this.overrides=_({js:_(this.opts,{type:"js"}),go:_(this.opts,{type:"go"}),proc:_(this.opts,{type:"proc"})},r),this.controllers=[]}async tmpDir(e){return e=_(this.opts,e),e.remote?(await(await vs.get(`${e.endpoint}/util/tmp-dir`,{searchParams:{type:e.type}})).json()).tmpDir:Promise.resolve(ec(e.type))}async _spawnRemote(e){let r={json:{...e,remote:!1,ipfsBin:void 0,ipfsModule:void 0,ipfsHttpModule:void 0}},n=await vs.post(`${e.endpoint}/spawn`,r);return new nc(e.endpoint,await n.json(),e)}async spawn(e={}){let r=e.type||this.opts.type,n=_(this.overrides[r],e),s=_({start:!1,init:!1},n.test?{config:oc(n),preload:{enabled:!1}}:{},n.ipfsOptions),o;return n.type==="proc"?o=new sc({...n,ipfsOptions:s}):n.remote?o=await this._spawnRemote({...n,ipfsOptions:s}):o=new rc({...n,ipfsOptions:s}),this.controllers.push(o),n.disposable&&(!e.ipfsOptions||e.ipfsOptions&&e.ipfsOptions.init!==!1)&&await o.init(s.init),n.disposable&&(!e.ipfsOptions||e.ipfsOptions&&e.ipfsOptions.start!==!1)&&await o.start(),o}async clean(){return await Promise.all(this.controllers.map(e=>e.stop())),this.controllers=[],this}};ms.exports=xs});var Ss=d((Au,Es)=>{"use strict";var Cs=class{constructor(e,r){e=e||{port:43134},this.server=null,this.port=e.port,this.createNode=r,console.warn("Server not implemented in the browser")}start(){return console.warn("Server not implemented in the browser"),Promise.resolve(this)}stop(){return console.warn("Server not implemented in the browser"),Promise.resolve(this)}};Es.exports=Cs});var dc=d((Eu,Ts)=>{"use strict";var qs=As(),ac=Ss(),Os=(t,e)=>new qs(t,e),cc=t=>new qs().spawn(t),uc=(t,e={},r={})=>(typeof t=="number"&&(t={port:t}),new ac(t,()=>Os(e,r)));Ts.exports={createFactory:Os,createController:cc,createServer:uc}});return dc();})();
return IpfsdCtl}));
