'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var fs = require('fs');
var Path = require('path');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var fs__default = /*#__PURE__*/_interopDefaultLegacy(fs);
var Path__default = /*#__PURE__*/_interopDefaultLegacy(Path);

function path() {
  const paths = [];
  for (let i = 0; i < process.cwd().split(Path__default["default"].sep).length; i++) {
    const dots = new Array(i).fill('..');
    paths.push(Path__default["default"].resolve(Path__default["default"].join(process.cwd(), ...dots, 'node_modules', 'ipfs')));
  }
  const resourcePath = paths.find(path => fs__default["default"].existsSync(path));
  if (!resourcePath) {
    throw new Error(`Could not find ipfs module in paths: \n${ paths.join('\n') }`);
  }
  const pkg = JSON.parse(fs__default["default"].readFileSync(resourcePath + Path__default["default"].sep + 'package.json', { encoding: 'utf-8' }));
  const bin = pkg.bin.jsipfs;
  return Path__default["default"].resolve(Path__default["default"].join(resourcePath, bin));
}

exports.path = path;
