'use strict';

var split = require('it-split');
var cid = require('multiformats/cid');
var base32 = require('multiformats/bases/base32');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var split__default = /*#__PURE__*/_interopDefaultLegacy(split);

var cidBase32 = {
  command: 'base32 [cids...]',
  describe: 'Convert CIDs to base 32 CID version 1.',
  async handler({
    ctx: {print, getStdin},
    cids
  }) {
    let input;
    if (cids && cids.length) {
      input = cids;
    } else {
      input = split__default["default"](getStdin());
    }
    for await (const data of input) {
      const input = data.toString().trim();
      if (!input) {
        continue;
      }
      print(cid.CID.parse(input).toV1().toString(base32.base32.encoder));
    }
  }
};

module.exports = cidBase32;
