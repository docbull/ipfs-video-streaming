'use strict';

var path = require('path');
var glob = require('it-glob');
var all = require('it-all');
var url = require('url');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var path__default = /*#__PURE__*/_interopDefaultLegacy(path);
var glob__default = /*#__PURE__*/_interopDefaultLegacy(glob);
var all__default = /*#__PURE__*/_interopDefaultLegacy(all);

const __dirname$1 = path.dirname(url.fileURLToPath((typeof document === 'undefined' ? new (require('u' + 'rl').URL)('file:' + __filename).href : (document.currentScript && document.currentScript.src || new URL('src/commands/commands.js', document.baseURI).href))));
var commands = {
  command: 'commands',
  describe: 'List all available commands',
  async handler({ctx}) {
    const {print} = ctx;
    const commandsPath = path__default["default"].resolve(__dirname$1, '..', 'commands');
    const files = await all__default["default"](glob__default["default"](commandsPath, '**/*.js'));
    const cmds = files.map(p => {
      return p.replace(/\\/g, '/').replace(/\//g, ' ').replace('.js', '');
    }).filter(cmd => !cmd.endsWith('index')).sort().map(cmd => `ipfs ${ cmd }`);
    print(['ipfs'].concat(cmds).join('\n'));
  }
};

module.exports = commands;
