{"{\"assumptions\":{},\"sourceRoot\":\"/home/inlab/ipfs-video-streaming/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/inlab/ipfs-video-streaming\",\"filename\":\"/home/inlab/ipfs-video-streaming/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/inlab/ipfs-video-streaming\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"regenerator-transform\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:development":{"value":{"code":"\"use strict\";\n\nvar express = require('express');\n\nvar path = require('path');\n\nvar http = require('http');\n\nvar https = require('https');\n\nvar fs = require('fs');\n\nvar cors = require('cors');\n\nvar fileUpload = require('express-fileupload');\n\nvar HTTP_PORT = 8888;\nvar HTTPS_PORT = 11800;\nvar options = {\n  key: fs.readFileSync('./ssl/rootca.key'),\n  cert: fs.readFileSync('./ssl/rootca.crt')\n};\nvar app = express(); //Cross-Origin Resource Sharing (CORS) is an HTTP-header based mechanism that allows a server to indicate any origins\n\napp.use(cors());\napp.use(fileUpload());\n\nvar router = require('./routes/router')(app);\n\napp.set('view engine', 'ejs');\napp.set('views', path.join(__dirname, '/views'));\napp.engine('html', require('ejs').renderFile);\napp.use(express[\"static\"](path.join(__dirname, '/img')));\napp.use(express[\"static\"](path.join(__dirname, '/public')));\napp.use(express[\"static\"](path.join(__dirname, '/public/nft')));\napp.use(express[\"static\"](path.join(__dirname, '/public/streaming')));\napp.use(express[\"static\"](path.join(__dirname, '/public/uploading')));\napp.use(express[\"static\"](path.join(__dirname, '/css')));\nhttp.createServer(app).listen(HTTP_PORT);\nhttps.createServer(options, app).listen(HTTPS_PORT);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInBhdGgiLCJodHRwIiwiaHR0cHMiLCJmcyIsImNvcnMiLCJmaWxlVXBsb2FkIiwiSFRUUF9QT1JUIiwiSFRUUFNfUE9SVCIsIm9wdGlvbnMiLCJrZXkiLCJyZWFkRmlsZVN5bmMiLCJjZXJ0IiwiYXBwIiwidXNlIiwicm91dGVyIiwic2V0Iiwiam9pbiIsIl9fZGlybmFtZSIsImVuZ2luZSIsInJlbmRlckZpbGUiLCJjcmVhdGVTZXJ2ZXIiLCJsaXN0ZW4iXSwic291cmNlUm9vdCI6Ii9ob21lL2lubGFiL2lwZnMtdmlkZW8tc3RyZWFtaW5nLyIsInNvdXJjZXMiOlsiYXBwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgaHR0cCA9IHJlcXVpcmUoJ2h0dHAnKTtcbmNvbnN0IGh0dHBzID0gcmVxdWlyZSgnaHR0cHMnKTtcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcbmNvbnN0IGNvcnMgPSByZXF1aXJlKCdjb3JzJyk7XG5jb25zdCBmaWxlVXBsb2FkID0gcmVxdWlyZSgnZXhwcmVzcy1maWxldXBsb2FkJyk7XG5cbmNvbnN0IEhUVFBfUE9SVCA9IDg4ODg7XG5jb25zdCBIVFRQU19QT1JUID0gMTE4MDA7XG5cbmNvbnN0IG9wdGlvbnMgPSB7XG4gICAga2V5OiBmcy5yZWFkRmlsZVN5bmMoJy4vc3NsL3Jvb3RjYS5rZXknKSxcbiAgICBjZXJ0OiBmcy5yZWFkRmlsZVN5bmMoJy4vc3NsL3Jvb3RjYS5jcnQnKVxufTtcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuLy9Dcm9zcy1PcmlnaW4gUmVzb3VyY2UgU2hhcmluZyAoQ09SUykgaXMgYW4gSFRUUC1oZWFkZXIgYmFzZWQgbWVjaGFuaXNtIHRoYXQgYWxsb3dzIGEgc2VydmVyIHRvIGluZGljYXRlIGFueSBvcmlnaW5zXG5hcHAudXNlKGNvcnMoKSk7XG5hcHAudXNlKGZpbGVVcGxvYWQoKSk7XG5cbmNvbnN0IHJvdXRlciA9IHJlcXVpcmUoJy4vcm91dGVzL3JvdXRlcicpKGFwcCk7XG5cbmFwcC5zZXQoJ3ZpZXcgZW5naW5lJywgJ2VqcycpO1xuYXBwLnNldCgndmlld3MnLCBwYXRoLmpvaW4oX19kaXJuYW1lLCAnL3ZpZXdzJykpO1xuYXBwLmVuZ2luZSgnaHRtbCcsIHJlcXVpcmUoJ2VqcycpLnJlbmRlckZpbGUpO1xuXG5hcHAudXNlKGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsICcvaW1nJykpKTtcbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgJy9wdWJsaWMnKSkpO1xuYXBwLnVzZShleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAnL3B1YmxpYy9uZnQnKSkpO1xuYXBwLnVzZShleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAnL3B1YmxpYy9zdHJlYW1pbmcnKSkpO1xuYXBwLnVzZShleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAnL3B1YmxpYy91cGxvYWRpbmcnKSkpO1xuYXBwLnVzZShleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAnL2NzcycpKSk7XG5cbmh0dHAuY3JlYXRlU2VydmVyKGFwcCkubGlzdGVuKEhUVFBfUE9SVCk7XG5odHRwcy5jcmVhdGVTZXJ2ZXIob3B0aW9ucywgYXBwKS5saXN0ZW4oSFRUUFNfUE9SVCk7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBRCxDQUF2Qjs7QUFDQSxJQUFNQyxJQUFJLEdBQUdELE9BQU8sQ0FBQyxNQUFELENBQXBCOztBQUNBLElBQU1FLElBQUksR0FBR0YsT0FBTyxDQUFDLE1BQUQsQ0FBcEI7O0FBQ0EsSUFBTUcsS0FBSyxHQUFHSCxPQUFPLENBQUMsT0FBRCxDQUFyQjs7QUFDQSxJQUFNSSxFQUFFLEdBQUdKLE9BQU8sQ0FBQyxJQUFELENBQWxCOztBQUNBLElBQU1LLElBQUksR0FBR0wsT0FBTyxDQUFDLE1BQUQsQ0FBcEI7O0FBQ0EsSUFBTU0sVUFBVSxHQUFHTixPQUFPLENBQUMsb0JBQUQsQ0FBMUI7O0FBRUEsSUFBTU8sU0FBUyxHQUFHLElBQWxCO0FBQ0EsSUFBTUMsVUFBVSxHQUFHLEtBQW5CO0FBRUEsSUFBTUMsT0FBTyxHQUFHO0VBQ1pDLEdBQUcsRUFBRU4sRUFBRSxDQUFDTyxZQUFILENBQWdCLGtCQUFoQixDQURPO0VBRVpDLElBQUksRUFBRVIsRUFBRSxDQUFDTyxZQUFILENBQWdCLGtCQUFoQjtBQUZNLENBQWhCO0FBS0EsSUFBTUUsR0FBRyxHQUFHZCxPQUFPLEVBQW5CLEMsQ0FDQTs7QUFDQWMsR0FBRyxDQUFDQyxHQUFKLENBQVFULElBQUksRUFBWjtBQUNBUSxHQUFHLENBQUNDLEdBQUosQ0FBUVIsVUFBVSxFQUFsQjs7QUFFQSxJQUFNUyxNQUFNLEdBQUdmLE9BQU8sQ0FBQyxpQkFBRCxDQUFQLENBQTJCYSxHQUEzQixDQUFmOztBQUVBQSxHQUFHLENBQUNHLEdBQUosQ0FBUSxhQUFSLEVBQXVCLEtBQXZCO0FBQ0FILEdBQUcsQ0FBQ0csR0FBSixDQUFRLE9BQVIsRUFBaUJmLElBQUksQ0FBQ2dCLElBQUwsQ0FBVUMsU0FBVixFQUFxQixRQUFyQixDQUFqQjtBQUNBTCxHQUFHLENBQUNNLE1BQUosQ0FBVyxNQUFYLEVBQW1CbkIsT0FBTyxDQUFDLEtBQUQsQ0FBUCxDQUFlb0IsVUFBbEM7QUFFQVAsR0FBRyxDQUFDQyxHQUFKLENBQVFmLE9BQU8sVUFBUCxDQUFlRSxJQUFJLENBQUNnQixJQUFMLENBQVVDLFNBQVYsRUFBcUIsTUFBckIsQ0FBZixDQUFSO0FBQ0FMLEdBQUcsQ0FBQ0MsR0FBSixDQUFRZixPQUFPLFVBQVAsQ0FBZUUsSUFBSSxDQUFDZ0IsSUFBTCxDQUFVQyxTQUFWLEVBQXFCLFNBQXJCLENBQWYsQ0FBUjtBQUNBTCxHQUFHLENBQUNDLEdBQUosQ0FBUWYsT0FBTyxVQUFQLENBQWVFLElBQUksQ0FBQ2dCLElBQUwsQ0FBVUMsU0FBVixFQUFxQixhQUFyQixDQUFmLENBQVI7QUFDQUwsR0FBRyxDQUFDQyxHQUFKLENBQVFmLE9BQU8sVUFBUCxDQUFlRSxJQUFJLENBQUNnQixJQUFMLENBQVVDLFNBQVYsRUFBcUIsbUJBQXJCLENBQWYsQ0FBUjtBQUNBTCxHQUFHLENBQUNDLEdBQUosQ0FBUWYsT0FBTyxVQUFQLENBQWVFLElBQUksQ0FBQ2dCLElBQUwsQ0FBVUMsU0FBVixFQUFxQixtQkFBckIsQ0FBZixDQUFSO0FBQ0FMLEdBQUcsQ0FBQ0MsR0FBSixDQUFRZixPQUFPLFVBQVAsQ0FBZUUsSUFBSSxDQUFDZ0IsSUFBTCxDQUFVQyxTQUFWLEVBQXFCLE1BQXJCLENBQWYsQ0FBUjtBQUVBaEIsSUFBSSxDQUFDbUIsWUFBTCxDQUFrQlIsR0FBbEIsRUFBdUJTLE1BQXZCLENBQThCZixTQUE5QjtBQUNBSixLQUFLLENBQUNrQixZQUFOLENBQW1CWixPQUFuQixFQUE0QkksR0FBNUIsRUFBaUNTLE1BQWpDLENBQXdDZCxVQUF4QyJ9","map":{"version":3,"names":["express","require","path","http","https","fs","cors","fileUpload","HTTP_PORT","HTTPS_PORT","options","key","readFileSync","cert","app","use","router","set","join","__dirname","engine","renderFile","createServer","listen"],"sourceRoot":"/home/inlab/ipfs-video-streaming/","sources":["app.js"],"sourcesContent":["const express = require('express');\nconst path = require('path');\nconst http = require('http');\nconst https = require('https');\nconst fs = require('fs');\nconst cors = require('cors');\nconst fileUpload = require('express-fileupload');\n\nconst HTTP_PORT = 8888;\nconst HTTPS_PORT = 11800;\n\nconst options = {\n    key: fs.readFileSync('./ssl/rootca.key'),\n    cert: fs.readFileSync('./ssl/rootca.crt')\n};\n\nconst app = express();\n//Cross-Origin Resource Sharing (CORS) is an HTTP-header based mechanism that allows a server to indicate any origins\napp.use(cors());\napp.use(fileUpload());\n\nconst router = require('./routes/router')(app);\n\napp.set('view engine', 'ejs');\napp.set('views', path.join(__dirname, '/views'));\napp.engine('html', require('ejs').renderFile);\n\napp.use(express.static(path.join(__dirname, '/img')));\napp.use(express.static(path.join(__dirname, '/public')));\napp.use(express.static(path.join(__dirname, '/public/nft')));\napp.use(express.static(path.join(__dirname, '/public/streaming')));\napp.use(express.static(path.join(__dirname, '/public/uploading')));\napp.use(express.static(path.join(__dirname, '/css')));\n\nhttp.createServer(app).listen(HTTP_PORT);\nhttps.createServer(options, app).listen(HTTPS_PORT);\n"],"mappings":";;AAAA,IAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,IAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB;;AACA,IAAME,IAAI,GAAGF,OAAO,CAAC,MAAD,CAApB;;AACA,IAAMG,KAAK,GAAGH,OAAO,CAAC,OAAD,CAArB;;AACA,IAAMI,EAAE,GAAGJ,OAAO,CAAC,IAAD,CAAlB;;AACA,IAAMK,IAAI,GAAGL,OAAO,CAAC,MAAD,CAApB;;AACA,IAAMM,UAAU,GAAGN,OAAO,CAAC,oBAAD,CAA1B;;AAEA,IAAMO,SAAS,GAAG,IAAlB;AACA,IAAMC,UAAU,GAAG,KAAnB;AAEA,IAAMC,OAAO,GAAG;EACZC,GAAG,EAAEN,EAAE,CAACO,YAAH,CAAgB,kBAAhB,CADO;EAEZC,IAAI,EAAER,EAAE,CAACO,YAAH,CAAgB,kBAAhB;AAFM,CAAhB;AAKA,IAAME,GAAG,GAAGd,OAAO,EAAnB,C,CACA;;AACAc,GAAG,CAACC,GAAJ,CAAQT,IAAI,EAAZ;AACAQ,GAAG,CAACC,GAAJ,CAAQR,UAAU,EAAlB;;AAEA,IAAMS,MAAM,GAAGf,OAAO,CAAC,iBAAD,CAAP,CAA2Ba,GAA3B,CAAf;;AAEAA,GAAG,CAACG,GAAJ,CAAQ,aAAR,EAAuB,KAAvB;AACAH,GAAG,CAACG,GAAJ,CAAQ,OAAR,EAAiBf,IAAI,CAACgB,IAAL,CAAUC,SAAV,EAAqB,QAArB,CAAjB;AACAL,GAAG,CAACM,MAAJ,CAAW,MAAX,EAAmBnB,OAAO,CAAC,KAAD,CAAP,CAAeoB,UAAlC;AAEAP,GAAG,CAACC,GAAJ,CAAQf,OAAO,UAAP,CAAeE,IAAI,CAACgB,IAAL,CAAUC,SAAV,EAAqB,MAArB,CAAf,CAAR;AACAL,GAAG,CAACC,GAAJ,CAAQf,OAAO,UAAP,CAAeE,IAAI,CAACgB,IAAL,CAAUC,SAAV,EAAqB,SAArB,CAAf,CAAR;AACAL,GAAG,CAACC,GAAJ,CAAQf,OAAO,UAAP,CAAeE,IAAI,CAACgB,IAAL,CAAUC,SAAV,EAAqB,aAArB,CAAf,CAAR;AACAL,GAAG,CAACC,GAAJ,CAAQf,OAAO,UAAP,CAAeE,IAAI,CAACgB,IAAL,CAAUC,SAAV,EAAqB,mBAArB,CAAf,CAAR;AACAL,GAAG,CAACC,GAAJ,CAAQf,OAAO,UAAP,CAAeE,IAAI,CAACgB,IAAL,CAAUC,SAAV,EAAqB,mBAArB,CAAf,CAAR;AACAL,GAAG,CAACC,GAAJ,CAAQf,OAAO,UAAP,CAAeE,IAAI,CAACgB,IAAL,CAAUC,SAAV,EAAqB,MAArB,CAAf,CAAR;AAEAhB,IAAI,CAACmB,YAAL,CAAkBR,GAAlB,EAAuBS,MAAvB,CAA8Bf,SAA9B;AACAJ,KAAK,CAACkB,YAAN,CAAmBZ,OAAnB,EAA4BI,GAA5B,EAAiCS,MAAjC,CAAwCd,UAAxC"}},"mtime":1651503555445},"{\"assumptions\":{},\"sourceRoot\":\"/home/inlab/ipfs-video-streaming/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/inlab/ipfs-video-streaming\",\"filename\":\"/home/inlab/ipfs-video-streaming/routes/router.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/inlab/ipfs-video-streaming\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"regenerator-transform\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:development":{"value":{"code":"\"use strict\";\n\nvar _uploader = require(\"../public/uploading/uploader.js\");\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nmodule.exports = function (app) {\n  app.get('/', function (req, res) {\n    res.render('index.ejs');\n  });\n  app.get('/player', function (req, res) {\n    res.render('player.ejs');\n  }); // when you upload a video using the top-right upload button, and it posts the video\n  // on the media server and the server encodes the video using HLS protocol.\n\n  app.post('/upload', /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(req, res) {\n      var file, filename, title;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (req.files) {\n                console.log(req.files);\n                file = req.files.uploading;\n                filename = file.name;\n                title = filename.split('.');\n                file.mv('./data/' + filename, function (err) {\n                  if (err) {\n                    res.render('index.ejs');\n                    console.log(err);\n                  } else {\n                    // fileInfo indicates information of uploaded video. It contains filename \n                    // (e.g., example.mp4) and title (e.g., example).\n                    var fileInfo = {\n                      video: filename,\n                      title: title[0]\n                    };\n                    (0, _uploader.uploader)(fileInfo).then(function (result) {\n                      return res.render('index.ejs');\n                    });\n                  }\n                });\n              }\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwiYXBwIiwiZ2V0IiwicmVxIiwicmVzIiwicmVuZGVyIiwicG9zdCIsImZpbGVzIiwiY29uc29sZSIsImxvZyIsImZpbGUiLCJ1cGxvYWRpbmciLCJmaWxlbmFtZSIsIm5hbWUiLCJ0aXRsZSIsInNwbGl0IiwibXYiLCJlcnIiLCJmaWxlSW5mbyIsInZpZGVvIiwidGhlbiIsInJlc3VsdCJdLCJzb3VyY2VSb290IjoiL2hvbWUvaW5sYWIvaXBmcy12aWRlby1zdHJlYW1pbmcvcm91dGVzLyIsInNvdXJjZXMiOlsicm91dGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVwbG9hZGVyIH0gZnJvbSAnLi4vcHVibGljL3VwbG9hZGluZy91cGxvYWRlci5qcyc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFwcCkge1xuICAgIGFwcC5nZXQoJy8nLCBmdW5jdGlvbihyZXEsIHJlcykge1xuICAgICAgICByZXMucmVuZGVyKCdpbmRleC5lanMnKVxuICAgIH0pXG4gICAgYXBwLmdldCgnL3BsYXllcicsIGZ1bmN0aW9uKHJlcSwgcmVzKSB7XG4gICAgICAgIHJlcy5yZW5kZXIoJ3BsYXllci5lanMnKVxuICAgIH0pXG5cbiAgICAvLyB3aGVuIHlvdSB1cGxvYWQgYSB2aWRlbyB1c2luZyB0aGUgdG9wLXJpZ2h0IHVwbG9hZCBidXR0b24sIGFuZCBpdCBwb3N0cyB0aGUgdmlkZW9cbiAgICAvLyBvbiB0aGUgbWVkaWEgc2VydmVyIGFuZCB0aGUgc2VydmVyIGVuY29kZXMgdGhlIHZpZGVvIHVzaW5nIEhMUyBwcm90b2NvbC5cbiAgICBhcHAucG9zdCgnL3VwbG9hZCcsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgICAgICBpZiAocmVxLmZpbGVzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXEuZmlsZXMpO1xuICAgICAgICAgICAgdmFyIGZpbGUgPSByZXEuZmlsZXMudXBsb2FkaW5nO1xuICAgICAgICAgICAgdmFyIGZpbGVuYW1lID0gZmlsZS5uYW1lO1xuICAgICAgICAgICAgbGV0IHRpdGxlID0gZmlsZW5hbWUuc3BsaXQoJy4nKTtcbiAgICAgICAgICAgIGZpbGUubXYoJy4vZGF0YS8nICsgZmlsZW5hbWUsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5yZW5kZXIoJ2luZGV4LmVqcycpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGZpbGVJbmZvIGluZGljYXRlcyBpbmZvcm1hdGlvbiBvZiB1cGxvYWRlZCB2aWRlby4gSXQgY29udGFpbnMgZmlsZW5hbWUgXG4gICAgICAgICAgICAgICAgICAgIC8vIChlLmcuLCBleGFtcGxlLm1wNCkgYW5kIHRpdGxlIChlLmcuLCBleGFtcGxlKS5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZUluZm8gPSAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW86IGZpbGVuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlWzBdXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIHVwbG9hZGVyKGZpbGVJbmZvKS50aGVuKHJlc3VsdCA9PiByZXMucmVuZGVyKCdpbmRleC5lanMnKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KVxufVxuIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7QUFFQUEsTUFBTSxDQUFDQyxPQUFQLEdBQWlCLFVBQVVDLEdBQVYsRUFBZTtFQUM1QkEsR0FBRyxDQUFDQyxHQUFKLENBQVEsR0FBUixFQUFhLFVBQVNDLEdBQVQsRUFBY0MsR0FBZCxFQUFtQjtJQUM1QkEsR0FBRyxDQUFDQyxNQUFKLENBQVcsV0FBWDtFQUNILENBRkQ7RUFHQUosR0FBRyxDQUFDQyxHQUFKLENBQVEsU0FBUixFQUFtQixVQUFTQyxHQUFULEVBQWNDLEdBQWQsRUFBbUI7SUFDbENBLEdBQUcsQ0FBQ0MsTUFBSixDQUFXLFlBQVg7RUFDSCxDQUZELEVBSjRCLENBUTVCO0VBQ0E7O0VBQ0FKLEdBQUcsQ0FBQ0ssSUFBSixDQUFTLFNBQVQ7SUFBQSxtRUFBb0IsaUJBQU9ILEdBQVAsRUFBWUMsR0FBWjtNQUFBO01BQUE7UUFBQTtVQUFBO1lBQUE7Y0FDaEIsSUFBSUQsR0FBRyxDQUFDSSxLQUFSLEVBQWU7Z0JBQ1hDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZTixHQUFHLENBQUNJLEtBQWhCO2dCQUNJRyxJQUZPLEdBRUFQLEdBQUcsQ0FBQ0ksS0FBSixDQUFVSSxTQUZWO2dCQUdQQyxRQUhPLEdBR0lGLElBQUksQ0FBQ0csSUFIVDtnQkFJUEMsS0FKTyxHQUlDRixRQUFRLENBQUNHLEtBQVQsQ0FBZSxHQUFmLENBSkQ7Z0JBS1hMLElBQUksQ0FBQ00sRUFBTCxDQUFRLFlBQVlKLFFBQXBCLEVBQThCLFVBQVVLLEdBQVYsRUFBZTtrQkFDekMsSUFBSUEsR0FBSixFQUFTO29CQUNMYixHQUFHLENBQUNDLE1BQUosQ0FBVyxXQUFYO29CQUNBRyxPQUFPLENBQUNDLEdBQVIsQ0FBWVEsR0FBWjtrQkFDSCxDQUhELE1BR087b0JBQ0g7b0JBQ0E7b0JBQ0EsSUFBTUMsUUFBUSxHQUFJO3NCQUNkQyxLQUFLLEVBQUVQLFFBRE87c0JBRWRFLEtBQUssRUFBRUEsS0FBSyxDQUFDLENBQUQ7b0JBRkUsQ0FBbEI7b0JBSUEsd0JBQVNJLFFBQVQsRUFBbUJFLElBQW5CLENBQXdCLFVBQUFDLE1BQU07c0JBQUEsT0FBSWpCLEdBQUcsQ0FBQ0MsTUFBSixDQUFXLFdBQVgsQ0FBSjtvQkFBQSxDQUE5QjtrQkFDSDtnQkFDSixDQWJEO2NBY0g7O1lBcEJlO1lBQUE7Y0FBQTtVQUFBO1FBQUE7TUFBQTtJQUFBLENBQXBCOztJQUFBO01BQUE7SUFBQTtFQUFBO0FBc0JILENBaENEIn0=","map":{"version":3,"names":["module","exports","app","get","req","res","render","post","files","console","log","file","uploading","filename","name","title","split","mv","err","fileInfo","video","then","result"],"sourceRoot":"/home/inlab/ipfs-video-streaming/routes/","sources":["router.js"],"sourcesContent":["import { uploader } from '../public/uploading/uploader.js';\n\nmodule.exports = function (app) {\n    app.get('/', function(req, res) {\n        res.render('index.ejs')\n    })\n    app.get('/player', function(req, res) {\n        res.render('player.ejs')\n    })\n\n    // when you upload a video using the top-right upload button, and it posts the video\n    // on the media server and the server encodes the video using HLS protocol.\n    app.post('/upload', async (req, res) => {\n        if (req.files) {\n            console.log(req.files);\n            var file = req.files.uploading;\n            var filename = file.name;\n            let title = filename.split('.');\n            file.mv('./data/' + filename, function (err) {\n                if (err) {\n                    res.render('index.ejs');\n                    console.log(err);\n                } else {\n                    // fileInfo indicates information of uploaded video. It contains filename \n                    // (e.g., example.mp4) and title (e.g., example).\n                    const fileInfo = ({\n                        video: filename,\n                        title: title[0]\n                    })\n                    uploader(fileInfo).then(result => res.render('index.ejs'));\n                }\n            });\n        }\n    })\n}\n"],"mappings":";;AAAA;;;;;;AAEAA,MAAM,CAACC,OAAP,GAAiB,UAAUC,GAAV,EAAe;EAC5BA,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAa,UAASC,GAAT,EAAcC,GAAd,EAAmB;IAC5BA,GAAG,CAACC,MAAJ,CAAW,WAAX;EACH,CAFD;EAGAJ,GAAG,CAACC,GAAJ,CAAQ,SAAR,EAAmB,UAASC,GAAT,EAAcC,GAAd,EAAmB;IAClCA,GAAG,CAACC,MAAJ,CAAW,YAAX;EACH,CAFD,EAJ4B,CAQ5B;EACA;;EACAJ,GAAG,CAACK,IAAJ,CAAS,SAAT;IAAA,mEAAoB,iBAAOH,GAAP,EAAYC,GAAZ;MAAA;MAAA;QAAA;UAAA;YAAA;cAChB,IAAID,GAAG,CAACI,KAAR,EAAe;gBACXC,OAAO,CAACC,GAAR,CAAYN,GAAG,CAACI,KAAhB;gBACIG,IAFO,GAEAP,GAAG,CAACI,KAAJ,CAAUI,SAFV;gBAGPC,QAHO,GAGIF,IAAI,CAACG,IAHT;gBAIPC,KAJO,GAICF,QAAQ,CAACG,KAAT,CAAe,GAAf,CAJD;gBAKXL,IAAI,CAACM,EAAL,CAAQ,YAAYJ,QAApB,EAA8B,UAAUK,GAAV,EAAe;kBACzC,IAAIA,GAAJ,EAAS;oBACLb,GAAG,CAACC,MAAJ,CAAW,WAAX;oBACAG,OAAO,CAACC,GAAR,CAAYQ,GAAZ;kBACH,CAHD,MAGO;oBACH;oBACA;oBACA,IAAMC,QAAQ,GAAI;sBACdC,KAAK,EAAEP,QADO;sBAEdE,KAAK,EAAEA,KAAK,CAAC,CAAD;oBAFE,CAAlB;oBAIA,wBAASI,QAAT,EAAmBE,IAAnB,CAAwB,UAAAC,MAAM;sBAAA,OAAIjB,GAAG,CAACC,MAAJ,CAAW,WAAX,CAAJ;oBAAA,CAA9B;kBACH;gBACJ,CAbD;cAcH;;YApBe;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAApB;;IAAA;MAAA;IAAA;EAAA;AAsBH,CAhCD"}},"mtime":1651505299129},"{\"assumptions\":{},\"sourceRoot\":\"/home/inlab/ipfs-video-streaming/public/uploading/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/inlab/ipfs-video-streaming\",\"filename\":\"/home/inlab/ipfs-video-streaming/public/uploading/uploader.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/inlab/ipfs-video-streaming\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"regenerator-transform\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:development":{"value":{"code":"\"use strict\";\n\nvar _path2 = _interopRequireDefault(require(\"path\"));\n\nvar _execa = _interopRequireDefault(require(\"execa\"));\n\nvar _fsExtra = _interopRequireDefault(require(\"fs-extra\"));\n\nvar _process = _interopRequireDefault(require(\"process\"));\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nvar _web = require(\"web3.storage\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n_dotenv[\"default\"].config();\n\nfunction execac(command, args) {\n  return new Promise(function (resolve, reject) {\n    var proc = (0, _execa[\"default\"])(command, args);\n    proc.stdout.on('data', function (data) {\n      console.log(data);\n    });\n    proc.stderr.setEncoding(\"utf8\");\n    proc.stderr.on('data', function (data) {\n      console.log(data);\n    });\n    proc.on('close', function () {\n      resolve(\"\".concat(command, \" end\"));\n    });\n  });\n} // Web3StorageUploader uploads video chunks into IPFS network using Web3.Storage.\n\n\nfunction Web3StorageUploader(_x, _x2) {\n  return _Web3StorageUploader.apply(this, arguments);\n} // encodesHLS encodes the video using HLS protocol based on ffmpeg that installed in media server. \n\n\nfunction _Web3StorageUploader() {\n  _Web3StorageUploader = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(web3Token, filePaths) {\n    var token, storage, files, _iterator, _step, _path, pathFiles, cid, _yield$execa, stdout;\n\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            token = web3Token;\n\n            if (token) {\n              _context2.next = 3;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", console.error('🔖 A token is needed. You can create one on https://web3.storage'));\n\n          case 3:\n            if (!(filePaths.length < 1)) {\n              _context2.next = 5;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", console.error('😅 Please supply the path to a file or directory'));\n\n          case 5:\n            storage = new _web.Web3Storage({\n              token: token\n            });\n            files = [];\n            _iterator = _createForOfIteratorHelper(filePaths);\n            _context2.prev = 8;\n\n            _iterator.s();\n\n          case 10:\n            if ((_step = _iterator.n()).done) {\n              _context2.next = 18;\n              break;\n            }\n\n            _path = _step.value;\n            _context2.next = 14;\n            return (0, _web.getFilesFromPath)(_path);\n\n          case 14:\n            pathFiles = _context2.sent;\n            files.push.apply(files, _toConsumableArray(pathFiles));\n\n          case 16:\n            _context2.next = 10;\n            break;\n\n          case 18:\n            _context2.next = 23;\n            break;\n\n          case 20:\n            _context2.prev = 20;\n            _context2.t0 = _context2[\"catch\"](8);\n\n            _iterator.e(_context2.t0);\n\n          case 23:\n            _context2.prev = 23;\n\n            _iterator.f();\n\n            return _context2.finish(23);\n\n          case 26:\n            console.log(\"\\uD83D\\uDCE4 Uploading \".concat(files.length, \" files\"));\n            _context2.next = 29;\n            return storage.put(files);\n\n          case 29:\n            cid = _context2.sent;\n            console.log('📦 Content added with CIDv1:', \"\\\"\".concat(cid, \"\\\"\"));\n            _context2.next = 33;\n            return (0, _execa[\"default\"])(\"ipfs\", [\"cid\", \"format\", \"-f\", \"\\\"%M\\\"\", \"-b\", \"base58btc\", \"\".concat(cid)]);\n\n          case 33:\n            _yield$execa = _context2.sent;\n            stdout = _yield$execa.stdout;\n            console.log('📦 Content added with CIDv0:', stdout);\n            console.log('🎉 The video is successfully uploaded!');\n\n          case 37:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[8, 20, 23, 26]]);\n  }));\n  return _Web3StorageUploader.apply(this, arguments);\n}\n\nfunction encodeHLS(_x3, _x4) {\n  return _encodeHLS.apply(this, arguments);\n}\n\nfunction _encodeHLS() {\n  _encodeHLS = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(fileInfo, filePath) {\n    var workingDir, args, result;\n    return regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            workingDir = \"\".concat(filePath, \"/\").concat(fileInfo.title);\n            args = [\"\".concat(filePath).concat(fileInfo.title)];\n            execac('mkdir', args);\n            args = ['-i', \"\".concat(filePath).concat(fileInfo.video), '-profile:v', 'baseline', '-level', '3.0', '-start_number', '0', '-hls_time', '2', '-hls_list_size', '0', '-f', 'hls', \"\".concat(workingDir, \"/master.m3u8\")];\n            _context3.next = 6;\n            return execac('ffmpeg', args);\n\n          case 6:\n            result = _context3.sent;\n            console.log(result);\n\n          case 8:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _encodeHLS.apply(this, arguments);\n}\n\nexports.uploader = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(fileInfo) {\n    var filePath, web3Token, fileDir, filePaths;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            filePath = _path2[\"default\"].join(__dirname, '../../data/');\n            web3Token = _process[\"default\"].env.Web3Token;\n            fileDir = \"\".concat(filePath, \"/\").concat(fileInfo.title, \"/\");\n            filePaths = [];\n\n            _fsExtra[\"default\"].readdir(_path2[\"default\"].join(filePath, fileInfo.title), function (err, files) {\n              files.forEach(function (file) {\n                console.log(file);\n                filePaths.push(fileDir + file);\n              });\n            });\n\n            _context.next = 7;\n            return encodeHLS(fileInfo, filePath).then(function (result) {\n              return Web3StorageUploader(web3Token, filePaths);\n            });\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x5) {\n    return _ref.apply(this, arguments);\n  };\n}();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RlbnYiLCJjb25maWciLCJleGVjYWMiLCJjb21tYW5kIiwiYXJncyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicHJvYyIsInN0ZG91dCIsIm9uIiwiZGF0YSIsImNvbnNvbGUiLCJsb2ciLCJzdGRlcnIiLCJzZXRFbmNvZGluZyIsIldlYjNTdG9yYWdlVXBsb2FkZXIiLCJ3ZWIzVG9rZW4iLCJmaWxlUGF0aHMiLCJ0b2tlbiIsImVycm9yIiwibGVuZ3RoIiwic3RvcmFnZSIsIldlYjNTdG9yYWdlIiwiZmlsZXMiLCJwYXRoIiwicGF0aEZpbGVzIiwicHVzaCIsInB1dCIsImNpZCIsImVuY29kZUhMUyIsImZpbGVJbmZvIiwiZmlsZVBhdGgiLCJ3b3JraW5nRGlyIiwidGl0bGUiLCJ2aWRlbyIsInJlc3VsdCIsImV4cG9ydHMiLCJ1cGxvYWRlciIsImpvaW4iLCJfX2Rpcm5hbWUiLCJwcm9jZXNzIiwiZW52IiwiV2ViM1Rva2VuIiwiZmlsZURpciIsImZzIiwicmVhZGRpciIsImVyciIsImZvckVhY2giLCJmaWxlIiwidGhlbiJdLCJzb3VyY2VSb290IjoiL2hvbWUvaW5sYWIvaXBmcy12aWRlby1zdHJlYW1pbmcvcHVibGljL3VwbG9hZGluZy8iLCJzb3VyY2VzIjpbInVwbG9hZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IGV4ZWNhIGZyb20gJ2V4ZWNhJztcbmltcG9ydCBmcyBmcm9tICdmcy1leHRyYSc7XG5pbXBvcnQgcHJvY2VzcyBmcm9tICdwcm9jZXNzJztcbmltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcbmltcG9ydCB7IFdlYjNTdG9yYWdlLCBnZXRGaWxlc0Zyb21QYXRoIH0gZnJvbSAnd2ViMy5zdG9yYWdlJztcbmRvdGVudi5jb25maWcoKTtcblxuZnVuY3Rpb24gZXhlY2FjKGNvbW1hbmQsIGFyZ3MpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCBwcm9jID0gZXhlY2EoY29tbWFuZCwgYXJncyk7XG5cbiAgICAgICAgcHJvYy5zdGRvdXQub24oJ2RhdGEnLCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcHJvYy5zdGRlcnIuc2V0RW5jb2RpbmcoXCJ1dGY4XCIpO1xuICAgICAgICBwcm9jLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcHJvYy5vbignY2xvc2UnLCAoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKGAke2NvbW1hbmR9IGVuZGApO1xuICAgICAgICB9KTtcbiAgICB9KVxufVxuXG4vLyBXZWIzU3RvcmFnZVVwbG9hZGVyIHVwbG9hZHMgdmlkZW8gY2h1bmtzIGludG8gSVBGUyBuZXR3b3JrIHVzaW5nIFdlYjMuU3RvcmFnZS5cbmFzeW5jIGZ1bmN0aW9uIFdlYjNTdG9yYWdlVXBsb2FkZXIod2ViM1Rva2VuLCBmaWxlUGF0aHMpIHtcbiAgICBjb25zdCB0b2tlbiA9IHdlYjNUb2tlbjtcblxuICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ/CflJYgQSB0b2tlbiBpcyBuZWVkZWQuIFlvdSBjYW4gY3JlYXRlIG9uZSBvbiBodHRwczovL3dlYjMuc3RvcmFnZScpO1xuICAgIH1cblxuICAgIGlmIChmaWxlUGF0aHMubGVuZ3RoIDwgMSkge1xuICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcign8J+YhSBQbGVhc2Ugc3VwcGx5IHRoZSBwYXRoIHRvIGEgZmlsZSBvciBkaXJlY3RvcnknKTtcbiAgICB9XG5cbiAgICBjb25zdCBzdG9yYWdlID0gbmV3IFdlYjNTdG9yYWdlKHsgdG9rZW4gfSk7XG4gICAgY29uc3QgZmlsZXMgPSBbXVxuICAgIGZvciAoY29uc3QgcGF0aCBvZiBmaWxlUGF0aHMpIHtcbiAgICAgICAgY29uc3QgcGF0aEZpbGVzID0gYXdhaXQgZ2V0RmlsZXNGcm9tUGF0aChwYXRoKTtcbiAgICAgICAgZmlsZXMucHVzaCguLi5wYXRoRmlsZXMpO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGDwn5OkIFVwbG9hZGluZyAke2ZpbGVzLmxlbmd0aH0gZmlsZXNgKTtcbiAgICBjb25zdCBjaWQgPSBhd2FpdCBzdG9yYWdlLnB1dChmaWxlcyk7XG4gICAgY29uc29sZS5sb2coJ/Cfk6YgQ29udGVudCBhZGRlZCB3aXRoIENJRHYxOicsIGBcIiR7Y2lkfVwiYCk7XG4gICAgY29uc3QgeyBzdGRvdXQgfSA9IGF3YWl0IGV4ZWNhKGBpcGZzYCwgW2BjaWRgLCBgZm9ybWF0YCwgYC1mYCwgYFwiJU1cImAsIGAtYmAsIGBiYXNlNThidGNgLCBgJHtjaWR9YF0pO1xuICAgIGNvbnNvbGUubG9nKCfwn5OmIENvbnRlbnQgYWRkZWQgd2l0aCBDSUR2MDonLCBzdGRvdXQpO1xuICAgIGNvbnNvbGUubG9nKCfwn46JIFRoZSB2aWRlbyBpcyBzdWNjZXNzZnVsbHkgdXBsb2FkZWQhJyk7XG59XG5cbi8vIGVuY29kZXNITFMgZW5jb2RlcyB0aGUgdmlkZW8gdXNpbmcgSExTIHByb3RvY29sIGJhc2VkIG9uIGZmbXBlZyB0aGF0IGluc3RhbGxlZCBpbiBtZWRpYSBzZXJ2ZXIuIFxuYXN5bmMgZnVuY3Rpb24gZW5jb2RlSExTKGZpbGVJbmZvLCBmaWxlUGF0aCkge1xuICAgIGNvbnN0IHdvcmtpbmdEaXIgPSBgJHtmaWxlUGF0aH0vJHtmaWxlSW5mby50aXRsZX1gXG4gICAgbGV0IGFyZ3MgPSBbXG4gICAgICAgIGAke2ZpbGVQYXRofSR7ZmlsZUluZm8udGl0bGV9YFxuICAgIF07XG4gICAgZXhlY2FjKCdta2RpcicsIGFyZ3MpO1xuICAgIGFyZ3MgPSBbXG4gICAgICAgICctaScsIGAke2ZpbGVQYXRofSR7ZmlsZUluZm8udmlkZW99YCxcbiAgICAgICAgJy1wcm9maWxlOnYnLCAnYmFzZWxpbmUnLFxuICAgICAgICAnLWxldmVsJywgJzMuMCcsXG4gICAgICAgICctc3RhcnRfbnVtYmVyJywgJzAnLFxuICAgICAgICAnLWhsc190aW1lJywgJzInLFxuICAgICAgICAnLWhsc19saXN0X3NpemUnLCAnMCcsXG4gICAgICAgICctZicsICdobHMnLFxuICAgICAgICBgJHt3b3JraW5nRGlyfS9tYXN0ZXIubTN1OGBcbiAgICBdO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4ZWNhYygnZmZtcGVnJywgYXJncyk7XG4gICAgY29uc29sZS5sb2cocmVzdWx0KTtcbn1cblxuZXhwb3J0cy51cGxvYWRlciA9IGFzeW5jIGZ1bmN0aW9uIChmaWxlSW5mbykge1xuICAgIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uLy4uL2RhdGEvJyk7XG4gICAgY29uc3Qgd2ViM1Rva2VuID0gcHJvY2Vzcy5lbnYuV2ViM1Rva2VuO1xuXG4gICAgbGV0IGZpbGVEaXIgPSBgJHtmaWxlUGF0aH0vJHtmaWxlSW5mby50aXRsZX0vYDtcbiAgICBsZXQgZmlsZVBhdGhzID0gW107XG4gICAgZnMucmVhZGRpcihwYXRoLmpvaW4oZmlsZVBhdGgsIGZpbGVJbmZvLnRpdGxlKSwgKGVyciwgZmlsZXMpID0+IHtcbiAgICAgICAgZmlsZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhmaWxlKTtcbiAgICAgICAgICBmaWxlUGF0aHMucHVzaChmaWxlRGlyK2ZpbGUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGF3YWl0IGVuY29kZUhMUyhmaWxlSW5mbywgZmlsZVBhdGgpXG4gICAgICAgIC50aGVuKHJlc3VsdCA9PiBXZWIzU3RvcmFnZVVwbG9hZGVyKHdlYjNUb2tlbiwgZmlsZVBhdGhzKSk7XG59XG4iXSwibWFwcGluZ3MiOiI7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7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","map":{"version":3,"names":["dotenv","config","execac","command","args","Promise","resolve","reject","proc","stdout","on","data","console","log","stderr","setEncoding","Web3StorageUploader","web3Token","filePaths","token","error","length","storage","Web3Storage","files","path","pathFiles","push","put","cid","encodeHLS","fileInfo","filePath","workingDir","title","video","result","exports","uploader","join","__dirname","process","env","Web3Token","fileDir","fs","readdir","err","forEach","file","then"],"sourceRoot":"/home/inlab/ipfs-video-streaming/public/uploading/","sources":["uploader.js"],"sourcesContent":["import path from 'path';\nimport execa from 'execa';\nimport fs from 'fs-extra';\nimport process from 'process';\nimport dotenv from 'dotenv';\nimport { Web3Storage, getFilesFromPath } from 'web3.storage';\ndotenv.config();\n\nfunction execac(command, args) {\n    return new Promise((resolve, reject) => {\n        const proc = execa(command, args);\n\n        proc.stdout.on('data', (data) => {\n            console.log(data);\n        });\n        \n        proc.stderr.setEncoding(\"utf8\");\n        proc.stderr.on('data', (data) => {\n            console.log(data);\n        });\n\n        proc.on('close', () => {\n            resolve(`${command} end`);\n        });\n    })\n}\n\n// Web3StorageUploader uploads video chunks into IPFS network using Web3.Storage.\nasync function Web3StorageUploader(web3Token, filePaths) {\n    const token = web3Token;\n\n    if (!token) {\n        return console.error('🔖 A token is needed. You can create one on https://web3.storage');\n    }\n\n    if (filePaths.length < 1) {\n        return console.error('😅 Please supply the path to a file or directory');\n    }\n\n    const storage = new Web3Storage({ token });\n    const files = []\n    for (const path of filePaths) {\n        const pathFiles = await getFilesFromPath(path);\n        files.push(...pathFiles);\n    }\n\n    console.log(`📤 Uploading ${files.length} files`);\n    const cid = await storage.put(files);\n    console.log('📦 Content added with CIDv1:', `\"${cid}\"`);\n    const { stdout } = await execa(`ipfs`, [`cid`, `format`, `-f`, `\"%M\"`, `-b`, `base58btc`, `${cid}`]);\n    console.log('📦 Content added with CIDv0:', stdout);\n    console.log('🎉 The video is successfully uploaded!');\n}\n\n// encodesHLS encodes the video using HLS protocol based on ffmpeg that installed in media server. \nasync function encodeHLS(fileInfo, filePath) {\n    const workingDir = `${filePath}/${fileInfo.title}`\n    let args = [\n        `${filePath}${fileInfo.title}`\n    ];\n    execac('mkdir', args);\n    args = [\n        '-i', `${filePath}${fileInfo.video}`,\n        '-profile:v', 'baseline',\n        '-level', '3.0',\n        '-start_number', '0',\n        '-hls_time', '2',\n        '-hls_list_size', '0',\n        '-f', 'hls',\n        `${workingDir}/master.m3u8`\n    ];\n    const result = await execac('ffmpeg', args);\n    console.log(result);\n}\n\nexports.uploader = async function (fileInfo) {\n    const filePath = path.join(__dirname, '../../data/');\n    const web3Token = process.env.Web3Token;\n\n    let fileDir = `${filePath}/${fileInfo.title}/`;\n    let filePaths = [];\n    fs.readdir(path.join(filePath, fileInfo.title), (err, files) => {\n        files.forEach(file => {\n          console.log(file);\n          filePaths.push(fileDir+file);\n        });\n    });\n\n    await encodeHLS(fileInfo, filePath)\n        .then(result => Web3StorageUploader(web3Token, filePaths));\n}\n"],"mappings":"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"}},"mtime":1651507192071}}