(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.ChainsafeLibp2pNoise = factory()}(typeof self !== 'undefined' ? self : this, function () {
var ChainsafeLibp2pNoise=(()=>{var ty=Object.create;var Vn=Object.defineProperty;var ry=Object.getOwnPropertyDescriptor;var iy=Object.getOwnPropertyNames;var ny=Object.getPrototypeOf,ay=Object.prototype.hasOwnProperty;var I0=t=>Vn(t,"__esModule",{value:!0});var zn=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,r)=>(typeof require!="undefined"?require:e)[r]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var ge=(t,e)=>()=>(t&&(e=t(t=0)),e);var B=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),De=(t,e)=>{I0(t);for(var r in e)Vn(t,r,{get:e[r],enumerable:!0})},sy=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of iy(e))!ay.call(t,i)&&i!=="default"&&Vn(t,i,{get:()=>e[i],enumerable:!(r=ry(e,i))||r.enumerable});return t},Ye=t=>sy(I0(Vn(t!=null?ty(ny(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var P0=B(ms=>{"use strict";Object.defineProperty(ms,"__esModule",{value:!0});var T0=65536,oy=function(){function t(){this.isAvailable=!1,this.isInstantiated=!1;var e=typeof self!="undefined"?self.crypto||self.msCrypto:null;e&&e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}return t.prototype.randomBytes=function(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");for(var r=new Uint8Array(e),i=0;i<r.length;i+=T0)this._crypto.getRandomValues(r.subarray(i,i+Math.min(r.length-i,T0)));return r},t}();ms.BrowserRandomSource=oy});var Pt=B(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});function fy(t){for(var e=0;e<t.length;e++)t[e]=0;return t}bs.wipe=fy});var Gr=B(()=>{});var K0=B(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});var uy=Pt(),cy=function(){function t(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof zn!="undefined"){var e=Gr();e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}return t.prototype.randomBytes=function(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");var r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");for(var i=new Uint8Array(e),n=0;n<i.length;n++)i[n]=r[n];return uy.wipe(r),i},t}();ws.NodeRandomSource=cy});var R0=B(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});var hy=P0(),ly=K0(),py=function(){function t(){if(this.isAvailable=!1,this.name="",this._source=new hy.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new ly.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}return t.prototype.randomBytes=function(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)},t}();Es.SystemRandomSource=py});var L0=B(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});function dy(t,e){var r=t>>>16&65535,i=t&65535,n=e>>>16&65535,a=e&65535;return i*a+(r*a+i*n<<16>>>0)|0}ct.mul=Math.imul||dy;function yy(t,e){return t+e|0}ct.add=yy;function gy(t,e){return t-e|0}ct.sub=gy;function xy(t,e){return t<<e|t>>>32-e}ct.rotl=xy;function vy(t,e){return t<<32-e|t>>>e}ct.rotr=vy;function my(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}ct.isInteger=Number.isInteger||my;ct.MAX_SAFE_INTEGER=9007199254740991;ct.isSafeInteger=function(t){return ct.isInteger(t)&&t>=-ct.MAX_SAFE_INTEGER&&t<=ct.MAX_SAFE_INTEGER}});var Wi=B(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});var k0=L0();function by(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}X.readInt16BE=by;function wy(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}X.readUint16BE=wy;function Ey(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}X.readInt16LE=Ey;function Sy(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}X.readUint16LE=Sy;function U0(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}X.writeUint16BE=U0;X.writeInt16BE=U0;function D0(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}X.writeUint16LE=D0;X.writeInt16LE=D0;function Ss(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}X.readInt32BE=Ss;function Bs(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}X.readUint32BE=Bs;function _s(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}X.readInt32LE=_s;function As(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}X.readUint32LE=As;function Gn(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}X.writeUint32BE=Gn;X.writeInt32BE=Gn;function Wn(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}X.writeUint32LE=Wn;X.writeInt32LE=Wn;function By(t,e){e===void 0&&(e=0);var r=Ss(t,e),i=Ss(t,e+4);return r*4294967296+i-(i>>31)*4294967296}X.readInt64BE=By;function _y(t,e){e===void 0&&(e=0);var r=Bs(t,e),i=Bs(t,e+4);return r*4294967296+i}X.readUint64BE=_y;function Ay(t,e){e===void 0&&(e=0);var r=_s(t,e),i=_s(t,e+4);return i*4294967296+r-(r>>31)*4294967296}X.readInt64LE=Ay;function Cy(t,e){e===void 0&&(e=0);var r=As(t,e),i=As(t,e+4);return i*4294967296+r}X.readUint64LE=Cy;function N0(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Gn(t/4294967296>>>0,e,r),Gn(t>>>0,e,r+4),e}X.writeUint64BE=N0;X.writeInt64BE=N0;function F0(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Wn(t>>>0,e,r),Wn(t/4294967296>>>0,e,r+4),e}X.writeUint64LE=F0;X.writeInt64LE=F0;function Iy(t,e,r){if(r===void 0&&(r=0),t%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,n=1,a=t/8+r-1;a>=r;a--)i+=e[a]*n,n*=256;return i}X.readUintBE=Iy;function Ty(t,e,r){if(r===void 0&&(r=0),t%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,n=1,a=r;a<r+t/8;a++)i+=e[a]*n,n*=256;return i}X.readUintLE=Ty;function Py(t,e,r,i){if(r===void 0&&(r=new Uint8Array(t/8)),i===void 0&&(i=0),t%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!k0.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var n=1,a=t/8+i-1;a>=i;a--)r[a]=e/n&255,n*=256;return r}X.writeUintBE=Py;function Ky(t,e,r,i){if(r===void 0&&(r=new Uint8Array(t/8)),i===void 0&&(i=0),t%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!k0.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var n=1,a=i;a<i+t/8;a++)r[a]=e/n&255,n*=256;return r}X.writeUintLE=Ky;function Ry(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}X.readFloat32BE=Ry;function Ly(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}X.readFloat32LE=Ly;function ky(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}X.readFloat64BE=ky;function Uy(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}X.readFloat64LE=Uy;function Dy(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(r,t),e}X.writeFloat32BE=Dy;function Ny(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(r,t,!0),e}X.writeFloat32LE=Ny;function Fy(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(r,t),e}X.writeFloat64BE=Fy;function My(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(r,t,!0),e}X.writeFloat64LE=My});var H0=B(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});var Oy=R0(),qy=Wi(),M0=Pt();St.defaultRandomSource=new Oy.SystemRandomSource;function Cs(t,e){return e===void 0&&(e=St.defaultRandomSource),e.randomBytes(t)}St.randomBytes=Cs;function Hy(t){t===void 0&&(t=St.defaultRandomSource);var e=Cs(4,t),r=qy.readUint32LE(e);return M0.wipe(e),r}St.randomUint32=Hy;var O0="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function q0(t,e,r){if(e===void 0&&(e=O0),r===void 0&&(r=St.defaultRandomSource),e.length<2)throw new Error("randomString charset is too short");if(e.length>256)throw new Error("randomString charset is too long");for(var i="",n=e.length,a=256-256%n;t>0;){for(var s=Cs(Math.ceil(t*256/a),r),o=0;o<s.length&&t>0;o++){var f=s[o];f<a&&(i+=e.charAt(f%n),t--)}M0.wipe(s)}return i}St.randomString=q0;function Vy(t,e,r){e===void 0&&(e=O0),r===void 0&&(r=St.defaultRandomSource);var i=Math.ceil(t/(Math.log(e.length)/Math.LN2));return q0(i,e,r)}St.randomStringForEntropy=Vy});var Xn=B(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});var zy=H0(),Gy=Pt();at.PUBLIC_KEY_LENGTH=32;at.SECRET_KEY_LENGTH=32;at.SHARED_KEY_LENGTH=32;function Kt(t){var e=new Float64Array(16);if(t)for(var r=0;r<t.length;r++)e[r]=t[r];return e}var V0=new Uint8Array(32);V0[0]=9;var Wy=Kt([56129,1]);function Is(t){for(var e=1,r=0;r<16;r++){var i=t[r]+e+65535;e=Math.floor(i/65536),t[r]=i-e*65536}t[0]+=e-1+37*(e-1)}function $i(t,e,r){for(var i=~(r-1),n=0;n<16;n++){var a=i&(t[n]^e[n]);t[n]^=a,e[n]^=a}}function $y(t,e){for(var r=Kt(),i=Kt(),n=0;n<16;n++)i[n]=e[n];Is(i),Is(i),Is(i);for(var a=0;a<2;a++){r[0]=i[0]-65517;for(var n=1;n<15;n++)r[n]=i[n]-65535-(r[n-1]>>16&1),r[n-1]&=65535;r[15]=i[15]-32767-(r[14]>>16&1);var s=r[15]>>16&1;r[14]&=65535,$i(i,r,1-s)}for(var n=0;n<16;n++)t[2*n]=i[n]&255,t[2*n+1]=i[n]>>8}function jy(t,e){for(var r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function $n(t,e,r){for(var i=0;i<16;i++)t[i]=e[i]+r[i]}function jn(t,e,r){for(var i=0;i<16;i++)t[i]=e[i]-r[i]}function tr(t,e,r){var i,n,a=0,s=0,o=0,f=0,u=0,c=0,h=0,l=0,d=0,p=0,y=0,g=0,v=0,b=0,w=0,T=0,C=0,A=0,R=0,L=0,N=0,O=0,$=0,G=0,ne=0,ye=0,M=0,H=0,_=0,q=0,be=0,Z=r[0],Q=r[1],J=r[2],oe=r[3],fe=r[4],ue=r[5],ce=r[6],he=r[7],He=r[8],Ve=r[9],ze=r[10],Ge=r[11],We=r[12],$e=r[13],je=r[14],Xe=r[15];i=e[0],a+=i*Z,s+=i*Q,o+=i*J,f+=i*oe,u+=i*fe,c+=i*ue,h+=i*ce,l+=i*he,d+=i*He,p+=i*Ve,y+=i*ze,g+=i*Ge,v+=i*We,b+=i*$e,w+=i*je,T+=i*Xe,i=e[1],s+=i*Z,o+=i*Q,f+=i*J,u+=i*oe,c+=i*fe,h+=i*ue,l+=i*ce,d+=i*he,p+=i*He,y+=i*Ve,g+=i*ze,v+=i*Ge,b+=i*We,w+=i*$e,T+=i*je,C+=i*Xe,i=e[2],o+=i*Z,f+=i*Q,u+=i*J,c+=i*oe,h+=i*fe,l+=i*ue,d+=i*ce,p+=i*he,y+=i*He,g+=i*Ve,v+=i*ze,b+=i*Ge,w+=i*We,T+=i*$e,C+=i*je,A+=i*Xe,i=e[3],f+=i*Z,u+=i*Q,c+=i*J,h+=i*oe,l+=i*fe,d+=i*ue,p+=i*ce,y+=i*he,g+=i*He,v+=i*Ve,b+=i*ze,w+=i*Ge,T+=i*We,C+=i*$e,A+=i*je,R+=i*Xe,i=e[4],u+=i*Z,c+=i*Q,h+=i*J,l+=i*oe,d+=i*fe,p+=i*ue,y+=i*ce,g+=i*he,v+=i*He,b+=i*Ve,w+=i*ze,T+=i*Ge,C+=i*We,A+=i*$e,R+=i*je,L+=i*Xe,i=e[5],c+=i*Z,h+=i*Q,l+=i*J,d+=i*oe,p+=i*fe,y+=i*ue,g+=i*ce,v+=i*he,b+=i*He,w+=i*Ve,T+=i*ze,C+=i*Ge,A+=i*We,R+=i*$e,L+=i*je,N+=i*Xe,i=e[6],h+=i*Z,l+=i*Q,d+=i*J,p+=i*oe,y+=i*fe,g+=i*ue,v+=i*ce,b+=i*he,w+=i*He,T+=i*Ve,C+=i*ze,A+=i*Ge,R+=i*We,L+=i*$e,N+=i*je,O+=i*Xe,i=e[7],l+=i*Z,d+=i*Q,p+=i*J,y+=i*oe,g+=i*fe,v+=i*ue,b+=i*ce,w+=i*he,T+=i*He,C+=i*Ve,A+=i*ze,R+=i*Ge,L+=i*We,N+=i*$e,O+=i*je,$+=i*Xe,i=e[8],d+=i*Z,p+=i*Q,y+=i*J,g+=i*oe,v+=i*fe,b+=i*ue,w+=i*ce,T+=i*he,C+=i*He,A+=i*Ve,R+=i*ze,L+=i*Ge,N+=i*We,O+=i*$e,$+=i*je,G+=i*Xe,i=e[9],p+=i*Z,y+=i*Q,g+=i*J,v+=i*oe,b+=i*fe,w+=i*ue,T+=i*ce,C+=i*he,A+=i*He,R+=i*Ve,L+=i*ze,N+=i*Ge,O+=i*We,$+=i*$e,G+=i*je,ne+=i*Xe,i=e[10],y+=i*Z,g+=i*Q,v+=i*J,b+=i*oe,w+=i*fe,T+=i*ue,C+=i*ce,A+=i*he,R+=i*He,L+=i*Ve,N+=i*ze,O+=i*Ge,$+=i*We,G+=i*$e,ne+=i*je,ye+=i*Xe,i=e[11],g+=i*Z,v+=i*Q,b+=i*J,w+=i*oe,T+=i*fe,C+=i*ue,A+=i*ce,R+=i*he,L+=i*He,N+=i*Ve,O+=i*ze,$+=i*Ge,G+=i*We,ne+=i*$e,ye+=i*je,M+=i*Xe,i=e[12],v+=i*Z,b+=i*Q,w+=i*J,T+=i*oe,C+=i*fe,A+=i*ue,R+=i*ce,L+=i*he,N+=i*He,O+=i*Ve,$+=i*ze,G+=i*Ge,ne+=i*We,ye+=i*$e,M+=i*je,H+=i*Xe,i=e[13],b+=i*Z,w+=i*Q,T+=i*J,C+=i*oe,A+=i*fe,R+=i*ue,L+=i*ce,N+=i*he,O+=i*He,$+=i*Ve,G+=i*ze,ne+=i*Ge,ye+=i*We,M+=i*$e,H+=i*je,_+=i*Xe,i=e[14],w+=i*Z,T+=i*Q,C+=i*J,A+=i*oe,R+=i*fe,L+=i*ue,N+=i*ce,O+=i*he,$+=i*He,G+=i*Ve,ne+=i*ze,ye+=i*Ge,M+=i*We,H+=i*$e,_+=i*je,q+=i*Xe,i=e[15],T+=i*Z,C+=i*Q,A+=i*J,R+=i*oe,L+=i*fe,N+=i*ue,O+=i*ce,$+=i*he,G+=i*He,ne+=i*Ve,ye+=i*ze,M+=i*Ge,H+=i*We,_+=i*$e,q+=i*je,be+=i*Xe,a+=38*C,s+=38*A,o+=38*R,f+=38*L,u+=38*N,c+=38*O,h+=38*$,l+=38*G,d+=38*ne,p+=38*ye,y+=38*M,g+=38*H,v+=38*_,b+=38*q,w+=38*be,n=1,i=a+n+65535,n=Math.floor(i/65536),a=i-n*65536,i=s+n+65535,n=Math.floor(i/65536),s=i-n*65536,i=o+n+65535,n=Math.floor(i/65536),o=i-n*65536,i=f+n+65535,n=Math.floor(i/65536),f=i-n*65536,i=u+n+65535,n=Math.floor(i/65536),u=i-n*65536,i=c+n+65535,n=Math.floor(i/65536),c=i-n*65536,i=h+n+65535,n=Math.floor(i/65536),h=i-n*65536,i=l+n+65535,n=Math.floor(i/65536),l=i-n*65536,i=d+n+65535,n=Math.floor(i/65536),d=i-n*65536,i=p+n+65535,n=Math.floor(i/65536),p=i-n*65536,i=y+n+65535,n=Math.floor(i/65536),y=i-n*65536,i=g+n+65535,n=Math.floor(i/65536),g=i-n*65536,i=v+n+65535,n=Math.floor(i/65536),v=i-n*65536,i=b+n+65535,n=Math.floor(i/65536),b=i-n*65536,i=w+n+65535,n=Math.floor(i/65536),w=i-n*65536,i=T+n+65535,n=Math.floor(i/65536),T=i-n*65536,a+=n-1+37*(n-1),n=1,i=a+n+65535,n=Math.floor(i/65536),a=i-n*65536,i=s+n+65535,n=Math.floor(i/65536),s=i-n*65536,i=o+n+65535,n=Math.floor(i/65536),o=i-n*65536,i=f+n+65535,n=Math.floor(i/65536),f=i-n*65536,i=u+n+65535,n=Math.floor(i/65536),u=i-n*65536,i=c+n+65535,n=Math.floor(i/65536),c=i-n*65536,i=h+n+65535,n=Math.floor(i/65536),h=i-n*65536,i=l+n+65535,n=Math.floor(i/65536),l=i-n*65536,i=d+n+65535,n=Math.floor(i/65536),d=i-n*65536,i=p+n+65535,n=Math.floor(i/65536),p=i-n*65536,i=y+n+65535,n=Math.floor(i/65536),y=i-n*65536,i=g+n+65535,n=Math.floor(i/65536),g=i-n*65536,i=v+n+65535,n=Math.floor(i/65536),v=i-n*65536,i=b+n+65535,n=Math.floor(i/65536),b=i-n*65536,i=w+n+65535,n=Math.floor(i/65536),w=i-n*65536,i=T+n+65535,n=Math.floor(i/65536),T=i-n*65536,a+=n-1+37*(n-1),t[0]=a,t[1]=s,t[2]=o,t[3]=f,t[4]=u,t[5]=c,t[6]=h,t[7]=l,t[8]=d,t[9]=p,t[10]=y,t[11]=g,t[12]=v,t[13]=b,t[14]=w,t[15]=T}function ji(t,e){tr(t,e,e)}function Xy(t,e){for(var r=Kt(),i=0;i<16;i++)r[i]=e[i];for(var i=253;i>=0;i--)ji(r,r),i!==2&&i!==4&&tr(r,r,e);for(var i=0;i<16;i++)t[i]=r[i]}function Ts(t,e){for(var r=new Uint8Array(32),i=new Float64Array(80),n=Kt(),a=Kt(),s=Kt(),o=Kt(),f=Kt(),u=Kt(),c=0;c<31;c++)r[c]=t[c];r[31]=t[31]&127|64,r[0]&=248,jy(i,e);for(var c=0;c<16;c++)a[c]=i[c];n[0]=o[0]=1;for(var c=254;c>=0;--c){var h=r[c>>>3]>>>(c&7)&1;$i(n,a,h),$i(s,o,h),$n(f,n,s),jn(n,n,s),$n(s,a,o),jn(a,a,o),ji(o,f),ji(u,n),tr(n,s,n),tr(s,a,f),$n(f,n,s),jn(n,n,s),ji(a,n),jn(s,o,u),tr(n,s,Wy),$n(n,n,o),tr(s,s,n),tr(n,o,u),tr(o,a,i),ji(a,f),$i(n,a,h),$i(s,o,h)}for(var c=0;c<16;c++)i[c+16]=n[c],i[c+32]=s[c],i[c+48]=a[c],i[c+64]=o[c];var l=i.subarray(32),d=i.subarray(16);Xy(l,l),tr(d,d,l);var p=new Uint8Array(32);return $y(p,d),p}at.scalarMult=Ts;function z0(t){return Ts(t,V0)}at.scalarMultBase=z0;function G0(t){if(t.length!==at.SECRET_KEY_LENGTH)throw new Error("x25519: seed must be "+at.SECRET_KEY_LENGTH+" bytes");var e=new Uint8Array(t),r=z0(e);return{publicKey:r,secretKey:e}}at.generateKeyPairFromSeed=G0;function Yy(t){var e=zy.randomBytes(32,t),r=G0(e);return Gy.wipe(e),r}at.generateKeyPair=Yy;function Zy(t,e,r){if(r===void 0&&(r=!1),t.length!==at.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(e.length!==at.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");var i=Ts(t,e);if(r){for(var n=0,a=0;a<i.length;a++)n|=i[a];if(n===0)throw new Error("X25519: invalid shared key")}return i}at.sharedKey=Zy});var j0=B(Yn=>{"use strict";Yn.byteLength=Jy;Yn.toByteArray=t1;Yn.fromByteArray=n1;var Rt=[],pt=[],Qy=typeof Uint8Array!="undefined"?Uint8Array:Array,Ps="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Wr=0,W0=Ps.length;Wr<W0;++Wr)Rt[Wr]=Ps[Wr],pt[Ps.charCodeAt(Wr)]=Wr;var Wr,W0;pt["-".charCodeAt(0)]=62;pt["_".charCodeAt(0)]=63;function $0(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var i=r===e?0:4-r%4;return[r,i]}function Jy(t){var e=$0(t),r=e[0],i=e[1];return(r+i)*3/4-i}function e1(t,e,r){return(e+r)*3/4-r}function t1(t){var e,r=$0(t),i=r[0],n=r[1],a=new Qy(e1(t,i,n)),s=0,o=n>0?i-4:i,f;for(f=0;f<o;f+=4)e=pt[t.charCodeAt(f)]<<18|pt[t.charCodeAt(f+1)]<<12|pt[t.charCodeAt(f+2)]<<6|pt[t.charCodeAt(f+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=e&255;return n===2&&(e=pt[t.charCodeAt(f)]<<2|pt[t.charCodeAt(f+1)]>>4,a[s++]=e&255),n===1&&(e=pt[t.charCodeAt(f)]<<10|pt[t.charCodeAt(f+1)]<<4|pt[t.charCodeAt(f+2)]>>2,a[s++]=e>>8&255,a[s++]=e&255),a}function r1(t){return Rt[t>>18&63]+Rt[t>>12&63]+Rt[t>>6&63]+Rt[t&63]}function i1(t,e,r){for(var i,n=[],a=e;a<r;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),n.push(r1(i));return n.join("")}function n1(t){for(var e,r=t.length,i=r%3,n=[],a=16383,s=0,o=r-i;s<o;s+=a)n.push(i1(t,s,s+a>o?o:s+a));return i===1?(e=t[r-1],n.push(Rt[e>>2]+Rt[e<<4&63]+"==")):i===2&&(e=(t[r-2]<<8)+t[r-1],n.push(Rt[e>>10]+Rt[e>>4&63]+Rt[e<<2&63]+"=")),n.join("")}});var X0=B(Ks=>{Ks.read=function(t,e,r,i,n){var a,s,o=n*8-i-1,f=(1<<o)-1,u=f>>1,c=-7,h=r?n-1:0,l=r?-1:1,d=t[e+h];for(h+=l,a=d&(1<<-c)-1,d>>=-c,c+=o;c>0;a=a*256+t[e+h],h+=l,c-=8);for(s=a&(1<<-c)-1,a>>=-c,c+=i;c>0;s=s*256+t[e+h],h+=l,c-=8);if(a===0)a=1-u;else{if(a===f)return s?NaN:(d?-1:1)*(1/0);s=s+Math.pow(2,i),a=a-u}return(d?-1:1)*s*Math.pow(2,a-i)};Ks.write=function(t,e,r,i,n,a){var s,o,f,u=a*8-n-1,c=(1<<u)-1,h=c>>1,l=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:a-1,p=i?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-s))<1&&(s--,f*=2),s+h>=1?e+=l/f:e+=l*Math.pow(2,1-h),e*f>=2&&(s++,f/=2),s+h>=c?(o=0,s=c):s+h>=1?(o=(e*f-1)*Math.pow(2,n),s=s+h):(o=e*Math.pow(2,h-1)*Math.pow(2,n),s=0));n>=8;t[r+d]=o&255,d+=p,o/=256,n-=8);for(s=s<<n|o,u+=n;u>0;t[r+d]=s&255,d+=p,s/=256,u-=8);t[r+d-p]|=y*128}});var vr=B(li=>{"use strict";var Rs=j0(),ui=X0(),Y0=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;li.Buffer=E;li.SlowBuffer=c1;li.INSPECT_MAX_BYTES=50;var Zn=2147483647;li.kMaxLength=Zn;E.TYPED_ARRAY_SUPPORT=a1();!E.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a1(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch(t){return!1}}Object.defineProperty(E.prototype,"parent",{enumerable:!0,get:function(){if(!!E.isBuffer(this))return this.buffer}});Object.defineProperty(E.prototype,"offset",{enumerable:!0,get:function(){if(!!E.isBuffer(this))return this.byteOffset}});function rr(t){if(t>Zn)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,E.prototype),e}function E(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Ls(t)}return Z0(t,e,r)}E.poolSize=8192;function Z0(t,e,r){if(typeof t=="string")return o1(t,e);if(ArrayBuffer.isView(t))return f1(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Lt(t,ArrayBuffer)||t&&Lt(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(Lt(t,SharedArrayBuffer)||t&&Lt(t.buffer,SharedArrayBuffer)))return Us(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let i=t.valueOf&&t.valueOf();if(i!=null&&i!==t)return E.from(i,e,r);let n=u1(t);if(n)return n;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return E.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}E.from=function(t,e,r){return Z0(t,e,r)};Object.setPrototypeOf(E.prototype,Uint8Array.prototype);Object.setPrototypeOf(E,Uint8Array);function Q0(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function s1(t,e,r){return Q0(t),t<=0?rr(t):e!==void 0?typeof r=="string"?rr(t).fill(e,r):rr(t).fill(e):rr(t)}E.alloc=function(t,e,r){return s1(t,e,r)};function Ls(t){return Q0(t),rr(t<0?0:Ds(t)|0)}E.allocUnsafe=function(t){return Ls(t)};E.allocUnsafeSlow=function(t){return Ls(t)};function o1(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!E.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=J0(t,e)|0,i=rr(r),n=i.write(t,e);return n!==r&&(i=i.slice(0,n)),i}function ks(t){let e=t.length<0?0:Ds(t.length)|0,r=rr(e);for(let i=0;i<e;i+=1)r[i]=t[i]&255;return r}function f1(t){if(Lt(t,Uint8Array)){let e=new Uint8Array(t);return Us(e.buffer,e.byteOffset,e.byteLength)}return ks(t)}function Us(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let i;return e===void 0&&r===void 0?i=new Uint8Array(t):r===void 0?i=new Uint8Array(t,e):i=new Uint8Array(t,e,r),Object.setPrototypeOf(i,E.prototype),i}function u1(t){if(E.isBuffer(t)){let e=Ds(t.length)|0,r=rr(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||Ms(t.length)?rr(0):ks(t);if(t.type==="Buffer"&&Array.isArray(t.data))return ks(t.data)}function Ds(t){if(t>=Zn)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Zn.toString(16)+" bytes");return t|0}function c1(t){return+t!=t&&(t=0),E.alloc(+t)}E.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==E.prototype};E.compare=function(e,r){if(Lt(e,Uint8Array)&&(e=E.from(e,e.offset,e.byteLength)),Lt(r,Uint8Array)&&(r=E.from(r,r.offset,r.byteLength)),!E.isBuffer(e)||!E.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let i=e.length,n=r.length;for(let a=0,s=Math.min(i,n);a<s;++a)if(e[a]!==r[a]){i=e[a],n=r[a];break}return i<n?-1:n<i?1:0};E.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};E.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return E.alloc(0);let i;if(r===void 0)for(r=0,i=0;i<e.length;++i)r+=e[i].length;let n=E.allocUnsafe(r),a=0;for(i=0;i<e.length;++i){let s=e[i];if(Lt(s,Uint8Array))a+s.length>n.length?(E.isBuffer(s)||(s=E.from(s)),s.copy(n,a)):Uint8Array.prototype.set.call(n,s,a);else if(E.isBuffer(s))s.copy(n,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=s.length}return n};function J0(t,e){if(E.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Lt(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&r===0)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Fs(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return lf(t).length;default:if(n)return i?-1:Fs(t).length;e=(""+e).toLowerCase(),n=!0}}E.byteLength=J0;function h1(t,e,r){let i=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return w1(this,e,r);case"utf8":case"utf-8":return rf(this,e,r);case"ascii":return m1(this,e,r);case"latin1":case"binary":return b1(this,e,r);case"base64":return x1(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E1(this,e,r);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}E.prototype._isBuffer=!0;function $r(t,e,r){let i=t[e];t[e]=t[r],t[r]=i}E.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)$r(this,r,r+1);return this};E.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)$r(this,r,r+3),$r(this,r+1,r+2);return this};E.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)$r(this,r,r+7),$r(this,r+1,r+6),$r(this,r+2,r+5),$r(this,r+3,r+4);return this};E.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?rf(this,0,e):h1.apply(this,arguments)};E.prototype.toLocaleString=E.prototype.toString;E.prototype.equals=function(e){if(!E.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:E.compare(this,e)===0};E.prototype.inspect=function(){let e="",r=li.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};Y0&&(E.prototype[Y0]=E.prototype.inspect);E.prototype.compare=function(e,r,i,n,a){if(Lt(e,Uint8Array)&&(e=E.from(e,e.offset,e.byteLength)),!E.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),i===void 0&&(i=e?e.length:0),n===void 0&&(n=0),a===void 0&&(a=this.length),r<0||i>e.length||n<0||a>this.length)throw new RangeError("out of range index");if(n>=a&&r>=i)return 0;if(n>=a)return-1;if(r>=i)return 1;if(r>>>=0,i>>>=0,n>>>=0,a>>>=0,this===e)return 0;let s=a-n,o=i-r,f=Math.min(s,o),u=this.slice(n,a),c=e.slice(r,i);for(let h=0;h<f;++h)if(u[h]!==c[h]){s=u[h],o=c[h];break}return s<o?-1:o<s?1:0};function ef(t,e,r,i,n){if(t.length===0)return-1;if(typeof r=="string"?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Ms(r)&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return-1;r=t.length-1}else if(r<0)if(n)r=0;else return-1;if(typeof e=="string"&&(e=E.from(e,i)),E.isBuffer(e))return e.length===0?-1:tf(t,e,r,i,n);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):tf(t,[e],r,i,n);throw new TypeError("val must be string, number or Buffer")}function tf(t,e,r,i,n){let a=1,s=t.length,o=e.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(t.length<2||e.length<2)return-1;a=2,s/=2,o/=2,r/=2}function f(c,h){return a===1?c[h]:c.readUInt16BE(h*a)}let u;if(n){let c=-1;for(u=r;u<s;u++)if(f(t,u)===f(e,c===-1?0:u-c)){if(c===-1&&(c=u),u-c+1===o)return c*a}else c!==-1&&(u-=u-c),c=-1}else for(r+o>s&&(r=s-o),u=r;u>=0;u--){let c=!0;for(let h=0;h<o;h++)if(f(t,u+h)!==f(e,h)){c=!1;break}if(c)return u}return-1}E.prototype.includes=function(e,r,i){return this.indexOf(e,r,i)!==-1};E.prototype.indexOf=function(e,r,i){return ef(this,e,r,i,!0)};E.prototype.lastIndexOf=function(e,r,i){return ef(this,e,r,i,!1)};function l1(t,e,r,i){r=Number(r)||0;let n=t.length-r;i?(i=Number(i),i>n&&(i=n)):i=n;let a=e.length;i>a/2&&(i=a/2);let s;for(s=0;s<i;++s){let o=parseInt(e.substr(s*2,2),16);if(Ms(o))return s;t[r+s]=o}return s}function p1(t,e,r,i){return Qn(Fs(e,t.length-r),t,r,i)}function d1(t,e,r,i){return Qn(A1(e),t,r,i)}function y1(t,e,r,i){return Qn(lf(e),t,r,i)}function g1(t,e,r,i){return Qn(C1(e,t.length-r),t,r,i)}E.prototype.write=function(e,r,i,n){if(r===void 0)n="utf8",i=this.length,r=0;else if(i===void 0&&typeof r=="string")n=r,i=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(i)?(i=i>>>0,n===void 0&&(n="utf8")):(n=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let a=this.length-r;if((i===void 0||i>a)&&(i=a),e.length>0&&(i<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return l1(this,e,r,i);case"utf8":case"utf-8":return p1(this,e,r,i);case"ascii":case"latin1":case"binary":return d1(this,e,r,i);case"base64":return y1(this,e,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g1(this,e,r,i);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}};E.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function x1(t,e,r){return e===0&&r===t.length?Rs.fromByteArray(t):Rs.fromByteArray(t.slice(e,r))}function rf(t,e,r){r=Math.min(t.length,r);let i=[],n=e;for(;n<r;){let a=t[n],s=null,o=a>239?4:a>223?3:a>191?2:1;if(n+o<=r){let f,u,c,h;switch(o){case 1:a<128&&(s=a);break;case 2:f=t[n+1],(f&192)==128&&(h=(a&31)<<6|f&63,h>127&&(s=h));break;case 3:f=t[n+1],u=t[n+2],(f&192)==128&&(u&192)==128&&(h=(a&15)<<12|(f&63)<<6|u&63,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:f=t[n+1],u=t[n+2],c=t[n+3],(f&192)==128&&(u&192)==128&&(c&192)==128&&(h=(a&15)<<18|(f&63)<<12|(u&63)<<6|c&63,h>65535&&h<1114112&&(s=h))}}s===null?(s=65533,o=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|s&1023),i.push(s),n+=o}return v1(i)}var nf=4096;function v1(t){let e=t.length;if(e<=nf)return String.fromCharCode.apply(String,t);let r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=nf));return r}function m1(t,e,r){let i="";r=Math.min(t.length,r);for(let n=e;n<r;++n)i+=String.fromCharCode(t[n]&127);return i}function b1(t,e,r){let i="";r=Math.min(t.length,r);for(let n=e;n<r;++n)i+=String.fromCharCode(t[n]);return i}function w1(t,e,r){let i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);let n="";for(let a=e;a<r;++a)n+=I1[t[a]];return n}function E1(t,e,r){let i=t.slice(e,r),n="";for(let a=0;a<i.length-1;a+=2)n+=String.fromCharCode(i[a]+i[a+1]*256);return n}E.prototype.slice=function(e,r){let i=this.length;e=~~e,r=r===void 0?i:~~r,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),r<0?(r+=i,r<0&&(r=0)):r>i&&(r=i),r<e&&(r=e);let n=this.subarray(e,r);return Object.setPrototypeOf(n,E.prototype),n};function Ne(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}E.prototype.readUintLE=E.prototype.readUIntLE=function(e,r,i){e=e>>>0,r=r>>>0,i||Ne(e,r,this.length);let n=this[e],a=1,s=0;for(;++s<r&&(a*=256);)n+=this[e+s]*a;return n};E.prototype.readUintBE=E.prototype.readUIntBE=function(e,r,i){e=e>>>0,r=r>>>0,i||Ne(e,r,this.length);let n=this[e+--r],a=1;for(;r>0&&(a*=256);)n+=this[e+--r]*a;return n};E.prototype.readUint8=E.prototype.readUInt8=function(e,r){return e=e>>>0,r||Ne(e,1,this.length),this[e]};E.prototype.readUint16LE=E.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||Ne(e,2,this.length),this[e]|this[e+1]<<8};E.prototype.readUint16BE=E.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||Ne(e,2,this.length),this[e]<<8|this[e+1]};E.prototype.readUint32LE=E.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||Ne(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};E.prototype.readUint32BE=E.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||Ne(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};E.prototype.readBigUInt64LE=xr(function(e){e=e>>>0,hi(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Xi(e,this.length-8);let n=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,a=this[++e]+this[++e]*2**8+this[++e]*2**16+i*2**24;return BigInt(n)+(BigInt(a)<<BigInt(32))});E.prototype.readBigUInt64BE=xr(function(e){e=e>>>0,hi(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Xi(e,this.length-8);let n=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],a=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i;return(BigInt(n)<<BigInt(32))+BigInt(a)});E.prototype.readIntLE=function(e,r,i){e=e>>>0,r=r>>>0,i||Ne(e,r,this.length);let n=this[e],a=1,s=0;for(;++s<r&&(a*=256);)n+=this[e+s]*a;return a*=128,n>=a&&(n-=Math.pow(2,8*r)),n};E.prototype.readIntBE=function(e,r,i){e=e>>>0,r=r>>>0,i||Ne(e,r,this.length);let n=r,a=1,s=this[e+--n];for(;n>0&&(a*=256);)s+=this[e+--n]*a;return a*=128,s>=a&&(s-=Math.pow(2,8*r)),s};E.prototype.readInt8=function(e,r){return e=e>>>0,r||Ne(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};E.prototype.readInt16LE=function(e,r){e=e>>>0,r||Ne(e,2,this.length);let i=this[e]|this[e+1]<<8;return i&32768?i|4294901760:i};E.prototype.readInt16BE=function(e,r){e=e>>>0,r||Ne(e,2,this.length);let i=this[e+1]|this[e]<<8;return i&32768?i|4294901760:i};E.prototype.readInt32LE=function(e,r){return e=e>>>0,r||Ne(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};E.prototype.readInt32BE=function(e,r){return e=e>>>0,r||Ne(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};E.prototype.readBigInt64LE=xr(function(e){e=e>>>0,hi(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Xi(e,this.length-8);let n=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(i<<24);return(BigInt(n)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});E.prototype.readBigInt64BE=xr(function(e){e=e>>>0,hi(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&Xi(e,this.length-8);let n=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i)});E.prototype.readFloatLE=function(e,r){return e=e>>>0,r||Ne(e,4,this.length),ui.read(this,e,!0,23,4)};E.prototype.readFloatBE=function(e,r){return e=e>>>0,r||Ne(e,4,this.length),ui.read(this,e,!1,23,4)};E.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||Ne(e,8,this.length),ui.read(this,e,!0,52,8)};E.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||Ne(e,8,this.length),ui.read(this,e,!1,52,8)};function st(t,e,r,i,n,a){if(!E.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<a)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}E.prototype.writeUintLE=E.prototype.writeUIntLE=function(e,r,i,n){if(e=+e,r=r>>>0,i=i>>>0,!n){let o=Math.pow(2,8*i)-1;st(this,e,r,i,o,0)}let a=1,s=0;for(this[r]=e&255;++s<i&&(a*=256);)this[r+s]=e/a&255;return r+i};E.prototype.writeUintBE=E.prototype.writeUIntBE=function(e,r,i,n){if(e=+e,r=r>>>0,i=i>>>0,!n){let o=Math.pow(2,8*i)-1;st(this,e,r,i,o,0)}let a=i-1,s=1;for(this[r+a]=e&255;--a>=0&&(s*=256);)this[r+a]=e/s&255;return r+i};E.prototype.writeUint8=E.prototype.writeUInt8=function(e,r,i){return e=+e,r=r>>>0,i||st(this,e,r,1,255,0),this[r]=e&255,r+1};E.prototype.writeUint16LE=E.prototype.writeUInt16LE=function(e,r,i){return e=+e,r=r>>>0,i||st(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};E.prototype.writeUint16BE=E.prototype.writeUInt16BE=function(e,r,i){return e=+e,r=r>>>0,i||st(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};E.prototype.writeUint32LE=E.prototype.writeUInt32LE=function(e,r,i){return e=+e,r=r>>>0,i||st(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};E.prototype.writeUint32BE=E.prototype.writeUInt32BE=function(e,r,i){return e=+e,r=r>>>0,i||st(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function af(t,e,r,i,n){hf(e,i,n,t,r,7);let a=Number(e&BigInt(4294967295));t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,r}function sf(t,e,r,i,n){hf(e,i,n,t,r,7);let a=Number(e&BigInt(4294967295));t[r+7]=a,a=a>>8,t[r+6]=a,a=a>>8,t[r+5]=a,a=a>>8,t[r+4]=a;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s=s>>8,t[r+2]=s,s=s>>8,t[r+1]=s,s=s>>8,t[r]=s,r+8}E.prototype.writeBigUInt64LE=xr(function(e,r=0){return af(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});E.prototype.writeBigUInt64BE=xr(function(e,r=0){return sf(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});E.prototype.writeIntLE=function(e,r,i,n){if(e=+e,r=r>>>0,!n){let f=Math.pow(2,8*i-1);st(this,e,r,i,f-1,-f)}let a=0,s=1,o=0;for(this[r]=e&255;++a<i&&(s*=256);)e<0&&o===0&&this[r+a-1]!==0&&(o=1),this[r+a]=(e/s>>0)-o&255;return r+i};E.prototype.writeIntBE=function(e,r,i,n){if(e=+e,r=r>>>0,!n){let f=Math.pow(2,8*i-1);st(this,e,r,i,f-1,-f)}let a=i-1,s=1,o=0;for(this[r+a]=e&255;--a>=0&&(s*=256);)e<0&&o===0&&this[r+a+1]!==0&&(o=1),this[r+a]=(e/s>>0)-o&255;return r+i};E.prototype.writeInt8=function(e,r,i){return e=+e,r=r>>>0,i||st(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};E.prototype.writeInt16LE=function(e,r,i){return e=+e,r=r>>>0,i||st(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};E.prototype.writeInt16BE=function(e,r,i){return e=+e,r=r>>>0,i||st(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};E.prototype.writeInt32LE=function(e,r,i){return e=+e,r=r>>>0,i||st(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};E.prototype.writeInt32BE=function(e,r,i){return e=+e,r=r>>>0,i||st(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};E.prototype.writeBigInt64LE=xr(function(e,r=0){return af(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});E.prototype.writeBigInt64BE=xr(function(e,r=0){return sf(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function of(t,e,r,i,n,a){if(r+i>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function ff(t,e,r,i,n){return e=+e,r=r>>>0,n||of(t,e,r,4,34028234663852886e22,-34028234663852886e22),ui.write(t,e,r,i,23,4),r+4}E.prototype.writeFloatLE=function(e,r,i){return ff(this,e,r,!0,i)};E.prototype.writeFloatBE=function(e,r,i){return ff(this,e,r,!1,i)};function uf(t,e,r,i,n){return e=+e,r=r>>>0,n||of(t,e,r,8,17976931348623157e292,-17976931348623157e292),ui.write(t,e,r,i,52,8),r+8}E.prototype.writeDoubleLE=function(e,r,i){return uf(this,e,r,!0,i)};E.prototype.writeDoubleBE=function(e,r,i){return uf(this,e,r,!1,i)};E.prototype.copy=function(e,r,i,n){if(!E.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),!n&&n!==0&&(n=this.length),r>=e.length&&(r=e.length),r||(r=0),n>0&&n<i&&(n=i),n===i||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-r<n-i&&(n=e.length-r+i);let a=n-i;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,i,n):Uint8Array.prototype.set.call(e,this.subarray(i,n),r),a};E.prototype.fill=function(e,r,i,n){if(typeof e=="string"){if(typeof r=="string"?(n=r,r=0,i=this.length):typeof i=="string"&&(n=i,i=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!E.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(e.length===1){let s=e.charCodeAt(0);(n==="utf8"&&s<128||n==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<i)throw new RangeError("Out of range index");if(i<=r)return this;r=r>>>0,i=i===void 0?this.length:i>>>0,e||(e=0);let a;if(typeof e=="number")for(a=r;a<i;++a)this[a]=e;else{let s=E.isBuffer(e)?e:E.from(e,n),o=s.length;if(o===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<i-r;++a)this[a+r]=s[a%o]}return this};var ci={};function Ns(t,e,r){ci[t]=class extends r{constructor(){super();Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(n){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:n,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}Ns("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Ns("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);Ns("ERR_OUT_OF_RANGE",function(t,e,r){let i=`The value of "${t}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>2**32?n=cf(String(r)):typeof r=="bigint"&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=cf(n)),n+="n"),i+=` It must be ${e}. Received ${n}`,i},RangeError);function cf(t){let e="",r=t.length,i=t[0]==="-"?1:0;for(;r>=i+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function S1(t,e,r){hi(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&Xi(e,t.length-(r+1))}function hf(t,e,r,i,n,a){if(t>r||t<e){let s=typeof e=="bigint"?"n":"",o;throw a>3?e===0||e===BigInt(0)?o=`>= 0${s} and < 2${s} ** ${(a+1)*8}${s}`:o=`>= -(2${s} ** ${(a+1)*8-1}${s}) and < 2 ** ${(a+1)*8-1}${s}`:o=`>= ${e}${s} and <= ${r}${s}`,new ci.ERR_OUT_OF_RANGE("value",o,t)}S1(i,n,a)}function hi(t,e){if(typeof t!="number")throw new ci.ERR_INVALID_ARG_TYPE(e,"number",t)}function Xi(t,e,r){throw Math.floor(t)!==t?(hi(t,r),new ci.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new ci.ERR_BUFFER_OUT_OF_BOUNDS:new ci.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var B1=/[^+/0-9A-Za-z-_]/g;function _1(t){if(t=t.split("=")[0],t=t.trim().replace(B1,""),t.length<2)return"";for(;t.length%4!=0;)t=t+"=";return t}function Fs(t,e){e=e||1/0;let r,i=t.length,n=null,a=[];for(let s=0;s<i;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&a.push(239,191,189);continue}else if(s+1===i){(e-=3)>-1&&a.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(e-=3)>-1&&a.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return a}function A1(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function C1(t,e){let r,i,n,a=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),i=r>>8,n=r%256,a.push(n),a.push(i);return a}function lf(t){return Rs.toByteArray(_1(t))}function Qn(t,e,r,i){let n;for(n=0;n<i&&!(n+r>=e.length||n>=t.length);++n)e[n+r]=t[n];return n}function Lt(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function Ms(t){return t!==t}var I1=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let i=r*16;for(let n=0;n<16;++n)e[i+n]=t[r]+t[n]}return e}();function xr(t){return typeof BigInt=="undefined"?T1:t}function T1(){throw new Error("BigInt not supported")}});var pi=B((Dw,df)=>{"use strict";var{Buffer:Bt}=vr(),pf=Symbol.for("BufferList");function we(t){if(!(this instanceof we))return new we(t);we._init.call(this,t)}we._init=function(e){Object.defineProperty(this,pf,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};we.prototype._new=function(e){return new we(e)};we.prototype._offset=function(e){if(e===0)return[0,0];let r=0;for(let i=0;i<this._bufs.length;i++){let n=r+this._bufs[i].length;if(e<n||i===this._bufs.length-1)return[i,e-r];r=n}};we.prototype._reverseOffset=function(t){let e=t[0],r=t[1];for(let i=0;i<e;i++)r+=this._bufs[i].length;return r};we.prototype.get=function(e){if(e>this.length||e<0)return;let r=this._offset(e);return this._bufs[r[0]][r[1]]};we.prototype.slice=function(e,r){return typeof e=="number"&&e<0&&(e+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,e,r)};we.prototype.copy=function(e,r,i,n){if((typeof i!="number"||i<0)&&(i=0),(typeof n!="number"||n>this.length)&&(n=this.length),i>=this.length||n<=0)return e||Bt.alloc(0);let a=!!e,s=this._offset(i),o=n-i,f=o,u=a&&r||0,c=s[1];if(i===0&&n===this.length){if(!a)return this._bufs.length===1?this._bufs[0]:Bt.concat(this._bufs,this.length);for(let h=0;h<this._bufs.length;h++)this._bufs[h].copy(e,u),u+=this._bufs[h].length;return e}if(f<=this._bufs[s[0]].length-c)return a?this._bufs[s[0]].copy(e,r,c,c+f):this._bufs[s[0]].slice(c,c+f);a||(e=Bt.allocUnsafe(o));for(let h=s[0];h<this._bufs.length;h++){let l=this._bufs[h].length-c;if(f>l)this._bufs[h].copy(e,u,c),u+=l;else{this._bufs[h].copy(e,u,c,c+f),u+=l;break}f-=l,c&&(c=0)}return e.length>u?e.slice(0,u):e};we.prototype.shallowSlice=function(e,r){if(e=e||0,r=typeof r!="number"?this.length:r,e<0&&(e+=this.length),r<0&&(r+=this.length),e===r)return this._new();let i=this._offset(e),n=this._offset(r),a=this._bufs.slice(i[0],n[0]+1);return n[1]===0?a.pop():a[a.length-1]=a[a.length-1].slice(0,n[1]),i[1]!==0&&(a[0]=a[0].slice(i[1])),this._new(a)};we.prototype.toString=function(e,r,i){return this.slice(r,i).toString(e)};we.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};we.prototype.duplicate=function(){let e=this._new();for(let r=0;r<this._bufs.length;r++)e.append(this._bufs[r]);return e};we.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(Bt.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let r=0;r<e.length;r++)this.append(e[r]);else if(this._isBufferList(e))for(let r=0;r<e._bufs.length;r++)this.append(e._bufs[r]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(Bt.from(e));return this};we.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};we.prototype.indexOf=function(t,e,r){if(r===void 0&&typeof e=="string"&&(r=e,e=void 0),typeof t=="function"||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof t=="number"?t=Bt.from([t]):typeof t=="string"?t=Bt.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=Bt.from(t.buffer,t.byteOffset,t.byteLength):Bt.isBuffer(t)||(t=Bt.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),t.length===0)return e>this.length?this.length:e;let i=this._offset(e),n=i[0],a=i[1];for(;n<this._bufs.length;n++){let s=this._bufs[n];for(;a<s.length;)if(s.length-a>=t.length){let f=s.indexOf(t,a);if(f!==-1)return this._reverseOffset([n,f]);a=s.length-t.length+1}else{let f=this._reverseOffset([n,a]);if(this._match(f,t))return f;a++}a=0}return-1};we.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0};(function(){let t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in t)(function(r){t[r]===null?we.prototype[r]=function(i,n){return this.slice(i,i+n)[r](0,n)}:we.prototype[r]=function(i=0){return this.slice(i,i+t[r])[r](0)}})(e)})();we.prototype._isBufferList=function(e){return e instanceof we||we.isBufferList(e)};we.isBufferList=function(e){return e!=null&&e[pf]};df.exports=we});var gf=B((Nw,yf)=>{var Os=pi();yf.exports=t=>{let e=async function*(){let r=yield,i=new Os;for await(let n of t){if(!r){r=yield i.append(n),i=new Os;continue}for(i.append(n);i.length>=r;){let a=i.shallowSlice(0,r);if(i.consume(r),r=yield a,!r){i.length&&(r=yield i,i=new Os);break}}}if(r)throw Object.assign(new Error(`stream ended before ${r} bytes became available`),{code:"ERR_UNDER_READ",buffer:i})}();return e.next(),e}});var vf=B((Mw,xf)=>{xf.exports=class{constructor(e){if(!(e>0)||(e-1&e)!=0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}}});var wf=B((qw,bf)=>{var mf=vf();bf.exports=class{constructor(e){this.hwm=e||16,this.head=new mf(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){let r=this.head;this.head=r.next=new mf(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next){let r=this.tail.next;return this.tail.next=null,this.tail=r,this.tail.shift()}return e}isEmpty(){return this.head.isEmpty()}}});var Sf=B((Hw,Ef)=>{var qs=wf();Ef.exports=t=>{t=t||{};let e;typeof t=="function"?(e=t,t={}):e=t.onEnd;let r=new qs,i,n,a,s=()=>{if(!r.isEmpty()){if(t.writev){let y,g=[];for(;!r.isEmpty();){if(y=r.shift(),y.error)throw y.error;g.push(y.value)}return{done:y.done,value:g}}let p=r.shift();if(p.error)throw p.error;return p}return a?{done:!0}:new Promise((p,y)=>{n=g=>(n=null,g.error?y(g.error):t.writev&&!g.done?p({done:g.done,value:[g.value]}):p(g),i)})},o=p=>n?n(p):(r.push(p),i),f=p=>(r=new qs,n?n({error:p}):(r.push({error:p}),i)),u=p=>a?i:o({done:!1,value:p}),c=p=>a?i:(a=!0,p?f(p):o({done:!0})),h=()=>(r=new qs,c(),{done:!0}),l=p=>(c(p),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:s,return:h,throw:l,push:u,end:c},!e)return i;let d=i;return i={[Symbol.asyncIterator](){return this},next(){return d.next()},throw(p){return d.throw(p),e&&(e(p),e=null),{done:!0}},return(){return d.return(),e&&(e(),e=null),{done:!0}},push:u,end(p){return d.end(p),e&&(e(p),e=null),i}},i}});var _f=B((Vw,Bf)=>{"use strict";var P1=()=>{let t={};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t};Bf.exports=P1});var Cf=B((zw,Af)=>{"use strict";var K1=gf(),R1=Sf(),L1=_f();Af.exports=t=>{let e=R1(),r=K1(t.source),i=L1(),n,a=t.sink(async function*(){yield*e,yield*await i.promise}());return a.catch(o=>{n=o}),{reader:r,writer:e,stream:{sink:o=>n?Promise.reject(n):(i.resolve(o),a),source:r},rest:()=>e.end(),write:e.push,read:async()=>(await r.next()).value}}});var Pf=B((Gw,Tf)=>{Tf.exports=Hs;var If=128,k1=127,U1=~k1,D1=Math.pow(2,31);function Hs(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw Hs.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var i=r;t>=D1;)e[r++]=t&255|If,t/=128;for(;t&U1;)e[r++]=t&255|If,t>>>=7;return e[r]=t|0,Hs.bytes=r-i+1,e}});var Lf=B((Ww,Rf)=>{Rf.exports=Vs;var N1=128,Kf=127;function Vs(t,e){var r=0,e=e||0,i=0,n=e,a,s=t.length;do{if(n>=s||i>49)throw Vs.bytes=0,new RangeError("Could not decode varint");a=t[n++],r+=i<28?(a&Kf)<<i:(a&Kf)*Math.pow(2,i),i+=7}while(a>=N1);return Vs.bytes=n-e,r}});var Uf=B(($w,kf)=>{var F1=Math.pow(2,7),M1=Math.pow(2,14),O1=Math.pow(2,21),q1=Math.pow(2,28),H1=Math.pow(2,35),V1=Math.pow(2,42),z1=Math.pow(2,49),G1=Math.pow(2,56),W1=Math.pow(2,63);kf.exports=function(t){return t<F1?1:t<M1?2:t<O1?3:t<q1?4:t<H1?5:t<V1?6:t<z1?7:t<G1?8:t<W1?9:10}});var zs=B((jw,Df)=>{Df.exports={encode:Pf(),decode:Lf(),encodingLength:Uf()}});var Gs=B((Xw,Mf)=>{"use strict";var Nf=zs(),{Buffer:$1}=vr(),Ff=(t,e,r)=>{let i=Nf.encode(t,e,r);return Ff.bytes=Nf.encode.bytes,e||$1.from(i)};Mf.exports=Ff});var Gf=B((Yw,Jn)=>{"use strict";var{Buffer:Of}=vr(),qf=pi(),Hf=Gs(),Ws=8,Vf=10*1024;function zf(t){t=t||{};let e=Math.max(t.poolSize||Vf,t.minPoolSize||Ws),r=t.lengthEncoder||Hf;return async function*(n){let a=Of.alloc(e),s=0;for await(let o of n){r(o.length,a,s);let f=a.slice(s,s+r.bytes);s+=r.bytes,a.length-s<Ws&&(a=Of.alloc(e),s=0),yield new qf().append(f).append(o)}}}zf.single=(t,e)=>{e=e||{};let r=e.lengthEncoder||Hf;return new qf([r(t.length),t.slice()])};Jn.exports=zf;Jn.exports.MIN_POOL_SIZE=Ws;Jn.exports.DEFAULT_POOL_SIZE=Vf});var $s=B((Zw,jf)=>{"use strict";var Wf=zs(),{Buffer:j1}=vr(),X1=t=>new Proxy({},{get:(e,r)=>r[0]==="l"?t[r]:t.get(parseInt(r))}),$f=t=>{let e=Wf.decode(j1.isBuffer(t)?t:X1(t));return $f.bytes=Wf.decode.bytes,e};jf.exports=$f});var Qf=B((Qw,ea)=>{"use strict";var{Buffer:Y1}=vr(),js=pi(),Z1=$s(),Xf=8,Yf=1024*1024*4,Zf=Y1.alloc(0),mr={LENGTH:"readLength",DATA:"readData"},Q1={[mr.LENGTH]:(t,e,r,i)=>{e=e.append(t);let n;try{n=i.lengthDecoder(e)}catch(a){if(e.length>i.maxLengthLength)throw Object.assign(a,{message:"message length too long",code:"ERR_MSG_LENGTH_TOO_LONG"});if(a instanceof RangeError)return{mode:mr.LENGTH,buffer:e,chunk:void 0,state:void 0,data:void 0};throw a}if(n>i.maxDataLength)throw Object.assign(new Error("message data too long"),{code:"ERR_MSG_DATA_TOO_LONG"});return t=e.shallowSlice(i.lengthDecoder.bytes),e=new js,i.onLength&&i.onLength(n),n<=0?(i.onData&&i.onData(Zf),{mode:mr.LENGTH,chunk:t,buffer:e,data:Zf}):{mode:mr.DATA,chunk:t,buffer:e,state:{dataLength:n},data:void 0}},[mr.DATA]:(t,e,r,i)=>{if(e=e.append(t),!r)throw new Error("state is required");if(e.length<r.dataLength)return{mode:mr.DATA,buffer:e,state:r,chunk:void 0,data:void 0};let{dataLength:n}=r,a=e.shallowSlice(0,n),s=e.length>n?e.shallowSlice(n):void 0;return e=new js,i.onData&&i.onData(a),{mode:mr.LENGTH,chunk:s,buffer:e,state:void 0,data:a}}};function Xs(t){t=t||{};let e={lengthDecoder:t.lengthDecoder||Z1,maxLengthLength:t.maxLengthLength||Xf,maxDataLength:t.maxDataLength||Yf,onLength:t.onLength,onData:t.onData};return async function*(i){let n=new js,a=mr.LENGTH,s;for await(let o of i){let f=o;for(;f;){let u=Q1[a](f,n,s,e);a=u.mode,f=u.chunk,n=u.buffer,s=u.state,u.data&&(yield u.data)}}if(n.length)throw Object.assign(new Error("unexpected end of input"),{code:"ERR_UNEXPECTED_EOF"})}}Xs.fromReader=(t,e)=>{let r=1,i={[Symbol.asyncIterator](){return this},next:async()=>{try{return await t.next(r)}catch(a){if(a.code==="ERR_UNDER_READ")return{done:!0,value:null};throw a}finally{r=1}}};return Xs({...e||{},onLength:a=>{r=a}})(i)};ea.exports=Xs;ea.exports.MAX_LENGTH_LENGTH=Xf;ea.exports.MAX_DATA_LENGTH=Yf});var tu=B((Jw,eu)=>{"use strict";var{Buffer:J1}=vr(),Jf=(t,e,r)=>(e=e||J1.allocUnsafe(4),e.writeInt32BE(t,r),e);Jf.bytes=4;eu.exports=Jf});var nu=B((e8,iu)=>{"use strict";var ru=t=>{if(t.length<4)throw RangeError("Could not decode int32BE");return t.readInt32BE(0)};ru.bytes=4;iu.exports=ru});var Ys=B(jr=>{"use strict";jr.encode=Gf();jr.decode=Qf();jr.varintEncode=Gs();jr.varintDecode=$s();jr.int32BEEncode=tu();jr.int32BEDecode=nu()});var ou=B((r8,su)=>{"use strict";var eg=Cf(),au=Ys();su.exports=(t,e={})=>{let r=eg(t),i=au.decode.fromReader(r.reader,e),n=!1,a={read:async s=>{let{value:o,done:f}=await r.reader.next(s);if(f&&o.length<s)throw new Error("Couldn't read enough bytes");if(n=f,!o)throw new Error("Value is null");return o},readLP:async()=>{let{value:s,done:o}=await i.next();if(n=o,!s)throw new Error("Value is null");return s},readPB:async s=>{let o=await a.readLP();if(!o)throw new Error("Value is null");let f=o instanceof Uint8Array?o:o.slice();return s.decode(f)},write:s=>{r.writer.push(s)},writeLP:s=>{a.write(au.encode.single(s,e))},writePB:(s,o)=>{a.writeLP(o.encode(s))},pb:s=>({read:()=>a.readPB(s),write:o=>a.writePB(o,s)}),unwrap:()=>(r.rest(),r.stream)};return a}});var uu=B((i8,fu)=>{fu.exports=function(e){if(e){if(typeof e[Symbol.iterator]=="function")return e[Symbol.iterator]();if(typeof e[Symbol.asyncIterator]=="function")return e[Symbol.asyncIterator]();if(typeof e.next=="function")return e}throw new Error("argument is not an iterator or iterable")}});var hu=B((n8,cu)=>{"use strict";var tg=uu();cu.exports=function(){let e,r,i=async a=>{if(e)throw new Error("already piped");e=tg(a),r&&r(e)},n={[Symbol.asyncIterator](){return this},next(){return e?e.next():new Promise(a=>{r=s=>{r=null,a(s.next())}})}};return{sink:i,source:n}}});var du=B((a8,pu)=>{var lu=hu();pu.exports=function(){var t=lu(),e=lu();return[{source:t.source,sink:e.sink},{source:e.source,sink:t.sink}]}});var yu=B((s8,Yi)=>{"use strict";var{Buffer:ta}=vr(),ra=pi();Yi.exports=async function*(t){for await(let e of t)ta.isBuffer(e)?yield e:ra.isBufferList(e)?yield e.slice():yield ta.from(e)};Yi.exports.toBuffer=Yi.exports;Yi.exports.toList=async function*(t){for await(let e of t)ta.isBuffer(e)?yield new ra().append(e):ra.isBufferList(e)?yield e:yield new ra().append(ta.from(e))}});var vu=B((o8,di)=>{var gu=(...t)=>{let e;for(;t.length;)e=t.shift()(e);return e},Zs=t=>t&&(typeof t[Symbol.asyncIterator]=="function"||typeof t[Symbol.iterator]=="function"||typeof t.next=="function"),ia=t=>t&&typeof t.sink=="function"&&Zs(t.source),rg=t=>e=>(t.sink(e),t.source),xu=(...t)=>{if(ia(t[0])){let e=t[0];t[0]=()=>e.source}else if(Zs(t[0])){let e=t[0];t[0]=()=>e}if(t.length>1&&ia(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let e=1;e<t.length-1;e++)ia(t[e])&&(t[e]=rg(t[e]));return gu(...t)};di.exports=xu;di.exports.pipe=xu;di.exports.rawPipe=gu;di.exports.isIterable=Zs;di.exports.isDuplex=ia});var mu=B(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});function ig(t){return typeof t.saveState!="undefined"&&typeof t.restoreState!="undefined"&&typeof t.cleanSavedState!="undefined"}Qs.isSerializableHash=ig});var na=B(yi=>{"use strict";Object.defineProperty(yi,"__esModule",{value:!0});function ng(t,e,r){return~(t-1)&e|t-1&r}yi.select=ng;function ag(t,e){return(t|0)-(e|0)-1>>>31&1}yi.lessOrEqual=ag;function bu(t,e){if(t.length!==e.length)return 0;for(var r=0,i=0;i<t.length;i++)r|=t[i]^e[i];return 1&r-1>>>8}yi.compare=bu;function sg(t,e){return t.length===0||e.length===0?!1:bu(t,e)!==0}yi.equal=sg});var Eu=B(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0});var kt=mu(),og=na(),fg=Pt(),wu=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(i).clean():i.set(r);for(var n=0;n<i.length;n++)i[n]^=54;this._inner.update(i);for(var n=0;n<i.length;n++)i[n]^=54^92;this._outer.update(i),kt.isSerializableHash(this._inner)&&kt.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),fg.wipe(i)}return t.prototype.reset=function(){if(!kt.isSerializableHash(this._inner)||!kt.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){kt.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),kt.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!kt.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!kt.isSerializableHash(this._inner)||!kt.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!kt.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();Zi.HMAC=wu;function ug(t,e,r){var i=new wu(t,e);i.update(r);var n=i.digest();return i.clean(),n}Zi.hmac=ug;Zi.equal=og.equal});var _u=B(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});var Su=Eu(),Bu=Pt(),cg=function(){function t(e,r,i,n){i===void 0&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=n;var a=Su.hmac(this._hash,i,r);this._hmac=new Su.HMAC(e,a),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),i=0;i<r.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[i]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),Bu.wipe(this._buffer),Bu.wipe(this._counter),this._bufpos=0},t}();Js.HKDF=cg});var to=B(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});var aa=Wi(),sa=Pt();br.DIGEST_LENGTH=32;br.BLOCK_SIZE=64;var Au=function(){function t(){this.digestLength=br.DIGEST_LENGTH,this.blockSize=br.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){sa.wipe(this._buffer),sa.wipe(this._temp),this.reset()},t.prototype.update=function(e,r){if(r===void 0&&(r=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var i=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&r>0;)this._buffer[this._bufferLength++]=e[i++],r--;this._bufferLength===this.blockSize&&(eo(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(i=eo(this._temp,this._state,e,i,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=e[i++],r--;return this},t.prototype.finish=function(e){if(!this._finished){var r=this._bytesHashed,i=this._bufferLength,n=r/536870912|0,a=r<<3,s=r%64<56?64:128;this._buffer[i]=128;for(var o=i+1;o<s-8;o++)this._buffer[o]=0;aa.writeUint32BE(n,this._buffer,s-8),aa.writeUint32BE(a,this._buffer,s-4),eo(this._temp,this._state,this._buffer,0,s),this._finished=!0}for(var o=0;o<this.digestLength/4;o++)aa.writeUint32BE(this._state[o],e,o*4);return this},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(e){sa.wipe(e.state),e.buffer&&sa.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},t}();br.SHA256=Au;var hg=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function eo(t,e,r,i,n){for(;n>=64;){for(var a=e[0],s=e[1],o=e[2],f=e[3],u=e[4],c=e[5],h=e[6],l=e[7],d=0;d<16;d++){var p=i+d*4;t[d]=aa.readUint32BE(r,p)}for(var d=16;d<64;d++){var y=t[d-2],g=(y>>>17|y<<32-17)^(y>>>19|y<<32-19)^y>>>10;y=t[d-15];var v=(y>>>7|y<<32-7)^(y>>>18|y<<32-18)^y>>>3;t[d]=(g+t[d-7]|0)+(v+t[d-16]|0)}for(var d=0;d<64;d++){var g=(((u>>>6|u<<32-6)^(u>>>11|u<<32-11)^(u>>>25|u<<32-25))+(u&c^~u&h)|0)+(l+(hg[d]+t[d]|0)|0)|0,v=((a>>>2|a<<32-2)^(a>>>13|a<<32-13)^(a>>>22|a<<32-22))+(a&s^a&o^s&o)|0;l=h,h=c,c=u,u=f+g|0,f=o,o=s,s=a,a=g+v|0}e[0]+=a,e[1]+=s,e[2]+=o,e[3]+=f,e[4]+=u,e[5]+=c,e[6]+=h,e[7]+=l,i+=64,n-=64}return i}function lg(t){var e=new Au;e.update(t);var r=e.digest();return e.clean(),r}br.hash=lg});function Iu(t,e,r){e=e||[],r=r||0;for(var i=r;t>=gg;)e[r++]=t&255|Cu,t/=128;for(;t&yg;)e[r++]=t&255|Cu,t>>>=7;return e[r]=t|0,Iu.bytes=r-i+1,e}function ro(t,e){var r=0,e=e||0,i=0,n=e,a,s=t.length;do{if(n>=s)throw ro.bytes=0,new RangeError("Could not decode varint");a=t[n++],r+=i<28?(a&Tu)<<i:(a&Tu)*Math.pow(2,i),i+=7}while(a>=vg);return ro.bytes=n-e,r}var pg,Cu,dg,yg,gg,xg,vg,Tu,mg,bg,wg,Eg,Sg,Bg,_g,Ag,Cg,Ig,Tg,Pg,Qi,Pu=ge(()=>{pg=Iu,Cu=128,dg=127,yg=~dg,gg=Math.pow(2,31);xg=ro,vg=128,Tu=127;mg=Math.pow(2,7),bg=Math.pow(2,14),wg=Math.pow(2,21),Eg=Math.pow(2,28),Sg=Math.pow(2,35),Bg=Math.pow(2,42),_g=Math.pow(2,49),Ag=Math.pow(2,56),Cg=Math.pow(2,63),Ig=function(t){return t<mg?1:t<bg?2:t<wg?3:t<Eg?4:t<Sg?5:t<Bg?6:t<_g?7:t<Ag?8:t<Cg?9:10},Tg={encode:pg,decode:xg,encodingLength:Ig},Pg=Tg,Qi=Pg});var Ji,gi,xi,oa=ge(()=>{Pu();Ji=t=>[Qi.decode(t),Qi.decode.bytes],gi=(t,e,r=0)=>(Qi.encode(t,e,r),e),xi=t=>Qi.encodingLength(t)});var y8,Ru,ir,Lu,ku,wr=ge(()=>{y8=new Uint8Array(0),Ru=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},ir=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Lu=t=>new TextEncoder().encode(t),ku=t=>new TextDecoder().decode(t)});var fa={};De(fa,{Digest:()=>vi,create:()=>en,decode:()=>io,equals:()=>no});var en,io,no,vi,tn=ge(()=>{wr();oa();en=(t,e)=>{let r=e.byteLength,i=xi(t),n=i+xi(r),a=new Uint8Array(n+r);return gi(t,a,0),gi(r,a,i),a.set(e,n),new vi(t,r,e,a)},io=t=>{let e=ir(t),[r,i]=Ji(e),[n,a]=Ji(e.subarray(i)),s=e.subarray(i+a);if(s.byteLength!==n)throw new Error("Incorrect length");return new vi(r,n,s,e)},no=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&Ru(t.bytes,e.bytes),vi=class{constructor(e,r,i,n){this.code=e,this.size=r,this.digest=i,this.bytes=n}}});function Kg(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var a=t.charAt(n),s=a.charCodeAt(0);if(r[s]!==255)throw new TypeError(a+" is ambiguous");r[s]=n}var o=t.length,f=t.charAt(0),u=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var y=0,g=0,v=0,b=p.length;v!==b&&p[v]===0;)v++,y++;for(var w=(b-v)*c+1>>>0,T=new Uint8Array(w);v!==b;){for(var C=p[v],A=0,R=w-1;(C!==0||A<g)&&R!==-1;R--,A++)C+=256*T[R]>>>0,T[R]=C%o>>>0,C=C/o>>>0;if(C!==0)throw new Error("Non-zero carry");g=A,v++}for(var L=w-g;L!==w&&T[L]===0;)L++;for(var N=f.repeat(y);L<w;++L)N+=t.charAt(T[L]);return N}function l(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var y=0;if(p[y]!==" "){for(var g=0,v=0;p[y]===f;)g++,y++;for(var b=(p.length-y)*u+1>>>0,w=new Uint8Array(b);p[y];){var T=r[p.charCodeAt(y)];if(T===255)return;for(var C=0,A=b-1;(T!==0||C<v)&&A!==-1;A--,C++)T+=o*w[A]>>>0,w[A]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");v=C,y++}if(p[y]!==" "){for(var R=b-v;R!==b&&w[R]===0;)R++;for(var L=new Uint8Array(g+(b-R)),N=g;R!==b;)L[N++]=w[R++];return L}}}function d(p){var y=l(p);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:l,decode:d}}var Rg,Lg,Du,Nu=ge(()=>{Rg=Kg,Lg=Rg,Du=Lg});var Fu,Mu,Ou,qu,Hu,ua,Er,kg,Ug,Ie,Ut=ge(()=>{Nu();wr();Fu=class{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Mu=class{constructor(e,r,i){this.name=e,this.prefix=r,this.baseDecode=i}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){return qu(this,e)}},Ou=class{constructor(e){this.decoders=e}or(e){return qu(this,e)}decode(e){let r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},qu=(t,e)=>new Ou({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),Hu=class{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new Fu(e,r,i),this.decoder=new Mu(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},ua=({name:t,prefix:e,encode:r,decode:i})=>new Hu(t,e,r,i),Er=({prefix:t,name:e,alphabet:r})=>{let{encode:i,decode:n}=Du(r,e);return ua({prefix:t,name:e,encode:i,decode:a=>ir(n(a))})},kg=(t,e,r,i)=>{let n={};for(let c=0;c<e.length;++c)n[e[c]]=c;let a=t.length;for(;t[a-1]==="=";)--a;let s=new Uint8Array(a*r/8|0),o=0,f=0,u=0;for(let c=0;c<a;++c){let h=n[t[c]];if(h===void 0)throw new SyntaxError(`Non-${i} character`);f=f<<r|h,o+=r,o>=8&&(o-=8,s[u++]=255&f>>o)}if(o>=r||255&f<<8-o)throw new SyntaxError("Unexpected end of data");return s},Ug=(t,e,r)=>{let i=e[e.length-1]==="=",n=(1<<r)-1,a="",s=0,o=0;for(let f=0;f<t.length;++f)for(o=o<<8|t[f],s+=8;s>r;)s-=r,a+=e[n&o>>s];if(s&&(a+=e[n&o<<r-s]),i)for(;a.length*r&7;)a+="=";return a},Ie=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>ua({prefix:e,name:t,encode(n){return Ug(n,i,r)},decode(n){return kg(n,i,r,t)}})});var mi={};De(mi,{base58btc:()=>Dt,base58flickr:()=>Dg});var Dt,Dg,bi=ge(()=>{Ut();Dt=Er({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Dg=Er({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var rn={};De(rn,{base32:()=>wi,base32hex:()=>Og,base32hexpad:()=>Hg,base32hexpadupper:()=>Vg,base32hexupper:()=>qg,base32pad:()=>Fg,base32padupper:()=>Mg,base32upper:()=>Ng,base32z:()=>zg});var wi,Ng,Fg,Mg,Og,qg,Hg,Vg,zg,nn=ge(()=>{Ut();wi=Ie({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ng=Ie({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Fg=Ie({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Mg=Ie({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Og=Ie({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),qg=Ie({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Hg=Ie({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Vg=Ie({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),zg=Ie({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var Gu={};De(Gu,{CID:()=>ke});var ke,Gg,Wg,$g,an,jg,Vu,zu,ca,ha,Xg,Yg,Zg,ao=ge(()=>{oa();tn();bi();nn();wr();ke=class{constructor(e,r,i,n){this.code=r,this.version=e,this.multihash=i,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:ha,byteLength:ha,code:ca,version:ca,multihash:ca,bytes:ca,_baseCache:ha,asCID:ha})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==an)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==jg)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return ke.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,i=en(e,r);return ke.createV1(this.code,i)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&no(this.multihash,e.multihash)}toString(e){let{bytes:r,version:i,_baseCache:n}=this;switch(i){case 0:return Wg(r,n,e||Dt.encoder);default:return $g(r,n,e||wi.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return Yg(/^0\.0/,Zg),!!(e&&(e[zu]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof ke)return e;if(e!=null&&e.asCID===e){let{version:r,code:i,multihash:n,bytes:a}=e;return new ke(r,i,n,a||Vu(r,i,n.bytes))}else if(e!=null&&e[zu]===!0){let{version:r,multihash:i,code:n}=e,a=io(i);return ke.create(r,n,a)}else return null}static create(e,r,i){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==an)throw new Error(`Version 0 CID must use dag-pb (code: ${an}) block encoding`);return new ke(e,r,i,i.bytes)}case 1:{let n=Vu(e,r,i.bytes);return new ke(e,r,i,n)}default:throw new Error("Invalid version")}}static createV0(e){return ke.create(0,an,e)}static createV1(e,r){return ke.create(1,e,r)}static decode(e){let[r,i]=ke.decodeFirst(e);if(i.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=ke.inspectBytes(e),i=r.size-r.multihashSize,n=ir(e.subarray(i,i+r.multihashSize));if(n.byteLength!==r.multihashSize)throw new Error("Incorrect length");let a=n.subarray(r.multihashSize-r.digestSize),s=new vi(r.multihashCode,r.digestSize,a,n);return[r.version===0?ke.createV0(s):ke.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,i=()=>{let[h,l]=Ji(e.subarray(r));return r+=l,h},n=i(),a=an;if(n===18?(n=0,r=0):n===1&&(a=i()),n!==0&&n!==1)throw new RangeError(`Invalid CID version ${n}`);let s=r,o=i(),f=i(),u=r+f,c=u-s;return{version:n,codec:a,multihashCode:o,digestSize:f,multihashSize:c,size:u}}static parse(e,r){let[i,n]=Gg(e,r),a=ke.decode(n);return a._baseCache.set(i,e),a}},Gg=(t,e)=>{switch(t[0]){case"Q":{let r=e||Dt;return[Dt.prefix,r.decode(`${Dt.prefix}${t}`)]}case Dt.prefix:{let r=e||Dt;return[Dt.prefix,r.decode(t)]}case wi.prefix:{let r=e||wi;return[wi.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},Wg=(t,e,r)=>{let{prefix:i}=r;if(i!==Dt.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let n=e.get(i);if(n==null){let a=r.encode(t).slice(1);return e.set(i,a),a}else return n},$g=(t,e,r)=>{let{prefix:i}=r,n=e.get(i);if(n==null){let a=r.encode(t);return e.set(i,a),a}else return n},an=112,jg=18,Vu=(t,e,r)=>{let i=xi(t),n=i+xi(e),a=new Uint8Array(n+r.byteLength);return gi(t,a,0),gi(e,a,i),a.set(r,n),a},zu=Symbol.for("@ipld/js-cid/CID"),ca={writable:!1,configurable:!1,enumerable:!0},ha={writable:!1,enumerable:!1,configurable:!1},Xg="0.0.0-dev",Yg=(t,e)=>{if(t.test(Xg))console.warn(e);else throw new Error(e)},Zg=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var la={};De(la,{base36:()=>Qg,base36upper:()=>Jg});var Qg,Jg,so=ge(()=>{Ut();Qg=Er({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Jg=Er({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var Ei={};De(Ei,{base64:()=>e2,base64pad:()=>t2,base64url:()=>r2,base64urlpad:()=>i2});var e2,t2,r2,i2,sn=ge(()=>{Ut();e2=Ie({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),t2=Ie({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),r2=Ie({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),i2=Ie({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});var pa={};De(pa,{base16:()=>n2,base16upper:()=>a2});var n2,a2,oo=ge(()=>{Ut();n2=Ie({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),a2=Ie({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var $u=B((R8,Wu)=>{"use strict";Wu.exports=s2;function s2(t,e){for(var r=new Array(arguments.length-1),i=0,n=2,a=!0;n<arguments.length;)r[i++]=arguments[n++];return new Promise(function(o,f){r[i]=function(c){if(a)if(a=!1,c)f(c);else{for(var h=new Array(arguments.length-1),l=0;l<h.length;)h[l++]=arguments[l];o.apply(null,h)}};try{t.apply(e||null,r)}catch(u){a&&(a=!1,f(u))}})}});var Zu=B(Yu=>{"use strict";var da=Yu;da.length=function(e){var r=e.length;if(!r)return 0;for(var i=0;--r%4>1&&e.charAt(r)==="=";)++i;return Math.ceil(e.length*3)/4-i};var Si=new Array(64),ju=new Array(123);for(_t=0;_t<64;)ju[Si[_t]=_t<26?_t+65:_t<52?_t+71:_t<62?_t-4:_t-59|43]=_t++;var _t;da.encode=function(e,r,i){for(var n=null,a=[],s=0,o=0,f;r<i;){var u=e[r++];switch(o){case 0:a[s++]=Si[u>>2],f=(u&3)<<4,o=1;break;case 1:a[s++]=Si[f|u>>4],f=(u&15)<<2,o=2;break;case 2:a[s++]=Si[f|u>>6],a[s++]=Si[u&63],o=0;break}s>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,a)),s=0)}return o&&(a[s++]=Si[f],a[s++]=61,o===1&&(a[s++]=61)),n?(s&&n.push(String.fromCharCode.apply(String,a.slice(0,s))),n.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var Xu="invalid encoding";da.decode=function(e,r,i){for(var n=i,a=0,s,o=0;o<e.length;){var f=e.charCodeAt(o++);if(f===61&&a>1)break;if((f=ju[f])===void 0)throw Error(Xu);switch(a){case 0:s=f,a=1;break;case 1:r[i++]=s<<2|(f&48)>>4,s=f,a=2;break;case 2:r[i++]=(s&15)<<4|(f&60)>>2,s=f,a=3;break;case 3:r[i++]=(s&3)<<6|f,a=0;break}}if(a===1)throw Error(Xu);return i-n};da.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var Ju=B((k8,Qu)=>{"use strict";Qu.exports=ya;function ya(){this._listeners={}}ya.prototype.on=function(e,r,i){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:i||this}),this};ya.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var i=this._listeners[e],n=0;n<i.length;)i[n].fn===r?i.splice(n,1):++n;return this};ya.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var i=[],n=1;n<arguments.length;)i.push(arguments[n++]);for(n=0;n<r.length;)r[n].fn.apply(r[n++].ctx,i)}return this}});var sc=B((U8,ac)=>{"use strict";ac.exports=ec(ec);function ec(t){return typeof Float32Array!="undefined"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),i=r[3]===128;function n(f,u,c){e[0]=f,u[c]=r[0],u[c+1]=r[1],u[c+2]=r[2],u[c+3]=r[3]}function a(f,u,c){e[0]=f,u[c]=r[3],u[c+1]=r[2],u[c+2]=r[1],u[c+3]=r[0]}t.writeFloatLE=i?n:a,t.writeFloatBE=i?a:n;function s(f,u){return r[0]=f[u],r[1]=f[u+1],r[2]=f[u+2],r[3]=f[u+3],e[0]}function o(f,u){return r[3]=f[u],r[2]=f[u+1],r[1]=f[u+2],r[0]=f[u+3],e[0]}t.readFloatLE=i?s:o,t.readFloatBE=i?o:s}():function(){function e(i,n,a,s){var o=n<0?1:0;if(o&&(n=-n),n===0)i(1/n>0?0:2147483648,a,s);else if(isNaN(n))i(2143289344,a,s);else if(n>34028234663852886e22)i((o<<31|2139095040)>>>0,a,s);else if(n<11754943508222875e-54)i((o<<31|Math.round(n/1401298464324817e-60))>>>0,a,s);else{var f=Math.floor(Math.log(n)/Math.LN2),u=Math.round(n*Math.pow(2,-f)*8388608)&8388607;i((o<<31|f+127<<23|u)>>>0,a,s)}}t.writeFloatLE=e.bind(null,tc),t.writeFloatBE=e.bind(null,rc);function r(i,n,a){var s=i(n,a),o=(s>>31)*2+1,f=s>>>23&255,u=s&8388607;return f===255?u?NaN:o*(1/0):f===0?o*1401298464324817e-60*u:o*Math.pow(2,f-150)*(u+8388608)}t.readFloatLE=r.bind(null,ic),t.readFloatBE=r.bind(null,nc)}(),typeof Float64Array!="undefined"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),i=r[7]===128;function n(f,u,c){e[0]=f,u[c]=r[0],u[c+1]=r[1],u[c+2]=r[2],u[c+3]=r[3],u[c+4]=r[4],u[c+5]=r[5],u[c+6]=r[6],u[c+7]=r[7]}function a(f,u,c){e[0]=f,u[c]=r[7],u[c+1]=r[6],u[c+2]=r[5],u[c+3]=r[4],u[c+4]=r[3],u[c+5]=r[2],u[c+6]=r[1],u[c+7]=r[0]}t.writeDoubleLE=i?n:a,t.writeDoubleBE=i?a:n;function s(f,u){return r[0]=f[u],r[1]=f[u+1],r[2]=f[u+2],r[3]=f[u+3],r[4]=f[u+4],r[5]=f[u+5],r[6]=f[u+6],r[7]=f[u+7],e[0]}function o(f,u){return r[7]=f[u],r[6]=f[u+1],r[5]=f[u+2],r[4]=f[u+3],r[3]=f[u+4],r[2]=f[u+5],r[1]=f[u+6],r[0]=f[u+7],e[0]}t.readDoubleLE=i?s:o,t.readDoubleBE=i?o:s}():function(){function e(i,n,a,s,o,f){var u=s<0?1:0;if(u&&(s=-s),s===0)i(0,o,f+n),i(1/s>0?0:2147483648,o,f+a);else if(isNaN(s))i(0,o,f+n),i(2146959360,o,f+a);else if(s>17976931348623157e292)i(0,o,f+n),i((u<<31|2146435072)>>>0,o,f+a);else{var c;if(s<22250738585072014e-324)c=s/5e-324,i(c>>>0,o,f+n),i((u<<31|c/4294967296)>>>0,o,f+a);else{var h=Math.floor(Math.log(s)/Math.LN2);h===1024&&(h=1023),c=s*Math.pow(2,-h),i(c*4503599627370496>>>0,o,f+n),i((u<<31|h+1023<<20|c*1048576&1048575)>>>0,o,f+a)}}}t.writeDoubleLE=e.bind(null,tc,0,4),t.writeDoubleBE=e.bind(null,rc,4,0);function r(i,n,a,s,o){var f=i(s,o+n),u=i(s,o+a),c=(u>>31)*2+1,h=u>>>20&2047,l=4294967296*(u&1048575)+f;return h===2047?l?NaN:c*(1/0):h===0?c*5e-324*l:c*Math.pow(2,h-1075)*(l+4503599627370496)}t.readDoubleLE=r.bind(null,ic,0,4),t.readDoubleBE=r.bind(null,nc,4,0)}(),t}function tc(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function rc(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function ic(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function nc(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var oc=B((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var uc=B(fc=>{"use strict";var fo=fc;fo.length=function(e){for(var r=0,i=0,n=0;n<e.length;++n)i=e.charCodeAt(n),i<128?r+=1:i<2048?r+=2:(i&64512)==55296&&(e.charCodeAt(n+1)&64512)==56320?(++n,r+=4):r+=3;return r};fo.read=function(e,r,i){var n=i-r;if(n<1)return"";for(var a=null,s=[],o=0,f;r<i;)f=e[r++],f<128?s[o++]=f:f>191&&f<224?s[o++]=(f&31)<<6|e[r++]&63:f>239&&f<365?(f=((f&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,s[o++]=55296+(f>>10),s[o++]=56320+(f&1023)):s[o++]=(f&15)<<12|(e[r++]&63)<<6|e[r++]&63,o>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,s)),o=0);return a?(o&&a.push(String.fromCharCode.apply(String,s.slice(0,o))),a.join("")):String.fromCharCode.apply(String,s.slice(0,o))};fo.write=function(e,r,i){for(var n=i,a,s,o=0;o<e.length;++o)a=e.charCodeAt(o),a<128?r[i++]=a:a<2048?(r[i++]=a>>6|192,r[i++]=a&63|128):(a&64512)==55296&&((s=e.charCodeAt(o+1))&64512)==56320?(a=65536+((a&1023)<<10)+(s&1023),++o,r[i++]=a>>18|240,r[i++]=a>>12&63|128,r[i++]=a>>6&63|128,r[i++]=a&63|128):(r[i++]=a>>12|224,r[i++]=a>>6&63|128,r[i++]=a&63|128);return i-n}});var hc=B((N8,cc)=>{"use strict";cc.exports=o2;function o2(t,e,r){var i=r||8192,n=i>>>1,a=null,s=i;return function(f){if(f<1||f>n)return t(f);s+f>i&&(a=t(i),s=0);var u=e.call(a,s,s+=f);return s&7&&(s=(s|7)+1),u}}});var pc=B((F8,lc)=>{"use strict";lc.exports=Fe;var on=Br();function Fe(t,e){this.lo=t>>>0,this.hi=e>>>0}var Xr=Fe.zero=new Fe(0,0);Xr.toNumber=function(){return 0};Xr.zzEncode=Xr.zzDecode=function(){return this};Xr.length=function(){return 1};var f2=Fe.zeroHash="\0\0\0\0\0\0\0\0";Fe.fromNumber=function(e){if(e===0)return Xr;var r=e<0;r&&(e=-e);var i=e>>>0,n=(e-i)/4294967296>>>0;return r&&(n=~n>>>0,i=~i>>>0,++i>4294967295&&(i=0,++n>4294967295&&(n=0))),new Fe(i,n)};Fe.from=function(e){if(typeof e=="number")return Fe.fromNumber(e);if(on.isString(e))if(on.Long)e=on.Long.fromString(e);else return Fe.fromNumber(parseInt(e,10));return e.low||e.high?new Fe(e.low>>>0,e.high>>>0):Xr};Fe.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,i=~this.hi>>>0;return r||(i=i+1>>>0),-(r+i*4294967296)}return this.lo+this.hi*4294967296};Fe.prototype.toLong=function(e){return on.Long?new on.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var Sr=String.prototype.charCodeAt;Fe.fromHash=function(e){return e===f2?Xr:new Fe((Sr.call(e,0)|Sr.call(e,1)<<8|Sr.call(e,2)<<16|Sr.call(e,3)<<24)>>>0,(Sr.call(e,4)|Sr.call(e,5)<<8|Sr.call(e,6)<<16|Sr.call(e,7)<<24)>>>0)};Fe.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};Fe.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};Fe.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};Fe.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return i===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:i<128?9:10}});var Br=B(uo=>{"use strict";var F=uo;F.asPromise=$u();F.base64=Zu();F.EventEmitter=Ju();F.float=sc();F.inquire=oc();F.utf8=uc();F.pool=hc();F.LongBits=pc();F.isNode=Boolean(typeof globalThis!="undefined"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);F.global=F.isNode&&globalThis||typeof window!="undefined"&&window||typeof self!="undefined"&&self||uo;F.emptyArray=Object.freeze?Object.freeze([]):[];F.emptyObject=Object.freeze?Object.freeze({}):{};F.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};F.isString=function(e){return typeof e=="string"||e instanceof String};F.isObject=function(e){return e&&typeof e=="object"};F.isset=F.isSet=function(e,r){var i=e[r];return i!=null&&e.hasOwnProperty(r)?typeof i!="object"||(Array.isArray(i)?i.length:Object.keys(i).length)>0:!1};F.Buffer=function(){try{var t=F.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(e){return null}}();F._Buffer_from=null;F._Buffer_allocUnsafe=null;F.newBuffer=function(e){return typeof e=="number"?F.Buffer?F._Buffer_allocUnsafe(e):new F.Array(e):F.Buffer?F._Buffer_from(e):typeof Uint8Array=="undefined"?e:new Uint8Array(e)};F.Array=typeof Uint8Array!="undefined"?Uint8Array:Array;F.Long=F.global.dcodeIO&&F.global.dcodeIO.Long||F.global.Long||F.inquire("long");F.key2Re=/^true|false|0|1$/;F.key32Re=/^-?(?:0|[1-9][0-9]*)$/;F.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;F.longToHash=function(e){return e?F.LongBits.from(e).toHash():F.LongBits.zeroHash};F.longFromHash=function(e,r){var i=F.LongBits.fromHash(e);return F.Long?F.Long.fromBits(i.lo,i.hi,r):i.toNumber(Boolean(r))};function dc(t,e,r){for(var i=Object.keys(e),n=0;n<i.length;++n)(t[i[n]]===void 0||!r)&&(t[i[n]]=e[i[n]]);return t}F.merge=dc;F.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function yc(t){function e(r,i){if(!(this instanceof e))return new e(r,i);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),i&&dc(this,i)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}F.newError=yc;F.ProtocolError=yc("ProtocolError");F.oneOfGetter=function(e){for(var r={},i=0;i<e.length;++i)r[e[i]]=1;return function(){for(var n=Object.keys(this),a=n.length-1;a>-1;--a)if(r[n[a]]===1&&this[n[a]]!==void 0&&this[n[a]]!==null)return n[a]}};F.oneOfSetter=function(e){return function(r){for(var i=0;i<e.length;++i)e[i]!==r&&delete this[e[i]]}};F.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};F._configure=function(){var t=F.Buffer;if(!t){F._Buffer_from=F._Buffer_allocUnsafe=null;return}F._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,i){return new t(r,i)},F._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var xo=B((O8,mc)=>{"use strict";mc.exports=ae;var dt=Br(),co,ga=dt.LongBits,gc=dt.base64,xc=dt.utf8;function fn(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function ho(){}function u2(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function ae(){this.len=0,this.head=new fn(ho,0,0),this.tail=this.head,this.states=null}var vc=function(){return dt.Buffer?function(){return(ae.create=function(){return new co})()}:function(){return new ae}};ae.create=vc();ae.alloc=function(e){return new dt.Array(e)};dt.Array!==Array&&(ae.alloc=dt.pool(ae.alloc,dt.Array.prototype.subarray));ae.prototype._push=function(e,r,i){return this.tail=this.tail.next=new fn(e,r,i),this.len+=r,this};function lo(t,e,r){e[r]=t&255}function c2(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function po(t,e){this.len=t,this.next=void 0,this.val=e}po.prototype=Object.create(fn.prototype);po.prototype.fn=c2;ae.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new po((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};ae.prototype.int32=function(e){return e<0?this._push(yo,10,ga.fromNumber(e)):this.uint32(e)};ae.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function yo(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}ae.prototype.uint64=function(e){var r=ga.from(e);return this._push(yo,r.length(),r)};ae.prototype.int64=ae.prototype.uint64;ae.prototype.sint64=function(e){var r=ga.from(e).zzEncode();return this._push(yo,r.length(),r)};ae.prototype.bool=function(e){return this._push(lo,1,e?1:0)};function go(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}ae.prototype.fixed32=function(e){return this._push(go,4,e>>>0)};ae.prototype.sfixed32=ae.prototype.fixed32;ae.prototype.fixed64=function(e){var r=ga.from(e);return this._push(go,4,r.lo)._push(go,4,r.hi)};ae.prototype.sfixed64=ae.prototype.fixed64;ae.prototype.float=function(e){return this._push(dt.float.writeFloatLE,4,e)};ae.prototype.double=function(e){return this._push(dt.float.writeDoubleLE,8,e)};var h2=dt.Array.prototype.set?function(e,r,i){r.set(e,i)}:function(e,r,i){for(var n=0;n<e.length;++n)r[i+n]=e[n]};ae.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(lo,1,0);if(dt.isString(e)){var i=ae.alloc(r=gc.length(e));gc.decode(e,i,0),e=i}return this.uint32(r)._push(h2,r,e)};ae.prototype.string=function(e){var r=xc.length(e);return r?this.uint32(r)._push(xc.write,r,e):this._push(lo,1,0)};ae.prototype.fork=function(){return this.states=new u2(this),this.head=this.tail=new fn(ho,0,0),this.len=0,this};ae.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new fn(ho,0,0),this.len=0),this};ae.prototype.ldelim=function(){var e=this.head,r=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=r,this.len+=i),this};ae.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,r,i),i+=e.len,e=e.next;return r};ae._configure=function(t){co=t,ae.create=vc(),co._configure()}});var Ec=B((q8,wc)=>{"use strict";wc.exports=Nt;var bc=xo();(Nt.prototype=Object.create(bc.prototype)).constructor=Nt;var _r=Br();function Nt(){bc.call(this)}Nt._configure=function(){Nt.alloc=_r._Buffer_allocUnsafe,Nt.writeBytesBuffer=_r.Buffer&&_r.Buffer.prototype instanceof Uint8Array&&_r.Buffer.prototype.set.name==="set"?function(e,r,i){r.set(e,i)}:function(e,r,i){if(e.copy)e.copy(r,i,0,e.length);else for(var n=0;n<e.length;)r[i++]=e[n++]}};Nt.prototype.bytes=function(e){_r.isString(e)&&(e=_r._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(Nt.writeBytesBuffer,r,e),this};function l2(t,e,r){t.length<40?_r.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}Nt.prototype.string=function(e){var r=_r.Buffer.byteLength(e);return this.uint32(r),r&&this._push(l2,r,e),this};Nt._configure()});var bo=B((H8,Cc)=>{"use strict";Cc.exports=Pe;var Ft=Br(),vo,Sc=Ft.LongBits,p2=Ft.utf8;function At(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function Pe(t){this.buf=t,this.pos=0,this.len=t.length}var Bc=typeof Uint8Array!="undefined"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Pe(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Pe(e);throw Error("illegal buffer")},_c=function(){return Ft.Buffer?function(r){return(Pe.create=function(n){return Ft.Buffer.isBuffer(n)?new vo(n):Bc(n)})(r)}:Bc};Pe.create=_c();Pe.prototype._slice=Ft.Array.prototype.subarray||Ft.Array.prototype.slice;Pe.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,At(this,10);return e}}();Pe.prototype.int32=function(){return this.uint32()|0};Pe.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function mo(){var t=new Sc(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw At(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw At(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}Pe.prototype.bool=function(){return this.uint32()!==0};function xa(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}Pe.prototype.fixed32=function(){if(this.pos+4>this.len)throw At(this,4);return xa(this.buf,this.pos+=4)};Pe.prototype.sfixed32=function(){if(this.pos+4>this.len)throw At(this,4);return xa(this.buf,this.pos+=4)|0};function Ac(){if(this.pos+8>this.len)throw At(this,8);return new Sc(xa(this.buf,this.pos+=4),xa(this.buf,this.pos+=4))}Pe.prototype.float=function(){if(this.pos+4>this.len)throw At(this,4);var e=Ft.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Pe.prototype.double=function(){if(this.pos+8>this.len)throw At(this,4);var e=Ft.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Pe.prototype.bytes=function(){var e=this.uint32(),r=this.pos,i=this.pos+e;if(i>this.len)throw At(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,i):r===i?new this.buf.constructor(0):this._slice.call(this.buf,r,i)};Pe.prototype.string=function(){var e=this.bytes();return p2.read(e,0,e.length)};Pe.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw At(this,e);this.pos+=e}else do if(this.pos>=this.len)throw At(this);while(this.buf[this.pos++]&128);return this};Pe.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!=4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};Pe._configure=function(t){vo=t,Pe.create=_c(),vo._configure();var e=Ft.Long?"toLong":"toNumber";Ft.merge(Pe.prototype,{int64:function(){return mo.call(this)[e](!1)},uint64:function(){return mo.call(this)[e](!0)},sint64:function(){return mo.call(this).zzDecode()[e](!1)},fixed64:function(){return Ac.call(this)[e](!0)},sfixed64:function(){return Ac.call(this)[e](!1)}})}});var Kc=B((V8,Pc)=>{"use strict";Pc.exports=Yr;var Ic=bo();(Yr.prototype=Object.create(Ic.prototype)).constructor=Yr;var Tc=Br();function Yr(t){Ic.call(this,t)}Yr._configure=function(){Tc.Buffer&&(Yr.prototype._slice=Tc.Buffer.prototype.slice)};Yr.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};Yr._configure()});var Lc=B((z8,Rc)=>{"use strict";Rc.exports=un;var wo=Br();(un.prototype=Object.create(wo.EventEmitter.prototype)).constructor=un;function un(t,e,r){if(typeof t!="function")throw TypeError("rpcImpl must be a function");wo.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}un.prototype.rpcCall=function t(e,r,i,n,a){if(!n)throw TypeError("request must be specified");var s=this;if(!a)return wo.asPromise(t,s,e,r,i,n);if(!s.rpcImpl){setTimeout(function(){a(Error("already ended"))},0);return}try{return s.rpcImpl(e,r[s.requestDelimited?"encodeDelimited":"encode"](n).finish(),function(f,u){if(f)return s.emit("error",f,e),a(f);if(u===null){s.end(!0);return}if(!(u instanceof i))try{u=i[s.responseDelimited?"decodeDelimited":"decode"](u)}catch(c){return s.emit("error",c,e),a(c)}return s.emit("data",u,e),a(null,u)})}catch(o){s.emit("error",o,e),setTimeout(function(){a(o)},0);return}};un.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var Uc=B(kc=>{"use strict";var d2=kc;d2.Service=Lc()});var Nc=B((W8,Dc)=>{"use strict";Dc.exports={}});var Oc=B(Mc=>{"use strict";var ot=Mc;ot.build="minimal";ot.Writer=xo();ot.BufferWriter=Ec();ot.Reader=bo();ot.BufferReader=Kc();ot.util=Br();ot.rpc=Uc();ot.roots=Nc();ot.configure=Fc;function Fc(){ot.util._configure(),ot.Writer._configure(ot.BufferWriter),ot.Reader._configure(ot.BufferReader)}Fc()});var va=B((j8,qc)=>{"use strict";qc.exports=Oc()});var ba=B((X8,Vc)=>{"use strict";var Zr=va(),ma=Zr.Reader,Hc=Zr.Writer,Ze=Zr.util,yt=Zr.roots["libp2p-crypto-keys"]||(Zr.roots["libp2p-crypto-keys"]={});yt.KeyType=function(){var t={},e=Object.create(t);return e[t[0]="RSA"]=0,e[t[1]="Ed25519"]=1,e[t[2]="Secp256k1"]=2,e}();yt.PublicKey=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.Type=0,t.prototype.Data=Ze.newBuffer([]),t.encode=function(r,i){return i||(i=Hc.create()),i.uint32(8).int32(r.Type),i.uint32(18).bytes(r.Data),i},t.decode=function(r,i){r instanceof ma||(r=ma.create(r));for(var n=i===void 0?r.len:r.pos+i,a=new yt.PublicKey;r.pos<n;){var s=r.uint32();switch(s>>>3){case 1:a.Type=r.int32();break;case 2:a.Data=r.bytes();break;default:r.skipType(s&7);break}}if(!a.hasOwnProperty("Type"))throw Ze.ProtocolError("missing required 'Type'",{instance:a});if(!a.hasOwnProperty("Data"))throw Ze.ProtocolError("missing required 'Data'",{instance:a});return a},t.fromObject=function(r){if(r instanceof yt.PublicKey)return r;var i=new yt.PublicKey;switch(r.Type){case"RSA":case 0:i.Type=0;break;case"Ed25519":case 1:i.Type=1;break;case"Secp256k1":case 2:i.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?Ze.base64.decode(r.Data,i.Data=Ze.newBuffer(Ze.base64.length(r.Data)),0):r.Data.length&&(i.Data=r.Data)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(n.Type=i.enums===String?"RSA":0,i.bytes===String?n.Data="":(n.Data=[],i.bytes!==Array&&(n.Data=Ze.newBuffer(n.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(n.Type=i.enums===String?yt.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(n.Data=i.bytes===String?Ze.base64.encode(r.Data,0,r.Data.length):i.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Zr.util.toJSONOptions)},t}();yt.PrivateKey=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.Type=0,t.prototype.Data=Ze.newBuffer([]),t.encode=function(r,i){return i||(i=Hc.create()),i.uint32(8).int32(r.Type),i.uint32(18).bytes(r.Data),i},t.decode=function(r,i){r instanceof ma||(r=ma.create(r));for(var n=i===void 0?r.len:r.pos+i,a=new yt.PrivateKey;r.pos<n;){var s=r.uint32();switch(s>>>3){case 1:a.Type=r.int32();break;case 2:a.Data=r.bytes();break;default:r.skipType(s&7);break}}if(!a.hasOwnProperty("Type"))throw Ze.ProtocolError("missing required 'Type'",{instance:a});if(!a.hasOwnProperty("Data"))throw Ze.ProtocolError("missing required 'Data'",{instance:a});return a},t.fromObject=function(r){if(r instanceof yt.PrivateKey)return r;var i=new yt.PrivateKey;switch(r.Type){case"RSA":case 0:i.Type=0;break;case"Ed25519":case 1:i.Type=1;break;case"Secp256k1":case 2:i.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?Ze.base64.decode(r.Data,i.Data=Ze.newBuffer(Ze.base64.length(r.Data)),0):r.Data.length&&(i.Data=r.Data)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(n.Type=i.enums===String?"RSA":0,i.bytes===String?n.Data="":(n.Data=[],i.bytes!==Array&&(n.Data=Ze.newBuffer(n.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(n.Type=i.enums===String?yt.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(n.Data=i.bytes===String?Ze.base64.encode(r.Data,0,r.Data.length):i.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Zr.util.toJSONOptions)},t}();Vc.exports=yt});var xe=B((Y8,zc)=>{zc.exports={options:{usePureJavaScript:!1}}});var $c=B((Z8,Wc)=>{var Eo={};Wc.exports=Eo;var Gc={};Eo.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var i="";if(!(t instanceof Uint8Array))i=y2(t,e);else{var n=0,a=e.length,s=e.charAt(0),o=[0];for(n=0;n<t.length;++n){for(var f=0,u=t[n];f<o.length;++f)u+=o[f]<<8,o[f]=u%a,u=u/a|0;for(;u>0;)o.push(u%a),u=u/a|0}for(n=0;t[n]===0&&n<t.length-1;++n)i+=s;for(n=o.length-1;n>=0;--n)i+=e[o[n]]}if(r){var c=new RegExp(".{1,"+r+"}","g");i=i.match(c).join(`\r
`)}return i};Eo.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=Gc[e];if(!r){r=Gc[e]=[];for(var i=0;i<e.length;++i)r[e.charCodeAt(i)]=i}t=t.replace(/\s/g,"");for(var n=e.length,a=e.charAt(0),s=[0],i=0;i<t.length;i++){var o=r[t.charCodeAt(i)];if(o===void 0)return;for(var f=0,u=o;f<s.length;++f)u+=s[f]*n,s[f]=u&255,u>>=8;for(;u>0;)s.push(u&255),u>>=8}for(var c=0;t[c]===a&&c<t.length-1;++c)s.push(0);return typeof Buffer!="undefined"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function y2(t,e){var r=0,i=e.length,n=e.charAt(0),a=[0];for(r=0;r<t.length();++r){for(var s=0,o=t.at(r);s<a.length;++s)o+=a[s]<<8,a[s]=o%i,o=o/i|0;for(;o>0;)a.push(o%i),o=o/i|0}var f="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)f+=n;for(r=a.length-1;r>=0;--r)f+=e[a[r]];return f}});var Re=B((Q8,Zc)=>{var jc=xe(),Xc=$c(),x=Zc.exports=jc.util=jc.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){x.nextTick=process.nextTick,typeof setImmediate=="function"?x.setImmediate=setImmediate:x.setImmediate=x.nextTick;return}if(typeof setImmediate=="function"){x.setImmediate=function(){return setImmediate.apply(void 0,arguments)},x.nextTick=function(o){return setImmediate(o)};return}if(x.setImmediate=function(o){setTimeout(o,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let o=function(f){if(f.source===window&&f.data===t){f.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(c){c()})}};var s=o,t="forge.setImmediate",e=[];x.setImmediate=function(f){e.push(f),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",o,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),i=!0,n=document.createElement("div"),e=[];new MutationObserver(function(){var f=e.slice();e.length=0,f.forEach(function(u){u()})}).observe(n,{attributes:!0});var a=x.setImmediate;x.setImmediate=function(f){Date.now()-r>15?(r=Date.now(),a(f)):(e.push(f),e.length===1&&n.setAttribute("a",i=!i))}}x.nextTick=x.setImmediate})();x.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;x.globalScope=function(){return x.isNodejs?globalThis:typeof self=="undefined"?window:self}();x.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};x.isArrayBuffer=function(t){return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer};x.isArrayBufferView=function(t){return t&&x.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function cn(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}x.ByteBuffer=So;function So(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(x.isArrayBuffer(t)||x.isArrayBufferView(t))if(typeof Buffer!="undefined"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(i){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof So||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}x.ByteStringBuffer=So;var g2=4096;x.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>g2&&(this.data.substr(0,1),this._constructedStringLength=0)};x.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};x.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};x.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};x.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};x.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};x.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(x.encodeUtf8(t))};x.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};x.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};x.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};x.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};x.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};x.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};x.ByteStringBuffer.prototype.putInt=function(t,e){cn(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};x.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};x.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};x.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};x.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};x.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};x.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};x.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};x.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};x.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};x.ByteStringBuffer.prototype.getInt=function(t){cn(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};x.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};x.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};x.ByteStringBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};x.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};x.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};x.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};x.ByteStringBuffer.prototype.copy=function(){var t=x.createBuffer(this.data);return t.read=this.read,t};x.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};x.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};x.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};x.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};x.ByteStringBuffer.prototype.toString=function(){return x.decodeUtf8(this.bytes())};function x2(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=x.isArrayBuffer(t),i=x.isArrayBufferView(t);if(r||i){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}x.DataBuffer=x2;x.DataBuffer.prototype.length=function(){return this.write-this.read};x.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};x.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),i=new Uint8Array(this.length()+e);return i.set(r),this.data=new DataView(i.buffer),this};x.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};x.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};x.DataBuffer.prototype.putBytes=function(t,e){if(x.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),i=r.byteLength-r.byteOffset;this.accommodate(i);var n=new Uint8Array(this.data.buffer,this.write);return n.set(r),this.write+=i,this}if(x.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var n=new Uint8Array(this.data.buffer);return n.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof x.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&x.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var n=new Uint8Array(t.data.byteLength,this.write);return n.set(r),this.write+=r.byteLength,this}if(t instanceof x.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var a;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=x.binary.hex.decode(t,a,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),a=new Uint8Array(this.data.buffer,this.write),this.write+=x.binary.base64.decode(t,a,this.write),this;if(e==="utf8"&&(t=x.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=x.binary.raw.decode(a),this;if(e==="utf16")return this.accommodate(t.length*2),a=new Uint16Array(this.data.buffer,this.write),this.write+=x.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};x.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};x.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};x.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};x.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};x.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};x.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};x.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};x.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};x.DataBuffer.prototype.putInt=function(t,e){cn(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};x.DataBuffer.prototype.putSignedInt=function(t,e){return cn(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};x.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};x.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};x.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};x.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};x.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};x.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};x.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};x.DataBuffer.prototype.getInt=function(t){cn(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};x.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};x.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};x.DataBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};x.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};x.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};x.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};x.DataBuffer.prototype.copy=function(){return new x.DataBuffer(this)};x.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};x.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};x.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};x.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};x.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return x.binary.raw.encode(e);if(t==="hex")return x.binary.hex.encode(e);if(t==="base64")return x.binary.base64.encode(e);if(t==="utf8")return x.text.utf8.decode(e);if(t==="utf16")return x.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};x.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=x.encodeUtf8(t)),new x.ByteBuffer(t)};x.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};x.xorBytes=function(t,e,r){for(var i="",n="",a="",s=0,o=0;r>0;--r,++s)n=t.charCodeAt(s)^e.charCodeAt(s),o>=10&&(i+=a,a="",o=0),a+=String.fromCharCode(n),++o;return i+=a,i};x.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};x.bytesToHex=function(t){return x.createBuffer(t).toHex()};x.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var Ar="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Cr=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Yc="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";x.encode64=function(t,e){for(var r="",i="",n,a,s,o=0;o<t.length;)n=t.charCodeAt(o++),a=t.charCodeAt(o++),s=t.charCodeAt(o++),r+=Ar.charAt(n>>2),r+=Ar.charAt((n&3)<<4|a>>4),isNaN(a)?r+="==":(r+=Ar.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":Ar.charAt(s&63)),e&&r.length>e&&(i+=r.substr(0,e)+`\r
`,r=r.substr(e));return i+=r,i};x.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,i,n,a,s=0;s<t.length;)r=Cr[t.charCodeAt(s++)-43],i=Cr[t.charCodeAt(s++)-43],n=Cr[t.charCodeAt(s++)-43],a=Cr[t.charCodeAt(s++)-43],e+=String.fromCharCode(r<<2|i>>4),n!==64&&(e+=String.fromCharCode((i&15)<<4|n>>2),a!==64&&(e+=String.fromCharCode((n&3)<<6|a)));return e};x.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};x.decodeUtf8=function(t){return decodeURIComponent(escape(t))};x.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:Xc.encode,decode:Xc.decode}};x.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};x.binary.raw.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(t.length)),r=r||0;for(var n=r,a=0;a<t.length;++a)i[n++]=t.charCodeAt(a);return e?n-r:i};x.binary.hex.encode=x.bytesToHex;x.binary.hex.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var n=0,a=r;for(t.length&1&&(n=1,i[a++]=parseInt(t[0],16));n<t.length;n+=2)i[a++]=parseInt(t.substr(n,2),16);return e?a-r:i};x.binary.base64.encode=function(t,e){for(var r="",i="",n,a,s,o=0;o<t.byteLength;)n=t[o++],a=t[o++],s=t[o++],r+=Ar.charAt(n>>2),r+=Ar.charAt((n&3)<<4|a>>4),isNaN(a)?r+="==":(r+=Ar.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":Ar.charAt(s&63)),e&&r.length>e&&(i+=r.substr(0,e)+`\r
`,r=r.substr(e));return i+=r,i};x.binary.base64.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var n,a,s,o,f=0,u=r;f<t.length;)n=Cr[t.charCodeAt(f++)-43],a=Cr[t.charCodeAt(f++)-43],s=Cr[t.charCodeAt(f++)-43],o=Cr[t.charCodeAt(f++)-43],i[u++]=n<<2|a>>4,s!==64&&(i[u++]=(a&15)<<4|s>>2,o!==64&&(i[u++]=(s&3)<<6|o));return e?u-r:i.subarray(0,u)};x.binary.base58.encode=function(t,e){return x.binary.baseN.encode(t,Yc,e)};x.binary.base58.decode=function(t,e){return x.binary.baseN.decode(t,Yc,e)};x.text={utf8:{},utf16:{}};x.text.utf8.encode=function(t,e,r){t=x.encodeUtf8(t);var i=e;i||(i=new Uint8Array(t.length)),r=r||0;for(var n=r,a=0;a<t.length;++a)i[n++]=t.charCodeAt(a);return e?n-r:i};x.text.utf8.decode=function(t){return x.decodeUtf8(String.fromCharCode.apply(null,t))};x.text.utf16.encode=function(t,e,r){var i=e;i||(i=new Uint8Array(t.length*2));var n=new Uint16Array(i.buffer);r=r||0;for(var a=r,s=r,o=0;o<t.length;++o)n[s++]=t.charCodeAt(o),a+=2;return e?a-r:i};x.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};x.deflate=function(t,e,r){if(e=x.decode64(t.deflate(x.encode64(e)).rval),r){var i=2,n=e.charCodeAt(1);n&32&&(i=6),e=e.substring(i,e.length-4)}return e};x.inflate=function(t,e,r){var i=t.inflate(x.encode64(e)).rval;return i===null?null:x.decode64(i)};var Bo=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var i;if(r===null?i=t.removeItem(e):(r=x.encode64(JSON.stringify(r)),i=t.setItem(e,r)),typeof i!="undefined"&&i.rval!==!0){var n=new Error(i.error.message);throw n.id=i.error.id,n.name=i.error.name,n}},_o=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(x.decode64(r))),r},v2=function(t,e,r,i){var n=_o(t,e);n===null&&(n={}),n[r]=i,Bo(t,e,n)},m2=function(t,e,r){var i=_o(t,e);return i!==null&&(i=r in i?i[r]:null),i},b2=function(t,e,r){var i=_o(t,e);if(i!==null&&r in i){delete i[r];var n=!0;for(var a in i){n=!1;break}n&&(i=null),Bo(t,e,i)}},w2=function(t,e){Bo(t,e,null)},wa=function(t,e,r){var i=null;typeof r=="undefined"&&(r=["web","flash"]);var n,a=!1,s=null;for(var o in r){n=r[o];try{if(n==="flash"||n==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");i=t.apply(this,e),a=n==="flash"}(n==="web"||n==="both")&&(e[0]=localStorage,i=t.apply(this,e),a=!0)}catch(f){s=f}if(a)break}if(!a)throw s;return i};x.setItem=function(t,e,r,i,n){wa(v2,arguments,n)};x.getItem=function(t,e,r,i){return wa(m2,arguments,i)};x.removeItem=function(t,e,r,i){wa(b2,arguments,i)};x.clearItems=function(t,e,r){wa(w2,arguments,r)};x.parseUrl=function(t){var e=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;e.lastIndex=0;var r=e.exec(t),i=r===null?null:{full:t,scheme:r[1],host:r[2],port:r[3],path:r[4]};return i&&(i.fullHost=i.host,i.port?(i.port!==80&&i.scheme==="http"||i.port!==443&&i.scheme==="https")&&(i.fullHost+=":"+i.port):i.scheme==="http"?i.port=80:i.scheme==="https"&&(i.port=443),i.full=i.scheme+"://"+i.fullHost),i};var Ea=null;x.getQueryVariables=function(t){var e=function(i){for(var n={},a=i.split("&"),s=0;s<a.length;s++){var o=a[s].indexOf("="),f,u;o>0?(f=a[s].substring(0,o),u=a[s].substring(o+1)):(f=a[s],u=null),f in n||(n[f]=[]),!(f in Object.prototype)&&u!==null&&n[f].push(unescape(u))}return n},r;return typeof t=="undefined"?(Ea===null&&(typeof window!="undefined"&&window.location&&window.location.search?Ea=e(window.location.search.substring(1)):Ea={}),r=Ea):r=e(t),r};x.parseFragment=function(t){var e=t,r="",i=t.indexOf("?");i>0&&(e=t.substring(0,i),r=t.substring(i+1));var n=e.split("/");n.length>0&&n[0]===""&&n.shift();var a=r===""?{}:x.getQueryVariables(r);return{pathString:e,queryString:r,path:n,query:a}};x.makeRequest=function(t){var e=x.parseFragment(t),r={path:e.pathString,query:e.queryString,getPath:function(i){return typeof i=="undefined"?e.path:e.path[i]},getQuery:function(i,n){var a;return typeof i=="undefined"?a=e.query:(a=e.query[i],a&&typeof n!="undefined"&&(a=a[n])),a},getQueryLast:function(i,n){var a,s=r.getQuery(i);return s?a=s[s.length-1]:a=n,a}};return r};x.makeLink=function(t,e,r){t=jQuery.isArray(t)?t.join("/"):t;var i=jQuery.param(e||{});return r=r||"",t+(i.length>0?"?"+i:"")+(r.length>0?"#"+r:"")};x.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};x.format=function(t){for(var e=/%./g,r,i,n=0,a=[],s=0;r=e.exec(t);){i=t.substring(s,e.lastIndex-2),i.length>0&&a.push(i),s=e.lastIndex;var o=r[0][1];switch(o){case"s":case"o":n<arguments.length?a.push(arguments[n+++1]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+o+"?>")}}return a.push(t.substring(s)),a.join("")};x.formatNumber=function(t,e,r,i){var n=t,a=isNaN(e=Math.abs(e))?2:e,s=r===void 0?",":r,o=i===void 0?".":i,f=n<0?"-":"",u=parseInt(n=Math.abs(+n||0).toFixed(a),10)+"",c=u.length>3?u.length%3:0;return f+(c?u.substr(0,c)+o:"")+u.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+o)+(a?s+Math.abs(n-u).toFixed(a).slice(2):"")};x.formatSize=function(t){return t>=1073741824?t=x.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=x.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=x.formatNumber(t/1024,0)+" KiB":t=x.formatNumber(t,0)+" bytes",t};x.bytesFromIP=function(t){return t.indexOf(".")!==-1?x.bytesFromIPv4(t):t.indexOf(":")!==-1?x.bytesFromIPv6(t):null};x.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=x.createBuffer(),r=0;r<t.length;++r){var i=parseInt(t[r],10);if(isNaN(i))return null;e.putByte(i)}return e.getBytes()};x.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(s){return s.length===0&&++e,!0});for(var r=(8-t.length+e)*2,i=x.createBuffer(),n=0;n<8;++n){if(!t[n]||t[n].length===0){i.fillWithByte(0,r),r=0;continue}var a=x.hexToBytes(t[n]);a.length<2&&i.putByte(0),i.putBytes(a)}return i.getBytes()};x.bytesToIP=function(t){return t.length===4?x.bytesToIPv4(t):t.length===16?x.bytesToIPv6(t):null};x.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};x.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],i=0,n=0;n<t.length;n+=2){for(var a=x.bytesToHex(t[n]+t[n+1]);a[0]==="0"&&a!=="0";)a=a.substr(1);if(a==="0"){var s=r[r.length-1],o=e.length;!s||o!==s.end+1?r.push({start:o,end:o}):(s.end=o,s.end-s.start>r[i].end-r[i].start&&(i=r.length-1))}e.push(a)}if(r.length>0){var f=r[i];f.end-f.start>0&&(e.splice(f.start,f.end-f.start+1,""),f.start===0&&e.unshift(""),f.end===7&&e.push(""))}return e.join(":")};x.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in x&&!t.update)return e(null,x.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return x.cores=navigator.hardwareConcurrency,e(null,x.cores);if(typeof Worker=="undefined")return x.cores=1,e(null,x.cores);if(typeof Blob=="undefined")return x.cores=2,e(null,x.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var o=Date.now(),f=o+4;Date.now()<f;);self.postMessage({st:o,et:f})})}.toString(),")()"],{type:"application/javascript"}));i([],5,16);function i(s,o,f){if(o===0){var u=Math.floor(s.reduce(function(c,h){return c+h},0)/s.length);return x.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,x.cores)}n(f,function(c,h){s.push(a(f,h)),i(s,o-1,f)})}function n(s,o){for(var f=[],u=[],c=0;c<s;++c){var h=new Worker(r);h.addEventListener("message",function(l){if(u.push(l.data),u.length===s){for(var d=0;d<s;++d)f[d].terminate();o(null,u)}}),f.push(h)}for(var c=0;c<s;++c)f[c].postMessage(c)}function a(s,o){for(var f=[],u=0;u<s;++u)for(var c=o[u],h=f[u]=[],l=0;l<s;++l)if(u!==l){var d=o[l];(c.st>d.st&&c.st<d.et||d.st>c.st&&d.st<c.et)&&h.push(l)}return f.reduce(function(p,y){return Math.max(p,y.length)},0)}}});var Sa=B((J8,Qc)=>{var hn=xe();hn.pki=hn.pki||{};var Ao=Qc.exports=hn.pki.oids=hn.oids=hn.oids||{};function K(t,e){Ao[t]=e,Ao[e]=t}function pe(t,e){Ao[t]=e}K("1.2.840.113549.1.1.1","rsaEncryption");K("1.2.840.113549.1.1.4","md5WithRSAEncryption");K("1.2.840.113549.1.1.5","sha1WithRSAEncryption");K("1.2.840.113549.1.1.7","RSAES-OAEP");K("1.2.840.113549.1.1.8","mgf1");K("1.2.840.113549.1.1.9","pSpecified");K("1.2.840.113549.1.1.10","RSASSA-PSS");K("1.2.840.113549.1.1.11","sha256WithRSAEncryption");K("1.2.840.113549.1.1.12","sha384WithRSAEncryption");K("1.2.840.113549.1.1.13","sha512WithRSAEncryption");K("1.3.101.112","EdDSA25519");K("1.2.840.10040.4.3","dsa-with-sha1");K("1.3.14.3.2.7","desCBC");K("1.3.14.3.2.26","sha1");K("2.16.840.1.101.3.4.2.1","sha256");K("2.16.840.1.101.3.4.2.2","sha384");K("2.16.840.1.101.3.4.2.3","sha512");K("1.2.840.113549.2.5","md5");K("1.2.840.113549.1.7.1","data");K("1.2.840.113549.1.7.2","signedData");K("1.2.840.113549.1.7.3","envelopedData");K("1.2.840.113549.1.7.4","signedAndEnvelopedData");K("1.2.840.113549.1.7.5","digestedData");K("1.2.840.113549.1.7.6","encryptedData");K("1.2.840.113549.1.9.1","emailAddress");K("1.2.840.113549.1.9.2","unstructuredName");K("1.2.840.113549.1.9.3","contentType");K("1.2.840.113549.1.9.4","messageDigest");K("1.2.840.113549.1.9.5","signingTime");K("1.2.840.113549.1.9.6","counterSignature");K("1.2.840.113549.1.9.7","challengePassword");K("1.2.840.113549.1.9.8","unstructuredAddress");K("1.2.840.113549.1.9.14","extensionRequest");K("1.2.840.113549.1.9.20","friendlyName");K("1.2.840.113549.1.9.21","localKeyId");K("1.2.840.113549.1.9.22.1","x509Certificate");K("1.2.840.113549.1.12.10.1.1","keyBag");K("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");K("1.2.840.113549.1.12.10.1.3","certBag");K("1.2.840.113549.1.12.10.1.4","crlBag");K("1.2.840.113549.1.12.10.1.5","secretBag");K("1.2.840.113549.1.12.10.1.6","safeContentsBag");K("1.2.840.113549.1.5.13","pkcs5PBES2");K("1.2.840.113549.1.5.12","pkcs5PBKDF2");K("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");K("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");K("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");K("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");K("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");K("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");K("1.2.840.113549.2.7","hmacWithSHA1");K("1.2.840.113549.2.8","hmacWithSHA224");K("1.2.840.113549.2.9","hmacWithSHA256");K("1.2.840.113549.2.10","hmacWithSHA384");K("1.2.840.113549.2.11","hmacWithSHA512");K("1.2.840.113549.3.7","des-EDE3-CBC");K("2.16.840.1.101.3.4.1.2","aes128-CBC");K("2.16.840.1.101.3.4.1.22","aes192-CBC");K("2.16.840.1.101.3.4.1.42","aes256-CBC");K("2.5.4.3","commonName");K("2.5.4.5","serialName");K("2.5.4.6","countryName");K("2.5.4.7","localityName");K("2.5.4.8","stateOrProvinceName");K("2.5.4.9","streetAddress");K("2.5.4.10","organizationName");K("2.5.4.11","organizationalUnitName");K("2.5.4.13","description");K("2.5.4.15","businessCategory");K("2.5.4.17","postalCode");K("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");K("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");K("2.16.840.1.113730.1.1","nsCertType");K("2.16.840.1.113730.1.13","nsComment");pe("2.5.29.1","authorityKeyIdentifier");pe("2.5.29.2","keyAttributes");pe("2.5.29.3","certificatePolicies");pe("2.5.29.4","keyUsageRestriction");pe("2.5.29.5","policyMapping");pe("2.5.29.6","subtreesConstraint");pe("2.5.29.7","subjectAltName");pe("2.5.29.8","issuerAltName");pe("2.5.29.9","subjectDirectoryAttributes");pe("2.5.29.10","basicConstraints");pe("2.5.29.11","nameConstraints");pe("2.5.29.12","policyConstraints");pe("2.5.29.13","basicConstraints");K("2.5.29.14","subjectKeyIdentifier");K("2.5.29.15","keyUsage");pe("2.5.29.16","privateKeyUsagePeriod");K("2.5.29.17","subjectAltName");K("2.5.29.18","issuerAltName");K("2.5.29.19","basicConstraints");pe("2.5.29.20","cRLNumber");pe("2.5.29.21","cRLReason");pe("2.5.29.22","expirationDate");pe("2.5.29.23","instructionCode");pe("2.5.29.24","invalidityDate");pe("2.5.29.25","cRLDistributionPoints");pe("2.5.29.26","issuingDistributionPoint");pe("2.5.29.27","deltaCRLIndicator");pe("2.5.29.28","issuingDistributionPoint");pe("2.5.29.29","certificateIssuer");pe("2.5.29.30","nameConstraints");K("2.5.29.31","cRLDistributionPoints");K("2.5.29.32","certificatePolicies");pe("2.5.29.33","policyMappings");pe("2.5.29.34","policyConstraints");K("2.5.29.35","authorityKeyIdentifier");pe("2.5.29.36","policyConstraints");K("2.5.29.37","extKeyUsage");pe("2.5.29.46","freshestCRL");pe("2.5.29.54","inhibitAnyPolicy");K("1.3.6.1.4.1.11129.2.4.2","timestampList");K("1.3.6.1.5.5.7.1.1","authorityInfoAccess");K("1.3.6.1.5.5.7.3.1","serverAuth");K("1.3.6.1.5.5.7.3.2","clientAuth");K("1.3.6.1.5.5.7.3.3","codeSigning");K("1.3.6.1.5.5.7.3.4","emailProtection");K("1.3.6.1.5.5.7.3.8","timeStamping")});var pn=B((e3,eh)=>{var _e=xe();Re();Sa();var k=eh.exports=_e.asn1=_e.asn1||{};k.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};k.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};k.create=function(t,e,r,i,n){if(_e.util.isArray(i)){for(var a=[],s=0;s<i.length;++s)i[s]!==void 0&&a.push(i[s]);i=a}var o={tagClass:t,type:e,constructed:r,composed:r||_e.util.isArray(i),value:i};return n&&"bitStringContents"in n&&(o.bitStringContents=n.bitStringContents,o.original=k.copy(o)),o};k.copy=function(t,e){var r;if(_e.util.isArray(t)){r=[];for(var i=0;i<t.length;++i)r.push(k.copy(t[i],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:k.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};k.equals=function(t,e,r){if(_e.util.isArray(t)){if(!_e.util.isArray(e)||t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(!k.equals(t[i],e[i]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var n=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&k.equals(t.value,e.value);return r&&r.includeBitStringContents&&(n=n&&t.bitStringContents===e.bitStringContents),n};k.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,i=e&128;return i?r=t.getInt((e&127)<<3):r=e,r}};function ln(t,e,r){if(r>e){var i=new Error("Too few bytes to parse DER.");throw i.available=t.length(),i.remaining=e,i.requested=r,i}}var E2=function(t,e){var r=t.getByte();if(e--,r!==128){var i,n=r&128;if(!n)i=r;else{var a=r&127;ln(t,e,a),i=t.getInt(a<<3)}if(i<0)throw new Error("Negative length: "+i);return i}};k.fromDer=function(t,e){return e===void 0&&(e={strict:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=_e.util.createBuffer(t)),Ba(t,t.length(),0,e)};function Ba(t,e,r,i){var n;ln(t,e,2);var a=t.getByte();e--;var s=a&192,o=a&31;n=t.length();var f=E2(t,e);if(e-=n-t.length(),f!==void 0&&f>e){if(i.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=f,u}f=e}var c,h,l=(a&32)==32;if(l)if(c=[],f===void 0)for(;;){if(ln(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}n=t.length(),c.push(Ba(t,e,r+1,i)),e-=n-t.length()}else for(;f>0;)n=t.length(),c.push(Ba(t,f,r+1,i)),e-=n-t.length(),f-=n-t.length();if(c===void 0&&s===k.Class.UNIVERSAL&&o===k.Type.BITSTRING&&(h=t.bytes(f)),c===void 0&&i.decodeBitStrings&&s===k.Class.UNIVERSAL&&o===k.Type.BITSTRING&&f>1){var d=t.read,p=e,y=0;if(o===k.Type.BITSTRING&&(ln(t,e,1),y=t.getByte(),e--),y===0)try{n=t.length();var g={verbose:i.verbose,strict:!0,decodeBitStrings:!0},v=Ba(t,e,r+1,g),b=n-t.length();e-=b,o==k.Type.BITSTRING&&b++;var w=v.tagClass;b===f&&(w===k.Class.UNIVERSAL||w===k.Class.CONTEXT_SPECIFIC)&&(c=[v])}catch(C){}c===void 0&&(t.read=d,e=p)}if(c===void 0){if(f===void 0){if(i.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");f=e}if(o===k.Type.BMPSTRING)for(c="";f>0;f-=2)ln(t,e,2),c+=String.fromCharCode(t.getInt16()),e-=2;else c=t.getBytes(f)}var T=h===void 0?null:{bitStringContents:h};return k.create(s,o,l,c,T)}k.toDer=function(t){var e=_e.util.createBuffer(),r=t.tagClass|t.type,i=_e.util.createBuffer(),n=!1;if("bitStringContents"in t&&(n=!0,t.original&&(n=k.equals(t,t.original))),n)i.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:i.putByte(0);for(var a=0;a<t.value.length;++a)t.value[a]!==void 0&&i.putBuffer(k.toDer(t.value[a]))}else if(t.type===k.Type.BMPSTRING)for(var a=0;a<t.value.length;++a)i.putInt16(t.value.charCodeAt(a));else t.type===k.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)==0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)==128)?i.putBytes(t.value.substr(1)):i.putBytes(t.value);if(e.putByte(r),i.length()<=127)e.putByte(i.length()&127);else{var s=i.length(),o="";do o+=String.fromCharCode(s&255),s=s>>>8;while(s>0);e.putByte(o.length|128);for(var a=o.length-1;a>=0;--a)e.putByte(o.charCodeAt(a))}return e.putBuffer(i),e};k.oidToDer=function(t){var e=t.split("."),r=_e.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var i,n,a,s,o=2;o<e.length;++o){i=!0,n=[],a=parseInt(e[o],10);do s=a&127,a=a>>>7,i||(s|=128),n.push(s),i=!1;while(a>0);for(var f=n.length-1;f>=0;--f)r.putByte(n[f])}return r};k.derToOid=function(t){var e;typeof t=="string"&&(t=_e.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var i=0;t.length()>0;)r=t.getByte(),i=i<<7,r&128?i+=r&127:(e+="."+(i+r),i=0);return e};k.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var i=parseInt(t.substr(2,2),10)-1,n=parseInt(t.substr(4,2),10),a=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),o=0;if(t.length>11){var f=t.charAt(10),u=10;f!=="+"&&f!=="-"&&(o=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,i,n),e.setUTCHours(a,s,o,0),u&&(f=t.charAt(u),f==="+"||f==="-")){var c=parseInt(t.substr(u+1,2),10),h=parseInt(t.substr(u+4,2),10),l=c*60+h;l*=6e4,f==="+"?e.setTime(+e-l):e.setTime(+e+l)}return e};k.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),i=parseInt(t.substr(4,2),10)-1,n=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),s=parseInt(t.substr(10,2),10),o=parseInt(t.substr(12,2),10),f=0,u=0,c=!1;t.charAt(t.length-1)==="Z"&&(c=!0);var h=t.length-5,l=t.charAt(h);if(l==="+"||l==="-"){var d=parseInt(t.substr(h+1,2),10),p=parseInt(t.substr(h+4,2),10);u=d*60+p,u*=6e4,l==="+"&&(u*=-1),c=!0}return t.charAt(14)==="."&&(f=parseFloat(t.substr(14),10)*1e3),c?(e.setUTCFullYear(r,i,n),e.setUTCHours(a,s,o,f),e.setTime(+e+u)):(e.setFullYear(r,i,n),e.setHours(a,s,o,f)),e};k.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var i=0;i<r.length;++i)r[i].length<2&&(e+="0"),e+=r[i];return e+="Z",e};k.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var i=0;i<r.length;++i)r[i].length<2&&(e+="0"),e+=r[i];return e+="Z",e};k.integerToDer=function(t){var e=_e.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};k.derToInteger=function(t){typeof t=="string"&&(t=_e.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};k.validate=function(t,e,r,i){var n=!1;if((t.tagClass===e.tagClass||typeof e.tagClass=="undefined")&&(t.type===e.type||typeof e.type=="undefined"))if(t.constructed===e.constructed||typeof e.constructed=="undefined"){if(n=!0,e.value&&_e.util.isArray(e.value))for(var a=0,s=0;n&&s<e.value.length;++s)n=e.value[s].optional||!1,t.value[a]&&(n=k.validate(t.value[a],e.value[s],r,i),n?++a:e.value[s].optional&&(n=!0)),!n&&i&&i.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(n&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var o;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var f=t.bitStringContents.charCodeAt(0);if(f!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else i&&i.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else i&&(t.tagClass!==e.tagClass&&i.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&i.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return n};var Jc=/[^\\u0000-\\u00ff]/;k.prettyPrint=function(t,e,r){var i="";e=e||0,r=r||2,e>0&&(i+=`
`);for(var n="",a=0;a<e*r;++a)n+=" ";switch(i+=n+"Tag: ",t.tagClass){case k.Class.UNIVERSAL:i+="Universal:";break;case k.Class.APPLICATION:i+="Application:";break;case k.Class.CONTEXT_SPECIFIC:i+="Context-Specific:";break;case k.Class.PRIVATE:i+="Private:";break}if(t.tagClass===k.Class.UNIVERSAL)switch(i+=t.type,t.type){case k.Type.NONE:i+=" (None)";break;case k.Type.BOOLEAN:i+=" (Boolean)";break;case k.Type.INTEGER:i+=" (Integer)";break;case k.Type.BITSTRING:i+=" (Bit string)";break;case k.Type.OCTETSTRING:i+=" (Octet string)";break;case k.Type.NULL:i+=" (Null)";break;case k.Type.OID:i+=" (Object Identifier)";break;case k.Type.ODESC:i+=" (Object Descriptor)";break;case k.Type.EXTERNAL:i+=" (External or Instance of)";break;case k.Type.REAL:i+=" (Real)";break;case k.Type.ENUMERATED:i+=" (Enumerated)";break;case k.Type.EMBEDDED:i+=" (Embedded PDV)";break;case k.Type.UTF8:i+=" (UTF8)";break;case k.Type.ROID:i+=" (Relative Object Identifier)";break;case k.Type.SEQUENCE:i+=" (Sequence)";break;case k.Type.SET:i+=" (Set)";break;case k.Type.PRINTABLESTRING:i+=" (Printable String)";break;case k.Type.IA5String:i+=" (IA5String (ASCII))";break;case k.Type.UTCTIME:i+=" (UTC time)";break;case k.Type.GENERALIZEDTIME:i+=" (Generalized time)";break;case k.Type.BMPSTRING:i+=" (BMP String)";break}else i+=t.type;if(i+=`
`,i+=n+"Constructed: "+t.constructed+`
`,t.composed){for(var s=0,o="",a=0;a<t.value.length;++a)t.value[a]!==void 0&&(s+=1,o+=k.prettyPrint(t.value[a],e+1,r),a+1<t.value.length&&(o+=","));i+=n+"Sub values: "+s+o}else{if(i+=n+"Value: ",t.type===k.Type.OID){var f=k.derToOid(t.value);i+=f,_e.pki&&_e.pki.oids&&f in _e.pki.oids&&(i+=" ("+_e.pki.oids[f]+") ")}if(t.type===k.Type.INTEGER)try{i+=k.derToInteger(t.value)}catch(c){i+="0x"+_e.util.bytesToHex(t.value)}else if(t.type===k.Type.BITSTRING){if(t.value.length>1?i+="0x"+_e.util.bytesToHex(t.value.slice(1)):i+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?i+=" (1 unused bit shown)":u>1&&(i+=" ("+u+" unused bits shown)")}}else t.type===k.Type.OCTETSTRING?(Jc.test(t.value)||(i+="("+t.value+") "),i+="0x"+_e.util.bytesToHex(t.value)):t.type===k.Type.UTF8?i+=_e.util.decodeUtf8(t.value):t.type===k.Type.PRINTABLESTRING||t.type===k.Type.IA5String?i+=t.value:Jc.test(t.value)?i+="0x"+_e.util.bytesToHex(t.value):t.value.length===0?i+="[null]":i+=t.value}return i}});var Io=B((t3,th)=>{var Me=xe();Re();th.exports=Me.cipher=Me.cipher||{};Me.cipher.algorithms=Me.cipher.algorithms||{};Me.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Me.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Me.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};Me.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Me.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Me.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};Me.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Me.cipher.algorithms[t]=e};Me.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Me.cipher.algorithms?Me.cipher.algorithms[t]:null};var Co=Me.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};Co.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=Me.util.createBuffer(),this.output=t.output||Me.util.createBuffer(),this.mode.start(e)};Co.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};Co.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var Po=B((r3,rh)=>{var Oe=xe();Re();Oe.cipher=Oe.cipher||{};var Y=rh.exports=Oe.cipher.modes=Oe.cipher.modes||{};Y.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Y.ecb.prototype.start=function(t){};Y.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i])};Y.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i])};Y.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Y.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),i=t.at(r-1);return i>this.blockSize<<2?!1:(t.truncate(i),!0)};Y.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Y.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=_a(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};Y.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=this._prev[i]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]);this._prev=this._outBlock};Y.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._prev[i]^this._outBlock[i]);this._prev=this._inBlock.slice(0)};Y.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Y.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),i=t.at(r-1);return i>this.blockSize<<2?!1:(t.truncate(i),!0)};Y.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Oe.util.createBuffer(),this._partialBytes=0};Y.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=_a(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Y.cfb.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32()^this._outBlock[n],e.putInt32(this._inBlock[n]);return}var a=(this.blockSize-i)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialBlock[n]=t.getInt32()^this._outBlock[n],this._partialOutput.putInt32(this._partialBlock[n]);if(a>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};Y.cfb.prototype.decrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32(),e.putInt32(this._inBlock[n]^this._outBlock[n]);return}var a=(this.blockSize-i)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialBlock[n]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[n]^this._outBlock[n]);if(a>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};Y.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Oe.util.createBuffer(),this._partialBytes=0};Y.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=_a(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Y.ofb.prototype.encrypt=function(t,e,r){var i=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)e.putInt32(t.getInt32()^this._outBlock[n]),this._inBlock[n]=this._outBlock[n];return}var a=(this.blockSize-i)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(a>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._outBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};Y.ofb.prototype.decrypt=Y.ofb.prototype.encrypt;Y.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Oe.util.createBuffer(),this._partialBytes=0};Y.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=_a(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Y.ctr.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize)for(var n=0;n<this._ints;++n)e.putInt32(t.getInt32()^this._outBlock[n]);else{var a=(this.blockSize-i)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(a>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}Aa(this._inBlock)};Y.ctr.prototype.decrypt=Y.ctr.prototype.encrypt;Y.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Oe.util.createBuffer(),this._partialBytes=0,this._R=3774873600};Y.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Oe.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=Oe.util.createBuffer(t.additionalData):r=Oe.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Oe.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var i=e.length();if(i===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(To(i*8)))}this._inBlock=this._j0.slice(0),Aa(this._inBlock),this._partialBytes=0,r=Oe.util.createBuffer(r),this._aDataLength=To(r.length()*8);var n=r.length()%this.blockSize;for(n&&r.fillWithByte(0,this.blockSize-n),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};Y.gcm.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]^=t.getInt32());this._cipherLength+=this.blockSize}else{var a=(this.blockSize-i)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(a<=0||r){if(r){var s=i%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var n=0;n<this._ints;++n)this._outBlock[n]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),Aa(this._inBlock)};Y.gcm.prototype.decrypt=function(t,e,r){var i=t.length();if(i<this.blockSize&&!(r&&i>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),Aa(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]^this._hashBlock[n]);i<this.blockSize?this._cipherLength+=i%this.blockSize:this._cipherLength+=this.blockSize};Y.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Oe.util.createBuffer();var i=this._aDataLength.concat(To(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,i);var n=[];this.cipher.encrypt(this._j0,n);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^n[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};Y.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],i=e.slice(0),n=0;n<128;++n){var a=t[n/32|0]&1<<31-n%32;a&&(r[0]^=i[0],r[1]^=i[1],r[2]^=i[2],r[3]^=i[3]),this.pow(i,i)}return r};Y.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,i=3;i>0;--i)e[i]=t[i]>>>1|(t[i-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};Y.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var i=r/8|0,n=t[i]>>>(7-r%8)*4&15,a=this._m[r][n];e[0]^=a[0],e[1]^=a[1],e[2]^=a[2],e[3]^=a[3]}return e};Y.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};Y.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,i=4*r,n=16*r,a=new Array(n),s=0;s<n;++s){var o=[0,0,0,0],f=s/i|0,u=(i-1-s%i)*e;o[f]=1<<e-1<<u,a[s]=this.generateSubHashTable(this.multiply(o,t),e)}return a};Y.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,i=r>>>1,n=new Array(r);n[i]=t.slice(0);for(var a=i>>>1;a>0;)this.pow(n[2*a],n[a]=[]),a>>=1;for(a=2;a<i;){for(var s=1;s<a;++s){var o=n[a],f=n[s];n[a+s]=[o[0]^f[0],o[1]^f[1],o[2]^f[2],o[3]^f[3]]}a*=2}for(n[0]=[0,0,0,0],a=i+1;a<r;++a){var u=n[a^i];n[a]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return n};function _a(t,e){if(typeof t=="string"&&(t=Oe.util.createBuffer(t)),Oe.util.isArray(t)&&t.length>4){var r=t;t=Oe.util.createBuffer();for(var i=0;i<r.length;++i)t.putByte(r[i])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Oe.util.isArray(t)){for(var n=[],a=e/4,i=0;i<a;++i)n.push(t.getInt32());t=n}return t}function Aa(t){t[t.length-1]=t[t.length-1]+1&4294967295}function To(t){return[t/4294967296|0,t&4294967295]}});var ko=B((i3,sh)=>{var Ee=xe();Io();Po();Re();sh.exports=Ee.aes=Ee.aes||{};Ee.aes.startEncrypting=function(t,e,r,i){var n=Ca({key:t,output:r,decrypt:!1,mode:i});return n.start(e),n};Ee.aes.createEncryptionCipher=function(t,e){return Ca({key:t,output:null,decrypt:!1,mode:e})};Ee.aes.startDecrypting=function(t,e,r,i){var n=Ca({key:t,output:r,decrypt:!0,mode:i});return n.start(e),n};Ee.aes.createDecryptionCipher=function(t,e){return Ca({key:t,output:null,decrypt:!0,mode:e})};Ee.aes.Algorithm=function(t,e){Ko||nh();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(i,n){return Lo(r._w,i,n,!1)},decrypt:function(i,n){return Lo(r._w,i,n,!0)}}}),r._init=!1};Ee.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=Ee.util.createBuffer(e);else if(Ee.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=Ee.util.createBuffer();for(var i=0;i<r.length;++i)e.putByte(r[i])}if(!Ee.util.isArray(e)){r=e,e=[];var n=r.length();if(n===16||n===24||n===32){n=n>>>2;for(var i=0;i<n;++i)e.push(r.getInt32())}}if(!Ee.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var a=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(a)!==-1;this._w=ah(e,t.decrypt&&!s),this._init=!0}};Ee.aes._expandKey=function(t,e){return Ko||nh(),ah(t,e)};Ee.aes._updateBlock=Lo;Bi("AES-ECB",Ee.cipher.modes.ecb);Bi("AES-CBC",Ee.cipher.modes.cbc);Bi("AES-CFB",Ee.cipher.modes.cfb);Bi("AES-OFB",Ee.cipher.modes.ofb);Bi("AES-CTR",Ee.cipher.modes.ctr);Bi("AES-GCM",Ee.cipher.modes.gcm);function Bi(t,e){var r=function(){return new Ee.aes.Algorithm(t,e)};Ee.cipher.registerAlgorithm(t,r)}var Ko=!1,_i=4,rt,Ro,ih,Qr,Ct;function nh(){Ko=!0,ih=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;rt=new Array(256),Ro=new Array(256),Qr=new Array(4),Ct=new Array(4);for(var e=0;e<4;++e)Qr[e]=new Array(256),Ct[e]=new Array(256);for(var r=0,i=0,n,a,s,o,f,u,c,e=0;e<256;++e){o=i^i<<1^i<<2^i<<3^i<<4,o=o>>8^o&255^99,rt[r]=o,Ro[o]=r,f=t[o],n=t[r],a=t[n],s=t[a],u=f<<24^o<<16^o<<8^(o^f),c=(n^a^s)<<24^(r^s)<<16^(r^a^s)<<8^(r^n^s);for(var h=0;h<4;++h)Qr[h][r]=u,Ct[h][o]=c,u=u<<24|u>>>8,c=c<<24|c>>>8;r===0?r=i=1:(r=n^t[t[t[n^s]]],i^=t[t[i]])}}function ah(t,e){for(var r=t.slice(0),i,n=1,a=r.length,s=a+6+1,o=_i*s,f=a;f<o;++f)i=r[f-1],f%a==0?(i=rt[i>>>16&255]<<24^rt[i>>>8&255]<<16^rt[i&255]<<8^rt[i>>>24]^ih[n]<<24,n++):a>6&&f%a==4&&(i=rt[i>>>24]<<24^rt[i>>>16&255]<<16^rt[i>>>8&255]<<8^rt[i&255]),r[f]=r[f-a]^i;if(e){var u,c=Ct[0],h=Ct[1],l=Ct[2],d=Ct[3],p=r.slice(0);o=r.length;for(var f=0,y=o-_i;f<o;f+=_i,y-=_i)if(f===0||f===o-_i)p[f]=r[y],p[f+1]=r[y+3],p[f+2]=r[y+2],p[f+3]=r[y+1];else for(var g=0;g<_i;++g)u=r[y+g],p[f+(3&-g)]=c[rt[u>>>24]]^h[rt[u>>>16&255]]^l[rt[u>>>8&255]]^d[rt[u&255]];r=p}return r}function Lo(t,e,r,i){var n=t.length/4-1,a,s,o,f,u;i?(a=Ct[0],s=Ct[1],o=Ct[2],f=Ct[3],u=Ro):(a=Qr[0],s=Qr[1],o=Qr[2],f=Qr[3],u=rt);var c,h,l,d,p,y,g;c=e[0]^t[0],h=e[i?3:1]^t[1],l=e[2]^t[2],d=e[i?1:3]^t[3];for(var v=3,b=1;b<n;++b)p=a[c>>>24]^s[h>>>16&255]^o[l>>>8&255]^f[d&255]^t[++v],y=a[h>>>24]^s[l>>>16&255]^o[d>>>8&255]^f[c&255]^t[++v],g=a[l>>>24]^s[d>>>16&255]^o[c>>>8&255]^f[h&255]^t[++v],d=a[d>>>24]^s[c>>>16&255]^o[h>>>8&255]^f[l&255]^t[++v],c=p,h=y,l=g;r[0]=u[c>>>24]<<24^u[h>>>16&255]<<16^u[l>>>8&255]<<8^u[d&255]^t[++v],r[i?3:1]=u[h>>>24]<<24^u[l>>>16&255]<<16^u[d>>>8&255]<<8^u[c&255]^t[++v],r[2]=u[l>>>24]<<24^u[d>>>16&255]<<16^u[c>>>8&255]<<8^u[h&255]^t[++v],r[i?1:3]=u[d>>>24]<<24^u[c>>>16&255]<<16^u[h>>>8&255]<<8^u[l&255]^t[++v]}function Ca(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,i;t.decrypt?i=Ee.cipher.createDecipher(r,t.key):i=Ee.cipher.createCipher(r,t.key);var n=i.start;return i.start=function(a,s){var o=null;s instanceof Ee.util.ByteBuffer&&(o=s,s={}),s=s||{},s.output=o,s.iv=a,n.call(i,s)},i}});var uh=B((n3,fh)=>{var Ae=xe();Io();Po();Re();fh.exports=Ae.des=Ae.des||{};Ae.des.startEncrypting=function(t,e,r,i){var n=Ia({key:t,output:r,decrypt:!1,mode:i||(e===null?"ECB":"CBC")});return n.start(e),n};Ae.des.createEncryptionCipher=function(t,e){return Ia({key:t,output:null,decrypt:!1,mode:e})};Ae.des.startDecrypting=function(t,e,r,i){var n=Ia({key:t,output:r,decrypt:!0,mode:i||(e===null?"ECB":"CBC")});return n.start(e),n};Ae.des.createDecryptionCipher=function(t,e){return Ia({key:t,output:null,decrypt:!0,mode:e})};Ae.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(i,n){return oh(r._keys,i,n,!1)},decrypt:function(i,n){return oh(r._keys,i,n,!0)}}}),r._init=!1};Ae.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Ae.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=K2(e),this._init=!0}};Mt("DES-ECB",Ae.cipher.modes.ecb);Mt("DES-CBC",Ae.cipher.modes.cbc);Mt("DES-CFB",Ae.cipher.modes.cfb);Mt("DES-OFB",Ae.cipher.modes.ofb);Mt("DES-CTR",Ae.cipher.modes.ctr);Mt("3DES-ECB",Ae.cipher.modes.ecb);Mt("3DES-CBC",Ae.cipher.modes.cbc);Mt("3DES-CFB",Ae.cipher.modes.cfb);Mt("3DES-OFB",Ae.cipher.modes.ofb);Mt("3DES-CTR",Ae.cipher.modes.ctr);function Mt(t,e){var r=function(){return new Ae.des.Algorithm(t,e)};Ae.cipher.registerAlgorithm(t,r)}var S2=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],B2=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],_2=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],A2=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],C2=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],I2=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],T2=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],P2=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function K2(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],n=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],f=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],c=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],l=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],d=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],p=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,g=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,w,T=0;T<y;T++){var C=t.getInt32(),A=t.getInt32();w=(C>>>4^A)&252645135,A^=w,C^=w<<4,w=(A>>>-16^C)&65535,C^=w,A^=w<<-16,w=(C>>>2^A)&858993459,A^=w,C^=w<<2,w=(A>>>-16^C)&65535,C^=w,A^=w<<-16,w=(C>>>1^A)&1431655765,A^=w,C^=w<<1,w=(A>>>8^C)&16711935,C^=w,A^=w<<8,w=(C>>>1^A)&1431655765,A^=w,C^=w<<1,w=C<<8|A>>>20&240,C=A<<24|A<<8&16711680|A>>>8&65280|A>>>24&240,A=w;for(var R=0;R<v.length;++R){v[R]?(C=C<<2|C>>>26,A=A<<2|A>>>26):(C=C<<1|C>>>27,A=A<<1|A>>>27),C&=-15,A&=-15;var L=e[C>>>28]|r[C>>>24&15]|i[C>>>20&15]|n[C>>>16&15]|a[C>>>12&15]|s[C>>>8&15]|o[C>>>4&15],N=f[A>>>28]|u[A>>>24&15]|c[A>>>20&15]|h[A>>>16&15]|l[A>>>12&15]|d[A>>>8&15]|p[A>>>4&15];w=(N>>>16^L)&65535,g[b++]=L^w,g[b++]=N^w<<16}}return g}function oh(t,e,r,i){var n=t.length===32?3:9,a;n===3?a=i?[30,-2,-2]:[0,32,2]:a=i?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,o=e[0],f=e[1];s=(o>>>4^f)&252645135,f^=s,o^=s<<4,s=(o>>>16^f)&65535,f^=s,o^=s<<16,s=(f>>>2^o)&858993459,o^=s,f^=s<<2,s=(f>>>8^o)&16711935,o^=s,f^=s<<8,s=(o>>>1^f)&1431655765,f^=s,o^=s<<1,o=o<<1|o>>>31,f=f<<1|f>>>31;for(var u=0;u<n;u+=3){for(var c=a[u+1],h=a[u+2],l=a[u];l!=c;l+=h){var d=f^t[l],p=(f>>>4|f<<28)^t[l+1];s=o,o=f,f=s^(B2[d>>>24&63]|A2[d>>>16&63]|I2[d>>>8&63]|P2[d&63]|S2[p>>>24&63]|_2[p>>>16&63]|C2[p>>>8&63]|T2[p&63])}s=o,o=f,f=s}o=o>>>1|o<<31,f=f>>>1|f<<31,s=(o>>>1^f)&1431655765,f^=s,o^=s<<1,s=(f>>>8^o)&16711935,o^=s,f^=s<<8,s=(f>>>2^o)&858993459,o^=s,f^=s<<2,s=(o>>>16^f)&65535,f^=s,o^=s<<16,s=(o>>>4^f)&252645135,f^=s,o^=s<<4,r[0]=o,r[1]=f}function Ia(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,i;t.decrypt?i=Ae.cipher.createDecipher(r,t.key):i=Ae.cipher.createCipher(r,t.key);var n=i.start;return i.start=function(a,s){var o=null;s instanceof Ae.util.ByteBuffer&&(o=s,s={}),s=s||{},s.output=o,s.iv=a,n.call(i,s)},i}});var Jr=B((a3,ch)=>{var Ta=xe();ch.exports=Ta.md=Ta.md||{};Ta.md.algorithms=Ta.md.algorithms||{}});var lh=B((s3,hh)=>{var nr=xe();Jr();Re();var R2=hh.exports=nr.hmac=nr.hmac||{};R2.create=function(){var t=null,e=null,r=null,i=null,n={};return n.start=function(a,s){if(a!==null)if(typeof a=="string")if(a=a.toLowerCase(),a in nr.md.algorithms)e=nr.md.algorithms[a].create();else throw new Error('Unknown hash algorithm "'+a+'"');else e=a;if(s===null)s=t;else{if(typeof s=="string")s=nr.util.createBuffer(s);else if(nr.util.isArray(s)){var o=s;s=nr.util.createBuffer();for(var f=0;f<o.length;++f)s.putByte(o[f])}var u=s.length();u>e.blockLength&&(e.start(),e.update(s.bytes()),s=e.digest()),r=nr.util.createBuffer(),i=nr.util.createBuffer(),u=s.length();for(var f=0;f<u;++f){var o=s.at(f);r.putByte(54^o),i.putByte(92^o)}if(u<e.blockLength)for(var o=e.blockLength-u,f=0;f<o;++f)r.putByte(54),i.putByte(92);t=s,r=r.bytes(),i=i.bytes()}e.start(),e.update(r)},n.update=function(a){e.update(a)},n.getMac=function(){var a=e.digest().bytes();return e.start(),e.update(i),e.update(a),e.digest()},n.digest=n.getMac,n}});var dh=B((o3,ph)=>{var it=xe();lh();Jr();Re();var L2=it.pkcs5=it.pkcs5||{},ar;it.util.isNodejs&&!it.options.usePureJavaScript&&(ar=Gr());ph.exports=it.pbkdf2=L2.pbkdf2=function(t,e,r,i,n,a){if(typeof n=="function"&&(a=n,n=null),it.util.isNodejs&&!it.options.usePureJavaScript&&ar.pbkdf2&&(n===null||typeof n!="object")&&(ar.pbkdf2Sync.length>4||!n||n==="sha1"))return typeof n!="string"&&(n="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),a?ar.pbkdf2Sync.length===4?ar.pbkdf2(t,e,r,i,function(w,T){if(w)return a(w);a(null,T.toString("binary"))}):ar.pbkdf2(t,e,r,i,n,function(w,T){if(w)return a(w);a(null,T.toString("binary"))}):ar.pbkdf2Sync.length===4?ar.pbkdf2Sync(t,e,r,i).toString("binary"):ar.pbkdf2Sync(t,e,r,i,n).toString("binary");if((typeof n=="undefined"||n===null)&&(n="sha1"),typeof n=="string"){if(!(n in it.md.algorithms))throw new Error("Unknown hash algorithm: "+n);n=it.md[n].create()}var s=n.digestLength;if(i>4294967295*s){var o=new Error("Derived key is too long.");if(a)return a(o);throw o}var f=Math.ceil(i/s),u=i-(f-1)*s,c=it.hmac.create();c.start(n,t);var h="",l,d,p;if(!a){for(var y=1;y<=f;++y){c.start(null,null),c.update(e),c.update(it.util.int32ToBytes(y)),l=p=c.digest().getBytes();for(var g=2;g<=r;++g)c.start(null,null),c.update(p),d=c.digest().getBytes(),l=it.util.xorBytes(l,d,s),p=d;h+=y<f?l:l.substr(0,u)}return h}var y=1,g;function v(){if(y>f)return a(null,h);c.start(null,null),c.update(e),c.update(it.util.int32ToBytes(y)),l=p=c.digest().getBytes(),g=2,b()}function b(){if(g<=r)return c.start(null,null),c.update(p),d=c.digest().getBytes(),l=it.util.xorBytes(l,d,s),p=d,++g,it.util.setImmediate(b);h+=y<f?l:l.substr(0,u),++y,v()}v()}});var xh=B((f3,gh)=>{var Pa=xe();Re();var yh=gh.exports=Pa.pem=Pa.pem||{};yh.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,i;if(t.procType&&(i={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=Ka(i)),t.contentDomain&&(i={name:"Content-Domain",values:[t.contentDomain]},r+=Ka(i)),t.dekInfo&&(i={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&i.values.push(t.dekInfo.parameters),r+=Ka(i)),t.headers)for(var n=0;n<t.headers.length;++n)r+=Ka(t.headers[n]);return t.procType&&(r+=`\r
`),r+=Pa.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};yh.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,i=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,n=/\r?\n/,a;a=r.exec(t),!!a;){var s={type:a[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:Pa.util.decode64(a[3])};if(e.push(s),!!a[2]){for(var o=a[2].split(n),f=0;a&&f<o.length;){for(var u=o[f].replace(/\s+$/,""),c=f+1;c<o.length;++c){var h=o[c];if(!/\s/.test(h[0]))break;u+=h,f=c}if(a=u.match(i),a){for(var l={name:a[1],values:[]},d=a[2].split(","),p=0;p<d.length;++p)l.values.push(k2(d[p]));if(s.procType)if(!s.contentDomain&&l.name==="Content-Domain")s.contentDomain=d[0]||"";else if(!s.dekInfo&&l.name==="DEK-Info"){if(l.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');s.dekInfo={algorithm:d[0],parameters:d[1]||null}}else s.headers.push(l);else{if(l.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(l.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');s.procType={version:d[0],type:d[1]}}}++f}if(s.procType==="ENCRYPTED"&&!s.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function Ka(t){for(var e=t.name+": ",r=[],i=function(f,u){return" "+u},n=0;n<t.values.length;++n)r.push(t.values[n].replace(/^(\S+\r\n)/,i));e+=r.join(",")+`\r
`;for(var a=0,s=-1,n=0;n<e.length;++n,++a)if(a>65&&s!==-1){var o=e[s];o===","?(++s,e=e.substr(0,s)+`\r
 `+e.substr(s)):e=e.substr(0,s)+`\r
`+o+e.substr(s+1),a=n-s-1,s=-1,++n}else(e[n]===" "||e[n]==="	"||e[n]===",")&&(s=n);return e}function k2(t){return t.replace(/^\s+/,"")}});var Sh=B((u3,Eh)=>{var Ot=xe();Jr();Re();var vh=Eh.exports=Ot.sha256=Ot.sha256||{};Ot.md.sha256=Ot.md.algorithms.sha256=vh;vh.create=function(){mh||U2();var t=null,e=Ot.util.createBuffer(),r=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return i.start=function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,a=0;a<n;++a)i.fullMessageLength.push(0);return e=Ot.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i},i.start(),i.update=function(n,a){a==="utf8"&&(n=Ot.util.encodeUtf8(n));var s=n.length;i.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=i.fullMessageLength.length-1;o>=0;--o)i.fullMessageLength[o]+=s[1],s[1]=s[0]+(i.fullMessageLength[o]/4294967296>>>0),i.fullMessageLength[o]=i.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(n),wh(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),i},i.digest=function(){var n=Ot.util.createBuffer();n.putBytes(e.bytes());var a=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,s=a&i.blockLength-1;n.putBytes(Uo.substr(0,i.blockLength-s));for(var o,f,u=i.fullMessageLength[0]*8,c=0;c<i.fullMessageLength.length-1;++c)o=i.fullMessageLength[c+1]*8,f=o/4294967296>>>0,u+=f,n.putInt32(u>>>0),u=o>>>0;n.putInt32(u);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};wh(h,r,n);var l=Ot.util.createBuffer();return l.putInt32(h.h0),l.putInt32(h.h1),l.putInt32(h.h2),l.putInt32(h.h3),l.putInt32(h.h4),l.putInt32(h.h5),l.putInt32(h.h6),l.putInt32(h.h7),l},i};var Uo=null,mh=!1,bh=null;function U2(){Uo=String.fromCharCode(128),Uo+=Ot.util.fillString(String.fromCharCode(0),64),bh=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],mh=!0}function wh(t,e,r){for(var i,n,a,s,o,f,u,c,h,l,d,p,y,g,v,b=r.length();b>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)i=e[u-2],i=(i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,n=e[u-15],n=(n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,e[u]=i+e[u-7]+n+e[u-16]|0;for(c=t.h0,h=t.h1,l=t.h2,d=t.h3,p=t.h4,y=t.h5,g=t.h6,v=t.h7,u=0;u<64;++u)s=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7),o=g^p&(y^g),a=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),f=c&h|l&(c^h),i=v+s+o+bh[u]+e[u],n=a+f,v=g,g=y,y=p,p=d+i>>>0,d=l,l=h,h=c,c=i+n>>>0;t.h0=t.h0+c|0,t.h1=t.h1+h|0,t.h2=t.h2+l|0,t.h3=t.h3+d|0,t.h4=t.h4+p|0,t.h5=t.h5+y|0,t.h6=t.h6+g|0,t.h7=t.h7+v|0,b-=64}}});var _h=B((c3,Bh)=>{var qt=xe();Re();var Ra=null;qt.util.isNodejs&&!qt.options.usePureJavaScript&&!process.versions["node-webkit"]&&(Ra=Gr());var D2=Bh.exports=qt.prng=qt.prng||{};D2.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,i=new Array(32),n=0;n<32;++n)i[n]=r.create();e.pools=i,e.pool=0,e.generate=function(u,c){if(!c)return e.generateSync(u);var h=e.plugin.cipher,l=e.plugin.increment,d=e.plugin.formatKey,p=e.plugin.formatSeed,y=qt.util.createBuffer();e.key=null,g();function g(v){if(v)return c(v);if(y.length()>=u)return c(null,y.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return qt.util.nextTick(function(){a(g)});var b=h(e.key,e.seed);e.generated+=b.length,y.putBytes(b),e.key=d(h(e.key,l(e.seed))),e.seed=p(h(e.key,e.seed)),qt.util.setImmediate(g)}},e.generateSync=function(u){var c=e.plugin.cipher,h=e.plugin.increment,l=e.plugin.formatKey,d=e.plugin.formatSeed;e.key=null;for(var p=qt.util.createBuffer();p.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&s();var y=c(e.key,e.seed);e.generated+=y.length,p.putBytes(y),e.key=l(c(e.key,h(e.seed))),e.seed=d(c(e.key,e.seed))}return p.getBytes(u)};function a(u){if(e.pools[0].messageLength>=32)return o(),u();var c=32-e.pools[0].messageLength<<5;e.seedFile(c,function(h,l){if(h)return u(h);e.collect(l),o(),u()})}function s(){if(e.pools[0].messageLength>=32)return o();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),o()}function o(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var c=1,h=0;h<32;++h)e.reseeds%c==0&&(u.update(e.pools[h].digest().getBytes()),e.pools[h].start()),c=c<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var l=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(l),e.generated=0}function f(u){var c=null,h=qt.util.globalScope,l=h.crypto||h.msCrypto;l&&l.getRandomValues&&(c=function(C){return l.getRandomValues(C)});var d=qt.util.createBuffer();if(c)for(;d.length()<u;){var p=Math.max(1,Math.min(u-d.length(),65536)/4),y=new Uint32Array(Math.floor(p));try{c(y);for(var g=0;g<y.length;++g)d.putInt32(y[g])}catch(C){if(!(typeof QuotaExceededError!="undefined"&&C instanceof QuotaExceededError))throw C}}if(d.length()<u)for(var v,b,w,T=Math.floor(Math.random()*65536);d.length()<u;){b=16807*(T&65535),v=16807*(T>>16),b+=(v&32767)<<16,b+=v>>15,b=(b&2147483647)+(b>>31),T=b&4294967295;for(var g=0;g<3;++g)w=T>>>(g<<3),w^=Math.floor(Math.random()*256),d.putByte(String.fromCharCode(w&255))}return d.getBytes(u)}return Ra?(e.seedFile=function(u,c){Ra.randomBytes(u,function(h,l){if(h)return c(h);c(null,l.toString())})},e.seedFileSync=function(u){return Ra.randomBytes(u).toString()}):(e.seedFile=function(u,c){try{c(null,f(u))}catch(h){c(h)}},e.seedFileSync=f),e.collect=function(u){for(var c=u.length,h=0;h<c;++h)e.pools[e.pool].update(u.substr(h,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,c){for(var h="",l=0;l<c;l+=8)h+=String.fromCharCode(u>>l&255);e.collect(h)},e.registerWorker=function(u){if(u===self)e.seedFile=function(h,l){function d(p){var y=p.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",d),l(y.forge.prng.err,y.forge.prng.bytes))}self.addEventListener("message",d),self.postMessage({forge:{prng:{needed:h}}})};else{var c=function(h){var l=h.data;l.forge&&l.forge.prng&&e.seedFile(l.forge.prng.needed,function(d,p){u.postMessage({forge:{prng:{err:d,bytes:p}}})})};u.addEventListener("message",c)}},e}});var dn=B((h3,Do)=>{var qe=xe();ko();Sh();_h();Re();(function(){if(qe.random&&qe.random.getBytes){Do.exports=qe.random;return}(function(t){var e={},r=new Array(4),i=qe.util.createBuffer();e.formatKey=function(h){var l=qe.util.createBuffer(h);return h=new Array(4),h[0]=l.getInt32(),h[1]=l.getInt32(),h[2]=l.getInt32(),h[3]=l.getInt32(),qe.aes._expandKey(h,!1)},e.formatSeed=function(h){var l=qe.util.createBuffer(h);return h=new Array(4),h[0]=l.getInt32(),h[1]=l.getInt32(),h[2]=l.getInt32(),h[3]=l.getInt32(),h},e.cipher=function(h,l){return qe.aes._updateBlock(h,l,r,!1),i.putInt32(r[0]),i.putInt32(r[1]),i.putInt32(r[2]),i.putInt32(r[3]),i.getBytes()},e.increment=function(h){return++h[3],h},e.md=qe.md.sha256;function n(){var h=qe.prng.create(e);return h.getBytes=function(l,d){return h.generate(l,d)},h.getBytesSync=function(l){return h.generate(l)},h}var a=n(),s=null,o=qe.util.globalScope,f=o.crypto||o.msCrypto;if(f&&f.getRandomValues&&(s=function(h){return f.getRandomValues(h)}),qe.options.usePureJavaScript||!qe.util.isNodejs&&!s){if(typeof window=="undefined"||window.document===void 0,a.collectInt(+new Date,32),typeof navigator!="undefined"){var u="";for(var c in navigator)try{typeof navigator[c]=="string"&&(u+=navigator[c])}catch(h){}a.collect(u),u=null}t&&(t().mousemove(function(h){a.collectInt(h.clientX,16),a.collectInt(h.clientY,16)}),t().keypress(function(h){a.collectInt(h.charCode,8)}))}if(!qe.random)qe.random=a;else for(var c in a)qe.random[c]=a[c];qe.random.createInstance=n,Do.exports=qe.random})(typeof jQuery!="undefined"?jQuery:null)})()});var Th=B((l3,Ih)=>{var ft=xe();Re();var No=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],Ah=[1,2,3,5],N2=function(t,e){return t<<e&65535|(t&65535)>>16-e},F2=function(t,e){return(t&65535)>>e|t<<16-e&65535};Ih.exports=ft.rc2=ft.rc2||{};ft.rc2.expandKey=function(t,e){typeof t=="string"&&(t=ft.util.createBuffer(t)),e=e||128;var r=t,i=t.length(),n=e,a=Math.ceil(n/8),s=255>>(n&7),o;for(o=i;o<128;o++)r.putByte(No[r.at(o-1)+r.at(o-i)&255]);for(r.setAt(128-a,No[r.at(128-a)&s]),o=127-a;o>=0;o--)r.setAt(o,No[r.at(o+1)^r.at(o+a)]);return r};var Ch=function(t,e,r){var i=!1,n=null,a=null,s=null,o,f,u,c,h=[];for(t=ft.rc2.expandKey(t,e),u=0;u<64;u++)h.push(t.getInt16Le());r?(o=function(p){for(u=0;u<4;u++)p[u]+=h[c]+(p[(u+3)%4]&p[(u+2)%4])+(~p[(u+3)%4]&p[(u+1)%4]),p[u]=N2(p[u],Ah[u]),c++},f=function(p){for(u=0;u<4;u++)p[u]+=h[p[(u+3)%4]&63]}):(o=function(p){for(u=3;u>=0;u--)p[u]=F2(p[u],Ah[u]),p[u]-=h[c]+(p[(u+3)%4]&p[(u+2)%4])+(~p[(u+3)%4]&p[(u+1)%4]),c--},f=function(p){for(u=3;u>=0;u--)p[u]-=h[p[(u+3)%4]&63]});var l=function(p){var y=[];for(u=0;u<4;u++){var g=n.getInt16Le();s!==null&&(r?g^=s.getInt16Le():s.putInt16Le(g)),y.push(g&65535)}c=r?0:63;for(var v=0;v<p.length;v++)for(var b=0;b<p[v][0];b++)p[v][1](y);for(u=0;u<4;u++)s!==null&&(r?s.putInt16Le(y[u]):y[u]^=s.getInt16Le()),a.putInt16Le(y[u])},d=null;return d={start:function(p,y){p&&typeof p=="string"&&(p=ft.util.createBuffer(p)),i=!1,n=ft.util.createBuffer(),a=y||new ft.util.createBuffer,s=p,d.output=a},update:function(p){for(i||n.putBuffer(p);n.length()>=8;)l([[5,o],[1,f],[6,o],[1,f],[5,o]])},finish:function(p){var y=!0;if(r)if(p)y=p(8,n,!r);else{var g=n.length()===8?8:8-n.length();n.fillWithByte(g,g)}if(y&&(i=!0,d.update()),!r&&(y=n.length()===0,y))if(p)y=p(8,a,!r);else{var v=a.length(),b=a.at(v-1);b>v?y=!1:a.truncate(b)}return y}},d};ft.rc2.startEncrypting=function(t,e,r){var i=ft.rc2.createEncryptionCipher(t,128);return i.start(e,r),i};ft.rc2.createEncryptionCipher=function(t,e){return Ch(t,e,!0)};ft.rc2.startDecrypting=function(t,e,r){var i=ft.rc2.createDecryptionCipher(t,128);return i.start(e,r),i};ft.rc2.createDecryptionCipher=function(t,e){return Ch(t,e,!1)}});var Ua=B((p3,Nh)=>{var Fo=xe();Nh.exports=Fo.jsbn=Fo.jsbn||{};var sr,M2=244837814094590,Ph=(M2&16777215)==15715070;function I(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}Fo.jsbn.BigInteger=I;function se(){return new I(null)}function O2(t,e,r,i,n,a){for(;--a>=0;){var s=e*this.data[t++]+r.data[i]+n;n=Math.floor(s/67108864),r.data[i++]=s&67108863}return n}function q2(t,e,r,i,n,a){for(var s=e&32767,o=e>>15;--a>=0;){var f=this.data[t]&32767,u=this.data[t++]>>15,c=o*f+u*s;f=s*f+((c&32767)<<15)+r.data[i]+(n&1073741823),n=(f>>>30)+(c>>>15)+o*u+(n>>>30),r.data[i++]=f&1073741823}return n}function Kh(t,e,r,i,n,a){for(var s=e&16383,o=e>>14;--a>=0;){var f=this.data[t]&16383,u=this.data[t++]>>14,c=o*f+u*s;f=s*f+((c&16383)<<14)+r.data[i]+n,n=(f>>28)+(c>>14)+o*u,r.data[i++]=f&268435455}return n}typeof navigator=="undefined"?(I.prototype.am=Kh,sr=28):Ph&&navigator.appName=="Microsoft Internet Explorer"?(I.prototype.am=q2,sr=30):Ph&&navigator.appName!="Netscape"?(I.prototype.am=O2,sr=26):(I.prototype.am=Kh,sr=28);I.prototype.DB=sr;I.prototype.DM=(1<<sr)-1;I.prototype.DV=1<<sr;var Mo=52;I.prototype.FV=Math.pow(2,Mo);I.prototype.F1=Mo-sr;I.prototype.F2=2*sr-Mo;var H2="0123456789abcdefghijklmnopqrstuvwxyz",La=new Array,Ai,gt;Ai="0".charCodeAt(0);for(gt=0;gt<=9;++gt)La[Ai++]=gt;Ai="a".charCodeAt(0);for(gt=10;gt<36;++gt)La[Ai++]=gt;Ai="A".charCodeAt(0);for(gt=10;gt<36;++gt)La[Ai++]=gt;function Rh(t){return H2.charAt(t)}function Lh(t,e){var r=La[t.charCodeAt(e)];return r??-1}function V2(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function z2(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function Ir(t){var e=se();return e.fromInt(t),e}function G2(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var i=t.length,n=!1,a=0;--i>=0;){var s=r==8?t[i]&255:Lh(t,i);if(s<0){t.charAt(i)=="-"&&(n=!0);continue}n=!1,a==0?this.data[this.t++]=s:a+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this.data[this.t++]=s>>this.DB-a):this.data[this.t-1]|=s<<a,a+=r,a>=this.DB&&(a-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),n&&I.ZERO.subTo(this,this)}function W2(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function $2(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,i,n=!1,a="",s=this.t,o=this.DB-s*this.DB%e;if(s-- >0)for(o<this.DB&&(i=this.data[s]>>o)>0&&(n=!0,a=Rh(i));s>=0;)o<e?(i=(this.data[s]&(1<<o)-1)<<e-o,i|=this.data[--s]>>(o+=this.DB-e)):(i=this.data[s]>>(o-=e)&r,o<=0&&(o+=this.DB,--s)),i>0&&(n=!0),n&&(a+=Rh(i));return n?a:"0"}function j2(){var t=se();return I.ZERO.subTo(this,t),t}function X2(){return this.s<0?this.negate():this}function Y2(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function ka(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function Z2(){return this.t<=0?0:this.DB*(this.t-1)+ka(this.data[this.t-1]^this.s&this.DM)}function Q2(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function J2(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function ex(t,e){var r=t%this.DB,i=this.DB-r,n=(1<<i)-1,a=Math.floor(t/this.DB),s=this.s<<r&this.DM,o;for(o=this.t-1;o>=0;--o)e.data[o+a+1]=this.data[o]>>i|s,s=(this.data[o]&n)<<r;for(o=a-1;o>=0;--o)e.data[o]=0;e.data[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()}function tx(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var i=t%this.DB,n=this.DB-i,a=(1<<i)-1;e.data[0]=this.data[r]>>i;for(var s=r+1;s<this.t;++s)e.data[s-r-1]|=(this.data[s]&a)<<n,e.data[s-r]=this.data[s]>>i;i>0&&(e.data[this.t-r-1]|=(this.s&a)<<n),e.t=this.t-r,e.clamp()}function rx(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);r<n;)i+=this.data[r]-t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i-=t.s;r<this.t;)i+=this.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i-=t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i-=t.s}e.s=i<0?-1:0,i<-1?e.data[r++]=this.DV+i:i>0&&(e.data[r++]=i),e.t=r,e.clamp()}function ix(t,e){var r=this.abs(),i=t.abs(),n=r.t;for(e.t=n+i.t;--n>=0;)e.data[n]=0;for(n=0;n<i.t;++n)e.data[n+r.t]=r.am(0,i.data[n],e,n,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&I.ZERO.subTo(e,e)}function nx(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var i=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,i,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function ax(t,e,r){var i=t.abs();if(!(i.t<=0)){var n=this.abs();if(n.t<i.t){e!=null&&e.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=se());var a=se(),s=this.s,o=t.s,f=this.DB-ka(i.data[i.t-1]);f>0?(i.lShiftTo(f,a),n.lShiftTo(f,r)):(i.copyTo(a),n.copyTo(r));var u=a.t,c=a.data[u-1];if(c!=0){var h=c*(1<<this.F1)+(u>1?a.data[u-2]>>this.F2:0),l=this.FV/h,d=(1<<this.F1)/h,p=1<<this.F2,y=r.t,g=y-u,v=e??se();for(a.dlShiftTo(g,v),r.compareTo(v)>=0&&(r.data[r.t++]=1,r.subTo(v,r)),I.ONE.dlShiftTo(u,v),v.subTo(a,a);a.t<u;)a.data[a.t++]=0;for(;--g>=0;){var b=r.data[--y]==c?this.DM:Math.floor(r.data[y]*l+(r.data[y-1]+p)*d);if((r.data[y]+=a.am(0,b,r,g,0,u))<b)for(a.dlShiftTo(g,v),r.subTo(v,r);r.data[y]<--b;)r.subTo(v,r)}e!=null&&(r.drShiftTo(u,e),s!=o&&I.ZERO.subTo(e,e)),r.t=u,r.clamp(),f>0&&r.rShiftTo(f,r),s<0&&I.ZERO.subTo(r,r)}}}function sx(t){var e=se();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(I.ZERO)>0&&t.subTo(e,e),e}function ei(t){this.m=t}function ox(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function fx(t){return t}function ux(t){t.divRemTo(this.m,null,t)}function cx(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function hx(t,e){t.squareTo(e),this.reduce(e)}ei.prototype.convert=ox;ei.prototype.revert=fx;ei.prototype.reduce=ux;ei.prototype.mulTo=cx;ei.prototype.sqrTo=hx;function lx(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function ti(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function px(t){var e=se();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(I.ZERO)>0&&this.m.subTo(e,e),e}function dx(t){var e=se();return t.copyTo(e),this.reduce(e),e}function yx(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,i=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,i,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function gx(t,e){t.squareTo(e),this.reduce(e)}function xx(t,e,r){t.multiplyTo(e,r),this.reduce(r)}ti.prototype.convert=px;ti.prototype.revert=dx;ti.prototype.reduce=yx;ti.prototype.mulTo=xx;ti.prototype.sqrTo=gx;function vx(){return(this.t>0?this.data[0]&1:this.s)==0}function mx(t,e){if(t>4294967295||t<1)return I.ONE;var r=se(),i=se(),n=e.convert(this),a=ka(t)-1;for(n.copyTo(r);--a>=0;)if(e.sqrTo(r,i),(t&1<<a)>0)e.mulTo(i,n,r);else{var s=r;r=i,i=s}return e.revert(r)}function bx(t,e){var r;return t<256||e.isEven()?r=new ei(e):r=new ti(e),this.exp(t,r)}I.prototype.copyTo=V2;I.prototype.fromInt=z2;I.prototype.fromString=G2;I.prototype.clamp=W2;I.prototype.dlShiftTo=Q2;I.prototype.drShiftTo=J2;I.prototype.lShiftTo=ex;I.prototype.rShiftTo=tx;I.prototype.subTo=rx;I.prototype.multiplyTo=ix;I.prototype.squareTo=nx;I.prototype.divRemTo=ax;I.prototype.invDigit=lx;I.prototype.isEven=vx;I.prototype.exp=mx;I.prototype.toString=$2;I.prototype.negate=j2;I.prototype.abs=X2;I.prototype.compareTo=Y2;I.prototype.bitLength=Z2;I.prototype.mod=sx;I.prototype.modPowInt=bx;I.ZERO=Ir(0);I.ONE=Ir(1);function wx(){var t=se();return this.copyTo(t),t}function Ex(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function Sx(){return this.t==0?this.s:this.data[0]<<24>>24}function Bx(){return this.t==0?this.s:this.data[0]<<16>>16}function _x(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function Ax(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function Cx(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),i=Ir(r),n=se(),a=se(),s="";for(this.divRemTo(i,n,a);n.signum()>0;)s=(r+a.intValue()).toString(t).substr(1)+s,n.divRemTo(i,n,a);return a.intValue().toString(t)+s}function Ix(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),i=Math.pow(e,r),n=!1,a=0,s=0,o=0;o<t.length;++o){var f=Lh(t,o);if(f<0){t.charAt(o)=="-"&&this.signum()==0&&(n=!0);continue}s=e*s+f,++a>=r&&(this.dMultiply(i),this.dAddOffset(s,0),a=0,s=0)}a>0&&(this.dMultiply(Math.pow(e,a)),this.dAddOffset(s,0)),n&&I.ZERO.subTo(this,this)}function Tx(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(I.ONE.shiftLeft(t-1),Oo,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(I.ONE.shiftLeft(t-1),this);else{var i=new Array,n=t&7;i.length=(t>>3)+1,e.nextBytes(i),n>0?i[0]&=(1<<n)-1:i[0]=0,this.fromString(i,256)}}function Px(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,i,n=0;if(t-- >0)for(r<this.DB&&(i=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[n++]=i|this.s<<this.DB-r);t>=0;)r<8?(i=(this.data[t]&(1<<r)-1)<<8-r,i|=this.data[--t]>>(r+=this.DB-8)):(i=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(i&128)!=0&&(i|=-256),n==0&&(this.s&128)!=(i&128)&&++n,(n>0||i!=this.s)&&(e[n++]=i);return e}function Kx(t){return this.compareTo(t)==0}function Rx(t){return this.compareTo(t)<0?this:t}function Lx(t){return this.compareTo(t)>0?this:t}function kx(t,e,r){var i,n,a=Math.min(t.t,this.t);for(i=0;i<a;++i)r.data[i]=e(this.data[i],t.data[i]);if(t.t<this.t){for(n=t.s&this.DM,i=a;i<this.t;++i)r.data[i]=e(this.data[i],n);r.t=this.t}else{for(n=this.s&this.DM,i=a;i<t.t;++i)r.data[i]=e(n,t.data[i]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function Ux(t,e){return t&e}function Dx(t){var e=se();return this.bitwiseTo(t,Ux,e),e}function Oo(t,e){return t|e}function Nx(t){var e=se();return this.bitwiseTo(t,Oo,e),e}function kh(t,e){return t^e}function Fx(t){var e=se();return this.bitwiseTo(t,kh,e),e}function Uh(t,e){return t&~e}function Mx(t){var e=se();return this.bitwiseTo(t,Uh,e),e}function Ox(){for(var t=se(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function qx(t){var e=se();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function Hx(t){var e=se();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function Vx(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}function zx(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+Vx(this.data[t]);return this.s<0?this.t*this.DB:-1}function Gx(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function Wx(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=Gx(this.data[r]^e);return t}function $x(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function jx(t,e){var r=I.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function Xx(t){return this.changeBit(t,Oo)}function Yx(t){return this.changeBit(t,Uh)}function Zx(t){return this.changeBit(t,kh)}function Qx(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);r<n;)i+=this.data[r]+t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i+=t.s;r<this.t;)i+=this.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i+=t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=t.s}e.s=i<0?-1:0,i>0?e.data[r++]=i:i<-1&&(e.data[r++]=this.DV+i),e.t=r,e.clamp()}function Jx(t){var e=se();return this.addTo(t,e),e}function ev(t){var e=se();return this.subTo(t,e),e}function tv(t){var e=se();return this.multiplyTo(t,e),e}function rv(t){var e=se();return this.divRemTo(t,e,null),e}function iv(t){var e=se();return this.divRemTo(t,null,e),e}function nv(t){var e=se(),r=se();return this.divRemTo(t,e,r),new Array(e,r)}function av(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function sv(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function yn(){}function Dh(t){return t}function ov(t,e,r){t.multiplyTo(e,r)}function fv(t,e){t.squareTo(e)}yn.prototype.convert=Dh;yn.prototype.revert=Dh;yn.prototype.mulTo=ov;yn.prototype.sqrTo=fv;function uv(t){return this.exp(t,new yn)}function cv(t,e,r){var i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;var n;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,t.data[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t.data[i],r,i,0,e-i);r.clamp()}function hv(t,e,r){--e;var i=r.t=this.t+t.t-e;for(r.s=0;--i>=0;)r.data[i]=0;for(i=Math.max(e-this.t,0);i<t.t;++i)r.data[this.t+i-e]=this.am(e-i,t.data[i],r,0,0,this.t+i-e);r.clamp(),r.drShiftTo(1,r)}function Ci(t){this.r2=se(),this.q3=se(),I.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function lv(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=se();return t.copyTo(e),this.reduce(e),e}function pv(t){return t}function dv(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function yv(t,e){t.squareTo(e),this.reduce(e)}function gv(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Ci.prototype.convert=lv;Ci.prototype.revert=pv;Ci.prototype.reduce=dv;Ci.prototype.mulTo=gv;Ci.prototype.sqrTo=yv;function xv(t,e){var r=t.bitLength(),i,n=Ir(1),a;if(r<=0)return n;r<18?i=1:r<48?i=3:r<144?i=4:r<768?i=5:i=6,r<8?a=new ei(e):e.isEven()?a=new Ci(e):a=new ti(e);var s=new Array,o=3,f=i-1,u=(1<<i)-1;if(s[1]=a.convert(this),i>1){var c=se();for(a.sqrTo(s[1],c);o<=u;)s[o]=se(),a.mulTo(c,s[o-2],s[o]),o+=2}var h=t.t-1,l,d=!0,p=se(),y;for(r=ka(t.data[h])-1;h>=0;){for(r>=f?l=t.data[h]>>r-f&u:(l=(t.data[h]&(1<<r+1)-1)<<f-r,h>0&&(l|=t.data[h-1]>>this.DB+r-f)),o=i;(l&1)==0;)l>>=1,--o;if((r-=o)<0&&(r+=this.DB,--h),d)s[l].copyTo(n),d=!1;else{for(;o>1;)a.sqrTo(n,p),a.sqrTo(p,n),o-=2;o>0?a.sqrTo(n,p):(y=n,n=p,p=y),a.mulTo(p,s[l],n)}for(;h>=0&&(t.data[h]&1<<r)==0;)a.sqrTo(n,p),y=n,n=p,p=y,--r<0&&(r=this.DB-1,--h)}return a.revert(n)}function vv(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var i=e;e=r,r=i}var n=e.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return e;for(n<a&&(a=n),a>0&&(e.rShiftTo(a,e),r.rShiftTo(a,r));e.signum()>0;)(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),(n=r.getLowestSetBit())>0&&r.rShiftTo(n,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r}function mv(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var i=this.t-1;i>=0;--i)r=(e*r+this.data[i])%t;return r}function bv(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return I.ZERO;for(var r=t.clone(),i=this.clone(),n=Ir(1),a=Ir(0),s=Ir(0),o=Ir(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!n.isEven()||!a.isEven())&&(n.addTo(this,n),a.subTo(t,a)),n.rShiftTo(1,n)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);for(;i.isEven();)i.rShiftTo(1,i),e?((!s.isEven()||!o.isEven())&&(s.addTo(this,s),o.subTo(t,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);r.compareTo(i)>=0?(r.subTo(i,r),e&&n.subTo(s,n),a.subTo(o,a)):(i.subTo(r,i),e&&s.subTo(n,s),o.subTo(a,o))}if(i.compareTo(I.ONE)!=0)return I.ZERO;if(o.compareTo(t)>=0)return o.subtract(t);if(o.signum()<0)o.addTo(t,o);else return o;return o.signum()<0?o.add(t):o}var It=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],wv=(1<<26)/It[It.length-1];function Ev(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=It[It.length-1]){for(e=0;e<It.length;++e)if(r.data[0]==It[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<It.length;){for(var i=It[e],n=e+1;n<It.length&&i<wv;)i*=It[n++];for(i=r.modInt(i);e<n;)if(i%It[e++]==0)return!1}return r.millerRabin(t)}function Sv(t){var e=this.subtract(I.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var i=e.shiftRight(r),n=Bv(),a,s=0;s<t;++s){do a=new I(this.bitLength(),n);while(a.compareTo(I.ONE)<=0||a.compareTo(e)>=0);var o=a.modPow(i,this);if(o.compareTo(I.ONE)!=0&&o.compareTo(e)!=0){for(var f=1;f++<r&&o.compareTo(e)!=0;)if(o=o.modPowInt(2,this),o.compareTo(I.ONE)==0)return!1;if(o.compareTo(e)!=0)return!1}}return!0}function Bv(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}I.prototype.chunkSize=_x;I.prototype.toRadix=Cx;I.prototype.fromRadix=Ix;I.prototype.fromNumber=Tx;I.prototype.bitwiseTo=kx;I.prototype.changeBit=jx;I.prototype.addTo=Qx;I.prototype.dMultiply=av;I.prototype.dAddOffset=sv;I.prototype.multiplyLowerTo=cv;I.prototype.multiplyUpperTo=hv;I.prototype.modInt=mv;I.prototype.millerRabin=Sv;I.prototype.clone=wx;I.prototype.intValue=Ex;I.prototype.byteValue=Sx;I.prototype.shortValue=Bx;I.prototype.signum=Ax;I.prototype.toByteArray=Px;I.prototype.equals=Kx;I.prototype.min=Rx;I.prototype.max=Lx;I.prototype.and=Dx;I.prototype.or=Nx;I.prototype.xor=Fx;I.prototype.andNot=Mx;I.prototype.not=Ox;I.prototype.shiftLeft=qx;I.prototype.shiftRight=Hx;I.prototype.getLowestSetBit=zx;I.prototype.bitCount=Wx;I.prototype.testBit=$x;I.prototype.setBit=Xx;I.prototype.clearBit=Yx;I.prototype.flipBit=Zx;I.prototype.add=Jx;I.prototype.subtract=ev;I.prototype.multiply=tv;I.prototype.divide=rv;I.prototype.remainder=iv;I.prototype.divideAndRemainder=nv;I.prototype.modPow=xv;I.prototype.modInverse=bv;I.prototype.pow=uv;I.prototype.gcd=vv;I.prototype.isProbablePrime=Ev});var Hh=B((d3,qh)=>{var Ht=xe();Jr();Re();var Fh=qh.exports=Ht.sha1=Ht.sha1||{};Ht.md.sha1=Ht.md.algorithms.sha1=Fh;Fh.create=function(){Mh||_v();var t=null,e=Ht.util.createBuffer(),r=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return i.start=function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,a=0;a<n;++a)i.fullMessageLength.push(0);return e=Ht.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i},i.start(),i.update=function(n,a){a==="utf8"&&(n=Ht.util.encodeUtf8(n));var s=n.length;i.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=i.fullMessageLength.length-1;o>=0;--o)i.fullMessageLength[o]+=s[1],s[1]=s[0]+(i.fullMessageLength[o]/4294967296>>>0),i.fullMessageLength[o]=i.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(n),Oh(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),i},i.digest=function(){var n=Ht.util.createBuffer();n.putBytes(e.bytes());var a=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,s=a&i.blockLength-1;n.putBytes(qo.substr(0,i.blockLength-s));for(var o,f,u=i.fullMessageLength[0]*8,c=0;c<i.fullMessageLength.length-1;++c)o=i.fullMessageLength[c+1]*8,f=o/4294967296>>>0,u+=f,n.putInt32(u>>>0),u=o>>>0;n.putInt32(u);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};Oh(h,r,n);var l=Ht.util.createBuffer();return l.putInt32(h.h0),l.putInt32(h.h1),l.putInt32(h.h2),l.putInt32(h.h3),l.putInt32(h.h4),l},i};var qo=null,Mh=!1;function _v(){qo=String.fromCharCode(128),qo+=Ht.util.fillString(String.fromCharCode(0),64),Mh=!0}function Oh(t,e,r){for(var i,n,a,s,o,f,u,c,h=r.length();h>=64;){for(n=t.h0,a=t.h1,s=t.h2,o=t.h3,f=t.h4,c=0;c<16;++c)i=r.getInt32(),e[c]=i,u=o^a&(s^o),i=(n<<5|n>>>27)+u+f+1518500249+i,f=o,o=s,s=(a<<30|a>>>2)>>>0,a=n,n=i;for(;c<20;++c)i=e[c-3]^e[c-8]^e[c-14]^e[c-16],i=i<<1|i>>>31,e[c]=i,u=o^a&(s^o),i=(n<<5|n>>>27)+u+f+1518500249+i,f=o,o=s,s=(a<<30|a>>>2)>>>0,a=n,n=i;for(;c<32;++c)i=e[c-3]^e[c-8]^e[c-14]^e[c-16],i=i<<1|i>>>31,e[c]=i,u=a^s^o,i=(n<<5|n>>>27)+u+f+1859775393+i,f=o,o=s,s=(a<<30|a>>>2)>>>0,a=n,n=i;for(;c<40;++c)i=e[c-6]^e[c-16]^e[c-28]^e[c-32],i=i<<2|i>>>30,e[c]=i,u=a^s^o,i=(n<<5|n>>>27)+u+f+1859775393+i,f=o,o=s,s=(a<<30|a>>>2)>>>0,a=n,n=i;for(;c<60;++c)i=e[c-6]^e[c-16]^e[c-28]^e[c-32],i=i<<2|i>>>30,e[c]=i,u=a&s|o&(a^s),i=(n<<5|n>>>27)+u+f+2400959708+i,f=o,o=s,s=(a<<30|a>>>2)>>>0,a=n,n=i;for(;c<80;++c)i=e[c-6]^e[c-16]^e[c-28]^e[c-32],i=i<<2|i>>>30,e[c]=i,u=a^s^o,i=(n<<5|n>>>27)+u+f+3395469782+i,f=o,o=s,s=(a<<30|a>>>2)>>>0,a=n,n=i;t.h0=t.h0+n|0,t.h1=t.h1+a|0,t.h2=t.h2+s|0,t.h3=t.h3+o|0,t.h4=t.h4+f|0,h-=64}}});var Gh=B((y3,zh)=>{var Vt=xe();Re();dn();Hh();var Vh=zh.exports=Vt.pkcs1=Vt.pkcs1||{};Vh.encode_rsa_oaep=function(t,e,r){var i,n,a,s;typeof r=="string"?(i=r,n=arguments[3]||void 0,a=arguments[4]||void 0):r&&(i=r.label||void 0,n=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),a?a.start():a=Vt.md.sha1.create(),s||(s=a);var o=Math.ceil(t.n.bitLength()/8),f=o-2*a.digestLength-2;if(e.length>f){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=f,u}i||(i=""),a.update(i,"raw");for(var c=a.digest(),h="",l=f-e.length,d=0;d<l;d++)h+="\0";var p=c.getBytes()+h+""+e;if(!n)n=Vt.random.getBytes(a.digestLength);else if(n.length!==a.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=n.length,u.digestLength=a.digestLength,u}var y=Da(n,o-a.digestLength-1,s),g=Vt.util.xorBytes(p,y,p.length),v=Da(g,a.digestLength,s),b=Vt.util.xorBytes(n,v,n.length);return"\0"+b+g};Vh.decode_rsa_oaep=function(t,e,r){var i,n,a;typeof r=="string"?(i=r,n=arguments[3]||void 0):r&&(i=r.label||void 0,n=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var s=Math.ceil(t.n.bitLength()/8);if(e.length!==s){var g=new Error("RSAES-OAEP encoded message length is invalid.");throw g.length=e.length,g.expectedLength=s,g}if(n===void 0?n=Vt.md.sha1.create():n.start(),a||(a=n),s<2*n.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),n.update(i,"raw");for(var o=n.digest().getBytes(),f=e.charAt(0),u=e.substring(1,n.digestLength+1),c=e.substring(1+n.digestLength),h=Da(c,n.digestLength,a),l=Vt.util.xorBytes(u,h,u.length),d=Da(l,s-n.digestLength-1,a),p=Vt.util.xorBytes(c,d,c.length),y=p.substring(0,n.digestLength),g=f!=="\0",v=0;v<n.digestLength;++v)g|=o.charAt(v)!==y.charAt(v);for(var b=1,w=n.digestLength,T=n.digestLength;T<p.length;T++){var C=p.charCodeAt(T),A=C&1^1,R=b?65534:0;g|=C&R,b=b&A,w+=b}if(g||p.charCodeAt(w)!==1)throw new Error("Invalid RSAES-OAEP padding.");return p.substring(w+1)};function Da(t,e,r){r||(r=Vt.md.sha1.create());for(var i="",n=Math.ceil(e/r.digestLength),a=0;a<n;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255);r.start(),r.update(t+s),i+=r.digest().getBytes()}return i.substring(0,e)}});var Wh=B((g3,Ho)=>{var Tr=xe();Re();Ua();dn();(function(){if(Tr.prime){Ho.exports=Tr.prime;return}var t=Ho.exports=Tr.prime=Tr.prime||{},e=Tr.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],i=new e(null);i.fromInt(30);var n=function(h,l){return h|l};t.generateProbablePrime=function(h,l,d){typeof l=="function"&&(d=l,l={}),l=l||{};var p=l.algorithm||"PRIMEINC";typeof p=="string"&&(p={name:p}),p.options=p.options||{};var y=l.prng||Tr.random,g={nextBytes:function(v){for(var b=y.getBytesSync(v.length),w=0;w<v.length;++w)v[w]=b.charCodeAt(w)}};if(p.name==="PRIMEINC")return a(h,g,p.options,d);throw new Error("Invalid prime generation algorithm: "+p.name)};function a(h,l,d,p){return"workers"in d?f(h,l,d,p):s(h,l,d,p)}function s(h,l,d,p){var y=u(h,l),g=0,v=c(y.bitLength());"millerRabinTests"in d&&(v=d.millerRabinTests);var b=10;"maxBlockTime"in d&&(b=d.maxBlockTime),o(y,h,l,g,v,b,p)}function o(h,l,d,p,y,g,v){var b=+new Date;do{if(h.bitLength()>l&&(h=u(l,d)),h.isProbablePrime(y))return v(null,h);h.dAddOffset(r[p++%8],0)}while(g<0||+new Date-b<g);Tr.util.setImmediate(function(){o(h,l,d,p,y,g,v)})}function f(h,l,d,p){if(typeof Worker=="undefined")return s(h,l,d,p);var y=u(h,l),g=d.workers,v=d.workLoad||100,b=v*30/8,w=d.workerScript||"forge/prime.worker.js";if(g===-1)return Tr.util.estimateCores(function(C,A){C&&(A=2),g=A-1,T()});T();function T(){g=Math.max(1,g);for(var C=[],A=0;A<g;++A)C[A]=new Worker(w);for(var R=g,A=0;A<g;++A)C[A].addEventListener("message",N);var L=!1;function N(O){if(!L){--R;var $=O.data;if($.found){for(var G=0;G<C.length;++G)C[G].terminate();return L=!0,p(null,new e($.prime,16))}y.bitLength()>h&&(y=u(h,l));var ne=y.toString(16);O.target.postMessage({hex:ne,workLoad:v}),y.dAddOffset(b,0)}}}}function u(h,l){var d=new e(h,l),p=h-1;return d.testBit(p)||d.bitwiseTo(e.ONE.shiftLeft(p),n,d),d.dAddOffset(31-d.mod(i).byteValue(),0),d}function c(h){return h<=100?27:h<=150?18:h<=200?15:h<=250?12:h<=300?9:h<=350?8:h<=400?7:h<=500?6:h<=600?5:h<=800?4:h<=1250?3:2}})()});var Fa=B((x3,Jh)=>{var V=xe();pn();Ua();Sa();Gh();Wh();dn();Re();typeof ee=="undefined"&&(ee=V.jsbn.BigInteger);var ee,Vo=V.util.isNodejs?Gr():null,m=V.asn1,xt=V.util;V.pki=V.pki||{};Jh.exports=V.pki.rsa=V.rsa=V.rsa||{};var z=V.pki,Av=[6,4,2,4,2,4,6,2],Cv={name:"PrivateKeyInfo",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:m.Class.UNIVERSAL,type:m.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},Iv={name:"RSAPrivateKey",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},Tv={name:"RSAPublicKey",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},Pv=V.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:m.Class.UNIVERSAL,type:m.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},Kv=function(t){var e;if(t.algorithm in z.oids)e=z.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var i=m.oidToDer(e).getBytes(),n=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[]),a=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[]);a.value.push(m.create(m.Class.UNIVERSAL,m.Type.OID,!1,i)),a.value.push(m.create(m.Class.UNIVERSAL,m.Type.NULL,!1,""));var s=m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,t.digest().getBytes());return n.value.push(a),n.value.push(s),m.toDer(n).getBytes()},$h=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(ee.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(ee.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var i;do i=new ee(V.util.bytesToHex(V.random.getBytes(e.n.bitLength()/8)),16);while(i.compareTo(e.n)>=0||!i.gcd(e.n).equals(ee.ONE));t=t.multiply(i.modPow(e.e,e.n)).mod(e.n);for(var n=t.mod(e.p).modPow(e.dP,e.p),a=t.mod(e.q).modPow(e.dQ,e.q);n.compareTo(a)<0;)n=n.add(e.p);var s=n.subtract(a).multiply(e.qInv).mod(e.p).multiply(e.q).add(a);return s=s.multiply(i.modInverse(e.n)).mod(e.n),s};z.rsa.encrypt=function(t,e,r){var i=r,n,a=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(i=r===2,n=jh(t,e,r)):(n=V.util.createBuffer(),n.putBytes(t));for(var s=new ee(n.toHex(),16),o=$h(s,e,i),f=o.toString(16),u=V.util.createBuffer(),c=a-Math.ceil(f.length/2);c>0;)u.putByte(0),--c;return u.putBytes(V.util.hexToBytes(f)),u.getBytes()};z.rsa.decrypt=function(t,e,r,i){var n=Math.ceil(e.n.bitLength()/8);if(t.length!==n){var a=new Error("Encrypted message length is invalid.");throw a.length=t.length,a.expected=n,a}var s=new ee(V.util.createBuffer(t).toHex(),16);if(s.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var o=$h(s,e,r),f=o.toString(16),u=V.util.createBuffer(),c=n-Math.ceil(f.length/2);c>0;)u.putByte(0),--c;return u.putBytes(V.util.hexToBytes(f)),i!==!1?Na(u.getBytes(),e,r):u.getBytes()};z.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var i=r.prng||V.random,n={nextBytes:function(o){for(var f=i.getBytesSync(o.length),u=0;u<o.length;++u)o[u]=f.charCodeAt(u)}},a=r.algorithm||"PRIMEINC",s;if(a==="PRIMEINC")s={algorithm:a,state:0,bits:t,rng:n,eInt:e||65537,e:new ee(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+a);return s};z.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new ee(null);r.fromInt(30);for(var i=0,n=function(h,l){return h|l},a=+new Date,s,o=0;t.keys===null&&(e<=0||o<e);){if(t.state===0){var f=t.p===null?t.pBits:t.qBits,u=f-1;t.pqState===0?(t.num=new ee(f,t.rng),t.num.testBit(u)||t.num.bitwiseTo(ee.ONE.shiftLeft(u),n,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),i=0,++t.pqState):t.pqState===1?t.num.bitLength()>f?t.pqState=0:t.num.isProbablePrime(Lv(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(Av[i++%8],0):t.pqState===2?t.pqState=t.num.subtract(ee.ONE).gcd(t.e).compareTo(ee.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(ee.ONE),t.q1=t.q.subtract(ee.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(ee.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var c=t.e.modInverse(t.phi);t.keys={privateKey:z.rsa.setPrivateKey(t.n,t.e,c,t.p,t.q,c.mod(t.p1),c.mod(t.q1),t.q.modInverse(t.p)),publicKey:z.rsa.setPublicKey(t.n,t.e)}}s=+new Date,o+=s-a,a=s}return t.keys!==null};z.rsa.generateKeyPair=function(t,e,r,i){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(i=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(i=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,i=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(i=r,r=void 0):(i=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!V.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(i){if(Xh("generateKeyPair"))return Vo.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(o,f,u){if(o)return i(o);i(null,{privateKey:z.privateKeyFromPem(u),publicKey:z.publicKeyFromPem(f)})});if(Yh("generateKey")&&Yh("exportKey"))return xt.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Qh(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(o){return xt.globalScope.crypto.subtle.exportKey("pkcs8",o.privateKey)}).then(void 0,function(o){i(o)}).then(function(o){if(o){var f=z.privateKeyFromAsn1(m.fromDer(V.util.createBuffer(o)));i(null,{privateKey:f,publicKey:z.setRsaPublicKey(f.n,f.e)})}});if(Zh("generateKey")&&Zh("exportKey")){var n=xt.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Qh(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);n.oncomplete=function(o){var f=o.target.result,u=xt.globalScope.msCrypto.subtle.exportKey("pkcs8",f.privateKey);u.oncomplete=function(c){var h=c.target.result,l=z.privateKeyFromAsn1(m.fromDer(V.util.createBuffer(h)));i(null,{privateKey:l,publicKey:z.setRsaPublicKey(l.n,l.e)})},u.onerror=function(c){i(c)}},n.onerror=function(o){i(o)};return}}else if(Xh("generateKeyPairSync")){var a=Vo.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:z.privateKeyFromPem(a.privateKey),publicKey:z.publicKeyFromPem(a.publicKey)}}}var s=z.rsa.createKeyPairGenerationState(t,e,r);if(!i)return z.rsa.stepKeyPairGenerationState(s,0),s.keys;Rv(s,r,i)};z.setRsaPublicKey=z.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(i,n,a){if(typeof n=="string"?n=n.toUpperCase():n===void 0&&(n="RSAES-PKCS1-V1_5"),n==="RSAES-PKCS1-V1_5")n={encode:function(o,f,u){return jh(o,f,2).getBytes()}};else if(n==="RSA-OAEP"||n==="RSAES-OAEP")n={encode:function(o,f){return V.pkcs1.encode_rsa_oaep(f,o,a)}};else if(["RAW","NONE","NULL",null].indexOf(n)!==-1)n={encode:function(o){return o}};else if(typeof n=="string")throw new Error('Unsupported encryption scheme: "'+n+'".');var s=n.encode(i,r,!0);return z.rsa.encrypt(s,r,!0)},r.verify=function(i,n,a){typeof a=="string"?a=a.toUpperCase():a===void 0&&(a="RSASSA-PKCS1-V1_5"),a==="RSASSA-PKCS1-V1_5"?a={verify:function(o,f){f=Na(f,r,!0);var u=m.fromDer(f);return o===u.value[1].value}}:(a==="NONE"||a==="NULL"||a===null)&&(a={verify:function(o,f){return f=Na(f,r,!0),o===f}});var s=z.rsa.decrypt(n,r,!0,!1);return a.verify(i,s,r.n.bitLength())},r};z.setRsaPrivateKey=z.rsa.setPrivateKey=function(t,e,r,i,n,a,s,o){var f={n:t,e,d:r,p:i,q:n,dP:a,dQ:s,qInv:o};return f.decrypt=function(u,c,h){typeof c=="string"?c=c.toUpperCase():c===void 0&&(c="RSAES-PKCS1-V1_5");var l=z.rsa.decrypt(u,f,!1,!1);if(c==="RSAES-PKCS1-V1_5")c={decode:Na};else if(c==="RSA-OAEP"||c==="RSAES-OAEP")c={decode:function(d,p){return V.pkcs1.decode_rsa_oaep(p,d,h)}};else if(["RAW","NONE","NULL",null].indexOf(c)!==-1)c={decode:function(d){return d}};else throw new Error('Unsupported encryption scheme: "'+c+'".');return c.decode(l,f,!1)},f.sign=function(u,c){var h=!1;typeof c=="string"&&(c=c.toUpperCase()),c===void 0||c==="RSASSA-PKCS1-V1_5"?(c={encode:Kv},h=1):(c==="NONE"||c==="NULL"||c===null)&&(c={encode:function(){return u}},h=1);var l=c.encode(u,f.n.bitLength());return z.rsa.encrypt(l,f,h)},f};z.wrapRsaPrivateKey=function(t){return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,m.integerToDer(0).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(z.oids.rsaEncryption).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.NULL,!1,"")]),m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,m.toDer(t).getBytes())])};z.privateKeyFromAsn1=function(t){var e={},r=[];if(m.validate(t,Cv,e,r)&&(t=m.fromDer(V.util.createBuffer(e.privateKey))),e={},r=[],!m.validate(t,Iv,e,r)){var i=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw i.errors=r,i}var n,a,s,o,f,u,c,h;return n=V.util.createBuffer(e.privateKeyModulus).toHex(),a=V.util.createBuffer(e.privateKeyPublicExponent).toHex(),s=V.util.createBuffer(e.privateKeyPrivateExponent).toHex(),o=V.util.createBuffer(e.privateKeyPrime1).toHex(),f=V.util.createBuffer(e.privateKeyPrime2).toHex(),u=V.util.createBuffer(e.privateKeyExponent1).toHex(),c=V.util.createBuffer(e.privateKeyExponent2).toHex(),h=V.util.createBuffer(e.privateKeyCoefficient).toHex(),z.setRsaPrivateKey(new ee(n,16),new ee(a,16),new ee(s,16),new ee(o,16),new ee(f,16),new ee(u,16),new ee(c,16),new ee(h,16))};z.privateKeyToAsn1=z.privateKeyToRSAPrivateKey=function(t){return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,m.integerToDer(0).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,zt(t.n)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,zt(t.e)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,zt(t.d)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,zt(t.p)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,zt(t.q)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,zt(t.dP)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,zt(t.dQ)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,zt(t.qInv))])};z.publicKeyFromAsn1=function(t){var e={},r=[];if(m.validate(t,Pv,e,r)){var i=m.derToOid(e.publicKeyOid);if(i!==z.oids.rsaEncryption){var n=new Error("Cannot read public key. Unknown OID.");throw n.oid=i,n}t=e.rsaPublicKey}if(r=[],!m.validate(t,Tv,e,r)){var n=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw n.errors=r,n}var a=V.util.createBuffer(e.publicKeyModulus).toHex(),s=V.util.createBuffer(e.publicKeyExponent).toHex();return z.setRsaPublicKey(new ee(a,16),new ee(s,16))};z.publicKeyToAsn1=z.publicKeyToSubjectPublicKeyInfo=function(t){return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(z.oids.rsaEncryption).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.NULL,!1,"")]),m.create(m.Class.UNIVERSAL,m.Type.BITSTRING,!1,[z.publicKeyToRSAPublicKey(t)])])};z.publicKeyToRSAPublicKey=function(t){return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,zt(t.n)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,zt(t.e))])};function jh(t,e,r){var i=V.util.createBuffer(),n=Math.ceil(e.n.bitLength()/8);if(t.length>n-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=t.length,a.max=n-11,a}i.putByte(0),i.putByte(r);var s=n-3-t.length,o;if(r===0||r===1){o=r===0?0:255;for(var f=0;f<s;++f)i.putByte(o)}else for(;s>0;){for(var u=0,c=V.random.getBytes(s),f=0;f<s;++f)o=c.charCodeAt(f),o===0?++u:i.putByte(o);s=u}return i.putByte(0),i.putBytes(t),i}function Na(t,e,r,i){var n=Math.ceil(e.n.bitLength()/8),a=V.util.createBuffer(t),s=a.getByte(),o=a.getByte();if(s!==0||r&&o!==0&&o!==1||!r&&o!=2||r&&o===0&&typeof i=="undefined")throw new Error("Encryption block is invalid.");var f=0;if(o===0){f=n-3-i;for(var u=0;u<f;++u)if(a.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(o===1)for(f=0;a.length()>1;){if(a.getByte()!==255){--a.read;break}++f}else if(o===2)for(f=0;a.length()>1;){if(a.getByte()===0){--a.read;break}++f}var c=a.getByte();if(c!==0||f!==n-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function Rv(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var i={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(i.prng=e.prng),n();function n(){a(t.pBits,function(o,f){if(o)return r(o);if(t.p=f,t.q!==null)return s(o,t.q);a(t.qBits,s)})}function a(o,f){V.prime.generateProbablePrime(o,i,f)}function s(o,f){if(o)return r(o);if(t.q=f,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(ee.ONE).gcd(t.e).compareTo(ee.ONE)!==0){t.p=null,n();return}if(t.q.subtract(ee.ONE).gcd(t.e).compareTo(ee.ONE)!==0){t.q=null,a(t.qBits,s);return}if(t.p1=t.p.subtract(ee.ONE),t.q1=t.q.subtract(ee.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(ee.ONE)!==0){t.p=t.q=null,n();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,a(t.qBits,s);return}var c=t.e.modInverse(t.phi);t.keys={privateKey:z.rsa.setPrivateKey(t.n,t.e,c,t.p,t.q,c.mod(t.p1),c.mod(t.q1),t.q.modInverse(t.p)),publicKey:z.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function zt(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=V.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)==0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)==128)?r.substr(1):r}function Lv(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function Xh(t){return V.util.isNodejs&&typeof Vo[t]=="function"}function Yh(t){return typeof xt.globalScope!="undefined"&&typeof xt.globalScope.crypto=="object"&&typeof xt.globalScope.crypto.subtle=="object"&&typeof xt.globalScope.crypto.subtle[t]=="function"}function Zh(t){return typeof xt.globalScope!="undefined"&&typeof xt.globalScope.msCrypto=="object"&&typeof xt.globalScope.msCrypto.subtle=="object"&&typeof xt.globalScope.msCrypto.subtle[t]=="function"}function Qh(t){for(var e=V.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),i=0;i<e.length;++i)r[i]=e.charCodeAt(i);return r}});var al=B((v3,nl)=>{var U=xe();ko();pn();uh();Jr();Sa();dh();xh();dn();Th();Fa();Re();typeof el=="undefined"&&(el=U.jsbn.BigInteger);var el,S=U.asn1,j=U.pki=U.pki||{};nl.exports=j.pbe=U.pbe=U.pbe||{};var ri=j.oids,kv={name:"EncryptedPrivateKeyInfo",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:S.Class.UNIVERSAL,type:S.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:S.Class.UNIVERSAL,type:S.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},Uv={name:"PBES2Algorithms",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:S.Class.UNIVERSAL,type:S.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:S.Class.UNIVERSAL,type:S.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:S.Class.UNIVERSAL,type:S.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:S.Class.UNIVERSAL,type:S.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:S.Class.UNIVERSAL,type:S.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:S.Class.UNIVERSAL,type:S.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:S.Class.UNIVERSAL,type:S.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},Dv={name:"pkcs-12PbeParams",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:S.Class.UNIVERSAL,type:S.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:S.Class.UNIVERSAL,type:S.Type.INTEGER,constructed:!1,capture:"iterations"}]};j.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var i=U.random.getBytesSync(r.saltSize),n=r.count,a=S.integerToDer(n),s,o,f;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,c,h;switch(r.algorithm){case"aes128":s=16,u=16,c=ri["aes128-CBC"],h=U.aes.createEncryptionCipher;break;case"aes192":s=24,u=16,c=ri["aes192-CBC"],h=U.aes.createEncryptionCipher;break;case"aes256":s=32,u=16,c=ri["aes256-CBC"],h=U.aes.createEncryptionCipher;break;case"des":s=8,u=8,c=ri.desCBC,h=U.des.createEncryptionCipher;break;default:var l=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw l.algorithm=r.algorithm,l}var d="hmacWith"+r.prfAlgorithm.toUpperCase(),p=il(d),y=U.pkcs5.pbkdf2(e,i,n,s,p),g=U.random.getBytesSync(u),v=h(y);v.start(g),v.update(S.toDer(t)),v.finish(),f=v.output.getBytes();var b=Nv(i,a,s,d);o=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(ri.pkcs5PBES2).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(ri.pkcs5PBKDF2).getBytes()),b]),S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(c).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.OCTETSTRING,!1,g)])])])}else if(r.algorithm==="3des"){s=24;var w=new U.util.ByteBuffer(i),y=j.pbe.generatePkcs12Key(e,w,1,n,s),g=j.pbe.generatePkcs12Key(e,w,2,n,s),v=U.des.createEncryptionCipher(y);v.start(g),v.update(S.toDer(t)),v.finish(),f=v.output.getBytes(),o=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(ri["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OCTETSTRING,!1,i),S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,a.getBytes())])])}else{var l=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw l.algorithm=r.algorithm,l}var T=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[o,S.create(S.Class.UNIVERSAL,S.Type.OCTETSTRING,!1,f)]);return T};j.decryptPrivateKeyInfo=function(t,e){var r=null,i={},n=[];if(!S.validate(t,kv,i,n)){var a=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=n,a}var s=S.derToOid(i.encryptionOid),o=j.pbe.getCipher(s,i.encryptionParams,e),f=U.util.createBuffer(i.encryptedData);return o.update(f),o.finish()&&(r=S.fromDer(o.output)),r};j.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:S.toDer(t).getBytes()};return U.pem.encode(r,{maxline:e})};j.encryptedPrivateKeyFromPem=function(t){var e=U.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return S.fromDer(e.body)};j.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var i=j.wrapRsaPrivateKey(j.privateKeyToAsn1(t));return i=j.encryptPrivateKeyInfo(i,e,r),j.encryptedPrivateKeyToPem(i)}var n,a,s,o;switch(r.algorithm){case"aes128":n="AES-128-CBC",s=16,a=U.random.getBytesSync(16),o=U.aes.createEncryptionCipher;break;case"aes192":n="AES-192-CBC",s=24,a=U.random.getBytesSync(16),o=U.aes.createEncryptionCipher;break;case"aes256":n="AES-256-CBC",s=32,a=U.random.getBytesSync(16),o=U.aes.createEncryptionCipher;break;case"3des":n="DES-EDE3-CBC",s=24,a=U.random.getBytesSync(8),o=U.des.createEncryptionCipher;break;case"des":n="DES-CBC",s=8,a=U.random.getBytesSync(8),o=U.des.createEncryptionCipher;break;default:var f=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw f.algorithm=r.algorithm,f}var u=U.pbe.opensslDeriveBytes(e,a.substr(0,8),s),c=o(u);c.start(a),c.update(S.toDer(j.privateKeyToAsn1(t))),c.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:n,parameters:U.util.bytesToHex(a).toUpperCase()},body:c.output.getBytes()};return U.pem.encode(h)};j.decryptRsaPrivateKey=function(t,e){var r=null,i=U.pem.decode(t)[0];if(i.type!=="ENCRYPTED PRIVATE KEY"&&i.type!=="PRIVATE KEY"&&i.type!=="RSA PRIVATE KEY"){var n=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw n.headerType=n,n}if(i.procType&&i.procType.type==="ENCRYPTED"){var a,s;switch(i.dekInfo.algorithm){case"DES-CBC":a=8,s=U.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,s=U.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,s=U.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,s=U.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,s=U.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,s=function(h){return U.rc2.createDecryptionCipher(h,40)};break;case"RC2-64-CBC":a=8,s=function(h){return U.rc2.createDecryptionCipher(h,64)};break;case"RC2-128-CBC":a=16,s=function(h){return U.rc2.createDecryptionCipher(h,128)};break;default:var n=new Error('Could not decrypt private key; unsupported encryption algorithm "'+i.dekInfo.algorithm+'".');throw n.algorithm=i.dekInfo.algorithm,n}var o=U.util.hexToBytes(i.dekInfo.parameters),f=U.pbe.opensslDeriveBytes(e,o.substr(0,8),a),u=s(f);if(u.start(o),u.update(U.util.createBuffer(i.body)),u.finish())r=u.output.getBytes();else return r}else r=i.body;return i.type==="ENCRYPTED PRIVATE KEY"?r=j.decryptPrivateKeyInfo(S.fromDer(r),e):r=S.fromDer(r),r!==null&&(r=j.privateKeyFromAsn1(r)),r};j.pbe.generatePkcs12Key=function(t,e,r,i,n,a){var s,o;if(typeof a=="undefined"||a===null){if(!("sha1"in U.md))throw new Error('"sha1" hash algorithm unavailable.');a=U.md.sha1.create()}var f=a.digestLength,u=a.blockLength,c=new U.util.ByteBuffer,h=new U.util.ByteBuffer;if(t!=null){for(o=0;o<t.length;o++)h.putInt16(t.charCodeAt(o));h.putInt16(0)}var l=h.length(),d=e.length(),p=new U.util.ByteBuffer;p.fillWithByte(r,u);var y=u*Math.ceil(d/u),g=new U.util.ByteBuffer;for(o=0;o<y;o++)g.putByte(e.at(o%d));var v=u*Math.ceil(l/u),b=new U.util.ByteBuffer;for(o=0;o<v;o++)b.putByte(h.at(o%l));var w=g;w.putBuffer(b);for(var T=Math.ceil(n/f),C=1;C<=T;C++){var A=new U.util.ByteBuffer;A.putBytes(p.bytes()),A.putBytes(w.bytes());for(var R=0;R<i;R++)a.start(),a.update(A.getBytes()),A=a.digest();var L=new U.util.ByteBuffer;for(o=0;o<u;o++)L.putByte(A.at(o%f));var N=Math.ceil(d/u)+Math.ceil(l/u),O=new U.util.ByteBuffer;for(s=0;s<N;s++){var $=new U.util.ByteBuffer(w.getBytes(u)),G=511;for(o=L.length()-1;o>=0;o--)G=G>>8,G+=L.at(o)+$.at(o),$.setAt(o,G&255);O.putBuffer($)}w=O,c.putBuffer(A)}return c.truncate(c.length()-n),c};j.pbe.getCipher=function(t,e,r){switch(t){case j.oids.pkcs5PBES2:return j.pbe.getCipherForPBES2(t,e,r);case j.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case j.oids["pbewithSHAAnd40BitRC2-CBC"]:return j.pbe.getCipherForPKCS12PBE(t,e,r);default:var i=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw i.oid=t,i.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],i}};j.pbe.getCipherForPBES2=function(t,e,r){var i={},n=[];if(!S.validate(e,Uv,i,n)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=n,a}if(t=S.derToOid(i.kdfOid),t!==j.oids.pkcs5PBKDF2){var a=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw a.oid=t,a.supportedOids=["pkcs5PBKDF2"],a}if(t=S.derToOid(i.encOid),t!==j.oids["aes128-CBC"]&&t!==j.oids["aes192-CBC"]&&t!==j.oids["aes256-CBC"]&&t!==j.oids["des-EDE3-CBC"]&&t!==j.oids.desCBC){var a=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw a.oid=t,a.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],a}var s=i.kdfSalt,o=U.util.createBuffer(i.kdfIterationCount);o=o.getInt(o.length()<<3);var f,u;switch(j.oids[t]){case"aes128-CBC":f=16,u=U.aes.createDecryptionCipher;break;case"aes192-CBC":f=24,u=U.aes.createDecryptionCipher;break;case"aes256-CBC":f=32,u=U.aes.createDecryptionCipher;break;case"des-EDE3-CBC":f=24,u=U.des.createDecryptionCipher;break;case"desCBC":f=8,u=U.des.createDecryptionCipher;break}var c=rl(i.prfOid),h=U.pkcs5.pbkdf2(r,s,o,f,c),l=i.encIv,d=u(h);return d.start(l),d};j.pbe.getCipherForPKCS12PBE=function(t,e,r){var i={},n=[];if(!S.validate(e,Dv,i,n)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=n,a}var s=U.util.createBuffer(i.salt),o=U.util.createBuffer(i.iterations);o=o.getInt(o.length()<<3);var f,u,c;switch(t){case j.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:f=24,u=8,c=U.des.startDecrypting;break;case j.oids["pbewithSHAAnd40BitRC2-CBC"]:f=5,u=8,c=function(y,g){var v=U.rc2.createDecryptionCipher(y,40);return v.start(g,null),v};break;default:var a=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw a.oid=t,a}var h=rl(i.prfOid),l=j.pbe.generatePkcs12Key(r,s,1,o,f,h);h.start();var d=j.pbe.generatePkcs12Key(r,s,2,o,u,h);return c(l,d)};j.pbe.opensslDeriveBytes=function(t,e,r,i){if(typeof i=="undefined"||i===null){if(!("md5"in U.md))throw new Error('"md5" hash algorithm unavailable.');i=U.md.md5.create()}e===null&&(e="");for(var n=[tl(i,t+e)],a=16,s=1;a<r;++s,a+=16)n.push(tl(i,n[s-1]+t+e));return n.join("").substr(0,r)};function tl(t,e){return t.start().update(e).digest().getBytes()}function rl(t){var e;if(!t)e="hmacWithSHA1";else if(e=j.oids[S.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return il(e)}function il(t){var e=U.md;switch(t){case"hmacWithSHA224":e=U.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function Nv(t,e,r,i){var n=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OCTETSTRING,!1,t),S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,e.getBytes())]);return i!=="hmacWithSHA1"&&n.value.push(S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,U.util.hexToBytes(r.toString(16))),S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(j.oids[i]).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.NULL,!1,"")])),n}});var Gt=B((m3,ol)=>{"use strict";function sl(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Fv(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return sl(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),sl(new n,r)}}ol.exports=Fv});var zo={};De(zo,{identity:()=>Mv});var Mv,fl=ge(()=>{Ut();wr();Mv=ua({prefix:"\0",name:"identity",encode:t=>ku(t),decode:t=>Lu(t)})});var Go={};De(Go,{base2:()=>Ov});var Ov,ul=ge(()=>{Ut();Ov=Ie({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var Wo={};De(Wo,{base8:()=>qv});var qv,cl=ge(()=>{Ut();qv=Ie({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var $o={};De($o,{base10:()=>Hv});var Hv,hl=ge(()=>{Ut();Hv=Er({prefix:"9",name:"base10",alphabet:"0123456789"})});var gn,ll,Ma=ge(()=>{tn();gn=({name:t,code:e,encode:r})=>new ll(t,e,r),ll=class{constructor(e,r,i){this.name=e,this.code=r,this.encode=i}async digest(e){if(e instanceof Uint8Array){let r=await this.encode(e);return en(this.code,r)}else throw Error("Unknown type, must be binary type")}}});var ii={};De(ii,{sha256:()=>Vv,sha512:()=>zv});var dl,Vv,zv,Ii=ge(()=>{Ma();dl=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Vv=gn({name:"sha2-256",code:18,encode:dl("SHA-256")}),zv=gn({name:"sha2-512",code:19,encode:dl("SHA-512")})});var xn={};De(xn,{identity:()=>Gv});var Gv,Oa=ge(()=>{Ma();wr();Gv=gn({name:"identity",code:0,encode:t=>ir(t)})});var yl=ge(()=>{wr()});var P3,K3,gl=ge(()=>{P3=new TextEncoder,K3=new TextDecoder});var xl=ge(()=>{ao();oa();wr();Ma();tn()});var jo,U3,vl=ge(()=>{fl();ul();cl();hl();oo();nn();so();bi();sn();Ii();Oa();yl();gl();xl();jo={...zo,...Go,...Wo,...$o,...pa,...rn,...la,...mi,...Ei},U3={...ii,...xn}});function ml(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}var bl,Xo,jv,qa,Yo=ge(()=>{vl();bl=ml("utf8","u",t=>{let e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),Xo=ml("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),jv={utf8:bl,"utf-8":bl,hex:jo.base16,latin1:Xo,ascii:Xo,binary:Xo,...jo},qa=jv});var Pr={};De(Pr,{fromString:()=>Ti});function Ti(t,e="utf8"){let r=qa[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}var Wt=ge(()=>{Yo()});var vn={};De(vn,{concat:()=>$t});function $t(t,e){e||(e=t.reduce((n,a)=>n+a.length,0));let r=new Uint8Array(e),i=0;for(let n of t)r.set(n,i),i+=n.length;return r}var or=ge(()=>{});var mn=B(wl=>{"use strict";wl.get=(t=globalThis)=>{let e=t.crypto;if(!e||!e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}});var Zo=B((q3,Sl)=>{"use strict";var{concat:Xv}=(or(),vn),{fromString:El}=(Wt(),Pr),Yv=mn();function Zv({algorithm:t="AES-GCM",nonceLength:e=12,keyLength:r=16,digest:i="SHA-256",saltLength:n=16,iterations:a=32767}={}){let s=Yv.get();r*=8;async function o(u,c){let h=s.getRandomValues(new Uint8Array(n)),l=s.getRandomValues(new Uint8Array(e)),d={name:t,iv:l},p={name:"PBKDF2",salt:h,iterations:a,hash:{name:i}},y=await s.subtle.importKey("raw",El(c),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),g=await s.subtle.deriveKey(p,y,{name:t,length:r},!0,["encrypt"]),v=await s.subtle.encrypt(d,g,u);return Xv([h,d.iv,new Uint8Array(v)])}async function f(u,c){let h=u.slice(0,n),l=u.slice(n,n+e),d=u.slice(n+e),p={name:t,iv:l},y={name:"PBKDF2",salt:h,iterations:a,hash:{name:i}},g=await s.subtle.importKey("raw",El(c),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),v=await s.subtle.deriveKey(y,g,{name:t,length:r},!0,["decrypt"]),b=await s.subtle.decrypt(p,v,d);return new Uint8Array(b)}return{encrypt:o,decrypt:f}}Sl.exports={create:Zv}});var _l=B((H3,Bl)=>{"use strict";var{base64:Qv}=(sn(),Ei),Jv=Zo();Bl.exports={import:async function(t,e){let r=Qv.decode(t);return await Jv.create().decrypt(r,e)}}});var Ki={};De(Ki,{equals:()=>Pi});function Pi(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var fr=ge(()=>{});var Kr={};De(Kr,{toString:()=>Tt});function Tt(t,e="utf8"){let r=qa[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}var jt=ge(()=>{Yo()});var Pl=B((z3,Tl)=>{var Se=xe();Jr();Re();var bn=Tl.exports=Se.sha512=Se.sha512||{};Se.md.sha512=Se.md.algorithms.sha512=bn;var Al=Se.sha384=Se.sha512.sha384=Se.sha512.sha384||{};Al.create=function(){return bn.create("SHA-384")};Se.md.sha384=Se.md.algorithms.sha384=Al;Se.sha512.sha256=Se.sha512.sha256||{create:function(){return bn.create("SHA-512/256")}};Se.md["sha512/256"]=Se.md.algorithms["sha512/256"]=Se.sha512.sha256;Se.sha512.sha224=Se.sha512.sha224||{create:function(){return bn.create("SHA-512/224")}};Se.md["sha512/224"]=Se.md.algorithms["sha512/224"]=Se.sha512.sha224;bn.create=function(t){if(Cl||em(),typeof t=="undefined"&&(t="SHA-512"),!(t in ni))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=ni[t],r=null,i=Se.util.createBuffer(),n=new Array(80),a=0;a<80;++a)n[a]=new Array(2);var s=64;switch(t){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var o={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength128=[];for(var f=o.messageLengthSize/4,u=0;u<f;++u)o.fullMessageLength.push(0);i=Se.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return o},o.start(),o.update=function(f,u){u==="utf8"&&(f=Se.util.encodeUtf8(f));var c=f.length;o.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var h=o.fullMessageLength.length-1;h>=0;--h)o.fullMessageLength[h]+=c[1],c[1]=c[0]+(o.fullMessageLength[h]/4294967296>>>0),o.fullMessageLength[h]=o.fullMessageLength[h]>>>0,c[0]=c[1]/4294967296>>>0;return i.putBytes(f),Il(r,n,i),(i.read>2048||i.length()===0)&&i.compact(),o},o.digest=function(){var f=Se.util.createBuffer();f.putBytes(i.bytes());var u=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,c=u&o.blockLength-1;f.putBytes(Qo.substr(0,o.blockLength-c));for(var h,l,d=o.fullMessageLength[0]*8,p=0;p<o.fullMessageLength.length-1;++p)h=o.fullMessageLength[p+1]*8,l=h/4294967296>>>0,d+=l,f.putInt32(d>>>0),d=h>>>0;f.putInt32(d);for(var y=new Array(r.length),p=0;p<r.length;++p)y[p]=r[p].slice(0);Il(y,n,f);var g=Se.util.createBuffer(),v;t==="SHA-512"?v=y.length:t==="SHA-384"?v=y.length-2:v=y.length-4;for(var p=0;p<v;++p)g.putInt32(y[p][0]),(p!==v-1||t!=="SHA-512/224")&&g.putInt32(y[p][1]);return g},o};var Qo=null,Cl=!1,Jo=null,ni=null;function em(){Qo=String.fromCharCode(128),Qo+=Se.util.fillString(String.fromCharCode(0),128),Jo=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],ni={},ni["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],ni["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],ni["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],ni["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],Cl=!0}function Il(t,e,r){for(var i,n,a,s,o,f,u,c,h,l,d,p,y,g,v,b,w,T,C,A,R,L,N,O,$,G,ne,ye,M,H,_,q,be,Z,Q,J=r.length();J>=128;){for(M=0;M<16;++M)e[M][0]=r.getInt32()>>>0,e[M][1]=r.getInt32()>>>0;for(;M<80;++M)q=e[M-2],H=q[0],_=q[1],i=((H>>>19|_<<13)^(_>>>29|H<<3)^H>>>6)>>>0,n=((H<<13|_>>>19)^(_<<3|H>>>29)^(H<<26|_>>>6))>>>0,Z=e[M-15],H=Z[0],_=Z[1],a=((H>>>1|_<<31)^(H>>>8|_<<24)^H>>>7)>>>0,s=((H<<31|_>>>1)^(H<<24|_>>>8)^(H<<25|_>>>7))>>>0,be=e[M-7],Q=e[M-16],_=n+be[1]+s+Q[1],e[M][0]=i+be[0]+a+Q[0]+(_/4294967296>>>0)>>>0,e[M][1]=_>>>0;for(y=t[0][0],g=t[0][1],v=t[1][0],b=t[1][1],w=t[2][0],T=t[2][1],C=t[3][0],A=t[3][1],R=t[4][0],L=t[4][1],N=t[5][0],O=t[5][1],$=t[6][0],G=t[6][1],ne=t[7][0],ye=t[7][1],M=0;M<80;++M)u=((R>>>14|L<<18)^(R>>>18|L<<14)^(L>>>9|R<<23))>>>0,c=((R<<18|L>>>14)^(R<<14|L>>>18)^(L<<23|R>>>9))>>>0,h=($^R&(N^$))>>>0,l=(G^L&(O^G))>>>0,o=((y>>>28|g<<4)^(g>>>2|y<<30)^(g>>>7|y<<25))>>>0,f=((y<<4|g>>>28)^(g<<30|y>>>2)^(g<<25|y>>>7))>>>0,d=(y&v|w&(y^v))>>>0,p=(g&b|T&(g^b))>>>0,_=ye+c+l+Jo[M][1]+e[M][1],i=ne+u+h+Jo[M][0]+e[M][0]+(_/4294967296>>>0)>>>0,n=_>>>0,_=f+p,a=o+d+(_/4294967296>>>0)>>>0,s=_>>>0,ne=$,ye=G,$=N,G=O,N=R,O=L,_=A+n,R=C+i+(_/4294967296>>>0)>>>0,L=_>>>0,C=w,A=T,w=v,T=b,v=y,b=g,_=n+s,y=i+a+(_/4294967296>>>0)>>>0,g=_>>>0;_=t[0][1]+g,t[0][0]=t[0][0]+y+(_/4294967296>>>0)>>>0,t[0][1]=_>>>0,_=t[1][1]+b,t[1][0]=t[1][0]+v+(_/4294967296>>>0)>>>0,t[1][1]=_>>>0,_=t[2][1]+T,t[2][0]=t[2][0]+w+(_/4294967296>>>0)>>>0,t[2][1]=_>>>0,_=t[3][1]+A,t[3][0]=t[3][0]+C+(_/4294967296>>>0)>>>0,t[3][1]=_>>>0,_=t[4][1]+L,t[4][0]=t[4][0]+R+(_/4294967296>>>0)>>>0,t[4][1]=_>>>0,_=t[5][1]+O,t[5][0]=t[5][0]+N+(_/4294967296>>>0)>>>0,t[5][1]=_>>>0,_=t[6][1]+G,t[6][0]=t[6][0]+$+(_/4294967296>>>0)>>>0,t[6][1]=_>>>0,_=t[7][1]+ye,t[7][0]=t[7][0]+ne+(_/4294967296>>>0)>>>0,t[7][1]=_>>>0,J-=128}}});var Rl=B((G3,Kl)=>{"use strict";var Ha=65536;function tm(t){let e=new Uint8Array(t),r=0;if(t>0)if(t>Ha)for(;r<t;)r+Ha>t?(crypto.getRandomValues(e.subarray(r,r+(t-r))),r+=t-r):(crypto.getRandomValues(e.subarray(r,r+Ha)),r+=Ha);else crypto.getRandomValues(e);return e}Kl.exports=tm});var e0=B((W3,Ll)=>{"use strict";var rm=Rl(),im=Gt();Ll.exports=function(t){if(isNaN(t)||t<=0)throw im(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return rm(t)}});var Va=B(wn=>{"use strict";Re();Ua();var nm=xe(),{fromString:am}=(Wt(),Pr),{toString:kl}=(jt(),Kr),{concat:Ul}=(or(),vn);wn.bigIntegerToUintBase64url=(t,e)=>{let r=Uint8Array.from(t.abs().toByteArray());if(r=r[0]===0?r.slice(1):r,e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=Ul([new Uint8Array(e-r.length),r])}return kl(r,"base64url")};wn.base64urlToBigInteger=t=>{let e=wn.base64urlToBuffer(t);return new nm.jsbn.BigInteger(kl(e,"base16"),16)};wn.base64urlToBuffer=(t,e)=>{let r=am(t,"base64urlpad");if(e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=Ul([new Uint8Array(e-r.length),r])}return r}});var Fl=B(En=>{"use strict";pn();Fa();var Rr=xe(),{bigIntegerToUintBase64url:Xt,base64urlToBigInteger:Yt}=Va(),{fromString:Dl}=(Wt(),Pr),{toString:Nl}=(jt(),Kr);En.pkcs1ToJwk=function(t){let e=Rr.asn1.fromDer(Nl(t,"ascii")),r=Rr.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:Xt(r.n),e:Xt(r.e),d:Xt(r.d),p:Xt(r.p),q:Xt(r.q),dp:Xt(r.dP),dq:Xt(r.dQ),qi:Xt(r.qInv),alg:"RS256",kid:"2011-04-29"}};En.jwkToPkcs1=function(t){let e=Rr.pki.privateKeyToAsn1({n:Yt(t.n),e:Yt(t.e),d:Yt(t.d),p:Yt(t.p),q:Yt(t.q),dP:Yt(t.dp),dQ:Yt(t.dq),qInv:Yt(t.qi)});return Dl(Rr.asn1.toDer(e).getBytes(),"ascii")};En.pkixToJwk=function(t){let e=Rr.asn1.fromDer(Nl(t,"ascii")),r=Rr.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:Xt(r.n),e:Xt(r.e),alg:"RS256",kid:"2011-04-29"}};En.jwkToPkix=function(t){let e=Rr.pki.publicKeyToAsn1({n:Yt(t.n),e:Yt(t.e)});return Dl(Rr.asn1.toDer(e).getBytes(),"ascii")}});var Hl=B((X3,ql)=>{"use strict";Fa();var Ml=xe(),{base64urlToBigInteger:sm}=Va();function Ol(t,e){return e.map(r=>sm(t[r]))}function om(t){return Ml.pki.setRsaPrivateKey(...Ol(t,["n","e","d","p","q","dp","dq","qi"]))}function fm(t){return Ml.pki.setRsaPublicKey(...Ol(t,["n","e"]))}ql.exports={jwk2pub:fm,jwk2priv:om}});var Gl=B(cr=>{"use strict";var ur=mn(),um=e0(),{toString:cm}=(jt(),Kr),{fromString:hm}=(Wt(),Pr);cr.utils=Fl();cr.generateKey=async function(t){let e=await ur.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await Vl(e);return{privateKey:r[0],publicKey:r[1]}};cr.unmarshalPrivateKey=async function(t){let r=[await ur.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await lm(t)],i=await Vl({privateKey:r[0],publicKey:r[1]});return{privateKey:i[0],publicKey:i[1]}};cr.getRandomValues=um;cr.hashAndSign=async function(t,e){let r=await ur.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),i=await ur.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(e));return new Uint8Array(i,i.byteOffset,i.byteLength)};cr.hashAndVerify=async function(t,e,r){let i=await ur.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return ur.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},i,e,r)};function Vl(t){return Promise.all([ur.get().subtle.exportKey("jwk",t.privateKey),ur.get().subtle.exportKey("jwk",t.publicKey)])}function lm(t){return ur.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}var{jwk2pub:pm,jwk2priv:dm}=Hl();function zl(t,e,r,i){let n=e?pm(t):dm(t),a=cm(Uint8Array.from(r),"ascii"),s=i(a,n);return hm(s,"ascii")}cr.encrypt=function(t,e){return zl(t,!0,e,(r,i)=>i.encrypt(r))};cr.decrypt=function(t,e){return zl(t,!1,e,(r,i)=>i.decrypt(r))}});var za=B((Z3,Wl)=>{"use strict";var{base64:ym}=(sn(),Ei),gm=Zo();Wl.exports={export:async function(t,e){let i=await gm.create().encrypt(t,e);return ym.encode(i)}}});var Zl=B((Q3,Yl)=>{"use strict";var{sha256:$l}=(Ii(),ii),jl=Gt(),{equals:Xl}=(fr(),Ki),{toString:xm}=(jt(),Kr);Pl();var Ga=xe(),vt=Gl(),Wa=ba(),vm=za(),$a=class{constructor(e){this._key=e}async verify(e,r){return vt.hashAndVerify(this._key,r,e)}marshal(){return vt.utils.jwkToPkix(this._key)}get bytes(){return Wa.PublicKey.encode({Type:Wa.KeyType.RSA,Data:this.marshal()}).finish()}encrypt(e){return vt.encrypt(this._key,e)}equals(e){return Xl(this.bytes,e.bytes)}async hash(){let{bytes:e}=await $l.digest(this.bytes);return e}},Sn=class{constructor(e,r){this._key=e,this._publicKey=r}genSecret(){return vt.getRandomValues(16)}async sign(e){return vt.hashAndSign(this._key,e)}get public(){if(!this._publicKey)throw jl(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new $a(this._publicKey)}decrypt(e){return vt.decrypt(this._key,e)}marshal(){return vt.utils.jwkToPkcs1(this._key)}get bytes(){return Wa.PrivateKey.encode({Type:Wa.KeyType.RSA,Data:this.marshal()}).finish()}equals(e){return Xl(this.bytes,e.bytes)}async hash(){let{bytes:e}=await $l.digest(this.bytes);return e}async id(){let e=await this.public.hash();return xm(e,"base58btc")}async export(e,r="pkcs-8"){if(r==="pkcs-8"){let i=new Ga.util.ByteBuffer(this.marshal()),n=Ga.asn1.fromDer(i),a=Ga.pki.privateKeyFromAsn1(n),s={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return Ga.pki.encryptRsaPrivateKey(a,e,s)}else{if(r==="libp2p-key")return vm.export(this.bytes,e);throw jl(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}};async function mm(t){let e=vt.utils.pkcs1ToJwk(t),r=await vt.unmarshalPrivateKey(e);return new Sn(r.privateKey,r.publicKey)}function bm(t){let e=vt.utils.pkixToJwk(t);return new $a(e)}async function wm(t){let e=await vt.unmarshalPrivateKey(t);return new Sn(e.privateKey,e.publicKey)}async function Em(t){let e=await vt.generateKey(t);return new Sn(e.privateKey,e.publicKey)}Yl.exports={RsaPublicKey:$a,RsaPrivateKey:Sn,unmarshalRsaPublicKey:bm,unmarshalRsaPrivateKey:mm,generateKeyPair:Em,fromJwk:wm}});var fp=B(Be=>{"use strict";var Sm=Be&&Be.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Be,"__esModule",{value:!0});Be.utils=Be.verify=Be.sign=Be.getPublicKey=Be.SignResult=Be.Signature=Be.Point=Be.ExtendedPoint=Be.CURVE=void 0;var Bm=Sm(Gr()),Qe=BigInt(0),te=BigInt(1),ut=BigInt(2),Ql=BigInt(8),Jl=BigInt(255),Le={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:ut**Jl-BigInt(19),n:ut**BigInt(252)+BigInt("27742317777372353535851937790883648493"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")};Be.CURVE=Le;var nt=32,Bn=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),_m=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),Am=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),Cm=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),Im=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),me=class{constructor(e,r,i,n){this.x=e,this.y=r,this.z=i,this.t=n}static fromAffine(e){if(!(e instanceof Ce))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(Ce.ZERO)?me.ZERO:new me(e.x,e.y,te,P(e.x*e.y))}static toAffineBatch(e){let r=Pm(e.map(i=>i.z));return e.map((i,n)=>i.toAffine(r[n]))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}static fromRistrettoHash(e){let r=i0(e.slice(0,nt)),i=this.calcElligatorRistrettoMap(r),n=i0(e.slice(nt,nt*2)),a=this.calcElligatorRistrettoMap(n);return i.add(a)}static calcElligatorRistrettoMap(e){let{d:r}=Le,i=P(Bn*e*e),n=P((i+te)*Cm),a=BigInt(-1),s=P((a-r*i)*P(i+r)),{isValid:o,value:f}=a0(n,s),u=P(f*e);kr(u)||(u=P(-u)),o||(f=u),o||(a=i);let c=P(a*(i-te)*Im-s),h=f*f,l=P((f+f)*s),d=P(c*_m),p=P(te-h),y=P(te+h);return new me(P(l*y),P(p*d),P(d*y),P(l*p))}static fromRistrettoBytes(e){let{a:r,d:i}=Le,n="ExtendedPoint.fromRistrettoBytes: Cannot convert bytes to Ristretto Point",a=i0(e);if(!Lm(rp(a,nt),e)||kr(a))throw new Error(n);let s=P(a*a),o=P(te+r*s),f=P(te-r*s),u=P(o*o),c=P(f*f),h=P(r*i*u-c),{isValid:l,value:d}=ip(P(h*c)),p=P(d*f),y=P(d*p*h),g=P((a+a)*p);kr(g)&&(g=P(-g));let v=P(o*y),b=P(g*v);if(!l||kr(b)||v===Qe)throw new Error(n);return new me(g,v,te,b)}toRistrettoBytes(){let{x:e,y:r,z:i,t:n}=this,a=P(P(i+r)*P(i-r)),s=P(e*r),{value:o}=ip(P(a*s**ut)),f=P(o*a),u=P(o*s),c=P(f*u*n),h;if(kr(n*c)){let d=P(r*Bn),p=P(e*Bn);e=d,r=p,h=P(f*Am)}else h=u;kr(e*c)&&(r=P(-r));let l=P((i-r)*h);return kr(l)&&(l=P(-l)),rp(l,nt)}equals(e){let r=this,i=e;return P(r.t*i.z)===P(i.t*r.z)}negate(){return new me(P(-this.x),this.y,this.z,P(-this.t))}double(){let e=this.x,r=this.y,i=this.z,{a:n}=Le,a=P(e**ut),s=P(r**ut),o=P(ut*i**ut),f=P(n*a),u=P((e+r)**ut-a-s),c=P(f+s),h=P(c-o),l=P(f-s),d=P(u*h),p=P(c*l),y=P(u*l),g=P(h*c);return new me(d,p,g,y)}add(e){let r=this.x,i=this.y,n=this.z,a=this.t,s=e.x,o=e.y,f=e.z,u=e.t,c=P((i-r)*(o+s)),h=P((i+r)*(o-s)),l=P(h-c);if(l===Qe)return this.double();let d=P(n*ut*u),p=P(a*ut*f),y=P(p+d),g=P(h+c),v=P(p-d),b=P(y*l),w=P(g*v),T=P(y*v),C=P(l*g);return new me(b,w,C,T)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){let r=op(e);if(r===te)return this;let i=me.ZERO,n=this;for(;r>Qe;)r&te&&(i=i.add(n)),n=n.double(),r>>=te;return i}precomputeWindow(e){let r=256/e+1,i=[],n=this,a=n;for(let s=0;s<r;s++){a=n,i.push(a);for(let o=1;o<2**(e-1);o++)a=a.add(n),i.push(a);n=a.double()}return i}wNAF(e,r){!r&&this.equals(me.BASE)&&(r=Ce.BASE);let i=r&&r._WINDOW_SIZE||1;if(256%i)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=r&&t0.get(r);n||(n=this.precomputeWindow(i),r&&i!==1&&(n=me.normalizeZ(n),t0.set(r,n)));let a=me.ZERO,s=me.ZERO,o=256/i+1,f=2**(i-1),u=BigInt(2**i-1),c=2**i,h=BigInt(i);for(let l=0;l<o;l++){let d=l*f,p=Number(e&u);if(e>>=h,p>f&&(p-=c,e+=te),p===0){let y=n[d];l%2&&(y=y.negate()),s=s.add(y)}else{let y=n[d+Math.abs(p)-1];p<0&&(y=y.negate()),a=a.add(y)}}return[a,s]}multiply(e,r){let i=op(e);return me.normalizeZ(this.wNAF(i,r))[0]}toAffine(e=n0(this.z)){let r=P(this.x*e),i=P(this.y*e);return new Ce(r,i)}};Be.ExtendedPoint=me;me.BASE=new me(Le.Gx,Le.Gy,te,P(Le.Gx*Le.Gy));me.ZERO=new me(Qe,te,te,Qe);var t0=new WeakMap,Ce=class{constructor(e,r){this.x=e,this.y=r}_setWindowSize(e){this._WINDOW_SIZE=e,t0.delete(this)}static fromHex(e){let{d:r,P:i}=Le,n=e instanceof Uint8Array?e:Ri(e);if(n.length!==32)throw new Error("Point.fromHex: expected 32 bytes");let a=n[31],s=a&~128,o=(a&128)!=0,f=Uint8Array.from(Array.from(n.slice(0,31)).concat(s)),u=_n(f);if(u>=i)throw new Error("Point.fromHex expects hex <= Fp");let c=P(u*u),h=P(c-te),l=P(r*c+te),{isValid:d,value:p}=a0(h,l);if(!d)throw new Error("Point.fromHex: invalid y coordinate");let y=(p&te)===te;return o!==y&&(p=P(-p)),new Ce(p,u)}static async fromPrivateKey(e){let r=await sp(e);return Ce.BASE.multiply(np(r))}toRawBytes(){let e=r0(this.y),r=new Uint8Array(nt);for(let n=e.length-2,a=0;a<nt&&n>=0;n-=2,a++)r[a]=tp(e[n]+e[n+1]);let i=this.x&te?128:0;return r[nt-1]|=i,r}toHex(){return ep(this.toRawBytes())}toX25519(){return P((te+this.y)*n0(te-this.y))}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Ce(P(-this.x),this.y)}add(e){return me.fromAffine(this).add(me.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return me.fromAffine(this).multiply(e,this).toAffine()}};Be.Point=Ce;Ce.BASE=new Ce(Le.Gx,Le.Gy);Ce.ZERO=new Ce(Qe,te);var Lr=class{constructor(e,r){this.r=e,this.s=r}static fromHex(e){e=o0(e);let r=Ce.fromHex(e.slice(0,32)),i=_n(e.slice(32));if(!ap(i))throw new Error("Signature.fromHex expects s <= CURVE.n");return new Lr(r,i)}toRawBytes(){let e=Ri(r0(this.s)).reverse(),r=new Uint8Array(nt);r.set(e);let i=new Uint8Array(nt*2);return i.set(this.r.toRawBytes()),i.set(r,32),i}toHex(){return ep(this.toRawBytes())}};Be.Signature=Lr;Be.SignResult=Lr;function Tm(...t){if(t.length===1)return t[0];let e=t.reduce((i,n)=>i+n.length,0),r=new Uint8Array(e);for(let i=0,n=0;i<t.length;i++){let a=t[i];r.set(a,n),n+=a.length}return r}function ep(t){let e="";for(let r=0;r<t.length;r++)e+=t[r].toString(16).padStart(2,"0");return e}function tp(t){let e=Number.parseInt(t,16);if(Number.isNaN(e))throw new Error("Invalid byte sequence");return e}function Ri(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let i=r*2;e[r]=tp(t.slice(i,i+2))}return e}function r0(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function rp(t,e=nt){let r=r0(t).padStart(e*2,"0");return Ri(r).reverse()}function kr(t){return(P(t)&te)===te}function _n(t){let e=Qe;for(let r=0;r<t.length;r++)e+=BigInt(t[r])<<Ql*BigInt(r);return e}function i0(t){return P(_n(t)&ut**Jl-te)}function P(t,e=Le.P){let r=t%e;return r>=Qe?r:e+r}function n0(t,e=Le.P){if(t===Qe||e<=Qe)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=P(t,e),i=e,n=Qe,a=te,s=te,o=Qe;for(;r!==Qe;){let u=i/r,c=i%r,h=n-s*u,l=a-o*u;i=r,r=c,n=s,a=o,s=h,o=l}if(i!==te)throw new Error("invert: does not exist");return P(n,e)}function Pm(t,e=Le.P){let r=t.length,i=new Array(r),n=te;for(let a=0;a<r;a++)t[a]!==Qe&&(i[a]=n,n=P(n*t[a],e));n=n0(n,e);for(let a=r-1;a>=0;a--){if(t[a]===Qe)continue;let s=P(n*t[a],e);t[a]=P(n*i[a],e),n=s}return t}function Zt(t,e){let{P:r}=Le,i=t;for(;e-- >Qe;)i*=i,i%=r;return i}function Km(t){let{P:e}=Le,[r,i,n,a,s]=[5,10,20,40,80].map(w=>BigInt(w)),f=t*t%e*t%e,u=Zt(f,ut)*f%e,c=Zt(u,te)*t%e,h=Zt(c,r)*c%e,l=Zt(h,i)*h%e,d=Zt(l,n)*l%e,p=Zt(d,a)*d%e,y=Zt(p,s)*p%e,g=Zt(y,s)*p%e,v=Zt(g,i)*h%e;return Zt(v,ut)*t%e}function a0(t,e){let r=P(e*e*e),i=P(r*r*e),n=P(t*r*Km(t*i)),a=P(e*n*n),s=n,o=P(n*Bn),f=a===t,u=a===P(-t),c=a===P(-t*Bn);return f&&(n=s),(u||c)&&(n=o),kr(n)&&(n=P(-n)),{isValid:f||u,value:n}}function ip(t){return a0(te,t)}async function s0(...t){let e=Tm(...t),r=await Be.utils.sha512(e),i=_n(r);return P(i,Le.n)}function Rm(t){return t.slice(nt)}function np(t){let e=nt-1,r=t.slice(0,nt);return r[0]&=248,r[e]&=127,r[e]|=64,P(_n(r),Le.n)}function Lm(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function o0(t){return t instanceof Uint8Array?t:Ri(t)}function ap(t){return 0<t&&t<Le.n}var km=ut**BigInt(256)-te;function Um(t){let e,r="Expected 32 bytes of private key";if(typeof t=="bigint"||typeof t=="number"&&Number.isSafeInteger(t)){let i=BigInt(t);if(i<0||i>km)throw new Error(r);e=Ri(i.toString(16).padStart(nt*2,"0"))}else if(typeof t=="string"){if(t.length!==64)throw new Error(r);e=Ri(t)}else if(t instanceof Uint8Array){if(t.length!==32)throw new Error(r);e=t}else throw new TypeError("Expected valid private key");return e}async function sp(t){return await Be.utils.sha512(Um(t))}function op(t){if(typeof t=="number"&&t>0&&Number.isSafeInteger(t))return BigInt(t);if(typeof t=="bigint"&&ap(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}async function Dm(t){let e=await Ce.fromPrivateKey(t);return typeof t=="string"?e.toHex():e.toRawBytes()}Be.getPublicKey=Dm;async function Nm(t,e){let r=await sp(e),i=np(r),n=Ce.BASE.multiply(i),a=o0(t),s=await s0(Rm(r),a),o=Ce.BASE.multiply(s),f=await s0(o.toRawBytes(),n.toRawBytes(),a),u=P(s+f*i,Le.n),c=new Lr(o,u);return typeof t=="string"?c.toHex():c.toRawBytes()}Be.sign=Nm;async function Fm(t,e,r){e=o0(e),r instanceof Ce||(r=Ce.fromHex(r)),t instanceof Lr||(t=Lr.fromHex(t));let i=await s0(t.r.toRawBytes(),r.toRawBytes(),e),n=me.fromAffine(r).multiplyUnsafe(i),a=me.BASE.multiply(t.s);return me.fromAffine(t.r).add(n).subtract(a).multiplyUnsafe(Ql).equals(me.ZERO)}Be.verify=Fm;Ce.BASE._setWindowSize(8);var Ur={node:Bm.default,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};Be.utils={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],randomBytes:(t=32)=>{if(Ur.web)return Ur.web.getRandomValues(new Uint8Array(t));if(Ur.node){let{randomBytes:e}=Ur.node;return new Uint8Array(e(t).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Be.utils.randomBytes(32),sha512:async t=>{if(Ur.web){let e=await Ur.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}else{if(Ur.node)return Uint8Array.from(Ur.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(t=8,e=Ce.BASE){let r=e.equals(Ce.BASE)?e:new Ce(e.x,e.y);return r._setWindowSize(t),r.multiply(te),r}}});var cp=B(Dr=>{"use strict";var An=fp(),Mm=32,Om=64,ja=32;Dr.publicKeyLength=Mm;Dr.privateKeyLength=Om;Dr.generateKey=async function(){let t=An.utils.randomPrivateKey(),e=await An.getPublicKey(t);return{privateKey:up(t,e),publicKey:e}};Dr.generateKeyFromSeed=async function(t){if(t.length!==ja)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let e=t,r=await An.getPublicKey(e);return{privateKey:up(e,r),publicKey:r}};Dr.hashAndSign=function(t,e){let r=t.slice(0,ja);return An.sign(e,r)};Dr.hashAndVerify=function(t,e,r){return An.verify(e,r,t)};function up(t,e){let r=new Uint8Array(Dr.privateKeyLength);for(let i=0;i<ja;i++)r[i]=t[i],r[ja+i]=e[i];return r}});var yp=B((tE,dp)=>{"use strict";var hp=Gt(),{equals:lp}=(fr(),Ki),{sha256:pp}=(Ii(),ii),{base58btc:qm}=(bi(),mi),{identity:Hm}=(Oa(),xn),Je=cp(),Xa=ba(),Vm=za(),Ya=class{constructor(e){this._key=ki(e,Je.publicKeyLength)}async verify(e,r){return Je.hashAndVerify(this._key,r,e)}marshal(){return this._key}get bytes(){return Xa.PublicKey.encode({Type:Xa.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return lp(this.bytes,e.bytes)}async hash(){let{bytes:e}=await pp.digest(this.bytes);return e}},Li=class{constructor(e,r){this._key=ki(e,Je.privateKeyLength),this._publicKey=ki(r,Je.publicKeyLength)}async sign(e){return Je.hashAndSign(this._key,e)}get public(){return new Ya(this._publicKey)}marshal(){return this._key}get bytes(){return Xa.PrivateKey.encode({Type:Xa.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return lp(this.bytes,e.bytes)}async hash(){let{bytes:e}=await pp.digest(this.bytes);return e}async id(){let e=await Hm.digest(this.public.bytes);return qm.encode(e.bytes).substring(1)}async export(e,r="libp2p-key"){if(r==="libp2p-key")return Vm.export(this.bytes,e);throw hp(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}};function zm(t){if(t.length>Je.privateKeyLength){t=ki(t,Je.privateKeyLength+Je.publicKeyLength);let i=t.slice(0,Je.privateKeyLength),n=t.slice(Je.privateKeyLength,t.length);return new Li(i,n)}t=ki(t,Je.privateKeyLength);let e=t.slice(0,Je.privateKeyLength),r=t.slice(Je.publicKeyLength);return new Li(e,r)}function Gm(t){return t=ki(t,Je.publicKeyLength),new Ya(t)}async function Wm(){let{privateKey:t,publicKey:e}=await Je.generateKey();return new Li(t,e)}async function $m(t){let{privateKey:e,publicKey:r}=await Je.generateKeyFromSeed(t);return new Li(e,r)}function ki(t,e){if(t=Uint8Array.from(t||[]),t.length!==e)throw hp(new Error(`Key must be a Uint8Array of length ${e}, got ${t.length}`),"ERR_INVALID_KEY_TYPE");return t}dp.exports={Ed25519PublicKey:Ya,Ed25519PrivateKey:Li,unmarshalEd25519PrivateKey:zm,unmarshalEd25519PublicKey:Gm,generateKeyPair:Wm,generateKeyPairFromSeed:$m}});var Pp=B(ie=>{"use strict";var jm=ie&&ie.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ie,"__esModule",{value:!0});ie.utils=ie.schnorr=ie.verify=ie.signSync=ie.sign=ie.getSharedSecret=ie.recoverPublicKey=ie.getPublicKey=ie.SignResult=ie.Signature=ie.Point=ie.CURVE=void 0;var Xm=jm(Gr()),re=BigInt(0),Te=BigInt(1),Ke=BigInt(2),Ui=BigInt(3),Ym=BigInt(8),gp=Ke**BigInt(256),ve={a:re,b:BigInt(7),P:gp-Ke**BigInt(32)-BigInt(977),n:gp-BigInt("432420386565659656852420866394968145599"),h:Te,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")};ie.CURVE=ve;function xp(t){let{a:e,b:r}=ve;return D(t**Ui+e*t+r)}var Za=ve.a===re,le=class{constructor(e,r,i){this.x=e,this.y=r,this.z=i}static fromAffine(e){if(!(e instanceof de))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new le(e.x,e.y,Te)}static toAffineBatch(e){let r=Qm(e.map(i=>i.z));return e.map((i,n)=>i.toAffine(r[n]))}static normalizeZ(e){return le.toAffineBatch(e).map(le.fromAffine)}equals(e){let r=this,i=e,n=D(r.z*r.z),a=D(r.z*n),s=D(i.z*i.z),o=D(i.z*s);return D(r.x*s)===D(n*i.x)&&D(r.y*o)===D(a*i.y)}negate(){return new le(this.x,D(-this.y),this.z)}double(){let e=this.x,r=this.y,i=this.z,n=D(e**Ke),a=D(r**Ke),s=D(a**Ke),o=D(Ke*(D(D((e+a)**Ke))-n-s)),f=D(Ui*n),u=D(f**Ke),c=D(u-Ke*o),h=D(f*(o-c)-Ym*s),l=D(Ke*r*i);return new le(c,h,l)}add(e){if(!(e instanceof le))throw new TypeError("JacobianPoint#add: expected JacobianPoint");let r=this.x,i=this.y,n=this.z,a=e.x,s=e.y,o=e.z;if(a===re||s===re)return this;if(r===re||i===re)return e;let f=D(n**Ke),u=D(o**Ke),c=D(r*u),h=D(a*f),l=D(i*o*u),d=D(D(s*n)*f),p=D(h-c),y=D(d-l);if(p===re)return y===re?this.double():le.ZERO;let g=D(p**Ke),v=D(p*g),b=D(c*g),w=D(y**Ke-v-Ke*b),T=D(y*(b-w)-l*v),C=D(n*o*p);return new le(w,T,C)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){let r=bp(e);if(!Za){let c=le.ZERO,h=this;for(;r>re;)r&Te&&(c=c.add(h)),h=h.double(),r>>=Te;return c}let{k1neg:i,k1:n,k2neg:a,k2:s}=Ep(r),o=le.ZERO,f=le.ZERO,u=this;for(;n>re||s>re;)n&Te&&(o=o.add(u)),s&Te&&(f=f.add(u)),u=u.double(),n>>=Te,s>>=Te;return i&&(o=o.negate()),a&&(f=f.negate()),f=new le(D(f.x*ve.beta),f.y,f.z),o.add(f)}precomputeWindow(e){let r=Za?128/e+1:256/e+1,i=[],n=this,a=n;for(let s=0;s<r;s++){a=n,i.push(a);for(let o=1;o<2**(e-1);o++)a=a.add(n),i.push(a);n=a.double()}return i}wNAF(e,r){!r&&this.equals(le.BASE)&&(r=de.BASE);let i=r&&r._WINDOW_SIZE||1;if(256%i)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=r&&f0.get(r);n||(n=this.precomputeWindow(i),r&&i!==1&&(n=le.normalizeZ(n),f0.set(r,n)));let a=le.ZERO,s=le.ZERO,o=Za?128/i+1:256/i+1,f=2**(i-1),u=BigInt(2**i-1),c=2**i,h=BigInt(i);for(let l=0;l<o;l++){let d=l*f,p=Number(e&u);if(e>>=h,p>f&&(p-=c,e+=Te),p===0){let y=n[d];l%2&&(y=y.negate()),s=s.add(y)}else{let y=n[d+Math.abs(p)-1];p<0&&(y=y.negate()),a=a.add(y)}}return{p:a,f:s}}multiply(e,r){let i=bp(e),n,a;if(Za){let{k1neg:s,k1:o,k2neg:f,k2:u}=Ep(i),{p:c,f:h}=this.wNAF(o,r),{p:l,f:d}=this.wNAF(u,r);s&&(c=c.negate()),f&&(l=l.negate()),l=new le(D(l.x*ve.beta),l.y,l.z),n=c.add(l),a=h.add(d)}else{let{p:s,f:o}=this.wNAF(i,r);n=s,a=o}return le.normalizeZ([n,a])[0]}toAffine(e=Tn(this.z)){let r=e**Ke,i=D(this.x*r),n=D(this.y*r*e);return new de(i,n)}};le.BASE=new le(ve.Gx,ve.Gy,Te);le.ZERO=new le(re,Te,re);var f0=new WeakMap,de=class{constructor(e,r){this.x=e,this.y=r}_setWindowSize(e){this._WINDOW_SIZE=e,f0.delete(this)}static fromCompressedHex(e){let r=e.length===32,i=mt(r?e:e.slice(1)),n=xp(i),a=Zm(n),s=(a&Te)===Te;r?s&&(a=D(-a)):(e[0]&1)==1!==s&&(a=D(-a));let o=new de(i,a);return o.assertValidity(),o}static fromUncompressedHex(e){let r=mt(e.slice(1,33)),i=mt(e.slice(33)),n=new de(r,i);return n.assertValidity(),n}static fromHex(e){let r=es(e),i=r[0];if(r.length===32||r.length===33&&(i===2||i===3))return this.fromCompressedHex(r);if(r.length===65&&i===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${r.length}`)}static fromPrivateKey(e){return de.BASE.multiply(Ni(e))}static fromSignature(e,r,i){let n=e instanceof Uint8Array?mt(e):lr(e),a=_p(r),{r:s,s:o}=a;if(i!==0&&i!==1)throw new Error("Cannot recover signature: invalid yParity bit");let f=2+(i&1),u=de.fromHex(`0${f}${Nr(s)}`),c=le.fromAffine(u).multiplyUnsafe(o),h=le.BASE.multiply(n),l=Tn(s,ve.n),p=c.subtract(h).multiplyUnsafe(l).toAffine();return p.assertValidity(),p}toRawBytes(e=!1){return Fr(this.toHex(e))}toHex(e=!1){let r=Nr(this.x);return e?`${this.y&Te?"03":"02"}${r}`:`04${r}${Nr(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let e="Point is not on elliptic curve",{P:r}=ve,{x:i,y:n}=this;if(i===re||n===re||i>=r||n>=r)throw new Error(e);let a=D(n*n),s=xp(i);if((a-s)%r!==re)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new de(this.x,D(-this.y))}double(){return le.fromAffine(this).double().toAffine()}add(e){return le.fromAffine(this).add(le.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return le.fromAffine(this).multiply(e,this).toAffine()}};ie.Point=de;de.BASE=new de(ve.Gx,ve.Gy);de.ZERO=new de(re,re);function vp(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}var hr=class{constructor(e,r){this.r=e,this.s=r}static fromCompact(e){if(typeof e!="string"&&!(e instanceof Uint8Array))throw new TypeError("Signature.fromCompact: Expected string or Uint8Array");let r=e instanceof Uint8Array?Qa(e):e;if(r.length!==128)throw new Error("Signature.fromCompact: Expected 64-byte hex");let i=new hr(lr(r.slice(0,64)),lr(r.slice(64,128)));return i.assertValidity(),i}static fromDER(e){let r="Signature.fromDER";if(typeof e!="string"&&!(e instanceof Uint8Array))throw new TypeError(`${r}: Expected string or Uint8Array`);let i=e instanceof Uint8Array?Qa(e):e,n=In(i.slice(2,4));if(i.slice(0,2)!=="30"||n!==i.length-4||i.slice(4,6)!=="02")throw new Error(`${r}: Invalid signature ${i}`);let a=In(i.slice(6,8)),s=8+a,o=i.slice(8,s);if(o.startsWith("00")&&In(o.slice(2,4))<=127)throw new Error(`${r}: Invalid r with trailing length`);let f=lr(o);if(i.slice(s,s+2)!=="02")throw new Error(`${r}: Invalid r-s separator`);let c=In(i.slice(s+2,s+4)),h=n-c-a-10;if(h>0||h===-4)throw new Error(`${r}: Invalid total length`);if(c>n-a-4)throw new Error(`${r}: Invalid s`);let l=s+4,d=i.slice(l,l+c);if(d.startsWith("00")&&In(d.slice(2,4))<=127)throw new Error(`${r}: Invalid s with trailing length`);let p=lr(d),y=new hr(f,p);return y.assertValidity(),y}static fromHex(e){return this.fromDER(e)}assertValidity(){let{r:e,s:r}=this;if(!Di(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Di(r))throw new Error("Invalid Signature: s must be 0 < s < n")}toDERRawBytes(e=!1){return Fr(this.toDERHex(e))}toDERHex(e=!1){let r=vp(Cn(this.s));if(e)return r;let i=vp(Cn(this.r)),n=Cn(i.length/2),a=Cn(r.length/2);return`30${Cn(i.length/2+r.length/2+4)}02${n}${i}02${a}${r}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Fr(this.toCompactHex())}toCompactHex(){return Nr(this.r)+Nr(this.s)}};ie.Signature=hr;ie.SignResult=hr;function mp(...t){if(t.length===1)return t[0];let e=t.reduce((i,n)=>i+n.length,0),r=new Uint8Array(e);for(let i=0,n=0;i<t.length;i++){let a=t[i];r.set(a,n),n+=a.length}return r}function Qa(t){let e="";for(let r=0;r<t.length;r++)e+=t[r].toString(16).padStart(2,"0");return e}function Nr(t){return t.toString(16).padStart(64,"0")}function Ja(t){return Fr(Nr(t))}function Cn(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function lr(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function Fr(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let i=r*2;e[r]=Number.parseInt(t.slice(i,i+2),16)}return e}function es(t){return t instanceof Uint8Array?t:Fr(t)}function mt(t){return lr(Qa(t))}function In(t){return Number.parseInt(t,16)*2}function bp(t){if(typeof t=="number"&&t>0&&Number.isSafeInteger(t))return BigInt(t);if(typeof t=="bigint"&&Di(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function D(t,e=ve.P){let r=t%e;return r>=0?r:e+r}function bt(t,e){let{P:r}=ve,i=t;for(;e-- >re;)i*=i,i%=r;return i}function Zm(t){let{P:e}=ve,r=BigInt(6),i=BigInt(11),n=BigInt(22),a=BigInt(23),s=BigInt(44),o=BigInt(88),f=t*t*t%e,u=f*f*t%e,c=bt(u,Ui)*u%e,h=bt(c,Ui)*u%e,l=bt(h,Ke)*f%e,d=bt(l,i)*l%e,p=bt(d,n)*d%e,y=bt(p,s)*p%e,g=bt(y,o)*y%e,v=bt(g,s)*p%e,b=bt(v,Ui)*u%e,w=bt(b,a)*d%e,T=bt(w,r)*f%e;return bt(T,Ke)}function Tn(t,e=ve.P){if(t===re||e<=re)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=D(t,e),i=e,n=re,a=Te,s=Te,o=re;for(;r!==re;){let u=i/r,c=i%r,h=n-s*u,l=a-o*u;i=r,r=c,n=s,a=o,s=h,o=l}if(i!==Te)throw new Error("invert: does not exist");return D(n,e)}function Qm(t,e=ve.P){let r=t.length,i=new Array(r),n=Te;for(let a=0;a<r;a++)t[a]!==re&&(i[a]=n,n=D(n*t[a],e));n=Tn(n,e);for(let a=r-1;a>=0;a--){if(t[a]===re)continue;let s=D(n*t[a],e);t[a]=D(n*i[a],e),n=s}return t}var wp=(t,e)=>(t+e/Ke)/e,ts=Ke**BigInt(128);function Ep(t){let{n:e}=ve,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-Te*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=r,s=wp(a*t,e),o=wp(-i*t,e),f=D(t-s*r-o*n,e),u=D(-s*i-o*a,e),c=f>ts,h=u>ts;if(c&&(f=e-f),h&&(u=e-u),f>ts||u>ts)throw new Error("splitScalarEndo: Endomorphism failed");return{k1neg:c,k1:f,k2neg:h,k2:u}}function Jm(t){typeof t!="string"&&(t=Qa(t));let e=lr(t||"0"),i=t.length/2*8-256;return i>0&&(e=e>>BigInt(i)),e>=ve.n&&(e-=ve.n),e}function Sp(t,e){if(t==null)throw new Error(`sign: expected valid msgHash, not "${t}"`);let r=typeof t=="string"?lr(t):mt(t),i=Ja(r),n=mt(i),a=Ja(e),s=new Uint8Array(32).fill(1),o=new Uint8Array(32).fill(0),f=Uint8Array.from([0]),u=Uint8Array.from([1]);return{h1:i,h1n:n,x:a,v:s,k:o,b0:f,b1:u}}async function eb(t,e){let r=Ni(e),{h1:i,h1n:n,x:a,v:s,k:o,b0:f,b1:u}=Sp(t,r),c=ie.utils.hmacSha256;o=await c(o,s,f,a,i),s=await c(o,s),o=await c(o,s,u,a,i),s=await c(o,s);for(let h=0;h<1e3;h++){s=await c(o,s);let l=Bp(s,n,r);if(l)return l;o=await c(o,s,f),s=await c(o,s)}throw new TypeError("secp256k1: Tried 1,000 k values for sign(), all were invalid")}function tb(t,e){let r=Ni(e),{h1:i,h1n:n,x:a,v:s,k:o,b0:f,b1:u}=Sp(t,r),c=ie.utils.hmacSha256Sync;if(!c)throw new Error("utils.hmacSha256Sync is undefined, you need to set it");if(o=c(o,s,f,a,i),o instanceof Promise)throw new Error("To use sync sign(), ensure utils.hmacSha256 is sync");s=c(o,s),o=c(o,s,u,a,i),s=c(o,s);for(let h=0;h<1e3;h++){s=c(o,s);let l=Bp(s,n,r);if(l)return l;o=c(o,s,f),s=c(o,s)}throw new TypeError("secp256k1: Tried 1,000 k values for sign(), all were invalid")}function Di(t){return 0<t&&t<ve.n}function Bp(t,e,r){let i=mt(t);if(!Di(i))return;let n=ve.n,a=de.BASE.multiply(i),s=D(a.x,n),o=D(Tn(i,n)*(e+s*r),n);if(!(s===re||o===re))return[a,s,o]}function Ni(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==64)throw new Error("Expected 32 bytes of private key");e=lr(t)}else if(t instanceof Uint8Array){if(t.length!==32)throw new Error("Expected 32 bytes of private key");e=mt(t)}else throw new TypeError("Expected valid private key");if(!Di(e))throw new Error("Expected private key: 0 < key < n");return e}function u0(t){return t instanceof de?(t.assertValidity(),t):de.fromHex(t)}function _p(t){return t instanceof hr?(t.assertValidity(),t):hr.fromDER(t)}function rb(t,e=!1){let r=de.fromPrivateKey(t);return typeof t=="string"?r.toHex(e):r.toRawBytes(e)}ie.getPublicKey=rb;function ib(t,e,r){let i=de.fromSignature(t,e,r);return typeof t=="string"?i.toHex():i.toRawBytes()}ie.recoverPublicKey=ib;function Ap(t){let e=t instanceof Uint8Array,r=typeof t=="string",i=(e||r)&&t.length;return e?i===33||i===65:r?i===66||i===130:t instanceof de}function nb(t,e,r=!1){if(Ap(t))throw new TypeError("getSharedSecret: first arg must be private key");if(!Ap(e))throw new TypeError("getSharedSecret: second arg must be public key");let i=u0(e);i.assertValidity();let n=i.multiply(Ni(t));return typeof t=="string"?n.toHex(r):n.toRawBytes(r)}ie.getSharedSecret=nb;function Cp(t,e,r=!1){let[i,n,a]=t,{canonical:s,der:o,recovered:f}=e,u=(i.x===n?0:2)|Number(i.y&Te),c=a,h=ve.n>>Te;a>h&&s&&(c=ve.n-a,u^=1);let l=new hr(n,c);l.assertValidity();let d=o===!1?l.toCompactHex():l.toDERHex(),p=r?d:Fr(d);return f?[p,u]:p}async function ab(t,e,r={}){return Cp(await eb(t,e),r,typeof t=="string")}ie.sign=ab;function sb(t,e,r={}){return Cp(tb(t,e),r,typeof t=="string")}ie.signSync=sb;function ob(t,e,r){let{n:i}=ve,n;try{n=_p(t)}catch(g){return!1}let{r:a,s}=n,o=Jm(e);if(o===re)return!1;let f=le.fromAffine(u0(r)),u=Tn(s,i),c=D(o*u,i),h=D(a*u,i),l=le.BASE.multiply(c),d=f.multiplyUnsafe(h),p=l.add(d).toAffine();return D(p.x,i)===a}ie.verify=ob;async function c0(t,...e){let r=new Uint8Array(t.split("").map(a=>a.charCodeAt(0))),i=await ie.utils.sha256(r),n=await ie.utils.sha256(mp(i,i,...e));return mt(n)}async function Ip(t,e,r){let i=Ja(t),n=await c0("BIP0340/challenge",i,e.toRawX(),r);return D(n,ve.n)}function h0(t){return D(t.y,Ke)===re}var ai=class{constructor(e,r){if(this.r=e,this.s=r,e<=re||r<=re||e>=ve.P||r>=ve.n)throw new Error("Invalid signature")}static fromHex(e){let r=es(e);if(r.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${r.length}`);let i=mt(r.slice(0,32)),n=mt(r.slice(32));return new ai(i,n)}toHex(){return Nr(this.r)+Nr(this.s)}toRawBytes(){return Fr(this.toHex())}};function fb(t){let e=de.fromPrivateKey(t);return typeof t=="string"?e.toHexX():e.toRawX()}async function ub(t,e,r=ie.utils.randomBytes()){if(t==null)throw new TypeError(`sign: Expected valid message, not "${t}"`);e||(e=re);let{n:i}=ve,n=es(t),a=Ni(e),s=es(r);if(s.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness");let o=de.fromPrivateKey(a),f=h0(o)?a:i-a,u=await c0("BIP0340/aux",s),c=f^u,h=await c0("BIP0340/nonce",Ja(c),o.toRawX(),n),l=D(h,i);if(l===re)throw new Error("sign: Creation of signature failed. k is zero");let d=de.fromPrivateKey(l),p=h0(d)?l:i-l,y=await Ip(d.x,o,n),g=new ai(d.x,D(p+y*f,i));if(!await Tp(g.toRawBytes(),n,o.toRawX()))throw new Error("sign: Invalid signature produced");return typeof t=="string"?g.toHex():g.toRawBytes()}async function Tp(t,e,r){let i=t instanceof ai?t:ai.fromHex(t),n=typeof e=="string"?Fr(e):e,a=u0(r),s=await Ip(i.r,a,n),o=de.fromPrivateKey(i.s),f=a.multiply(s),u=o.subtract(f);return!(u.equals(de.BASE)||!h0(u)||u.x!==i.r)}ie.schnorr={Signature:ai,getPublicKey:fb,sign:ub,verify:Tp};de.BASE._setWindowSize(8);var ht={node:Xm.default,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};ie.utils={isValidPrivateKey(t){try{return Ni(t),!0}catch(e){return!1}},randomBytes:(t=32)=>{if(ht.web)return ht.web.getRandomValues(new Uint8Array(t));if(ht.node){let{randomBytes:e}=ht.node;return new Uint8Array(e(t).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>{let t=8;for(;t--;){let e=ie.utils.randomBytes(32),r=mt(e);if(Di(r)&&r!==Te)return e}throw new Error("Valid private key was not found in 8 iterations. PRNG is broken")},sha256:async t=>{if(ht.web){let e=await ht.web.subtle.digest("SHA-256",t.buffer);return new Uint8Array(e)}else if(ht.node){let{createHash:e}=ht.node;return Uint8Array.from(e("sha256").update(t).digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(ht.web){let r=await ht.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),i=mp(...e),n=await ht.web.subtle.sign("HMAC",r,i);return new Uint8Array(n)}else if(ht.node){let{createHmac:r}=ht.node,i=r("sha256",t);for(let n of e)i.update(n);return Uint8Array.from(i.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,precompute(t=8,e=de.BASE){let r=e===de.BASE?e:new de(e.x,e.y);return r._setWindowSize(t),r.multiply(Ui),r}}});var Lp=B((iE,Rp)=>{"use strict";var Pn=Gt(),Mr=Pp(),{sha256:Kp}=(Ii(),ii);Rp.exports=()=>{let t=32;function e(){return Mr.utils.randomPrivateKey()}async function r(u,c){let{digest:h}=await Kp.digest(c);try{return await Mr.sign(h,u)}catch(l){throw Pn(l,"ERR_INVALID_INPUT")}}async function i(u,c,h){try{let{digest:l}=await Kp.digest(h);return Mr.verify(c,l,u)}catch(l){throw Pn(l,"ERR_INVALID_INPUT")}}function n(u){return Mr.Point.fromHex(u).toRawBytes(!0)}function a(u){return Mr.Point.fromHex(u).toRawBytes(!1)}function s(u){try{Mr.getPublicKey(u,!0)}catch(c){throw Pn(c,"ERR_INVALID_PRIVATE_KEY")}}function o(u){try{Mr.Point.fromHex(u)}catch(c){throw Pn(c,"ERR_INVALID_PUBLIC_KEY")}}function f(u){try{return Mr.getPublicKey(u,!0)}catch(c){throw Pn(c,"ERR_INVALID_PRIVATE_KEY")}}return{generateKey:e,privateKeyLength:t,hashAndSign:r,hashAndVerify:i,compressPublicKey:n,decompressPublicKey:a,validatePrivateKey:s,validatePublicKey:o,computePublicKey:f}}});var Np=B((nE,Dp)=>{"use strict";var{sha256:kp}=(Ii(),ii),cb=Gt(),{equals:Up}=(fr(),Ki),{toString:hb}=(jt(),Kr),lb=za();Dp.exports=(t,e,r)=>{r=r||Lp()();class i{constructor(u){r.validatePublicKey(u),this._key=u}verify(u,c){return r.hashAndVerify(this._key,c,u)}marshal(){return r.compressPublicKey(this._key)}get bytes(){return t.PublicKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(u){return Up(this.bytes,u.bytes)}async hash(){let{bytes:u}=await kp.digest(this.bytes);return u}}class n{constructor(u,c){this._key=u,this._publicKey=c||r.computePublicKey(u),r.validatePrivateKey(this._key),r.validatePublicKey(this._publicKey)}sign(u){return r.hashAndSign(this._key,u)}get public(){return new i(this._publicKey)}marshal(){return this._key}get bytes(){return t.PrivateKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(u){return Up(this.bytes,u.bytes)}async hash(){let{bytes:u}=await kp.digest(this.bytes);return u}async id(){let u=await this.public.hash();return hb(u,"base58btc")}async export(u,c="libp2p-key"){if(c==="libp2p-key")return lb.export(this.bytes,u);throw cb(new Error(`export format '${c}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function a(f){return new n(f)}function s(f){return new i(f)}async function o(){let f=await r.generateKey();return new n(f)}return{Secp256k1PublicKey:i,Secp256k1PrivateKey:n,unmarshalSecp256k1PrivateKey:a,unmarshalSecp256k1PublicKey:s,generateKeyPair:o}}});var Mp=B((aE,Fp)=>{"use strict";Fp.exports={SHA1:20,SHA256:32,SHA512:64}});var Hp=B(qp=>{"use strict";var Op=mn(),pb=Mp(),db={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"},yb=async(t,e)=>{let r=await Op.get().subtle.sign({name:"HMAC"},t,e);return new Uint8Array(r,r.byteOffset,r.byteLength)};qp.create=async function(t,e){let r=db[t],i=await Op.get().subtle.importKey("raw",e,{name:"HMAC",hash:{name:r}},!1,["sign"]);return{async digest(n){return yb(i,n)},length:pb[t]}}});var $p=B((oE,Wp)=>{"use strict";var Vp=Gt(),{concat:zp}=(or(),vn),{fromString:gb}=(Wt(),Pr),xb=Hp(),Gp={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,cipherKeySize:32}};Wp.exports=async(t,e,r)=>{let i=Gp[t];if(!i){let b=Object.keys(Gp).join(" / ");throw Vp(new Error(`unknown cipher type '${t}'. Must be ${b}`),"ERR_INVALID_CIPHER_TYPE")}if(!e)throw Vp(new Error("missing hash type"),"ERR_MISSING_HASH_TYPE");let n=i.keySize,a=i.ivSize,s=20,o=gb("key expansion"),f=2*(a+n+s),u=await xb.create(e,r),c=await u.digest(o),h=[],l=0;for(;l<f;){let b=await u.digest(zp([c,o])),w=b.length;l+w>f&&(w=f-l),h.push(b),l+=w,c=await u.digest(c)}let d=f/2,p=zp(h),y=p.slice(0,d),g=p.slice(d,f),v=b=>({iv:b.slice(0,a),cipherKey:b.slice(a,a+n),macKey:b.slice(a+n)});return{k1:v(y),k2:v(g)}}});var Xp=B((fE,jp)=>{"use strict";var vb=Gt();jp.exports=function(t,e){if(!t.includes(e)){let r=t.join(" / ");throw vb(new Error(`Unknown curve: ${e}. Must be ${r}`),"ERR_INVALID_CURVE")}}});var td=B(ed=>{"use strict";var mb=Gt(),Kn=mn(),{base64urlToBuffer:Yp}=Va(),bb=Xp(),{toString:l0}=(jt(),Kr),{concat:wb}=(or(),vn),{equals:Eb}=(fr(),Ki),Zp={"P-256":256,"P-384":384,"P-521":521};ed.generateEphmeralKeyPair=async function(t){bb(Object.keys(Zp),t);let e=await Kn.get().subtle.generateKey({name:"ECDH",namedCurve:t},!0,["deriveBits"]),r=async(n,a)=>{let s;a?s=await Kn.get().subtle.importKey("jwk",Bb(t,a),{name:"ECDH",namedCurve:t},!1,["deriveBits"]):s=e.privateKey;let o=[await Kn.get().subtle.importKey("jwk",Jp(t,n),{name:"ECDH",namedCurve:t},!1,[]),s],f=await Kn.get().subtle.deriveBits({name:"ECDH",namedCurve:t,public:o[0]},o[1],Zp[t]);return new Uint8Array(f,f.byteOffset,f.byteLength)},i=await Kn.get().subtle.exportKey("jwk",e.publicKey);return{key:Sb(i),genSharedKey:r}};var Qp={"P-256":32,"P-384":48,"P-521":66};function Sb(t){let e=Qp[t.crv];return wb([Uint8Array.from([4]),Yp(t.x,e),Yp(t.y,e)],1+e*2)}function Jp(t,e){let r=Qp[t];if(Eb(!e.slice(0,1),Uint8Array.from([4])))throw mb(new Error("Cannot unmarshal public key - invalid key format"),"ERR_INVALID_KEY_FORMAT");return{kty:"EC",crv:t,x:l0(e.slice(1,r+1),"base64url"),y:l0(e.slice(1+r),"base64url"),ext:!0}}var Bb=(t,e)=>({...Jp(t,e.public),d:l0(e.private,"base64url")})});var id=B((cE,rd)=>{"use strict";var _b=td();rd.exports=async t=>_b.generateEphmeralKeyPair(t)});var sd=B((hE,ad)=>{"use strict";var Qt=ba();pn();al();var p0=xe(),Rn=Gt(),{fromString:Ab}=(Wt(),Pr),Cb=_l(),wt={rsa:Zl(),ed25519:yp(),secp256k1:Np()(Qt,e0())},rs={message:"secp256k1 support requires libp2p-crypto-secp256k1 package",code:"ERR_MISSING_PACKAGE"};function Fi(t){let e=wt[t.toLowerCase()];if(!e){let r=Object.keys(wt).join(" / ");throw Rn(new Error(`invalid or unsupported key type ${t}. Must be ${r}`),"ERR_UNSUPPORTED_KEY_TYPE")}return e}var Ib=async(t,e)=>Fi(t).generateKeyPair(e),Tb=async(t,e,r)=>{let i=Fi(t);if(t.toLowerCase()!=="ed25519")throw Rn(new Error("Seed key derivation is unimplemented for RSA or secp256k1"),"ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return i.generateKeyPairFromSeed(e,r)},Pb=t=>{let e=Qt.PublicKey.decode(t),r=e.Data;switch(e.Type){case Qt.KeyType.RSA:return wt.rsa.unmarshalRsaPublicKey(r);case Qt.KeyType.Ed25519:return wt.ed25519.unmarshalEd25519PublicKey(r);case Qt.KeyType.Secp256k1:if(wt.secp256k1)return wt.secp256k1.unmarshalSecp256k1PublicKey(r);throw Rn(new Error(rs.message),rs.code);default:Fi(e.Type)}},Kb=(t,e)=>(e=(e||"rsa").toLowerCase(),Fi(e),t.bytes),nd=async t=>{let e=Qt.PrivateKey.decode(t),r=e.Data;switch(e.Type){case Qt.KeyType.RSA:return wt.rsa.unmarshalRsaPrivateKey(r);case Qt.KeyType.Ed25519:return wt.ed25519.unmarshalEd25519PrivateKey(r);case Qt.KeyType.Secp256k1:if(wt.secp256k1)return wt.secp256k1.unmarshalSecp256k1PrivateKey(r);throw Rn(new Error(rs.message),rs.code);default:Fi(e.Type)}},Rb=(t,e)=>(e=(e||"rsa").toLowerCase(),Fi(e),t.bytes),Lb=async(t,e)=>{try{let n=await Cb.import(t,e);return nd(n)}catch(n){}let r=p0.pki.decryptRsaPrivateKey(t,e);if(r===null)throw Rn(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let i=p0.asn1.toDer(p0.pki.privateKeyToAsn1(r));return i=Ab(i.getBytes(),"ascii"),wt.rsa.unmarshalRsaPrivateKey(i)};ad.exports={supportedKeys:wt,keysPBM:Qt,keyStretcher:$p(),generateEphemeralKeyPair:id(),generateKeyPair:Ib,generateKeyPairFromSeed:Tb,unmarshalPublicKey:Pb,marshalPublicKey:Kb,unmarshalPrivateKey:nd,marshalPrivateKey:Rb,import:Lb}});var od=B((lE,d0)=>{"use strict";function kb(t,{className:e,symbolName:r}){let i=Symbol.for(r),n={[e]:class extends t{constructor(...a){super(...a);Object.defineProperty(this,i,{value:!0})}get[Symbol.toStringTag](){return e}}}[e];return n[`is${e}`]=a=>!!(a&&a[i]),n}function Ub(t,{className:e,symbolName:r,withoutNew:i}){let n=Symbol.for(r),a={[e]:function(...s){if(i&&!(this instanceof a))return new a(...s);let o=t.call(this,...s)||this;return o&&!o[n]&&Object.defineProperty(o,n,{value:!0}),o}}[e];return a.prototype=Object.create(t.prototype),a.prototype.constructor=a,Object.defineProperty(a.prototype,Symbol.toStringTag,{get(){return e}}),a[`is${e}`]=s=>!!(s&&s[n]),a}d0.exports=kb;d0.exports.proto=Ub});var cd=B((pE,ud)=>{"use strict";var Mi=va(),fd=Mi.Reader,Db=Mi.Writer,Ue=Mi.util,Ln=Mi.roots["libp2p-peer-id"]||(Mi.roots["libp2p-peer-id"]={});Ln.PeerIdProto=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.id=Ue.newBuffer([]),t.prototype.pubKey=Ue.newBuffer([]),t.prototype.privKey=Ue.newBuffer([]),t.encode=function(r,i){return i||(i=Db.create()),i.uint32(10).bytes(r.id),r.pubKey!=null&&Object.hasOwnProperty.call(r,"pubKey")&&i.uint32(18).bytes(r.pubKey),r.privKey!=null&&Object.hasOwnProperty.call(r,"privKey")&&i.uint32(26).bytes(r.privKey),i},t.decode=function(r,i){r instanceof fd||(r=fd.create(r));for(var n=i===void 0?r.len:r.pos+i,a=new Ln.PeerIdProto;r.pos<n;){var s=r.uint32();switch(s>>>3){case 1:a.id=r.bytes();break;case 2:a.pubKey=r.bytes();break;case 3:a.privKey=r.bytes();break;default:r.skipType(s&7);break}}if(!a.hasOwnProperty("id"))throw Ue.ProtocolError("missing required 'id'",{instance:a});return a},t.fromObject=function(r){if(r instanceof Ln.PeerIdProto)return r;var i=new Ln.PeerIdProto;return r.id!=null&&(typeof r.id=="string"?Ue.base64.decode(r.id,i.id=Ue.newBuffer(Ue.base64.length(r.id)),0):r.id.length&&(i.id=r.id)),r.pubKey!=null&&(typeof r.pubKey=="string"?Ue.base64.decode(r.pubKey,i.pubKey=Ue.newBuffer(Ue.base64.length(r.pubKey)),0):r.pubKey.length&&(i.pubKey=r.pubKey)),r.privKey!=null&&(typeof r.privKey=="string"?Ue.base64.decode(r.privKey,i.privKey=Ue.newBuffer(Ue.base64.length(r.privKey)),0):r.privKey.length&&(i.privKey=r.privKey)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(i.bytes===String?n.id="":(n.id=[],i.bytes!==Array&&(n.id=Ue.newBuffer(n.id))),i.bytes===String?n.pubKey="":(n.pubKey=[],i.bytes!==Array&&(n.pubKey=Ue.newBuffer(n.pubKey))),i.bytes===String?n.privKey="":(n.privKey=[],i.bytes!==Array&&(n.privKey=Ue.newBuffer(n.privKey)))),r.id!=null&&r.hasOwnProperty("id")&&(n.id=i.bytes===String?Ue.base64.encode(r.id,0,r.id.length):i.bytes===Array?Array.prototype.slice.call(r.id):r.id),r.pubKey!=null&&r.hasOwnProperty("pubKey")&&(n.pubKey=i.bytes===String?Ue.base64.encode(r.pubKey,0,r.pubKey.length):i.bytes===Array?Array.prototype.slice.call(r.pubKey):r.pubKey),r.privKey!=null&&r.hasOwnProperty("privKey")&&(n.privKey=i.bytes===String?Ue.base64.encode(r.privKey,0,r.privKey.length):i.bytes===Array?Array.prototype.slice.call(r.privKey):r.privKey),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Mi.util.toJSONOptions)},t}();ud.exports=Ln});var md=B((et,vd)=>{"use strict";var{CID:y0}=(ao(),Gu),Nb=(nn(),rn),Fb=(so(),la),Mb=(bi(),mi),Ob=(sn(),Ei),{base58btc:g0}=(bi(),mi),{base32:qb}=(nn(),rn),{base16:hd}=(oo(),pa),kn=(tn(),fa),Jt=sd(),Hb=od(),{PeerIdProto:ld}=cd(),{equals:si}=(fr(),Ki),{fromString:Un}=(Wt(),Pr),{toString:Vb}=(jt(),Kr),{identity:is}=(Oa(),xn),pd={...Nb,...Fb,...Mb,...Ob},zb=Object.keys(pd).reduce((t,e)=>t.or(pd[e]),qb.decoder),Gb=112,dd=114,yd=class{constructor(e,r,i){if(!(e instanceof Uint8Array))throw new Error("invalid id provided");if(r&&i&&!si(r.public.bytes,i.bytes))throw new Error("inconsistent arguments");this._id=e,this._idB58String=g0.encode(this.id).substring(1),this._privKey=r,this._pubKey=i}get id(){return this._id}set id(e){throw new Error("Id is immutable")}get privKey(){return this._privKey}set privKey(e){this._privKey=e}get pubKey(){if(this._pubKey)return this._pubKey;if(this._privKey)return this._privKey.public;try{let e=kn.decode(this.id);e.code===is.code&&(this._pubKey=Jt.unmarshalPublicKey(e.digest))}catch(e){}return this._pubKey}set pubKey(e){this._pubKey=e}marshalPubKey(){if(this.pubKey)return Jt.marshalPublicKey(this.pubKey)}marshalPrivKey(){if(this.privKey)return Jt.marshalPrivateKey(this.privKey)}marshal(e){return ld.encode({id:this.toBytes(),pubKey:this.marshalPubKey(),privKey:e?null:this.marshalPrivKey()}).finish()}toPrint(){let e=this.toB58String();e.startsWith("Qm")&&(e=e.slice(2));let r=6;return e.length<r&&(r=e.length),"<peer.ID "+e.substr(0,r)+">"}toJSON(){return{id:this.toB58String(),privKey:xd(this.marshalPrivKey()),pubKey:xd(this.marshalPubKey())}}toHexString(){return hd.encode(this.id).substring(1)}toBytes(){return this.id}toB58String(){return this._idB58String}toString(){if(!this._idCIDString){let e=y0.createV1(dd,kn.decode(this.id));Object.defineProperty(this,"_idCIDString",{value:e.toString(),enumerable:!1})}return this._idCIDString}equals(e){if(e instanceof Uint8Array)return si(this.id,e);if(e.id)return si(this.id,e.id);throw new Error("not valid Id")}isEqual(e){return this.equals(e)}isValid(){return Boolean(this.privKey&&this.privKey.public&&this.privKey.public.bytes&&this.pubKey.bytes instanceof Uint8Array&&si(this.privKey.public.bytes,this.pubKey.bytes))}hasInlinePublicKey(){try{if(kn.decode(this.id).code===is.code)return!0}catch(e){}return!1}},er=Hb(yd,{className:"PeerId",symbolName:"@libp2p/js-peer-id/PeerId"});et=vd.exports=er;var Dn=t=>t.bytes.length<=42?kn.create(is.code,t.bytes).bytes:t.hash(),x0=async(t,e)=>{let r=await Dn(e);return new er(r,t,e)};et.create=async t=>{t=t||{},t.bits=t.bits||2048,t.keyType=t.keyType||"RSA";let e=await Jt.generateKeyPair(t.keyType,t.bits);return x0(e,e.public)};et.createFromHexString=t=>new er(hd.decode("f"+t));et.createFromBytes=t=>{try{let e=y0.decode(t);if(!gd(e))throw new Error("Supplied PeerID CID is invalid");return et.createFromCID(e)}catch{if(kn.decode(t).code!==is.code)throw new Error("Supplied PeerID CID is invalid");return new er(t)}};et.createFromB58String=t=>et.createFromBytes(g0.decode("z"+t));var gd=t=>t.code===dd||t.code===Gb;et.createFromCID=t=>{if(t=y0.asCID(t),!t||!gd(t))throw new Error("Supplied PeerID CID is invalid");return new er(t.multihash.bytes)};et.createFromPubKey=async t=>{let e=t;if(typeof e=="string"&&(e=Un(t,"base64pad")),!(e instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let r=await Jt.unmarshalPublicKey(e);return x0(void 0,r)};et.createFromPrivKey=async t=>{if(typeof t=="string"&&(t=Un(t,"base64pad")),!(t instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let e=await Jt.unmarshalPrivateKey(t);return x0(e,e.public)};et.createFromJSON=async t=>{let e=g0.decode("z"+t.id),r=t.privKey&&Un(t.privKey,"base64pad"),i=t.pubKey&&Un(t.pubKey,"base64pad"),n=i&&await Jt.unmarshalPublicKey(i);if(!r)return new er(e,void 0,n);let a=await Jt.unmarshalPrivateKey(r),s=await Dn(a.public),o;if(n&&(o=await Dn(n)),n&&!si(s,o))throw new Error("Public and private key do not match");if(e&&!si(s,e))throw new Error("Id and private key do not match");return new er(e,a,n)};et.createFromProtobuf=async t=>{typeof t=="string"&&(t=Un(t,"base16"));let{id:e,privKey:r,pubKey:i}=ld.decode(t);r=r?await Jt.unmarshalPrivateKey(r):!1,i=i?await Jt.unmarshalPublicKey(i):!1;let n,a;if(r&&(a=await Dn(r.public)),i&&(n=await Dn(i)),r){if(i&&!si(a,n))throw new Error("Public and private key do not match");return new er(a,r,r.public)}if(i)return new er(n,void 0,i);if(e)return new er(e);throw new Error("Protobuf did not contain any usable key material")};et.parse=t=>((t.charAt(0)==="1"||t.charAt(0)==="Q")&&(t=`z${t}`),et.createFromBytes(zb.decode(t)));et.isPeerId=t=>Boolean(typeof t=="object"&&t._id&&t._idB58String);function xd(t){if(t)return Vb(t,"base64pad")}});var wd=B((bd,Nn)=>{(function(t,e){typeof define=="function"&&define.amd?define(["protobufjs/minimal"],e):typeof zn=="function"&&typeof Nn=="object"&&Nn&&Nn.exports&&(Nn.exports=e(va()))})(bd,function(t){"use strict";var e=t.Reader,r=t.Writer,i=t.util,n=t.roots["libp2p-noise"]||(t.roots["libp2p-noise"]={});return n.pb=function(){var a={};return a.NoiseHandshakePayload=function(){function s(o){if(o)for(var f=Object.keys(o),u=0;u<f.length;++u)o[f[u]]!=null&&(this[f[u]]=o[f[u]])}return s.prototype.identityKey=i.newBuffer([]),s.prototype.identitySig=i.newBuffer([]),s.prototype.data=i.newBuffer([]),s.create=function(f){return new s(f)},s.encode=function(f,u){return u||(u=r.create()),f.identityKey!=null&&Object.hasOwnProperty.call(f,"identityKey")&&u.uint32(10).bytes(f.identityKey),f.identitySig!=null&&Object.hasOwnProperty.call(f,"identitySig")&&u.uint32(18).bytes(f.identitySig),f.data!=null&&Object.hasOwnProperty.call(f,"data")&&u.uint32(26).bytes(f.data),u},s.encodeDelimited=function(f,u){return this.encode(f,u).ldelim()},s.decode=function(f,u){f instanceof e||(f=e.create(f));for(var c=u===void 0?f.len:f.pos+u,h=new n.pb.NoiseHandshakePayload;f.pos<c;){var l=f.uint32();switch(l>>>3){case 1:h.identityKey=f.bytes();break;case 2:h.identitySig=f.bytes();break;case 3:h.data=f.bytes();break;default:f.skipType(l&7);break}}return h},s.decodeDelimited=function(f){return f instanceof e||(f=new e(f)),this.decode(f,f.uint32())},s.verify=function(f){return typeof f!="object"||f===null?"object expected":f.identityKey!=null&&f.hasOwnProperty("identityKey")&&!(f.identityKey&&typeof f.identityKey.length=="number"||i.isString(f.identityKey))?"identityKey: buffer expected":f.identitySig!=null&&f.hasOwnProperty("identitySig")&&!(f.identitySig&&typeof f.identitySig.length=="number"||i.isString(f.identitySig))?"identitySig: buffer expected":f.data!=null&&f.hasOwnProperty("data")&&!(f.data&&typeof f.data.length=="number"||i.isString(f.data))?"data: buffer expected":null},s.fromObject=function(f){if(f instanceof n.pb.NoiseHandshakePayload)return f;var u=new n.pb.NoiseHandshakePayload;return f.identityKey!=null&&(typeof f.identityKey=="string"?i.base64.decode(f.identityKey,u.identityKey=i.newBuffer(i.base64.length(f.identityKey)),0):f.identityKey.length&&(u.identityKey=f.identityKey)),f.identitySig!=null&&(typeof f.identitySig=="string"?i.base64.decode(f.identitySig,u.identitySig=i.newBuffer(i.base64.length(f.identitySig)),0):f.identitySig.length&&(u.identitySig=f.identitySig)),f.data!=null&&(typeof f.data=="string"?i.base64.decode(f.data,u.data=i.newBuffer(i.base64.length(f.data)),0):f.data.length&&(u.data=f.data)),u},s.toObject=function(f,u){u||(u={});var c={};return u.defaults&&(u.bytes===String?c.identityKey="":(c.identityKey=[],u.bytes!==Array&&(c.identityKey=i.newBuffer(c.identityKey))),u.bytes===String?c.identitySig="":(c.identitySig=[],u.bytes!==Array&&(c.identitySig=i.newBuffer(c.identitySig))),u.bytes===String?c.data="":(c.data=[],u.bytes!==Array&&(c.data=i.newBuffer(c.data)))),f.identityKey!=null&&f.hasOwnProperty("identityKey")&&(c.identityKey=u.bytes===String?i.base64.encode(f.identityKey,0,f.identityKey.length):u.bytes===Array?Array.prototype.slice.call(f.identityKey):f.identityKey),f.identitySig!=null&&f.hasOwnProperty("identitySig")&&(c.identitySig=u.bytes===String?i.base64.encode(f.identitySig,0,f.identitySig.length):u.bytes===Array?Array.prototype.slice.call(f.identitySig):f.identitySig),f.data!=null&&f.hasOwnProperty("data")&&(c.data=u.bytes===String?i.base64.encode(f.data,0,f.data.length):u.bytes===Array?Array.prototype.slice.call(f.data):f.data),c},s.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},s}(),a}(),n})});var Td=B(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});var tt=Wi(),m0=Pt(),Xb=20;function Yb(t,e,r){for(var i=1634760805,n=857760878,a=2036477234,s=1797285236,o=r[3]<<24|r[2]<<16|r[1]<<8|r[0],f=r[7]<<24|r[6]<<16|r[5]<<8|r[4],u=r[11]<<24|r[10]<<16|r[9]<<8|r[8],c=r[15]<<24|r[14]<<16|r[13]<<8|r[12],h=r[19]<<24|r[18]<<16|r[17]<<8|r[16],l=r[23]<<24|r[22]<<16|r[21]<<8|r[20],d=r[27]<<24|r[26]<<16|r[25]<<8|r[24],p=r[31]<<24|r[30]<<16|r[29]<<8|r[28],y=e[3]<<24|e[2]<<16|e[1]<<8|e[0],g=e[7]<<24|e[6]<<16|e[5]<<8|e[4],v=e[11]<<24|e[10]<<16|e[9]<<8|e[8],b=e[15]<<24|e[14]<<16|e[13]<<8|e[12],w=i,T=n,C=a,A=s,R=o,L=f,N=u,O=c,$=h,G=l,ne=d,ye=p,M=y,H=g,_=v,q=b,be=0;be<Xb;be+=2)w=w+R|0,M^=w,M=M>>>32-16|M<<16,$=$+M|0,R^=$,R=R>>>32-12|R<<12,T=T+L|0,H^=T,H=H>>>32-16|H<<16,G=G+H|0,L^=G,L=L>>>32-12|L<<12,C=C+N|0,_^=C,_=_>>>32-16|_<<16,ne=ne+_|0,N^=ne,N=N>>>32-12|N<<12,A=A+O|0,q^=A,q=q>>>32-16|q<<16,ye=ye+q|0,O^=ye,O=O>>>32-12|O<<12,C=C+N|0,_^=C,_=_>>>32-8|_<<8,ne=ne+_|0,N^=ne,N=N>>>32-7|N<<7,A=A+O|0,q^=A,q=q>>>32-8|q<<8,ye=ye+q|0,O^=ye,O=O>>>32-7|O<<7,T=T+L|0,H^=T,H=H>>>32-8|H<<8,G=G+H|0,L^=G,L=L>>>32-7|L<<7,w=w+R|0,M^=w,M=M>>>32-8|M<<8,$=$+M|0,R^=$,R=R>>>32-7|R<<7,w=w+L|0,q^=w,q=q>>>32-16|q<<16,ne=ne+q|0,L^=ne,L=L>>>32-12|L<<12,T=T+N|0,M^=T,M=M>>>32-16|M<<16,ye=ye+M|0,N^=ye,N=N>>>32-12|N<<12,C=C+O|0,H^=C,H=H>>>32-16|H<<16,$=$+H|0,O^=$,O=O>>>32-12|O<<12,A=A+R|0,_^=A,_=_>>>32-16|_<<16,G=G+_|0,R^=G,R=R>>>32-12|R<<12,C=C+O|0,H^=C,H=H>>>32-8|H<<8,$=$+H|0,O^=$,O=O>>>32-7|O<<7,A=A+R|0,_^=A,_=_>>>32-8|_<<8,G=G+_|0,R^=G,R=R>>>32-7|R<<7,T=T+N|0,M^=T,M=M>>>32-8|M<<8,ye=ye+M|0,N^=ye,N=N>>>32-7|N<<7,w=w+L|0,q^=w,q=q>>>32-8|q<<8,ne=ne+q|0,L^=ne,L=L>>>32-7|L<<7;tt.writeUint32LE(w+i|0,t,0),tt.writeUint32LE(T+n|0,t,4),tt.writeUint32LE(C+a|0,t,8),tt.writeUint32LE(A+s|0,t,12),tt.writeUint32LE(R+o|0,t,16),tt.writeUint32LE(L+f|0,t,20),tt.writeUint32LE(N+u|0,t,24),tt.writeUint32LE(O+c|0,t,28),tt.writeUint32LE($+h|0,t,32),tt.writeUint32LE(G+l|0,t,36),tt.writeUint32LE(ne+d|0,t,40),tt.writeUint32LE(ye+p|0,t,44),tt.writeUint32LE(M+y|0,t,48),tt.writeUint32LE(H+g|0,t,52),tt.writeUint32LE(_+v|0,t,56),tt.writeUint32LE(q+b|0,t,60)}function Id(t,e,r,i,n){if(n===void 0&&(n=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<r.length)throw new Error("ChaCha: destination is shorter than source");var a,s;if(n===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");a=new Uint8Array(16),s=a.length-e.length,a.set(e,s)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");a=e,s=n}for(var o=new Uint8Array(64),f=0;f<r.length;f+=64){Yb(o,a,t);for(var u=f;u<f+64&&u<r.length;u++)i[u]=r[u]^o[u-f];Qb(a,0,s)}return m0.wipe(o),n===0&&m0.wipe(a),i}ss.streamXOR=Id;function Zb(t,e,r,i){return i===void 0&&(i=0),m0.wipe(r),Id(t,e,r,r,i)}ss.stream=Zb;function Qb(t,e,r){for(var i=1;r--;)i=i+(t[e]&255)|0,t[e]=i&255,i>>>=8,e++;if(i>0)throw new Error("ChaCha: counter overflow")}});var Kd=B(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});var Jb=na(),os=Pt();dr.DIGEST_LENGTH=16;var Pd=function(){function t(e){this.digestLength=dr.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=e[0]|e[1]<<8;this._r[0]=r&8191;var i=e[2]|e[3]<<8;this._r[1]=(r>>>13|i<<3)&8191;var n=e[4]|e[5]<<8;this._r[2]=(i>>>10|n<<6)&7939;var a=e[6]|e[7]<<8;this._r[3]=(n>>>7|a<<9)&8191;var s=e[8]|e[9]<<8;this._r[4]=(a>>>4|s<<12)&255,this._r[5]=s>>>1&8190;var o=e[10]|e[11]<<8;this._r[6]=(s>>>14|o<<2)&8191;var f=e[12]|e[13]<<8;this._r[7]=(o>>>11|f<<5)&8065;var u=e[14]|e[15]<<8;this._r[8]=(f>>>8|u<<8)&8191,this._r[9]=u>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return t.prototype._blocks=function(e,r,i){for(var n=this._fin?0:1<<11,a=this._h[0],s=this._h[1],o=this._h[2],f=this._h[3],u=this._h[4],c=this._h[5],h=this._h[6],l=this._h[7],d=this._h[8],p=this._h[9],y=this._r[0],g=this._r[1],v=this._r[2],b=this._r[3],w=this._r[4],T=this._r[5],C=this._r[6],A=this._r[7],R=this._r[8],L=this._r[9];i>=16;){var N=e[r+0]|e[r+1]<<8;a+=N&8191;var O=e[r+2]|e[r+3]<<8;s+=(N>>>13|O<<3)&8191;var $=e[r+4]|e[r+5]<<8;o+=(O>>>10|$<<6)&8191;var G=e[r+6]|e[r+7]<<8;f+=($>>>7|G<<9)&8191;var ne=e[r+8]|e[r+9]<<8;u+=(G>>>4|ne<<12)&8191,c+=ne>>>1&8191;var ye=e[r+10]|e[r+11]<<8;h+=(ne>>>14|ye<<2)&8191;var M=e[r+12]|e[r+13]<<8;l+=(ye>>>11|M<<5)&8191;var H=e[r+14]|e[r+15]<<8;d+=(M>>>8|H<<8)&8191,p+=H>>>5|n;var _=0,q=_;q+=a*y,q+=s*(5*L),q+=o*(5*R),q+=f*(5*A),q+=u*(5*C),_=q>>>13,q&=8191,q+=c*(5*T),q+=h*(5*w),q+=l*(5*b),q+=d*(5*v),q+=p*(5*g),_+=q>>>13,q&=8191;var be=_;be+=a*g,be+=s*y,be+=o*(5*L),be+=f*(5*R),be+=u*(5*A),_=be>>>13,be&=8191,be+=c*(5*C),be+=h*(5*T),be+=l*(5*w),be+=d*(5*b),be+=p*(5*v),_+=be>>>13,be&=8191;var Z=_;Z+=a*v,Z+=s*g,Z+=o*y,Z+=f*(5*L),Z+=u*(5*R),_=Z>>>13,Z&=8191,Z+=c*(5*A),Z+=h*(5*C),Z+=l*(5*T),Z+=d*(5*w),Z+=p*(5*b),_+=Z>>>13,Z&=8191;var Q=_;Q+=a*b,Q+=s*v,Q+=o*g,Q+=f*y,Q+=u*(5*L),_=Q>>>13,Q&=8191,Q+=c*(5*R),Q+=h*(5*A),Q+=l*(5*C),Q+=d*(5*T),Q+=p*(5*w),_+=Q>>>13,Q&=8191;var J=_;J+=a*w,J+=s*b,J+=o*v,J+=f*g,J+=u*y,_=J>>>13,J&=8191,J+=c*(5*L),J+=h*(5*R),J+=l*(5*A),J+=d*(5*C),J+=p*(5*T),_+=J>>>13,J&=8191;var oe=_;oe+=a*T,oe+=s*w,oe+=o*b,oe+=f*v,oe+=u*g,_=oe>>>13,oe&=8191,oe+=c*y,oe+=h*(5*L),oe+=l*(5*R),oe+=d*(5*A),oe+=p*(5*C),_+=oe>>>13,oe&=8191;var fe=_;fe+=a*C,fe+=s*T,fe+=o*w,fe+=f*b,fe+=u*v,_=fe>>>13,fe&=8191,fe+=c*g,fe+=h*y,fe+=l*(5*L),fe+=d*(5*R),fe+=p*(5*A),_+=fe>>>13,fe&=8191;var ue=_;ue+=a*A,ue+=s*C,ue+=o*T,ue+=f*w,ue+=u*b,_=ue>>>13,ue&=8191,ue+=c*v,ue+=h*g,ue+=l*y,ue+=d*(5*L),ue+=p*(5*R),_+=ue>>>13,ue&=8191;var ce=_;ce+=a*R,ce+=s*A,ce+=o*C,ce+=f*T,ce+=u*w,_=ce>>>13,ce&=8191,ce+=c*b,ce+=h*v,ce+=l*g,ce+=d*y,ce+=p*(5*L),_+=ce>>>13,ce&=8191;var he=_;he+=a*L,he+=s*R,he+=o*A,he+=f*C,he+=u*T,_=he>>>13,he&=8191,he+=c*w,he+=h*b,he+=l*v,he+=d*g,he+=p*y,_+=he>>>13,he&=8191,_=(_<<2)+_|0,_=_+q|0,q=_&8191,_=_>>>13,be+=_,a=q,s=be,o=Z,f=Q,u=J,c=oe,h=fe,l=ue,d=ce,p=he,r+=16,i-=16}this._h[0]=a,this._h[1]=s,this._h[2]=o,this._h[3]=f,this._h[4]=u,this._h[5]=c,this._h[6]=h,this._h[7]=l,this._h[8]=d,this._h[9]=p},t.prototype.finish=function(e,r){r===void 0&&(r=0);var i=new Uint16Array(10),n,a,s,o;if(this._leftover){for(o=this._leftover,this._buffer[o++]=1;o<16;o++)this._buffer[o]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(n=this._h[1]>>>13,this._h[1]&=8191,o=2;o<10;o++)this._h[o]+=n,n=this._h[o]>>>13,this._h[o]&=8191;for(this._h[0]+=n*5,n=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=n,n=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=n,i[0]=this._h[0]+5,n=i[0]>>>13,i[0]&=8191,o=1;o<10;o++)i[o]=this._h[o]+n,n=i[o]>>>13,i[o]&=8191;for(i[9]-=1<<13,a=(n^1)-1,o=0;o<10;o++)i[o]&=a;for(a=~a,o=0;o<10;o++)this._h[o]=this._h[o]&a|i[o];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,s=this._h[0]+this._pad[0],this._h[0]=s&65535,o=1;o<8;o++)s=(this._h[o]+this._pad[o]|0)+(s>>>16)|0,this._h[o]=s&65535;return e[r+0]=this._h[0]>>>0,e[r+1]=this._h[0]>>>8,e[r+2]=this._h[1]>>>0,e[r+3]=this._h[1]>>>8,e[r+4]=this._h[2]>>>0,e[r+5]=this._h[2]>>>8,e[r+6]=this._h[3]>>>0,e[r+7]=this._h[3]>>>8,e[r+8]=this._h[4]>>>0,e[r+9]=this._h[4]>>>8,e[r+10]=this._h[5]>>>0,e[r+11]=this._h[5]>>>8,e[r+12]=this._h[6]>>>0,e[r+13]=this._h[6]>>>8,e[r+14]=this._h[7]>>>0,e[r+15]=this._h[7]>>>8,this._finished=!0,this},t.prototype.update=function(e){var r=0,i=e.length,n;if(this._leftover){n=16-this._leftover,n>i&&(n=i);for(var a=0;a<n;a++)this._buffer[this._leftover+a]=e[r+a];if(i-=n,r+=n,this._leftover+=n,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(i>=16&&(n=i-i%16,this._blocks(e,r,n),r+=n,i-=n),i){for(var a=0;a<i;a++)this._buffer[this._leftover+a]=e[r+a];this._leftover+=i}return this},t.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},t.prototype.clean=function(){return os.wipe(this._buffer),os.wipe(this._r),os.wipe(this._h),os.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},t}();dr.Poly1305=Pd;function ew(t,e){var r=new Pd(t);r.update(e);var i=r.digest();return r.clean(),i}dr.oneTimeAuth=ew;function tw(t,e){return t.length!==dr.DIGEST_LENGTH||e.length!==dr.DIGEST_LENGTH?!1:Jb.equal(t,e)}dr.equal=tw});var kd=B(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});var fs=Td(),rw=Kd(),Fn=Pt(),Rd=Wi(),iw=na();yr.KEY_LENGTH=32;yr.NONCE_LENGTH=12;yr.TAG_LENGTH=16;var Ld=new Uint8Array(16),nw=function(){function t(e){if(this.nonceLength=yr.NONCE_LENGTH,this.tagLength=yr.TAG_LENGTH,e.length!==yr.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return t.prototype.seal=function(e,r,i,n){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var a=new Uint8Array(16);a.set(e,a.length-e.length);var s=new Uint8Array(32);fs.stream(this._key,a,s,4);var o=r.length+this.tagLength,f;if(n){if(n.length!==o)throw new Error("ChaCha20Poly1305: incorrect destination length");f=n}else f=new Uint8Array(o);return fs.streamXOR(this._key,a,r,f,4),this._authenticate(f.subarray(f.length-this.tagLength,f.length),s,f.subarray(0,f.length-this.tagLength),i),Fn.wipe(a),f},t.prototype.open=function(e,r,i,n){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(r.length<this.tagLength)return null;var a=new Uint8Array(16);a.set(e,a.length-e.length);var s=new Uint8Array(32);fs.stream(this._key,a,s,4);var o=new Uint8Array(this.tagLength);if(this._authenticate(o,s,r.subarray(0,r.length-this.tagLength),i),!iw.equal(o,r.subarray(r.length-this.tagLength,r.length)))return null;var f=r.length-this.tagLength,u;if(n){if(n.length!==f)throw new Error("ChaCha20Poly1305: incorrect destination length");u=n}else u=new Uint8Array(f);return fs.streamXOR(this._key,a,r.subarray(0,r.length-this.tagLength),u,4),Fn.wipe(a),u},t.prototype.clean=function(){return Fn.wipe(this._key),this},t.prototype._authenticate=function(e,r,i,n){var a=new rw.Poly1305(r);n&&(a.update(n),n.length%16>0&&a.update(Ld.subarray(n.length%16))),a.update(i),i.length%16>0&&a.update(Ld.subarray(i.length%16));var s=new Uint8Array(8);n&&Rd.writeUint64LE(n.length,s),a.update(s),Rd.writeUint64LE(i.length,s),a.update(s);for(var o=a.digest(),f=0;f<o.length;f++)e[f]=o[f];a.clean(),Fn.wipe(o),Fn.wipe(s)},t}();yr.ChaCha20Poly1305=nw});var Dd=B((RE,Ud)=>{var Oi=1e3,qi=Oi*60,Hi=qi*60,oi=Hi*24,aw=oi*7,sw=oi*365.25;Ud.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return ow(t);if(r==="number"&&isFinite(t))return e.long?uw(t):fw(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function ow(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),i=(e[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return r*sw;case"weeks":case"week":case"w":return r*aw;case"days":case"day":case"d":return r*oi;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Hi;case"minutes":case"minute":case"mins":case"min":case"m":return r*qi;case"seconds":case"second":case"secs":case"sec":case"s":return r*Oi;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fw(t){var e=Math.abs(t);return e>=oi?Math.round(t/oi)+"d":e>=Hi?Math.round(t/Hi)+"h":e>=qi?Math.round(t/qi)+"m":e>=Oi?Math.round(t/Oi)+"s":t+"ms"}function uw(t){var e=Math.abs(t);return e>=oi?us(t,e,oi,"day"):e>=Hi?us(t,e,Hi,"hour"):e>=qi?us(t,e,qi,"minute"):e>=Oi?us(t,e,Oi,"second"):t+" ms"}function us(t,e,r,i){var n=e>=r*1.5;return Math.round(t/r)+" "+i+(n?"s":"")}});var Fd=B((LE,Nd)=>{function cw(t){r.debug=r,r.default=r,r.coerce=f,r.disable=a,r.enable=n,r.enabled=s,r.humanize=Dd(),r.destroy=u,Object.keys(t).forEach(c=>{r[c]=t[c]}),r.names=[],r.skips=[],r.formatters={};function e(c){let h=0;for(let l=0;l<c.length;l++)h=(h<<5)-h+c.charCodeAt(l),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=e;function r(c){let h,l=null,d,p;function y(...g){if(!y.enabled)return;let v=y,b=Number(new Date),w=b-(h||b);v.diff=w,v.prev=h,v.curr=b,h=b,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let T=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(A,R)=>{if(A==="%%")return"%";T++;let L=r.formatters[R];if(typeof L=="function"){let N=g[T];A=L.call(v,N),g.splice(T,1),T--}return A}),r.formatArgs.call(v,g),(v.log||r.log).apply(v,g)}return y.namespace=c,y.useColors=r.useColors(),y.color=r.selectColor(c),y.extend=i,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>l!==null?l:(d!==r.namespaces&&(d=r.namespaces,p=r.enabled(c)),p),set:g=>{l=g}}),typeof r.init=="function"&&r.init(y),y}function i(c,h){let l=r(this.namespace+(typeof h=="undefined"?":":h)+c);return l.log=this.log,l}function n(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let h,l=(typeof c=="string"?c:"").split(/[\s,]+/),d=l.length;for(h=0;h<d;h++)!l[h]||(c=l[h].replace(/\*/g,".*?"),c[0]==="-"?r.skips.push(new RegExp("^"+c.substr(1)+"$")):r.names.push(new RegExp("^"+c+"$")))}function a(){let c=[...r.names.map(o),...r.skips.map(o).map(h=>"-"+h)].join(",");return r.enable(""),c}function s(c){if(c[c.length-1]==="*")return!0;let h,l;for(h=0,l=r.skips.length;h<l;h++)if(r.skips[h].test(c))return!1;for(h=0,l=r.names.length;h<l;h++)if(r.names[h].test(c))return!0;return!1}function o(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function f(c){return c instanceof Error?c.stack||c.message:c}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Nd.exports=cw});var Md=B((lt,cs)=>{lt.formatArgs=lw;lt.save=pw;lt.load=dw;lt.useColors=hw;lt.storage=yw();lt.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();lt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function hw(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function lw(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+cs.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(r++,n==="%c"&&(i=r))}),t.splice(i,0,e)}lt.log=console.debug||console.log||(()=>{});function pw(t){try{t?lt.storage.setItem("debug",t):lt.storage.removeItem("debug")}catch(e){}}function dw(){let t;try{t=lt.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function yw(){try{return localStorage}catch(t){}}cs.exports=Fd()(lt);var{formatters:gw}=cs.exports;gw.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var bw={};De(bw,{NOISE:()=>mw,Noise:()=>vs});var Qd=Ye(Xn()),A0=Ye(ou()),Jd=Ye(du()),C0=Ye(yu()),ey=Ye(vu()),xs=Ye(Ys());var Ed=Ye(_u()),Sd=Ye(to()),Bd=Ye(Xn()),ns=Ye(md()),_d=Ye(wd());fr();Wt();or();var as=_d.pb.NoiseHandshakePayload;function Or(){let t=Bd.generateKeyPair();return{publicKey:t.publicKey,privateKey:t.secretKey}}async function Ad(t,e,r){let i=await $b(t,Cd(e)),n=r!=null?r:new Uint8Array(0);return Wb(t.marshalPubKey(),i,n)}function Wb(t,e,r){let i=as.create({identityKey:t,identitySig:e,data:r!=null?r:null});return as.encode(i).finish()}async function $b(t,e){return await t.privKey.sign(e)}async function qr(t){return await ns.default.createFromPubKey(t.identityKey)}function Hr(t){return as.toObject(as.decode(t))}function Cd(t){let e=Ti("noise-libp2p-static-key:");return $t([e,t],e.length+t.length)}async function jb(t,e){let r=await ns.default.createFromPubKey(e);return Pi(r.id,t)}async function Vr(t,e,r){let i=e.identityKey;if(!await jb(r.id,i))throw new Error("Peer ID doesn't match libp2p public key.");let n=Cd(t),a=await ns.default.createFromPubKey(i);if(!e.identitySig||!await a.pubKey.verify(n,e.identitySig))throw new Error("Static key doesn't match to peer that signed payload!");return a}function v0(t,e){let n=new Ed.HKDF(Sd.SHA256,e,t).expand(96),a=n.slice(0,32),s=n.slice(32,64),o=n.slice(64,96);return[a,s,o]}function pr(t){return!(!(t instanceof Uint8Array)||t.length!==32)}var Hd=Ye(Xn()),Vd=Ye(to()),w0=Ye(kd());fr();or();or();fr();Wt();jt();var qd=Ye(Md());var fi=65535,b0=fi-16,Od=process.env.DUMP_SESSION_KEYS;jt();var W=(0,qd.default)("libp2p:noise"),Et;Od?Et=W:Et=()=>{};function hs(t){Et(`LOCAL_STATIC_PUBLIC_KEY ${Tt(t.publicKey,"hex")}`),Et(`LOCAL_STATIC_PRIVATE_KEY ${Tt(t.privateKey,"hex")}`)}function zr(t){t?(Et(`LOCAL_PUBLIC_EPHEMERAL_KEY ${Tt(t.publicKey,"hex")}`),Et(`LOCAL_PRIVATE_EPHEMERAL_KEY ${Tt(t.privateKey,"hex")}`)):Et("Missing local ephemeral keys.")}function Vi(t){Et(`REMOTE_STATIC_PUBLIC_KEY ${Tt(t,"hex")}`)}function gr(t){Et(`REMOTE_EPHEMERAL_PUBLIC_KEY ${Tt(t,"hex")}`)}function ls(t){t.cs1&&t.cs2?(Et(`CIPHER_STATE_1 ${t.cs1.n} ${Tt(t.cs1.k,"hex")}`),Et(`CIPHER_STATE_2 ${t.cs2.n} ${Tt(t.cs2.k,"hex")}`)):Et("Missing cipher state.")}var xw=0,zd=Number.MAX_SAFE_INTEGER,Gd="Cipherstate has reached maximum n, a new handshake must be performed",Mn=class{encryptWithAd(e,r,i){let n=this.encrypt(e.k,e.n,r,i);return this.setNonce(e,this.incrementNonce(e.n)),n}decryptWithAd(e,r,i){let{plaintext:n,valid:a}=this.decrypt(e.k,e.n,r,i);return this.setNonce(e,this.incrementNonce(e.n)),{plaintext:n,valid:a}}hasKey(e){return!this.isEmptyKey(e.k)}setNonce(e,r){e.n=r}createEmptyKey(){return new Uint8Array(32)}isEmptyKey(e){let r=this.createEmptyKey();return Pi(r,e)}incrementNonce(e){return e+1}nonceToBytes(e){let r=new Uint8Array(12);return new DataView(r.buffer,r.byteOffset,r.byteLength).setUint32(4,e,!0),r}encrypt(e,r,i,n){if(r>zd)throw new Error(Gd);let a=this.nonceToBytes(r);return new w0.ChaCha20Poly1305(e).seal(a,n,i)}encryptAndHash(e,r){let i;return this.hasKey(e.cs)?i=this.encryptWithAd(e.cs,e.h,r):i=r,this.mixHash(e,i),i}decrypt(e,r,i,n){if(r>zd)throw new Error(Gd);let a=this.nonceToBytes(r),o=new w0.ChaCha20Poly1305(e).open(a,n,i);return o?{plaintext:o,valid:!0}:{plaintext:new Uint8Array(0),valid:!1}}decryptAndHash(e,r){let i,n=!0;return this.hasKey(e.cs)?{plaintext:i,valid:n}=this.decryptWithAd(e.cs,e.h,r):i=r,this.mixHash(e,r),{plaintext:i,valid:n}}dh(e,r){try{let i=Hd.sharedKey(e,r);return i.length===32?i:i.slice(0,32)}catch(i){return W(i.message),new Uint8Array(32)}}mixHash(e,r){e.h=this.getHash(e.h,r)}getHash(e,r){return Vd.hash($t([e,r],e.length+r.length))}mixKey(e,r){let[i,n]=v0(e.ck,r);e.cs=this.initializeKey(n),e.ck=i}initializeKey(e){return{k:e,n:xw}}initializeSymmetric(e){let r=Ti(e,"utf-8"),i=this.hashProtocolName(r),n=i,a=this.createEmptyKey();return{cs:this.initializeKey(a),ck:n,h:i}}hashProtocolName(e){if(e.length<=32){let r=new Uint8Array(32);return r.set(e),r}else return this.getHash(e,new Uint8Array(0))}split(e){let[r,i]=v0(e.ck,new Uint8Array(0)),n=this.initializeKey(r),a=this.initializeKey(i);return{cs1:n,cs2:a}}writeMessageRegular(e,r){let i=this.encryptWithAd(e,new Uint8Array(0),r),n=this.createEmptyKey(),a=new Uint8Array(0);return{ne:n,ns:a,ciphertext:i}}readMessageRegular(e,r){return this.decryptWithAd(e,new Uint8Array(0),r.ciphertext)}};var E0=class extends Mn{initializeInitiator(e,r,i,n){let a="Noise_XX_25519_ChaChaPoly_SHA256",s=this.initializeSymmetric(a);this.mixHash(s,e);let o=new Uint8Array(32);return{ss:s,s:r,rs:i,psk:n,re:o}}initializeResponder(e,r,i,n){let a="Noise_XX_25519_ChaChaPoly_SHA256",s=this.initializeSymmetric(a);this.mixHash(s,e);let o=new Uint8Array(32);return{ss:s,s:r,rs:i,psk:n,re:o}}writeMessageA(e,r,i){let n=new Uint8Array(0);i!==void 0?e.e=i:e.e=Or();let a=e.e.publicKey;this.mixHash(e.ss,a);let s=this.encryptAndHash(e.ss,r);return{ne:a,ns:n,ciphertext:s}}writeMessageB(e,r){e.e=Or();let i=e.e.publicKey;this.mixHash(e.ss,i),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));let n=e.s.publicKey,a=this.encryptAndHash(e.ss,n);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let s=this.encryptAndHash(e.ss,r);return{ne:i,ns:a,ciphertext:s}}writeMessageC(e,r){let i=e.s.publicKey,n=this.encryptAndHash(e.ss,i);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let a=this.encryptAndHash(e.ss,r),o={ne:this.createEmptyKey(),ns:n,ciphertext:a},{cs1:f,cs2:u}=this.split(e.ss);return{h:e.ss.h,messageBuffer:o,cs1:f,cs2:u}}readMessageA(e,r){return pr(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),this.decryptAndHash(e.ss,r.ciphertext)}readMessageB(e,r){if(pr(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));let{plaintext:i,valid:n}=this.decryptAndHash(e.ss,r.ns);n&&i.length===32&&pr(i)&&(e.rs=i),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let{plaintext:a,valid:s}=this.decryptAndHash(e.ss,r.ciphertext);return{plaintext:a,valid:n&&s}}readMessageC(e,r){let{plaintext:i,valid:n}=this.decryptAndHash(e.ss,r.ns);if(n&&i.length===32&&pr(i)&&(e.rs=i),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let{plaintext:a,valid:s}=this.decryptAndHash(e.ss,r.ciphertext),{cs1:o,cs2:f}=this.split(e.ss);return{h:e.ss.h,plaintext:a,valid:n&&s,cs1:o,cs2:f}}initSession(e,r,i){let n=this.createEmptyKey(),a=new Uint8Array(32),s;return e?s=this.initializeInitiator(r,i,a,n):s=this.initializeResponder(r,i,a,n),{hs:s,i:e,mc:0}}sendMessage(e,r,i){let n;if(e.mc===0)n=this.writeMessageA(e.hs,r,i);else if(e.mc===1)n=this.writeMessageB(e.hs,r);else if(e.mc===2){let{h:a,messageBuffer:s,cs1:o,cs2:f}=this.writeMessageC(e.hs,r);n=s,e.h=a,e.cs1=o,e.cs2=f}else if(e.mc>2)if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");n=this.writeMessageRegular(e.cs1,r)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");n=this.writeMessageRegular(e.cs2,r)}else throw new Error("Session invalid.");return e.mc++,n}recvMessage(e,r){let i=new Uint8Array(0),n=!1;if(e.mc===0)({plaintext:i,valid:n}=this.readMessageA(e.hs,r));else if(e.mc===1)({plaintext:i,valid:n}=this.readMessageB(e.hs,r));else if(e.mc===2){let{h:a,plaintext:s,valid:o,cs1:f,cs2:u}=this.readMessageC(e.hs,r);i=s,n=o,e.h=a,e.cs1=f,e.cs2=u}return e.mc++,{plaintext:i,valid:n}}};var Wd=Ye(pi());or();var vw=t=>globalThis.Buffer?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t),On=(t,e,r)=>(e=e||vw(2),new DataView(e.buffer,e.byteOffset,e.byteLength).setUint16(r,t,!1),e);On.bytes=2;var qn=t=>{if(t.length<2)throw RangeError("Could not decode int16BE");return t instanceof Wd.default?t.readUInt16BE(0):new DataView(t.buffer,t.byteOffset,t.byteLength).getUint16(0,!1)};qn.bytes=2;function ps(t){return $t([t.ne,t.ciphertext],t.ne.length+t.ciphertext.length)}function ds(t){return $t([t.ne,t.ns,t.ciphertext],t.ne.length+t.ns.length+t.ciphertext.length)}function $d(t){return $t([t.ns,t.ciphertext],t.ns.length+t.ciphertext.length)}function zi(t){if(t.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:t.slice(0,32),ciphertext:t.slice(32,t.length),ns:new Uint8Array(0)}}function Gi(t){if(t.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:t.slice(0,32),ns:t.slice(32,80),ciphertext:t.slice(80,t.length)}}function jd(t){if(t.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:new Uint8Array(0),ns:t.slice(0,48),ciphertext:t.slice(48,t.length)}}var Hn=class{constructor(e,r,i,n,a,s,o){this.isInitiator=e,this.payload=r,this.prologue=i,this.staticKeypair=n,this.connection=a,s&&(this.remotePeer=s),this.xx=o!=null?o:new E0,this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair),this.remoteEarlyData=new Uint8Array(0)}async propose(){if(hs(this.session.hs.s),this.isInitiator){W("Stage 0 - Initiator starting to send first message.");let e=this.xx.sendMessage(this.session,new Uint8Array(0));this.connection.writeLP(ps(e)),W("Stage 0 - Initiator finished sending first message."),zr(this.session.hs.e)}else{W("Stage 0 - Responder waiting to receive first message...");let e=zi((await this.connection.readLP()).slice()),{valid:r}=this.xx.recvMessage(this.session,e);if(!r)throw new Error("xx handshake stage 0 validation fail");W("Stage 0 - Responder received first message."),gr(this.session.hs.re)}}async exchange(){if(this.isInitiator){W("Stage 1 - Initiator waiting to receive first message from responder...");let e=Gi((await this.connection.readLP()).slice()),{plaintext:r,valid:i}=this.xx.recvMessage(this.session,e);if(!i)throw new Error("xx handshake stage 1 validation fail");W("Stage 1 - Initiator received the message."),gr(this.session.hs.re),Vi(this.session.hs.rs),W("Initiator going to check remote's signature...");try{let n=await Hr(r);this.remotePeer=this.remotePeer||await qr(n),this.remotePeer=await Vr(this.session.hs.rs,n,this.remotePeer),this.setRemoteEarlyData(n.data)}catch(n){let a=n;throw new Error(`Error occurred while verifying signed payload: ${a.message}`)}W("All good with the signature!")}else{W("Stage 1 - Responder sending out first message with signed payload and static key.");let e=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(ds(e)),W("Stage 1 - Responder sent the second handshake message with signed payload."),zr(this.session.hs.e)}}async finish(){if(this.isInitiator){W("Stage 2 - Initiator sending third handshake message.");let e=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP($d(e)),W("Stage 2 - Initiator sent message with signed payload.")}else{W("Stage 2 - Responder waiting for third handshake message...");let e=jd((await this.connection.readLP()).slice()),{plaintext:r,valid:i}=this.xx.recvMessage(this.session,e);if(!i)throw new Error("xx handshake stage 2 validation fail");W("Stage 2 - Responder received the message, finished handshake.");try{let n=await Hr(r);this.remotePeer=this.remotePeer||await qr(n),await Vr(this.session.hs.rs,n,this.remotePeer),this.setRemoteEarlyData(n.data)}catch(n){let a=n;throw new Error(`Error occurred while verifying signed payload: ${a.message}`)}}ls(this.session)}encrypt(e,r){let i=this.getCS(r);return this.xx.encryptWithAd(i,new Uint8Array(0),e)}decrypt(e,r){let i=this.getCS(r,!1);return this.xx.decryptWithAd(i,new Uint8Array(0),e)}getRemoteStaticKey(){return this.session.hs.rs}getCS(e,r=!0){if(!e.cs1||!e.cs2)throw new Error("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?r?e.cs1:e.cs2:r?e.cs2:e.cs1}setRemoteEarlyData(e){e&&(this.remoteEarlyData=e)}};var S0=class extends Mn{initSession(e,r,i,n){let a=this.createEmptyKey(),s;return e?s=this.initializeInitiator(r,i,n,a):s=this.initializeResponder(r,i,n,a),{hs:s,i:e,mc:0}}sendMessage(e,r){let i;if(e.mc===0)i=this.writeMessageA(e.hs,r);else if(e.mc===1){let{messageBuffer:n,h:a,cs1:s,cs2:o}=this.writeMessageB(e.hs,r);i=n,e.h=a,e.cs1=s,e.cs2=o}else if(e.mc>1)if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");i=this.writeMessageRegular(e.cs1,r)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");i=this.writeMessageRegular(e.cs2,r)}else throw new Error("Session invalid.");return e.mc++,i}recvMessage(e,r){let i=new Uint8Array(0),n=!1;if(e.mc===0&&({plaintext:i,valid:n}=this.readMessageA(e.hs,r)),e.mc===1){let{plaintext:a,valid:s,h:o,cs1:f,cs2:u}=this.readMessageB(e.hs,r);i=a,n=s,e.h=o,e.cs1=f,e.cs2=u}return e.mc++,{plaintext:i,valid:n}}writeMessageA(e,r){e.e=Or();let i=e.e.publicKey;this.mixHash(e.ss,i),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let n=e.s.publicKey,a=this.encryptAndHash(e.ss,n);this.mixKey(e.ss,this.dh(e.s.privateKey,e.rs));let s=this.encryptAndHash(e.ss,r);return{ne:i,ns:a,ciphertext:s}}writeMessageB(e,r){e.e=Or();let i=e.e.publicKey;this.mixHash(e.ss,i),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re)),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let n=this.encryptAndHash(e.ss,r),a=this.createEmptyKey(),s={ne:i,ns:a,ciphertext:n},{cs1:o,cs2:f}=this.split(e.ss);return{messageBuffer:s,cs1:o,cs2:f,h:e.ss.h}}readMessageA(e,r){pr(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let{plaintext:i,valid:n}=this.decryptAndHash(e.ss,r.ns);n&&i.length===32&&pr(i)&&(e.rs=i),this.mixKey(e.ss,this.dh(e.s.privateKey,e.rs));let{plaintext:a,valid:s}=this.decryptAndHash(e.ss,r.ciphertext);return{plaintext:a,valid:n&&s}}readMessageB(e,r){if(pr(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state should contain ephemeral key by now.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re)),this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let{plaintext:i,valid:n}=this.decryptAndHash(e.ss,r.ciphertext),{cs1:a,cs2:s}=this.split(e.ss);return{h:e.ss.h,valid:n,plaintext:i,cs1:a,cs2:s}}initializeInitiator(e,r,i,n){let a="Noise_IK_25519_ChaChaPoly_SHA256",s=this.initializeSymmetric(a);this.mixHash(s,e),this.mixHash(s,i);let o=new Uint8Array(32);return{ss:s,s:r,rs:i,re:o,psk:n}}initializeResponder(e,r,i,n){let a="Noise_IK_25519_ChaChaPoly_SHA256",s=this.initializeSymmetric(a);this.mixHash(s,e),this.mixHash(s,r.publicKey);let o=new Uint8Array(32);return{ss:s,s:r,rs:i,re:o,psk:n}}};var ys=class extends Error{constructor(e,r){super(r);this.initialMsg=e,this.name="FailedIKhandshake"}};var B0=class{constructor(e,r,i,n,a,s,o,f){this.isInitiator=e,this.payload=r,this.prologue=i,this.staticKeypair=n,this.connection=a,o&&(this.remotePeer=o),this.ik=f!=null?f:new S0,this.session=this.ik.initSession(this.isInitiator,this.prologue,this.staticKeypair,s),this.remoteEarlyData=new Uint8Array}async stage0(){if(hs(this.session.hs.s),Vi(this.session.hs.rs),this.isInitiator){W("IK Stage 0 - Initiator sending message...");let e=this.ik.sendMessage(this.session,this.payload);this.connection.writeLP(ds(e)),W("IK Stage 0 - Initiator sent message."),zr(this.session.hs.e)}else{W("IK Stage 0 - Responder receiving message...");let e=await this.connection.readLP();try{let r=Gi(e.slice()),{plaintext:i,valid:n}=this.ik.recvMessage(this.session,r);if(!n)throw new Error("ik handshake stage 0 decryption validation fail");W("IK Stage 0 - Responder got message, going to verify payload.");let a=await Hr(i);this.remotePeer=this.remotePeer||await qr(a),await Vr(this.session.hs.rs,a,this.remotePeer),this.setRemoteEarlyData(a.data),W("IK Stage 0 - Responder successfully verified payload!"),gr(this.session.hs.re)}catch(r){let i=r;throw W("Responder breaking up with IK handshake in stage 0."),new ys(e,`Error occurred while verifying initiator's signed payload: ${i.message}`)}}}async stage1(){if(this.isInitiator){W("IK Stage 1 - Initiator receiving message...");let e=(await this.connection.readLP()).slice(),r=zi(e),{plaintext:i,valid:n}=this.ik.recvMessage(this.session,r);W("IK Stage 1 - Initiator got message, going to verify payload.");try{if(!n)throw new Error("ik stage 1 decryption validation fail");let a=await Hr(i);this.remotePeer=this.remotePeer||await qr(a),await Vr(r.ns.slice(0,32),a,this.remotePeer),this.setRemoteEarlyData(a.data),W("IK Stage 1 - Initiator successfully verified payload!"),gr(this.session.hs.re)}catch(a){let s=a;throw W("Initiator breaking up with IK handshake in stage 1."),new ys(e,`Error occurred while verifying responder's signed payload: ${s.message}`)}}else{W("IK Stage 1 - Responder sending message...");let e=this.ik.sendMessage(this.session,this.payload);this.connection.writeLP(ps(e)),W("IK Stage 1 - Responder sent message..."),zr(this.session.hs.e)}ls(this.session)}decrypt(e,r){let i=this.getCS(r,!1);return this.ik.decryptWithAd(i,new Uint8Array(0),e)}encrypt(e,r){let i=this.getCS(r);return this.ik.encryptWithAd(i,new Uint8Array(0),e)}getLocalEphemeralKeys(){if(!this.session.hs.e)throw new Error("Ephemeral keys do not exist.");return this.session.hs.e}getCS(e,r=!0){if(!e.cs1||!e.cs2)throw new Error("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?r?e.cs1:e.cs2:r?e.cs2:e.cs1}setRemoteEarlyData(e){e&&(this.remoteEarlyData=e)}};var _0=class extends Hn{constructor(e,r,i,n,a,s,o,f,u){super(e,r,i,n,a,o,u);f&&(this.ephemeralKeys=f),this.initialMsg=s}async propose(){if(this.isInitiator)this.xx.sendMessage(this.session,new Uint8Array(0),this.ephemeralKeys),W("XX Fallback Stage 0 - Initialized state as the first message was sent by initiator."),zr(this.session.hs.e);else{W("XX Fallback Stage 0 - Responder decoding initial msg from IK.");let e=zi(this.initialMsg),{valid:r}=this.xx.recvMessage(this.session,{ne:e.ne,ns:new Uint8Array(0),ciphertext:new Uint8Array(0)});if(!r)throw new Error("xx fallback stage 0 decryption validation fail");W("XX Fallback Stage 0 - Responder used received message from IK."),gr(this.session.hs.re)}}async exchange(){if(this.isInitiator){let e=Gi(this.initialMsg),{plaintext:r,valid:i}=this.xx.recvMessage(this.session,e);if(!i)throw new Error("xx fallback stage 1 decryption validation fail");W("XX Fallback Stage 1 - Initiator used received message from IK."),gr(this.session.hs.re),Vi(this.session.hs.rs),W("Initiator going to check remote's signature...");try{let n=await Hr(r);this.remotePeer=this.remotePeer||await qr(n),await Vr(this.session.hs.rs,n,this.remotePeer),this.setRemoteEarlyData(n.data)}catch(n){let a=n;throw new Error(`Error occurred while verifying signed payload from responder: ${a.message}`)}W("All good with the signature!")}else W("XX Fallback Stage 1 - Responder start"),await super.exchange(),W("XX Fallback Stage 1 - Responder end")}};function Xd(t){return async function*(e){for await(let r of e)for(let i=0;i<r.length;i+=b0){let n=i+b0;n>r.length&&(n=r.length),yield t.encrypt(r.slice(i,n),t.session)}}}function Yd(t){return async function*(e){for await(let r of e)for(let i=0;i<r.length;i+=fi){let n=i+fi;n>r.length&&(n=r.length);let{plaintext:a,valid:s}=await t.decrypt(r.slice(i,n),t.session);if(!s)throw new Error("Failed to validate decrypted chunk");yield a}}}var Zd=class{constructor(){this.storage=new Map}store(e,r){this.storage.set(e.id,r)}load(e){var r;return e&&(r=this.storage.get(e.id))!=null?r:null}resetStorage(){this.storage.clear()}},gs=new Zd;var vs=class{constructor(e,r){this.protocol="/noise";this.prologue=new Uint8Array(0);if(this.earlyData=r!=null?r:new Uint8Array(0),this.useNoisePipes=!1,e){let i=Qd.generateKeyPairFromSeed(e);this.staticKeys={privateKey:i.secretKey,publicKey:i.publicKey}}else this.staticKeys=Or()}async secureOutbound(e,r,i){let n=(0,A0.default)(r,{lengthEncoder:On,lengthDecoder:qn,maxDataLength:fi}),a=await this.performHandshake({connection:n,isInitiator:!0,localPeer:e,remotePeer:i});return{conn:await this.createSecureConnection(n,a),remoteEarlyData:a.remoteEarlyData,remotePeer:a.remotePeer}}async secureInbound(e,r,i){let n=(0,A0.default)(r,{lengthEncoder:On,lengthDecoder:qn,maxDataLength:fi}),a=await this.performHandshake({connection:n,isInitiator:!1,localPeer:e,remotePeer:i});return{conn:await this.createSecureConnection(n,a),remoteEarlyData:a.remoteEarlyData,remotePeer:a.remotePeer}}async performHandshake(e){var n;let r=await Ad(e.localPeer,this.staticKeys.publicKey,this.earlyData),i=this.useNoisePipes;if(e.isInitiator&&gs.load(e.remotePeer)===null&&(i=!1),i){let{remotePeer:a,connection:s,isInitiator:o}=e,f=new B0(o,r,this.prologue,this.staticKeys,s,(n=gs.load(e.remotePeer))!=null?n:new Uint8Array(32),a);try{return await this.performIKHandshake(f)}catch(u){let c;return e.isInitiator&&(c=f.getLocalEphemeralKeys()),await this.performXXFallbackHandshake(e,r,u.initialMsg,c)}}else return await this.performXXHandshake(e,r)}async performXXFallbackHandshake(e,r,i,n){let{isInitiator:a,remotePeer:s,connection:o}=e,f=new _0(a,r,this.prologue,this.staticKeys,o,i,s,n);try{await f.propose(),await f.exchange(),await f.finish()}catch(u){W(u);let c=u;throw new Error(`Error occurred during XX Fallback handshake: ${c.message}`)}return f}async performXXHandshake(e,r){let{isInitiator:i,remotePeer:n,connection:a}=e,s=new Hn(i,r,this.prologue,this.staticKeys,a,n);try{await s.propose(),await s.exchange(),await s.finish(),this.useNoisePipes&&s.remotePeer&&gs.store(s.remotePeer,s.getRemoteStaticKey())}catch(o){let f=o;throw new Error(`Error occurred during XX handshake: ${f.message}`)}return s}async performIKHandshake(e){return await e.stage0(),await e.stage1(),e}async createSecureConnection(e,r){let[i,n]=(0,Jd.default)(),a=e.unwrap();return await(0,ey.default)(i,C0.default,Xd(r),(0,xs.encode)({lengthEncoder:On}),a,(0,xs.decode)({lengthDecoder:qn}),C0.default,Yd(r),i),n}};var mw=new vs;return bw;})();
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! noble-ed25519 - MIT License (c) Paul Miller (paulmillr.com) */
/*! noble-secp256k1 - MIT License (c) Paul Miller (paulmillr.com) */
return ChainsafeLibp2pNoise}));
