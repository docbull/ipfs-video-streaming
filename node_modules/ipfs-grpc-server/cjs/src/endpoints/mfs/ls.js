'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var encodeMtime = require('../../utils/encode-mtime.js');

function grpcMfsLs(ipfs, options = {}) {
  async function mfsLs(request, sink, metadata) {
    const opts = { ...metadata };
    for await (const result of ipfs.files.ls(request.path, opts)) {
      sink.push({
        ...result,
        cid: result.cid.toString(),
        type: result.type.toUpperCase(),
        ...encodeMtime.encodeMtime(result.mtime)
      });
    }
    sink.end();
  }
  return mfsLs;
}

exports.grpcMfsLs = grpcMfsLs;
